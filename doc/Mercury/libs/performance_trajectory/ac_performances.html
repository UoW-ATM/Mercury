<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>Mercury.libs.performance_trajectory.ac_performances API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../performance_trajectory.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;Mercury.libs.performance_trajectory</a>

            <img src="Mercury/mercury_logo.png" class="logo" alt="project logo"/>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#AircraftPerformance">AircraftPerformance</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#AircraftPerformance.engine_type">engine_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.bada_version">bada_version</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.ac_icao">ac_icao</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.ac_model">ac_model</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.wtc">wtc</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.s">s</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.wref">wref</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.m_nom">m_nom</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.mtow">mtow</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.oew">oew</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.hmo">hmo</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.mpl">mpl</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.m_max">m_max</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.vfe">vfe</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.d">d</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.f">f</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.fl_climb_descent">fl_climb_descent</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.climb_ff">climb_ff</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.descent_ff">descent_ff</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.climb_perf">climb_perf</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.descent_perf">descent_perf</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.mach_detailled_nominal">mach_detailled_nominal</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.apu_ac">apu_ac</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.apu_sqr_mtow">apu_sqr_mtow</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.apu_ff">apu_ff</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.apu_fit">apu_fit</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.at_gate_costs_min">at_gate_costs_min</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.en_route_costs_min">en_route_costs_min</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.arrival_costs_min">arrival_costs_min</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.at_gate_costs_fit">at_gate_costs_fit</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.en_route_costs_fit">en_route_costs_fit</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformance.arrival_costs_fit">arrival_costs_fit</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.compute_fuel_flow">compute_fuel_flow</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.estimate_holding_fuel_flow">estimate_holding_fuel_flow</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.estimate_avg_cruise_weight">estimate_avg_cruise_weight</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.set_climb_descent_fuel_flow_performances">set_climb_descent_fuel_flow_performances</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.compute_sr">compute_sr</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.estimate_climb_fuel_flow">estimate_climb_fuel_flow</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.estimate_descent_fuel_flow">estimate_descent_fuel_flow</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.avg_climb_descent_ff">avg_climb_descent_ff</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances">set_climb_fuel_flow_detailled_rate_performances</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.interpolate_climb_performances">interpolate_climb_performances</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances">set_descent_fuel_flow_detailled_rate_performances</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.interpolate_descent_performances">interpolate_descent_performances</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.set_detailled_mach_nominal">set_detailled_mach_nominal</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.interpolate_cruise_nominal_mach">interpolate_cruise_nominal_mach</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd">trajectory_segment_descent_estimation_from_lnd</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc">trajectory_segment_climb_estimation_from_toc</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to">trajectory_segment_climb_estimation_from_to</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.trajectory_segment_cruise_estimation">trajectory_segment_cruise_estimation</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change">trajectory_cruise_estimation_with_fl_change</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.error_extra_cruise">error_extra_cruise</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.error_climb_weight_from_toc">error_climb_weight_from_toc</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.estimate_trajectory">estimate_trajectory</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.apu_fuel_flow">apu_fuel_flow</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.at_gate_costs_per_minute">at_gate_costs_per_minute</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.en_route_costs_per_minute">en_route_costs_per_minute</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformance.arrival_costs_per_minute">arrival_costs_per_minute</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AircraftPerformanceBada3">AircraftPerformanceBada3</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AircraftPerformanceBada3.__init__">AircraftPerformanceBada3</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3.bada_version">bada_version</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3.v_stall">v_stall</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3.clbo_mo">clbo_mo</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3.k">k</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3.holding_ac">holding_ac</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3.holding_sqr_mtow">holding_sqr_mtow</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3.holding_ff">holding_ff</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3.holding_fit">holding_fit</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformanceBada3.compute_fuel_flow">compute_fuel_flow</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformanceBada3.compute_drag">compute_drag</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformanceBada3.estimate_holding_fuel_flow">estimate_holding_fuel_flow</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AircraftPerformanceBada3Jet">AircraftPerformanceBada3Jet</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AircraftPerformanceBada3Jet.__init__">AircraftPerformanceBada3Jet</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3Jet.engine_type">engine_type</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformanceBada3Jet.compute_tsfc">compute_tsfc</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AircraftPerformanceBada3TP">AircraftPerformanceBada3TP</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AircraftPerformanceBada3TP.__init__">AircraftPerformanceBada3TP</a>
                        </li>
                        <li>
                                <a class="variable" href="#AircraftPerformanceBada3TP.engine_type">engine_type</a>
                        </li>
                        <li>
                                <a class="function" href="#AircraftPerformanceBada3TP.compute_tsfc">compute_tsfc</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../Mercury.html">Mercury</a><wbr>.<a href="./../../libs.html">libs</a><wbr>.<a href="./../performance_trajectory.html">performance_trajectory</a><wbr>.ac_performances    </h1>

                
                        <input id="mod-ac_performances-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-ac_performances-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="kn">from</span> <span class="nn">scipy.interpolate</span> <span class="kn">import</span> <span class="n">griddata</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="kn">from</span> <span class="nn">scipy.interpolate</span> <span class="kn">import</span> <span class="n">interp1d</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize_scalar</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">ceil</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">standard_atmosphere</span> <span class="k">as</span> <span class="n">sa</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">unit_conversions</span> <span class="k">as</span> <span class="n">uc</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">trajectory</span> <span class="k">as</span> <span class="n">tr</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="k">class</span> <span class="nc">AircraftPerformance</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a>	<span class="n">engine_type</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a>	<span class="n">bada_version</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">ac_model</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span> <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span> <span class="o">=</span> <span class="n">ac_icao</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">ac_model</span> <span class="o">=</span> <span class="n">ac_model</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wtc</span> <span class="o">=</span> <span class="n">wtc</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wref</span> <span class="o">=</span> <span class="n">wref</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span> <span class="o">=</span> <span class="n">m_nom</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">=</span> <span class="n">mtow</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">=</span> <span class="n">oew</span>  <span class="c1"># Operating empty weight (kg)</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">hmo</span> <span class="o">=</span> <span class="n">hmo</span>  <span class="c1"># Maximum operating altitude (ft)</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">=</span> <span class="n">mpl</span>  <span class="c1"># Maximum payload (kg)</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>		<span class="c1"># Kinematic limitations</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">m_max</span> <span class="o">=</span> <span class="n">m_max</span>  <span class="c1"># Mach at conf=0 == Mmo</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">vfe</span> <span class="o">=</span> <span class="n">vfe</span>  <span class="c1"># VFE at conf=0 == Vmo</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span>  <span class="c1"># Drag coefficients #Aerodynamics drag computation</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>  <span class="c1"># Fuel flow coefficients</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>		<span class="c1"># Climb and descent performances for fuel flow</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_ff</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_ff</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>		<span class="c1"># This is not BADA but for APU from previous projects CC</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AT43&#39;</span><span class="p">,</span> <span class="s1">&#39;AT72&#39;</span><span class="p">,</span> <span class="s1">&#39;DH8D&#39;</span><span class="p">,</span> <span class="s1">&#39;E190&#39;</span><span class="p">,</span> <span class="s1">&#39;B735&#39;</span><span class="p">,</span> <span class="s1">&#39;B733&#39;</span><span class="p">,</span> <span class="s1">&#39;B734&#39;</span><span class="p">,</span> <span class="s1">&#39;A319&#39;</span><span class="p">,</span> <span class="s1">&#39;A320&#39;</span><span class="p">,</span> <span class="s1">&#39;B738&#39;</span><span class="p">,</span> <span class="s1">&#39;A321&#39;</span><span class="p">,</span> <span class="s1">&#39;B752&#39;</span><span class="p">,</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>					<span class="s1">&#39;B763&#39;</span><span class="p">,</span> <span class="s1">&#39;A332&#39;</span><span class="p">,</span> <span class="s1">&#39;B744&#39;</span><span class="p">]</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4.1</span><span class="p">,</span> <span class="mf">4.71</span><span class="p">,</span> <span class="mf">5.4</span><span class="p">,</span> <span class="mf">6.98</span><span class="p">,</span> <span class="mf">7.46</span><span class="p">,</span> <span class="mf">7.77</span><span class="p">,</span> <span class="mf">8.09</span><span class="p">,</span> <span class="mf">8.19</span><span class="p">,</span> <span class="mf">8.6</span><span class="p">,</span> <span class="mf">8.64</span><span class="p">,</span> <span class="mf">9.31</span><span class="p">,</span> <span class="mf">10.38</span><span class="p">,</span> <span class="mf">13.47</span><span class="p">,</span> <span class="mf">15.18</span><span class="p">,</span> <span class="mf">19.82</span><span class="p">]</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">apu_ff</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.14</span><span class="p">,</span> <span class="mf">1.14</span><span class="p">,</span> <span class="mf">1.14</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">3.12</span><span class="p">,</span> <span class="mf">3.66</span><span class="p">,</span> <span class="mf">3.66</span><span class="p">]</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">apu_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ff</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a>		<span class="c1"># This is not BADA but for non pax costs from previous projects CC</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_min</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>			<span class="mf">00.21</span><span class="p">,</span> <span class="mf">00.29</span><span class="p">,</span> <span class="mf">00.29</span><span class="p">,</span> <span class="mf">00.43</span><span class="p">,</span> <span class="mf">00.46</span><span class="p">,</span> <span class="mf">00.50</span><span class="p">,</span> <span class="mf">00.54</span><span class="p">,</span> <span class="mf">00.57</span><span class="p">,</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>			<span class="mf">00.52</span><span class="p">,</span> <span class="mf">00.45</span><span class="p">,</span> <span class="mf">00.63</span><span class="p">,</span> <span class="mf">00.59</span><span class="p">,</span> <span class="mf">00.84</span><span class="p">,</span> <span class="mf">00.89</span><span class="p">,</span> <span class="mf">01.17</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>		<span class="p">]</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_min</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>			<span class="mf">01.71</span><span class="p">,</span> <span class="mf">02.31</span><span class="p">,</span> <span class="mf">02.24</span><span class="p">,</span> <span class="mf">03.34</span><span class="p">,</span> <span class="mf">03.63</span><span class="p">,</span> <span class="mf">03.91</span><span class="p">,</span> <span class="mf">04.21</span><span class="p">,</span> <span class="mf">04.34</span><span class="p">,</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>			<span class="mf">03.96</span><span class="p">,</span> <span class="mf">03.39</span><span class="p">,</span> <span class="mf">04.75</span><span class="p">,</span> <span class="mf">04.55</span><span class="p">,</span> <span class="mf">06.22</span><span class="p">,</span> <span class="mf">06.55</span><span class="p">,</span> <span class="mf">08.71</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a>		<span class="p">]</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_min</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>			<span class="mf">05.90</span><span class="p">,</span> <span class="mf">06.40</span><span class="p">,</span> <span class="mf">06.40</span><span class="p">,</span> <span class="mf">07.10</span><span class="p">,</span> <span class="mf">08.40</span><span class="p">,</span> <span class="mf">08.90</span><span class="p">,</span> <span class="mf">09.20</span><span class="p">,</span> <span class="mf">07.70</span><span class="p">,</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>			<span class="mf">08.20</span><span class="p">,</span> <span class="mf">09.50</span><span class="p">,</span> <span class="mf">08.20</span><span class="p">,</span> <span class="mf">09.90</span><span class="p">,</span> <span class="mf">13.00</span><span class="p">,</span> <span class="mf">13.80</span><span class="p">,</span> <span class="mf">17.50</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>		<span class="p">]</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_min</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_min</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_min</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>	<span class="nd">@abstractmethod</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>	<span class="k">def</span> <span class="nf">compute_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>		<span class="k">pass</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>	<span class="nd">@abstractmethod</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>	<span class="k">def</span> <span class="nf">estimate_holding_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m_min</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compute_min_max</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>		<span class="k">pass</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>	<span class="k">def</span> <span class="nf">estimate_avg_cruise_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">climb_kg</span><span class="p">,</span> <span class="n">descent_kg</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">,</span> <span class="n">cruise_dist</span><span class="p">,</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">payload_lf</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>								   <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cruise_wind_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cruise_nom_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cruise_ground_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a>		<span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="n">descent_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span><span class="p">,</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>															  <span class="n">cruise_dist</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>		<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">weight_0</span> <span class="o">+</span> <span class="n">ct</span><span class="o">.</span><span class="n">weight_1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>		<span class="n">cruise_kg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>		<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>		<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>		<span class="n">forced</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a>		<span class="n">too_light</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>		<span class="k">while</span> <span class="p">(</span><span class="n">tow</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">too_light</span><span class="p">):</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>			<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">avg_cruise_weight</span> <span class="o">-</span> <span class="p">(</span><span class="n">tow</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">)</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>			<span class="k">if</span> <span class="n">avg_cruise_weight</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">descent_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">):</span>  <span class="c1"># self.mpl*payload_lf</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>				<span class="c1"># We have reduced the weight so much that the aircraft has negative cruise weight. Finish!</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>				<span class="n">too_light</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>				<span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>					<span class="c1"># standard cruise even if weights might be too high</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wref</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>					<span class="n">cruise_m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>					<span class="n">cruise_nom_kt</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">cruise_m</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>					<span class="n">cruise_ground_kt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_nom_kt</span> <span class="o">+</span> <span class="n">cruise_wind_kt</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>					<span class="n">cruise_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="n">cruise_dist</span> <span class="o">/</span> <span class="n">cruise_ground_kt</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>					<span class="n">forced</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">tow</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>				<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>				<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>				<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>				<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>				<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>				<span class="n">tow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">tow</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>				<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>		<span class="k">return</span> <span class="n">cruise_kg</span><span class="p">,</span> <span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="n">tow</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">,</span> <span class="n">cruise_nom_kt</span><span class="p">,</span> <span class="n">cruise_ground_kt</span><span class="p">,</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="n">forced</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>	<span class="k">def</span> <span class="nf">set_climb_descent_fuel_flow_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">climb_ff</span><span class="p">,</span> <span class="n">descent_ff</span><span class="p">):</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="sd">		Add the fl, climb fuel flow and descent fuel flow arrays in the fligth performance object</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="sd">		Args:</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a><span class="sd">			climb_ff: fuel flow at the corresponding fl when climbing</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a><span class="sd">			descent_ff: fuel flow at the corresponding fl when descending</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span> <span class="o">=</span> <span class="n">fl</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_ff</span> <span class="o">=</span> <span class="n">climb_ff</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_ff</span> <span class="o">=</span> <span class="n">descent_ff</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>	<span class="k">def</span> <span class="nf">compute_sr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="sd">		Compute the specific range at a given fl, mass, mach and bank angle</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">		Args:</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">			fl: flight level (ft/100)</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">			mass: mass (kg)</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">			m: mach (Mach)</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="sd">			cruise_wind: cruise tail wind (m/s)</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a><span class="sd">			bank: bank angle (rad)</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="sd">		Returns:</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="sd">			sr: specifc range (nm/kg)</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>		<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="p">)</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>		<span class="n">tas</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">sa</span><span class="o">.</span><span class="n">sound_speed</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="p">(</span><span class="n">fl</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span> <span class="o">+</span> <span class="n">cruise_wind</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>		<span class="n">sr</span> <span class="o">=</span> <span class="p">(</span><span class="n">tas</span> <span class="o">/</span> <span class="n">ff</span><span class="p">)</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">/</span> <span class="mi">1852</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>		<span class="k">return</span> <span class="n">sr</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>	<span class="k">def</span> <span class="nf">estimate_climb_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a><span class="sd">		Estimated average fuel flow between from_fl and to_fl </span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a><span class="sd">		for the climb phase</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="sd">		Args:</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a><span class="sd">			from_fl: fl from which to start the climb</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a><span class="sd">			to_fl: fl to which to end the climb</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a><span class="sd">		Returns:</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">		Example of use:    </span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">			ff=estimate_climb_fuel_flow(0,320)</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_ff</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>	<span class="k">def</span> <span class="nf">estimate_descent_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a><span class="sd">		Estimated average fuel flow between from_fl and to_fl </span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a><span class="sd">		for the descending phase</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a><span class="sd">		Args:</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a><span class="sd">			from_fl: fl from which to start the descent</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a><span class="sd">			to_fl: fl to which to end the descent</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a><span class="sd">		Returns:</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">		Example of use:    </span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="sd">			ff=estimate_descent_fuel_flow(320,0)</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_ff</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">)</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>	<span class="k">def</span> <span class="nf">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flv</span><span class="p">,</span> <span class="n">ffv</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a><span class="sd">		Compute the average fuel flow between from_fl and to_fl </span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a><span class="sd">		considering a vector of fl aligned with a vector of ff</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a><span class="sd">		Args:</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a><span class="sd">			flv: array of flight levels (ft/100)</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="sd">			ffv: array of fuel flows aligned with flv (kg/min)</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a><span class="sd">			from_fl: fl from which to start the climb/descent</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a><span class="sd">			to_fl: fl to which to end the climb/descent</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a><span class="sd">		Returns:</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>		<span class="n">i_closest_from</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">flv</span> <span class="o">-</span> <span class="n">from_fl</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>		<span class="n">i_closest_to</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">flv</span> <span class="o">-</span> <span class="n">to_fl</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>		<span class="n">i_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">i_closest_from</span><span class="p">,</span> <span class="n">i_closest_to</span><span class="p">)</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>		<span class="n">i_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">i_closest_from</span><span class="p">,</span> <span class="n">i_closest_to</span><span class="p">)</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>		<span class="k">if</span> <span class="n">i_min</span> <span class="o">==</span> <span class="n">i_max</span><span class="p">:</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="n">ffv</span><span class="p">[</span><span class="n">i_min</span><span class="p">]</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>			<span class="n">fl_s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flv</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>			<span class="n">diff_fl</span> <span class="o">=</span> <span class="p">(</span><span class="n">fl_s</span> <span class="o">-</span> <span class="n">flv</span><span class="p">)</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>			<span class="n">diff_fl</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">diff_fl</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">ffv</span> <span class="o">*</span> <span class="n">diff_fl</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">fuel_segment</span><span class="p">[</span><span class="n">i_min</span><span class="p">:(</span><span class="n">i_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span> \
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>				 <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">diff_fl</span><span class="p">[</span><span class="n">i_min</span><span class="p">:(</span><span class="n">i_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>		<span class="k">return</span> <span class="n">ff</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>	<span class="k">def</span> <span class="nf">set_climb_fuel_flow_detailled_rate_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">rocd</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">tas</span><span class="p">):</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a><span class="sd">		Add the fl, mass, fuel, roc, gamma and tas arrays in the fligth performance object</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a><span class="sd">		In this case the values are more detailled as different fuel flows and rocd are</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a><span class="sd">		considered as a funcion of altitude and mass. This allow us to interpolate the </span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a><span class="sd">		climb and descent performances with interpolate_climb_performances function.</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a><span class="sd">		Note that the performances on fuel flow are the same for all the points. These</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a><span class="sd">		detailled data are used only for rocd/gamma values.</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a><span class="sd">		Args:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a><span class="sd">			mass: array of massess corresponding to the fls</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a><span class="sd">			fuel: array of fuels corresponding to the fls</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a><span class="sd">			rocd: rate of climb/descent corresponding to the fls</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a><span class="sd">			gamma: angle of climb/descent corresponding to the fls</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a><span class="sd">			tas: kt TAS corresponding to the fls</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">fuel</span><span class="p">,</span> <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">rocd</span><span class="p">,</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>						   <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">gamma</span><span class="p">,</span> <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">tas</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>	<span class="k">def</span> <span class="nf">interpolate_climb_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a><span class="sd">		Using the data from the ptf table interpolates the climb performances</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="sd">		(fuel, rocd, gamma and tas) at a given altitude (fl) and weight (mass)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a><span class="sd">		It uses the table of performances set by set_climb_fuel_flow_detailled_rate_performances</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a><span class="sd">		Args:</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a><span class="sd">		Returns:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a><span class="sd">			climb_perf: dictionary with fuel, rocd, gamma and tas as result of the interpolation.</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a><span class="sd">									Note that fuel and tas do not depend on the interpolation.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>			<span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>				<span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>				<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>				<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>				<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)}</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>			<span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>						  <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>						  <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>						  <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)}</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>		<span class="k">return</span> <span class="n">climb_perf</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>	<span class="k">def</span> <span class="nf">set_descent_fuel_flow_detailled_rate_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">rocd</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">tas</span><span class="p">):</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="sd">		Add the fl, mass, fuel, roc, gamma and tas arrays in the fligth performance object</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a><span class="sd">		In this case the values are more detailled as different fuel flows and rocd are</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a><span class="sd">		considered as a function of altitude and mass. This allow us to interpolate the</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a><span class="sd">		climb and descent performances with interpolate_descent_performances function.</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="sd">		Note that the performances on fuel flow are the same for all the points. These</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">		detailled data are used only for rocd/gamma values.</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a><span class="sd">		Args:</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a><span class="sd">			mass: array of masses corresponding to the fls</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a><span class="sd">			fuel: array of fuels corresponding to the fls</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="sd">			rocd: rate of climb/descent corresponding to the fls</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a><span class="sd">			gamma: angle of climb/descent corresponding to the fls</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="sd">			tas: kt TAS corresponding to the fls</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">fuel</span><span class="p">,</span> <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">rocd</span><span class="p">,</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>							 <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">gamma</span><span class="p">,</span> <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">tas</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>	<span class="k">def</span> <span class="nf">interpolate_descent_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="sd">		Using the data from the ptf table interpolates the climb performances</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">		(fuel, rocd, gamma and tas) at a given altitude (fl) and weight (mass)</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a><span class="sd">		It uses the table of performances set by set_descent_fuel_flow_detailled_rate_performances</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a><span class="sd">		Args:</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a><span class="sd">		Returns:</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a><span class="sd">			descent_perf: dictionary with fuel, rocd, gamma and tas as result of the interpolation.</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a><span class="sd">									Note that fuel and tas do not depend on the interpolation.</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>			<span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>				<span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>								 <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>				<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>								 <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>				<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>								  <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>				<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)}</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>			<span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>							<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>							<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>								<span class="n">fl</span><span class="p">),</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>							<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)}</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>		<span class="k">return</span> <span class="n">descent_perf</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>	<span class="k">def</span> <span class="nf">set_detailled_mach_nominal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a><span class="sd">		Add the fl, mass, m arrays in the fligth performance object</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a><span class="sd">		These values come from the ptd table.</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a><span class="sd">		This is to have the nominal Mach as a function of altitude and mass. This is</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a><span class="sd">		useful for low altidues, i.e. &lt;FL360 as the nominal Mach is lower than the one</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a><span class="sd">		use in a higher cruise phase.</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a><span class="sd">		</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a><span class="sd">		Args:</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a><span class="sd">			mass: array of massess corresponding to the fls</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a><span class="sd">			m: array of cruise nominal Mach speeds corresponding to the fls</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">:</span> <span class="n">m</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>	<span class="k">def</span> <span class="nf">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">		Using the data from the ptd table interpolates the nominal mach</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a><span class="sd">		at a given altitude (fl) and weight (mass)</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a><span class="sd">		It uses the table of performances set by set_descent_fuel_flow_detailled_rate_performances</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="sd">		Args:</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="sd">		Returns:</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a><span class="sd">			m: Mach at the interpolated fl and mass.</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>						 <span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>						 <span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>		<span class="k">return</span> <span class="n">m</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_descent_estimation_from_lnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_0</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span> <span class="n">fl_1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a><span class="sd">		Compute the trajectory descent trajectory fl_0 and fl_1 considering</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="sd">		that the landing weight is weight_lnd using the decent_perf data.</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">		Args:</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">			fl_0: top altitude (ft/100), start of descent</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="sd">			weight_lnd: mass (kg) at fl_0 (landing if fl_1=0)</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">			fl_1: lower altitude (ft/100), end of descent altitude</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="sd">						by default: 10</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">			</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">		Returns:</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="sd">			trajectory_segment: trajectory_segment with the descent</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_lnd</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&lt;</span> <span class="n">fl_0</span><span class="p">:</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_descent_performances</span><span class="p">(</span><span class="n">fl_act</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_lnd</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>													<span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>			<span class="n">ddits</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="n">dfuel</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddits</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">+</span> <span class="n">d_fl</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_lnd</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span> <span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a><span class="sd">		Compute the trajectory climb trajectory between fl_0 and fl_1 considering</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a><span class="sd">		that the weight at fl_1 is weight_1 using the climb_perf data.</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a><span class="sd">		Args:</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a><span class="sd">			fl_1: top altitude (ft/100), end of climb</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a><span class="sd">			weight_1: mass (kg) at fl_1</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a><span class="sd">			fl_0: lower altitude (ft/100), start of climb altitdue (by default 0)</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="sd">						by default: 10</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="sd">			</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="sd">		Returns:</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="sd">			trajectory_segment: trajectory_segment with the climb</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&gt;</span> <span class="n">fl_0</span><span class="p">:</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_climb_performances</span><span class="p">(</span><span class="n">fl_act</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_act</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>													<span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>			<span class="n">ddist</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddist</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="n">dfuel</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">-</span> <span class="n">d_fl</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_climb_estimation_from_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_0</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a><span class="sd">		Compute the trajectory climb trajectory between fl_0 and fl_1 considering</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a><span class="sd">		that the weight at fl_0 is weight_0 using the climb_perf data.</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a><span class="sd">		Args:</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a><span class="sd">			fl_1: top altitude (ft/100), end of climb</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a><span class="sd">			weight_0: mass (kg) at fl_0</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a><span class="sd">			fl_0: lower altitude (ft/100), start of climb altitdue (by default 0)</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a><span class="sd">						by default: 10</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a><span class="sd">			</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a><span class="sd">		Returns:</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a><span class="sd">			trajectory_segment: trajectory_segment with the climb</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_0</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_0</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&lt;</span> <span class="n">fl_1</span><span class="p">:</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_climb_performances</span><span class="p">(</span><span class="n">fl_act</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>			<span class="n">ddist</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddist</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">dfuel</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">+</span> <span class="n">d_fl</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight_0</span> <span class="o">-</span> <span class="n">weight</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight_0</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>											 <span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">min_d_dist</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>											 <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a><span class="sd">		Compute the trajectory cruise for a given cruise_distance and fl</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a><span class="sd">		ending the cruise at weight_1</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a><span class="sd">		Args:</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="sd">			fl_cruise (ft/100), altitude of cruise</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="sd">			weight_1: mass (kg) at end of cruise</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a><span class="sd">			cruise_distance: (nm) distance of the cruise</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a><span class="sd">			use_mref: default False: If true then m_nom is used as cruising speed</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="sd">												True: If cruise_fl &lt; 360 m cruise is estimated as</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a><span class="sd">															interpolate_cruise_nominal_mach with weight_1</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a><span class="sd">			max_steps: default 10000: maximum number of steps used to estimate the cruise</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a><span class="sd">																(maximum number of divisions of the cruise in delta distance)</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a><span class="sd">			min_d_dist: (nm) default 1: minimum distance of a step in delta distance</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a><span class="sd">			</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a><span class="sd">		Returns:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a><span class="sd">			trajectory_segment: trajectory_segment with the cruise</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">min_d_dist</span><span class="p">),</span> <span class="n">max_steps</span><span class="p">))</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>		<span class="n">d_dist</span> <span class="o">=</span> <span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>		<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_cruise</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>		<span class="k">while</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">error</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>			<span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="n">d_dist</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="p">(</span><span class="n">ff</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">t</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">d_dist</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>			<span class="k">if</span> <span class="n">weight</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">:</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>													<span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>													<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>											<span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span> <span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>	<span class="k">def</span> <span class="nf">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>													<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">min_d_dist</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>													<span class="n">climb_step</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">min_dist_remaining_fl</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>													<span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a><span class="sd">		Compute the trajectory cruise for a given cruise_distance with possible</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a><span class="sd">		fl changes. In this case not a trajectory_segment but a full trajectory</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a><span class="sd">		is returned as the cruise might be composed of several trajectory_segments.</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a><span class="sd">		The cruise is estimated considereng that the final fl used is fl_1 and </span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="sd">		the weight at the end of cruise is weight_1</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">		Args:</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">			fl_1: (ft/100), altitude at the end of cruise</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">			weight_1: mass (kg) at end of cruise</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a><span class="sd">			cruise_distance: (nm) distance of the cruise</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a><span class="sd">			use_mref: default False: If true then m_nom is used as cruising speed</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">												True: If cruise_fl &lt; 360 m cruise is estimated as</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a><span class="sd">															interpolate_cruise_nominal_mach with weight_1</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="sd">															M will be reassessed everytime a climb step is</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">															performed.</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="sd">			max_steps: default 10000: maximum number of steps used to estimate the cruise</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="sd">																(maximum number of divisions of the cruise in delta distance)</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">			min_d_dist: (nm) default 1: minimum distance of a step in delta distance</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a><span class="sd">			climb_step: (ft/100) default 20, altitude of the climb steps used</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">			max_climbs: default 1: number of climbs considered</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a><span class="sd">			min_dist_remaining_fl: (nm) default 50, minimum cruise left before considering a climb step</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">			</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">		Returns:</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a><span class="sd">			trajectory: trajectory containing the trajectory_segment that define the cruise</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>		<span class="n">fl_lower</span> <span class="o">=</span> <span class="n">fl_1</span> <span class="o">-</span> <span class="n">climb_step</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>		<span class="n">fl_used</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>		<span class="n">traj</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">Trajectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bada_version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">)</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">min_d_dist</span><span class="p">),</span> <span class="n">max_steps</span><span class="p">))</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>		<span class="n">d_dist</span> <span class="o">=</span> <span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>		<span class="n">fuel_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>		<span class="n">time_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>		<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>		<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_used</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>		<span class="k">if</span> <span class="n">cruise_distance</span> <span class="o">&lt;</span> <span class="n">error</span><span class="p">:</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>			<span class="c1"># The segment to compute is smaller than 0.1 nm. Just compute the time, fuel, etc. it takes</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>			<span class="c1"># to cover that distance and return it.</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>			<span class="n">time_step</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">ff</span> <span class="o">*</span> <span class="n">time_step</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span> <span class="o">+</span> <span class="n">fuel_segment</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>			<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>												<span class="n">time_step</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>												<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>			<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>		<span class="n">sr</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>		<span class="n">sr_lower</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>		<span class="k">while</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">+</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>			<span class="k">if</span> <span class="n">max_climbs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>				<span class="n">sr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>				<span class="n">sr_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_lower</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>			<span class="k">while</span> <span class="p">((</span><span class="n">max_climbs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>				   <span class="p">((</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">-</span> <span class="n">dist_cruise_segment</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">min_dist_remaining_fl</span><span class="p">)</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>				   <span class="ow">and</span> <span class="p">(</span><span class="n">sr_lower</span> <span class="o">&gt;=</span> <span class="n">sr</span><span class="p">)):</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>				<span class="c1"># Do a climb from low to used</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>				<span class="k">if</span> <span class="p">(</span><span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>					<span class="c1"># We are descending so we are too high</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>				<span class="k">if</span> <span class="n">dist_cruise_segment</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>					<span class="c1"># Save previous cruise segment</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>					<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span> <span class="n">time_segment</span><span class="p">,</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>														<span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span> <span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>					<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>					<span class="n">time_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>				<span class="n">c_segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="n">fl_lower</span><span class="p">)</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">c_segment</span><span class="p">)</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>				<span class="k">if</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>				<span class="n">fl_used</span> <span class="o">=</span> <span class="n">fl_lower</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>				<span class="n">fl_lower</span> <span class="o">=</span> <span class="n">fl_used</span> <span class="o">-</span> <span class="n">climb_step</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>				<span class="n">weight</span> <span class="o">=</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>				<span class="n">weight_1</span> <span class="o">=</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>				<span class="n">n_remaining</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">/</span> <span class="n">d_dist</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>				<span class="n">d_dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_remaining</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>				<span class="n">max_climbs</span> <span class="o">=</span> <span class="n">max_climbs</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>				<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_used</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>				<span class="n">sr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>				<span class="n">sr_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_lower</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">+</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>				<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>				<span class="n">time_step</span> <span class="o">=</span> <span class="p">(</span><span class="n">d_dist</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>				<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="p">(</span><span class="n">ff</span> <span class="o">*</span> <span class="n">time_step</span><span class="p">)</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>				<span class="n">time_segment</span> <span class="o">=</span> <span class="n">time_segment</span> <span class="o">+</span> <span class="n">time_step</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>				<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">d_dist</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>				<span class="k">if</span> <span class="n">weight</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">:</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>					<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>														<span class="n">time_segment</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>														<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>					<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>		<span class="k">if</span> <span class="n">dist_cruise_segment</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>			<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>												<span class="n">time_segment</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>												<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">8</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>		<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>	<span class="nd">@staticmethod</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>	<span class="k">def</span> <span class="nf">error_extra_cruise</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">distance_to_cover</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a><span class="sd">		Method used to estimate the error on total distance done if x nm</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a><span class="sd">		of cruise are done followed by a descent to FL0 with respect to the</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a><span class="sd">		distance_to_cover available.</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a><span class="sd">		Function used to minimize the error whe optimising the value of x</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a><span class="sd">		using minimize_scalar</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="sd">						 x</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a><span class="sd">				. - - - -</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a><span class="sd">			 .</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a><span class="sd">			.</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a><span class="sd">		 .</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a><span class="sd">			 cd</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a><span class="sd">		</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a><span class="sd">		Args:</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a><span class="sd">			x: (nm) distance of cruise</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a><span class="sd">			a: AircraftPerformance instance</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a><span class="sd">			weight_1: (kg) weight at end of climb + cruise</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a><span class="sd">			distance_to_cover: (nm) distance that needs to be covered by the climb and the cruise</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a><span class="sd">			fl_cruise: (ft/100) altitude of the cruise</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a><span class="sd">			m: (Mach) speed of the cruise</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a><span class="sd">		Returns:</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a><span class="sd">			error: (nm) abs(distance_to_cover - (x+cd))</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>		<span class="n">ce</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>		<span class="k">if</span> <span class="n">ce</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>			<span class="k">return</span> <span class="mi">100000</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="n">ce</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>		<span class="c1"># weight = weight_1 + ce.fuel</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>		<span class="n">climb_est</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>		<span class="k">if</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>			<span class="k">return</span> <span class="mi">10000</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>		<span class="k">return</span> <span class="n">error</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>	<span class="nd">@staticmethod</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>	<span class="k">def</span> <span class="nf">error_climb_weight_from_toc</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">fl</span><span class="p">):</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a><span class="sd">		Method used to estimate the error on distance used for climb</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a><span class="sd">		if a given weight is given.</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a><span class="sd">		The idea is to try to estimate using minimize_scalar which</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a><span class="sd">		is the weigh that provides the maximum distance of climb for a</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a><span class="sd">		given aircraft type. For this reason the function returns</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a><span class="sd">		99999 * cts.fl_0 if the flight does not make it to the ground because</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a><span class="sd">		it is too heavy and 99999 - cts.distance if it gets to the ground</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a><span class="sd">		so when minimizing obtain the largest distance covered.</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a><span class="sd">		</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a><span class="sd">		Args:</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a><span class="sd">			weight: (kg) weight at TOC</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a><span class="sd">			a: AircraftPerformance instance</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a><span class="sd">			fl: (ft/100) altitude of at the TOC</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a><span class="sd">		Returns:</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a><span class="sd">			error: 99999 * cts.fl_0 if too heavy and not reach ground</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a><span class="sd">						 99999 - cts.distance if get to ground with that weight</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>		<span class="n">cts</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>		<span class="k">if</span> <span class="n">cts</span><span class="o">.</span><span class="n">fl_0</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>			<span class="c1"># return cts.fl_0</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>			<span class="k">return</span> <span class="mi">99999</span> <span class="o">*</span> <span class="n">cts</span><span class="o">.</span><span class="n">fl_0</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>			<span class="k">return</span> <span class="mi">99999</span> <span class="o">-</span> <span class="n">cts</span><span class="o">.</span><span class="n">distance</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>	<span class="k">def</span> <span class="nf">estimate_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>							<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">force_descent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force_climb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>							<span class="n">cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>		<span class="c1"># TODO force_climb not implemented</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>		<span class="n">traj</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">Trajectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bada_version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">)</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>		<span class="c1"># print(&quot;*HERE &quot;,fp_distance, fl, weight_landing, cruise_wind, max_climbs, try_lower_fl)</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>		<span class="c1"># ESTIMATE DESCENT</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>		<span class="k">if</span> <span class="n">force_descent</span><span class="p">:</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>			<span class="c1"># print(&quot;FORCED DESCENT&quot;)</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_descent_fuel_flow</span><span class="p">(</span><span class="n">from_fl</span><span class="o">=</span><span class="n">fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_descent_performances</span><span class="p">((</span><span class="n">fl</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">)</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>			<span class="n">distance</span> <span class="o">=</span> <span class="n">time</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>			<span class="n">fuel</span> <span class="o">=</span> <span class="n">time</span> <span class="o">*</span> <span class="n">ff</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>			<span class="n">descent_est</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="o">=</span><span class="n">fl</span><span class="p">,</span> <span class="n">fl_1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="o">=</span><span class="n">fuel</span><span class="p">,</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>											   <span class="n">weight_0</span><span class="o">=</span><span class="p">(</span><span class="n">weight_landing</span> <span class="o">+</span> <span class="n">fuel</span><span class="p">),</span> <span class="n">weight_1</span><span class="o">=</span><span class="n">weight_landing</span><span class="p">,</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>											   <span class="n">segment_type</span><span class="o">=</span><span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>			<span class="n">descent_est</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">9</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>			<span class="n">descent_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_descent_estimation_from_lnd</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_landing</span><span class="p">)</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_back_trajectory_segment</span><span class="p">(</span><span class="n">descent_est</span><span class="p">)</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>		<span class="k">if</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force_descent</span><span class="p">:</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>		<span class="n">descent_distance</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">distance</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>		<span class="n">distance_missing</span> <span class="o">=</span> <span class="n">fp_distance</span> <span class="o">-</span> <span class="n">descent_distance</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>		<span class="k">if</span> <span class="n">distance_missing</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>		<span class="c1"># ESTIMATE MINIMUM CRUISE NEEDED</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>		<span class="n">res</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_climb_weight_from_toc</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">),</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>							  <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bounded&#39;</span><span class="p">)</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>		<span class="n">max_weight_at_toc</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">x</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>		<span class="n">max_climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">max_weight_at_toc</span><span class="p">)</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>		<span class="k">if</span> <span class="n">max_climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>			<span class="c1"># Not possible to reach this initial FL</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>		<span class="n">min_cruise_dist</span> <span class="o">=</span> <span class="n">distance_missing</span> <span class="o">-</span> <span class="p">(</span><span class="n">max_climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>		<span class="k">if</span> <span class="n">min_cruise_dist</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>			<span class="k">if</span> <span class="n">fl</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="ow">and</span> <span class="n">try_lower_fl</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>				<span class="n">try_lower_fl</span> <span class="o">=</span> <span class="n">try_lower_fl</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>				<span class="n">traj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_trajectory</span><span class="p">(</span><span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>												<span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="p">,</span> <span class="n">cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>		<span class="c1"># ESTIMATE CRUISE</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>		<span class="n">trajectory_cruise</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>																			 <span class="n">descent_est</span><span class="o">.</span><span class="n">weight_0</span><span class="p">,</span> <span class="n">min_cruise_dist</span><span class="p">,</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>																			 <span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="n">max_climbs</span><span class="p">,</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>																			 <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory</span><span class="p">(</span><span class="n">trajectory_cruise</span><span class="p">)</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>		<span class="k">if</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>		<span class="n">cruise_dist</span> <span class="o">=</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">distance</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>		<span class="n">weight_toc</span> <span class="o">=</span> <span class="n">traj</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>		<span class="n">fl</span> <span class="o">=</span> <span class="n">traj</span><span class="o">.</span><span class="n">fl_0</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>		<span class="n">distance_to_airport</span> <span class="o">=</span> <span class="n">fp_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>		<span class="c1"># DO BIT BEFORE DESCENT</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>		<span class="n">min_climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">))</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>		<span class="k">if</span> <span class="p">((</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fl_0</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">)):</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fl_0</span><span class="p">,</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>														 <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">weight_0</span><span class="p">)</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>		<span class="n">res</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_extra_cruise</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>															 <span class="n">weight_toc</span><span class="p">,</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>															 <span class="n">distance_to_airport</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">m</span><span class="p">),</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>							  <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">max_climb_est</span><span class="o">.</span><span class="n">distance</span> <span class="o">-</span> <span class="n">min_climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">)),</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>							  <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bounded&#39;</span><span class="p">)</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>		<span class="n">cruise_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_toc</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">use_mref</span><span class="p">,</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>															   <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">cruise_est</span><span class="p">)</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>		<span class="k">if</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>		<span class="n">weight_toc</span> <span class="o">=</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>		<span class="n">cruise_dist</span> <span class="o">=</span> <span class="n">cruise_dist</span> <span class="o">+</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">distance</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>		<span class="c1"># ESTIMATE CLIMB</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>		<span class="n">climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_toc</span><span class="p">)</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">climb_est</span><span class="p">)</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>		<span class="k">if</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>		<span class="k">if</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">&gt;</span> <span class="n">fp_distance</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">cruise_dist</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>			<span class="k">if</span> <span class="n">fl</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="ow">and</span> <span class="n">try_lower_fl</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>				<span class="n">try_lower_fl</span> <span class="o">=</span> <span class="n">try_lower_fl</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>				<span class="n">traj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_trajectory</span><span class="p">(</span><span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>												<span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="p">)</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>		<span class="k">return</span> <span class="n">traj</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>	<span class="k">def</span> <span class="nf">apu_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project). The APU is based on APU consumption</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a><span class="sd">		of some aircrafts and their mtow</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>	<span class="k">def</span> <span class="nf">at_gate_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>	<span class="k">def</span> <span class="nf">en_route_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>	<span class="k">def</span> <span class="nf">arrival_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a><span class="k">class</span> <span class="nc">AircraftPerformanceBada3</span><span class="p">(</span><span class="n">AircraftPerformance</span><span class="p">):</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>	<span class="n">bada_version</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>		<span class="n">AircraftPerformance</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span> <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">v_stall</span> <span class="o">=</span> <span class="n">v_stall</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">clbo_mo</span> <span class="o">=</span> <span class="n">clbo_mo</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>		<span class="c1"># For holding BADA 3, this is not from BADA but from previous projects (i.e., CC)</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_ac</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AT43&#39;</span><span class="p">,</span> <span class="s1">&#39;AT72&#39;</span><span class="p">,</span> <span class="s1">&#39;DH8D&#39;</span><span class="p">,</span> <span class="s1">&#39;E190&#39;</span><span class="p">,</span> <span class="s1">&#39;B735&#39;</span><span class="p">,</span> <span class="s1">&#39;B733&#39;</span><span class="p">,</span> <span class="s1">&#39;B734&#39;</span><span class="p">,</span> <span class="s1">&#39;A319&#39;</span><span class="p">,</span> <span class="s1">&#39;A320&#39;</span><span class="p">,</span> <span class="s1">&#39;B738&#39;</span><span class="p">,</span> <span class="s1">&#39;A321&#39;</span><span class="p">,</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>						   <span class="s1">&#39;B752&#39;</span><span class="p">,</span> <span class="s1">&#39;B763&#39;</span><span class="p">,</span> <span class="s1">&#39;A332&#39;</span><span class="p">,</span> <span class="s1">&#39;B744&#39;</span><span class="p">]</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_sqr_mtow</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4.1</span><span class="p">,</span> <span class="mf">4.71</span><span class="p">,</span> <span class="mf">5.4</span><span class="p">,</span> <span class="mf">6.98</span><span class="p">,</span> <span class="mf">7.46</span><span class="p">,</span> <span class="mf">7.77</span><span class="p">,</span> <span class="mf">8.09</span><span class="p">,</span> <span class="mf">8.19</span><span class="p">,</span> <span class="mf">8.6</span><span class="p">,</span> <span class="mf">8.64</span><span class="p">,</span> <span class="mf">9.31</span><span class="p">,</span> <span class="mf">10.38</span><span class="p">,</span> <span class="mf">13.47</span><span class="p">,</span> <span class="mf">15.18</span><span class="p">,</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>								 <span class="mf">19.82</span><span class="p">]</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span> <span class="o">=</span> <span class="p">[</span><span class="mf">9.19</span><span class="p">,</span> <span class="mf">11.8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mf">25.3</span><span class="p">,</span> <span class="mf">33.3</span><span class="p">,</span> <span class="mf">41.4</span><span class="p">,</span> <span class="mf">34.64</span><span class="p">,</span> <span class="mf">33.37</span><span class="p">,</span> <span class="mf">35.42</span><span class="p">,</span> <span class="mf">35.1</span><span class="p">,</span> <span class="mf">40.34</span><span class="p">,</span> <span class="mf">49.27</span><span class="p">,</span> <span class="mf">61.24</span><span class="p">,</span> <span class="mf">76.07</span><span class="p">,</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>						   <span class="mf">119.51</span><span class="p">]</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">holding_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>	<span class="k">def</span> <span class="nf">compute_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>		<span class="n">v_tas</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl</span><span class="p">)</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_tsfc</span><span class="p">(</span><span class="n">v_tas</span><span class="p">)</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>		<span class="n">T</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_drag</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>		<span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># cruise fuel factor</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>		<span class="n">ff</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">T</span> <span class="o">*</span> <span class="n">c</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>		<span class="k">return</span> <span class="n">ff</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>	<span class="k">def</span> <span class="nf">compute_drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a><span class="sd">		Compute drag in N at a given fl, mass, mach, bank angle.</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a><span class="sd">		Args:</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a><span class="sd">			fl: flight level (ft/100)</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a><span class="sd">			mass: mass (kg)</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a><span class="sd">			m: mach (Mach)</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a><span class="sd">			bank: bank angle (rad)</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a><span class="sd">		Returns:</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a><span class="sd">			drag: Drag (N)</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a><span class="sd">		Example of use:    </span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a><span class="sd">			fl = 340</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a><span class="sd">			mass = 67010</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a><span class="sd">			m = 0.78      </span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a><span class="sd">			drag=compute_drag(fl,mass,m)</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>		<span class="n">density</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">density</span><span class="p">(</span><span class="n">fl</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>		<span class="n">v_tas</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl</span><span class="p">)</span> <span class="o">/</span> <span class="n">uc</span><span class="o">.</span><span class="n">ms2kt</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>		<span class="n">cl</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mass</span> <span class="o">*</span> <span class="n">sa</span><span class="o">.</span><span class="n">g</span> <span class="o">/</span> <span class="p">(</span><span class="n">density</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bank</span><span class="p">)</span> <span class="o">*</span> <span class="n">v_tas</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>		<span class="n">cd_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>		<span class="n">cd_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>		<span class="n">cd</span> <span class="o">=</span> <span class="n">cd_0</span> <span class="o">+</span> <span class="n">cd_2</span> <span class="o">*</span> <span class="n">cl</span> <span class="o">**</span> <span class="mi">2</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>		<span class="n">drag</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">*</span> <span class="n">density</span> <span class="o">*</span> <span class="n">cd</span> <span class="o">*</span> <span class="n">v_tas</span> <span class="o">**</span> <span class="mi">2</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>		<span class="k">return</span> <span class="n">drag</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>	<span class="k">def</span> <span class="nf">estimate_holding_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m_min</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compute_min_max</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a><span class="sd">		TODO with BADA</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a><span class="sd">		This is not BADA, this is based on values used in previous projects (CC) and in the ac mtow</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a><span class="k">class</span> <span class="nc">AircraftPerformanceBada3Jet</span><span class="p">(</span><span class="n">AircraftPerformanceBada3</span><span class="p">):</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>	<span class="n">engine_type</span> <span class="o">=</span> <span class="s2">&quot;JET&quot;</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>		<span class="n">AircraftPerformanceBada3</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>										  <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">v_stall</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">clbo_mo</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>	<span class="k">def</span> <span class="nf">compute_tsfc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_tas</span><span class="p">):</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>		<span class="n">cf1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>		<span class="n">cf2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>		<span class="k">return</span> <span class="n">cf1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">v_tas</span> <span class="o">/</span> <span class="n">cf2</span><span class="p">))</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a><span class="k">class</span> <span class="nc">AircraftPerformanceBada3TP</span><span class="p">(</span><span class="n">AircraftPerformanceBada3</span><span class="p">):</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>	<span class="n">engine_type</span> <span class="o">=</span> <span class="s2">&quot;TURBOPROP&quot;</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>		<span class="n">AircraftPerformanceBada3</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>										  <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">v_stall</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">clbo_mo</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>	<span class="k">def</span> <span class="nf">compute_tsfc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_tas</span><span class="p">):</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>		<span class="n">cf1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>		<span class="n">cf2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>		<span class="k">return</span> <span class="n">cf1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">v_tas</span> <span class="o">/</span> <span class="n">cf2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">v_tas</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="AircraftPerformance">
                            <input id="AircraftPerformance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AircraftPerformance</span><wbr>(<span class="base">abc.ABC</span>):

                <label class="view-source-button" for="AircraftPerformance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance-15"><a href="#AircraftPerformance-15"><span class="linenos"> 15</span></a><span class="k">class</span> <span class="nc">AircraftPerformance</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="AircraftPerformance-16"><a href="#AircraftPerformance-16"><span class="linenos"> 16</span></a>	<span class="n">engine_type</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="AircraftPerformance-17"><a href="#AircraftPerformance-17"><span class="linenos"> 17</span></a>	<span class="n">bada_version</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="AircraftPerformance-18"><a href="#AircraftPerformance-18"><span class="linenos"> 18</span></a>
</span><span id="AircraftPerformance-19"><a href="#AircraftPerformance-19"><span class="linenos"> 19</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">ac_model</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span> <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
</span><span id="AircraftPerformance-20"><a href="#AircraftPerformance-20"><span class="linenos"> 20</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span> <span class="o">=</span> <span class="n">ac_icao</span>
</span><span id="AircraftPerformance-21"><a href="#AircraftPerformance-21"><span class="linenos"> 21</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">ac_model</span> <span class="o">=</span> <span class="n">ac_model</span>
</span><span id="AircraftPerformance-22"><a href="#AircraftPerformance-22"><span class="linenos"> 22</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wtc</span> <span class="o">=</span> <span class="n">wtc</span>
</span><span id="AircraftPerformance-23"><a href="#AircraftPerformance-23"><span class="linenos"> 23</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span>
</span><span id="AircraftPerformance-24"><a href="#AircraftPerformance-24"><span class="linenos"> 24</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wref</span> <span class="o">=</span> <span class="n">wref</span>
</span><span id="AircraftPerformance-25"><a href="#AircraftPerformance-25"><span class="linenos"> 25</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span> <span class="o">=</span> <span class="n">m_nom</span>
</span><span id="AircraftPerformance-26"><a href="#AircraftPerformance-26"><span class="linenos"> 26</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">=</span> <span class="n">mtow</span>
</span><span id="AircraftPerformance-27"><a href="#AircraftPerformance-27"><span class="linenos"> 27</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">=</span> <span class="n">oew</span>  <span class="c1"># Operating empty weight (kg)</span>
</span><span id="AircraftPerformance-28"><a href="#AircraftPerformance-28"><span class="linenos"> 28</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">hmo</span> <span class="o">=</span> <span class="n">hmo</span>  <span class="c1"># Maximum operating altitude (ft)</span>
</span><span id="AircraftPerformance-29"><a href="#AircraftPerformance-29"><span class="linenos"> 29</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">=</span> <span class="n">mpl</span>  <span class="c1"># Maximum payload (kg)</span>
</span><span id="AircraftPerformance-30"><a href="#AircraftPerformance-30"><span class="linenos"> 30</span></a>		<span class="c1"># Kinematic limitations</span>
</span><span id="AircraftPerformance-31"><a href="#AircraftPerformance-31"><span class="linenos"> 31</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">m_max</span> <span class="o">=</span> <span class="n">m_max</span>  <span class="c1"># Mach at conf=0 == Mmo</span>
</span><span id="AircraftPerformance-32"><a href="#AircraftPerformance-32"><span class="linenos"> 32</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">vfe</span> <span class="o">=</span> <span class="n">vfe</span>  <span class="c1"># VFE at conf=0 == Vmo</span>
</span><span id="AircraftPerformance-33"><a href="#AircraftPerformance-33"><span class="linenos"> 33</span></a>
</span><span id="AircraftPerformance-34"><a href="#AircraftPerformance-34"><span class="linenos"> 34</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span>  <span class="c1"># Drag coefficients #Aerodynamics drag computation</span>
</span><span id="AircraftPerformance-35"><a href="#AircraftPerformance-35"><span class="linenos"> 35</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>  <span class="c1"># Fuel flow coefficients</span>
</span><span id="AircraftPerformance-36"><a href="#AircraftPerformance-36"><span class="linenos"> 36</span></a>
</span><span id="AircraftPerformance-37"><a href="#AircraftPerformance-37"><span class="linenos"> 37</span></a>		<span class="c1"># Climb and descent performances for fuel flow</span>
</span><span id="AircraftPerformance-38"><a href="#AircraftPerformance-38"><span class="linenos"> 38</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AircraftPerformance-39"><a href="#AircraftPerformance-39"><span class="linenos"> 39</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_ff</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AircraftPerformance-40"><a href="#AircraftPerformance-40"><span class="linenos"> 40</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_ff</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AircraftPerformance-41"><a href="#AircraftPerformance-41"><span class="linenos"> 41</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AircraftPerformance-42"><a href="#AircraftPerformance-42"><span class="linenos"> 42</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AircraftPerformance-43"><a href="#AircraftPerformance-43"><span class="linenos"> 43</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AircraftPerformance-44"><a href="#AircraftPerformance-44"><span class="linenos"> 44</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AircraftPerformance-45"><a href="#AircraftPerformance-45"><span class="linenos"> 45</span></a>
</span><span id="AircraftPerformance-46"><a href="#AircraftPerformance-46"><span class="linenos"> 46</span></a>		<span class="c1"># This is not BADA but for APU from previous projects CC</span>
</span><span id="AircraftPerformance-47"><a href="#AircraftPerformance-47"><span class="linenos"> 47</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AT43&#39;</span><span class="p">,</span> <span class="s1">&#39;AT72&#39;</span><span class="p">,</span> <span class="s1">&#39;DH8D&#39;</span><span class="p">,</span> <span class="s1">&#39;E190&#39;</span><span class="p">,</span> <span class="s1">&#39;B735&#39;</span><span class="p">,</span> <span class="s1">&#39;B733&#39;</span><span class="p">,</span> <span class="s1">&#39;B734&#39;</span><span class="p">,</span> <span class="s1">&#39;A319&#39;</span><span class="p">,</span> <span class="s1">&#39;A320&#39;</span><span class="p">,</span> <span class="s1">&#39;B738&#39;</span><span class="p">,</span> <span class="s1">&#39;A321&#39;</span><span class="p">,</span> <span class="s1">&#39;B752&#39;</span><span class="p">,</span>
</span><span id="AircraftPerformance-48"><a href="#AircraftPerformance-48"><span class="linenos"> 48</span></a>					<span class="s1">&#39;B763&#39;</span><span class="p">,</span> <span class="s1">&#39;A332&#39;</span><span class="p">,</span> <span class="s1">&#39;B744&#39;</span><span class="p">]</span>
</span><span id="AircraftPerformance-49"><a href="#AircraftPerformance-49"><span class="linenos"> 49</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4.1</span><span class="p">,</span> <span class="mf">4.71</span><span class="p">,</span> <span class="mf">5.4</span><span class="p">,</span> <span class="mf">6.98</span><span class="p">,</span> <span class="mf">7.46</span><span class="p">,</span> <span class="mf">7.77</span><span class="p">,</span> <span class="mf">8.09</span><span class="p">,</span> <span class="mf">8.19</span><span class="p">,</span> <span class="mf">8.6</span><span class="p">,</span> <span class="mf">8.64</span><span class="p">,</span> <span class="mf">9.31</span><span class="p">,</span> <span class="mf">10.38</span><span class="p">,</span> <span class="mf">13.47</span><span class="p">,</span> <span class="mf">15.18</span><span class="p">,</span> <span class="mf">19.82</span><span class="p">]</span>
</span><span id="AircraftPerformance-50"><a href="#AircraftPerformance-50"><span class="linenos"> 50</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">apu_ff</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.14</span><span class="p">,</span> <span class="mf">1.14</span><span class="p">,</span> <span class="mf">1.14</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">,</span> <span class="mf">3.12</span><span class="p">,</span> <span class="mf">3.66</span><span class="p">,</span> <span class="mf">3.66</span><span class="p">]</span>
</span><span id="AircraftPerformance-51"><a href="#AircraftPerformance-51"><span class="linenos"> 51</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">apu_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ff</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="AircraftPerformance-52"><a href="#AircraftPerformance-52"><span class="linenos"> 52</span></a>
</span><span id="AircraftPerformance-53"><a href="#AircraftPerformance-53"><span class="linenos"> 53</span></a>		<span class="c1"># This is not BADA but for non pax costs from previous projects CC</span>
</span><span id="AircraftPerformance-54"><a href="#AircraftPerformance-54"><span class="linenos"> 54</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_min</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AircraftPerformance-55"><a href="#AircraftPerformance-55"><span class="linenos"> 55</span></a>			<span class="mf">00.21</span><span class="p">,</span> <span class="mf">00.29</span><span class="p">,</span> <span class="mf">00.29</span><span class="p">,</span> <span class="mf">00.43</span><span class="p">,</span> <span class="mf">00.46</span><span class="p">,</span> <span class="mf">00.50</span><span class="p">,</span> <span class="mf">00.54</span><span class="p">,</span> <span class="mf">00.57</span><span class="p">,</span>
</span><span id="AircraftPerformance-56"><a href="#AircraftPerformance-56"><span class="linenos"> 56</span></a>			<span class="mf">00.52</span><span class="p">,</span> <span class="mf">00.45</span><span class="p">,</span> <span class="mf">00.63</span><span class="p">,</span> <span class="mf">00.59</span><span class="p">,</span> <span class="mf">00.84</span><span class="p">,</span> <span class="mf">00.89</span><span class="p">,</span> <span class="mf">01.17</span>
</span><span id="AircraftPerformance-57"><a href="#AircraftPerformance-57"><span class="linenos"> 57</span></a>		<span class="p">]</span>
</span><span id="AircraftPerformance-58"><a href="#AircraftPerformance-58"><span class="linenos"> 58</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_min</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AircraftPerformance-59"><a href="#AircraftPerformance-59"><span class="linenos"> 59</span></a>			<span class="mf">01.71</span><span class="p">,</span> <span class="mf">02.31</span><span class="p">,</span> <span class="mf">02.24</span><span class="p">,</span> <span class="mf">03.34</span><span class="p">,</span> <span class="mf">03.63</span><span class="p">,</span> <span class="mf">03.91</span><span class="p">,</span> <span class="mf">04.21</span><span class="p">,</span> <span class="mf">04.34</span><span class="p">,</span>
</span><span id="AircraftPerformance-60"><a href="#AircraftPerformance-60"><span class="linenos"> 60</span></a>			<span class="mf">03.96</span><span class="p">,</span> <span class="mf">03.39</span><span class="p">,</span> <span class="mf">04.75</span><span class="p">,</span> <span class="mf">04.55</span><span class="p">,</span> <span class="mf">06.22</span><span class="p">,</span> <span class="mf">06.55</span><span class="p">,</span> <span class="mf">08.71</span>
</span><span id="AircraftPerformance-61"><a href="#AircraftPerformance-61"><span class="linenos"> 61</span></a>		<span class="p">]</span>
</span><span id="AircraftPerformance-62"><a href="#AircraftPerformance-62"><span class="linenos"> 62</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_min</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AircraftPerformance-63"><a href="#AircraftPerformance-63"><span class="linenos"> 63</span></a>			<span class="mf">05.90</span><span class="p">,</span> <span class="mf">06.40</span><span class="p">,</span> <span class="mf">06.40</span><span class="p">,</span> <span class="mf">07.10</span><span class="p">,</span> <span class="mf">08.40</span><span class="p">,</span> <span class="mf">08.90</span><span class="p">,</span> <span class="mf">09.20</span><span class="p">,</span> <span class="mf">07.70</span><span class="p">,</span>
</span><span id="AircraftPerformance-64"><a href="#AircraftPerformance-64"><span class="linenos"> 64</span></a>			<span class="mf">08.20</span><span class="p">,</span> <span class="mf">09.50</span><span class="p">,</span> <span class="mf">08.20</span><span class="p">,</span> <span class="mf">09.90</span><span class="p">,</span> <span class="mf">13.00</span><span class="p">,</span> <span class="mf">13.80</span><span class="p">,</span> <span class="mf">17.50</span>
</span><span id="AircraftPerformance-65"><a href="#AircraftPerformance-65"><span class="linenos"> 65</span></a>		<span class="p">]</span>
</span><span id="AircraftPerformance-66"><a href="#AircraftPerformance-66"><span class="linenos"> 66</span></a>
</span><span id="AircraftPerformance-67"><a href="#AircraftPerformance-67"><span class="linenos"> 67</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_min</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="AircraftPerformance-68"><a href="#AircraftPerformance-68"><span class="linenos"> 68</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_min</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="AircraftPerformance-69"><a href="#AircraftPerformance-69"><span class="linenos"> 69</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apu_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_min</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="AircraftPerformance-70"><a href="#AircraftPerformance-70"><span class="linenos"> 70</span></a>
</span><span id="AircraftPerformance-71"><a href="#AircraftPerformance-71"><span class="linenos"> 71</span></a>	<span class="nd">@abstractmethod</span>
</span><span id="AircraftPerformance-72"><a href="#AircraftPerformance-72"><span class="linenos"> 72</span></a>	<span class="k">def</span> <span class="nf">compute_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance-73"><a href="#AircraftPerformance-73"><span class="linenos"> 73</span></a>		<span class="k">pass</span>
</span><span id="AircraftPerformance-74"><a href="#AircraftPerformance-74"><span class="linenos"> 74</span></a>
</span><span id="AircraftPerformance-75"><a href="#AircraftPerformance-75"><span class="linenos"> 75</span></a>	<span class="nd">@abstractmethod</span>
</span><span id="AircraftPerformance-76"><a href="#AircraftPerformance-76"><span class="linenos"> 76</span></a>	<span class="k">def</span> <span class="nf">estimate_holding_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m_min</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compute_min_max</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="AircraftPerformance-77"><a href="#AircraftPerformance-77"><span class="linenos"> 77</span></a>		<span class="k">pass</span>
</span><span id="AircraftPerformance-78"><a href="#AircraftPerformance-78"><span class="linenos"> 78</span></a>
</span><span id="AircraftPerformance-79"><a href="#AircraftPerformance-79"><span class="linenos"> 79</span></a>	<span class="k">def</span> <span class="nf">estimate_avg_cruise_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">climb_kg</span><span class="p">,</span> <span class="n">descent_kg</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">,</span> <span class="n">cruise_dist</span><span class="p">,</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">payload_lf</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="AircraftPerformance-80"><a href="#AircraftPerformance-80"><span class="linenos"> 80</span></a>								   <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cruise_wind_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cruise_nom_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cruise_ground_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance-81"><a href="#AircraftPerformance-81"><span class="linenos"> 81</span></a>		<span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="n">descent_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span><span class="p">,</span>
</span><span id="AircraftPerformance-82"><a href="#AircraftPerformance-82"><span class="linenos"> 82</span></a>															  <span class="n">cruise_dist</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span id="AircraftPerformance-83"><a href="#AircraftPerformance-83"><span class="linenos"> 83</span></a>
</span><span id="AircraftPerformance-84"><a href="#AircraftPerformance-84"><span class="linenos"> 84</span></a>		<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">weight_0</span> <span class="o">+</span> <span class="n">ct</span><span class="o">.</span><span class="n">weight_1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
</span><span id="AircraftPerformance-85"><a href="#AircraftPerformance-85"><span class="linenos"> 85</span></a>		<span class="n">cruise_kg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span>
</span><span id="AircraftPerformance-86"><a href="#AircraftPerformance-86"><span class="linenos"> 86</span></a>		<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="AircraftPerformance-87"><a href="#AircraftPerformance-87"><span class="linenos"> 87</span></a>		<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="AircraftPerformance-88"><a href="#AircraftPerformance-88"><span class="linenos"> 88</span></a>		<span class="n">forced</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AircraftPerformance-89"><a href="#AircraftPerformance-89"><span class="linenos"> 89</span></a>
</span><span id="AircraftPerformance-90"><a href="#AircraftPerformance-90"><span class="linenos"> 90</span></a>		<span class="n">too_light</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AircraftPerformance-91"><a href="#AircraftPerformance-91"><span class="linenos"> 91</span></a>
</span><span id="AircraftPerformance-92"><a href="#AircraftPerformance-92"><span class="linenos"> 92</span></a>		<span class="k">while</span> <span class="p">(</span><span class="n">tow</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">too_light</span><span class="p">):</span>
</span><span id="AircraftPerformance-93"><a href="#AircraftPerformance-93"><span class="linenos"> 93</span></a>
</span><span id="AircraftPerformance-94"><a href="#AircraftPerformance-94"><span class="linenos"> 94</span></a>			<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">avg_cruise_weight</span> <span class="o">-</span> <span class="p">(</span><span class="n">tow</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">)</span>
</span><span id="AircraftPerformance-95"><a href="#AircraftPerformance-95"><span class="linenos"> 95</span></a>
</span><span id="AircraftPerformance-96"><a href="#AircraftPerformance-96"><span class="linenos"> 96</span></a>			<span class="k">if</span> <span class="n">avg_cruise_weight</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">descent_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">):</span>  <span class="c1"># self.mpl*payload_lf</span>
</span><span id="AircraftPerformance-97"><a href="#AircraftPerformance-97"><span class="linenos"> 97</span></a>				<span class="c1"># We have reduced the weight so much that the aircraft has negative cruise weight. Finish!</span>
</span><span id="AircraftPerformance-98"><a href="#AircraftPerformance-98"><span class="linenos"> 98</span></a>				<span class="n">too_light</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AircraftPerformance-99"><a href="#AircraftPerformance-99"><span class="linenos"> 99</span></a>				<span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
</span><span id="AircraftPerformance-100"><a href="#AircraftPerformance-100"><span class="linenos">100</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AircraftPerformance-101"><a href="#AircraftPerformance-101"><span class="linenos">101</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AircraftPerformance-102"><a href="#AircraftPerformance-102"><span class="linenos">102</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AircraftPerformance-103"><a href="#AircraftPerformance-103"><span class="linenos">103</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AircraftPerformance-104"><a href="#AircraftPerformance-104"><span class="linenos">104</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-105"><a href="#AircraftPerformance-105"><span class="linenos">105</span></a>					<span class="c1"># standard cruise even if weights might be too high</span>
</span><span id="AircraftPerformance-106"><a href="#AircraftPerformance-106"><span class="linenos">106</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wref</span>
</span><span id="AircraftPerformance-107"><a href="#AircraftPerformance-107"><span class="linenos">107</span></a>					<span class="n">cruise_m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance-108"><a href="#AircraftPerformance-108"><span class="linenos">108</span></a>					<span class="n">cruise_nom_kt</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">cruise_m</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AircraftPerformance-109"><a href="#AircraftPerformance-109"><span class="linenos">109</span></a>					<span class="n">cruise_ground_kt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_nom_kt</span> <span class="o">+</span> <span class="n">cruise_wind_kt</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AircraftPerformance-110"><a href="#AircraftPerformance-110"><span class="linenos">110</span></a>					<span class="n">cruise_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="n">cruise_dist</span> <span class="o">/</span> <span class="n">cruise_ground_kt</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="AircraftPerformance-111"><a href="#AircraftPerformance-111"><span class="linenos">111</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span>
</span><span id="AircraftPerformance-112"><a href="#AircraftPerformance-112"><span class="linenos">112</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="AircraftPerformance-113"><a href="#AircraftPerformance-113"><span class="linenos">113</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="AircraftPerformance-114"><a href="#AircraftPerformance-114"><span class="linenos">114</span></a>					<span class="n">forced</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AircraftPerformance-115"><a href="#AircraftPerformance-115"><span class="linenos">115</span></a>
</span><span id="AircraftPerformance-116"><a href="#AircraftPerformance-116"><span class="linenos">116</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance-117"><a href="#AircraftPerformance-117"><span class="linenos">117</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance-118"><a href="#AircraftPerformance-118"><span class="linenos">118</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">tow</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance-119"><a href="#AircraftPerformance-119"><span class="linenos">119</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance-120"><a href="#AircraftPerformance-120"><span class="linenos">120</span></a>
</span><span id="AircraftPerformance-121"><a href="#AircraftPerformance-121"><span class="linenos">121</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-122"><a href="#AircraftPerformance-122"><span class="linenos">122</span></a>				<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AircraftPerformance-123"><a href="#AircraftPerformance-123"><span class="linenos">123</span></a>				<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="AircraftPerformance-124"><a href="#AircraftPerformance-124"><span class="linenos">124</span></a>				<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="AircraftPerformance-125"><a href="#AircraftPerformance-125"><span class="linenos">125</span></a>
</span><span id="AircraftPerformance-126"><a href="#AircraftPerformance-126"><span class="linenos">126</span></a>				<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance-127"><a href="#AircraftPerformance-127"><span class="linenos">127</span></a>				<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance-128"><a href="#AircraftPerformance-128"><span class="linenos">128</span></a>				<span class="n">tow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">tow</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance-129"><a href="#AircraftPerformance-129"><span class="linenos">129</span></a>				<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance-130"><a href="#AircraftPerformance-130"><span class="linenos">130</span></a>
</span><span id="AircraftPerformance-131"><a href="#AircraftPerformance-131"><span class="linenos">131</span></a>		<span class="k">return</span> <span class="n">cruise_kg</span><span class="p">,</span> <span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="n">tow</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">,</span> <span class="n">cruise_nom_kt</span><span class="p">,</span> <span class="n">cruise_ground_kt</span><span class="p">,</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="n">forced</span>
</span><span id="AircraftPerformance-132"><a href="#AircraftPerformance-132"><span class="linenos">132</span></a>
</span><span id="AircraftPerformance-133"><a href="#AircraftPerformance-133"><span class="linenos">133</span></a>	<span class="k">def</span> <span class="nf">set_climb_descent_fuel_flow_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">climb_ff</span><span class="p">,</span> <span class="n">descent_ff</span><span class="p">):</span>
</span><span id="AircraftPerformance-134"><a href="#AircraftPerformance-134"><span class="linenos">134</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-135"><a href="#AircraftPerformance-135"><span class="linenos">135</span></a><span class="sd">		Add the fl, climb fuel flow and descent fuel flow arrays in the fligth performance object</span>
</span><span id="AircraftPerformance-136"><a href="#AircraftPerformance-136"><span class="linenos">136</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="AircraftPerformance-137"><a href="#AircraftPerformance-137"><span class="linenos">137</span></a>
</span><span id="AircraftPerformance-138"><a href="#AircraftPerformance-138"><span class="linenos">138</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-139"><a href="#AircraftPerformance-139"><span class="linenos">139</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="AircraftPerformance-140"><a href="#AircraftPerformance-140"><span class="linenos">140</span></a><span class="sd">			climb_ff: fuel flow at the corresponding fl when climbing</span>
</span><span id="AircraftPerformance-141"><a href="#AircraftPerformance-141"><span class="linenos">141</span></a><span class="sd">			descent_ff: fuel flow at the corresponding fl when descending</span>
</span><span id="AircraftPerformance-142"><a href="#AircraftPerformance-142"><span class="linenos">142</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-143"><a href="#AircraftPerformance-143"><span class="linenos">143</span></a>
</span><span id="AircraftPerformance-144"><a href="#AircraftPerformance-144"><span class="linenos">144</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span> <span class="o">=</span> <span class="n">fl</span>
</span><span id="AircraftPerformance-145"><a href="#AircraftPerformance-145"><span class="linenos">145</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_ff</span> <span class="o">=</span> <span class="n">climb_ff</span>
</span><span id="AircraftPerformance-146"><a href="#AircraftPerformance-146"><span class="linenos">146</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_ff</span> <span class="o">=</span> <span class="n">descent_ff</span>
</span><span id="AircraftPerformance-147"><a href="#AircraftPerformance-147"><span class="linenos">147</span></a>
</span><span id="AircraftPerformance-148"><a href="#AircraftPerformance-148"><span class="linenos">148</span></a>	<span class="k">def</span> <span class="nf">compute_sr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance-149"><a href="#AircraftPerformance-149"><span class="linenos">149</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-150"><a href="#AircraftPerformance-150"><span class="linenos">150</span></a><span class="sd">		Compute the specific range at a given fl, mass, mach and bank angle</span>
</span><span id="AircraftPerformance-151"><a href="#AircraftPerformance-151"><span class="linenos">151</span></a>
</span><span id="AircraftPerformance-152"><a href="#AircraftPerformance-152"><span class="linenos">152</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-153"><a href="#AircraftPerformance-153"><span class="linenos">153</span></a><span class="sd">			fl: flight level (ft/100)</span>
</span><span id="AircraftPerformance-154"><a href="#AircraftPerformance-154"><span class="linenos">154</span></a><span class="sd">			mass: mass (kg)</span>
</span><span id="AircraftPerformance-155"><a href="#AircraftPerformance-155"><span class="linenos">155</span></a><span class="sd">			m: mach (Mach)</span>
</span><span id="AircraftPerformance-156"><a href="#AircraftPerformance-156"><span class="linenos">156</span></a><span class="sd">			cruise_wind: cruise tail wind (m/s)</span>
</span><span id="AircraftPerformance-157"><a href="#AircraftPerformance-157"><span class="linenos">157</span></a><span class="sd">			bank: bank angle (rad)</span>
</span><span id="AircraftPerformance-158"><a href="#AircraftPerformance-158"><span class="linenos">158</span></a>
</span><span id="AircraftPerformance-159"><a href="#AircraftPerformance-159"><span class="linenos">159</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-160"><a href="#AircraftPerformance-160"><span class="linenos">160</span></a><span class="sd">			sr: specifc range (nm/kg)</span>
</span><span id="AircraftPerformance-161"><a href="#AircraftPerformance-161"><span class="linenos">161</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-162"><a href="#AircraftPerformance-162"><span class="linenos">162</span></a>
</span><span id="AircraftPerformance-163"><a href="#AircraftPerformance-163"><span class="linenos">163</span></a>		<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="p">)</span>
</span><span id="AircraftPerformance-164"><a href="#AircraftPerformance-164"><span class="linenos">164</span></a>
</span><span id="AircraftPerformance-165"><a href="#AircraftPerformance-165"><span class="linenos">165</span></a>		<span class="n">tas</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">sa</span><span class="o">.</span><span class="n">sound_speed</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="p">(</span><span class="n">fl</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span> <span class="o">+</span> <span class="n">cruise_wind</span>
</span><span id="AircraftPerformance-166"><a href="#AircraftPerformance-166"><span class="linenos">166</span></a>		<span class="n">sr</span> <span class="o">=</span> <span class="p">(</span><span class="n">tas</span> <span class="o">/</span> <span class="n">ff</span><span class="p">)</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">/</span> <span class="mi">1852</span>
</span><span id="AircraftPerformance-167"><a href="#AircraftPerformance-167"><span class="linenos">167</span></a>
</span><span id="AircraftPerformance-168"><a href="#AircraftPerformance-168"><span class="linenos">168</span></a>		<span class="k">return</span> <span class="n">sr</span>
</span><span id="AircraftPerformance-169"><a href="#AircraftPerformance-169"><span class="linenos">169</span></a>
</span><span id="AircraftPerformance-170"><a href="#AircraftPerformance-170"><span class="linenos">170</span></a>	<span class="k">def</span> <span class="nf">estimate_climb_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="AircraftPerformance-171"><a href="#AircraftPerformance-171"><span class="linenos">171</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-172"><a href="#AircraftPerformance-172"><span class="linenos">172</span></a><span class="sd">		Estimated average fuel flow between from_fl and to_fl </span>
</span><span id="AircraftPerformance-173"><a href="#AircraftPerformance-173"><span class="linenos">173</span></a><span class="sd">		for the climb phase</span>
</span><span id="AircraftPerformance-174"><a href="#AircraftPerformance-174"><span class="linenos">174</span></a>
</span><span id="AircraftPerformance-175"><a href="#AircraftPerformance-175"><span class="linenos">175</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-176"><a href="#AircraftPerformance-176"><span class="linenos">176</span></a><span class="sd">			from_fl: fl from which to start the climb</span>
</span><span id="AircraftPerformance-177"><a href="#AircraftPerformance-177"><span class="linenos">177</span></a><span class="sd">			to_fl: fl to which to end the climb</span>
</span><span id="AircraftPerformance-178"><a href="#AircraftPerformance-178"><span class="linenos">178</span></a>
</span><span id="AircraftPerformance-179"><a href="#AircraftPerformance-179"><span class="linenos">179</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-180"><a href="#AircraftPerformance-180"><span class="linenos">180</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="AircraftPerformance-181"><a href="#AircraftPerformance-181"><span class="linenos">181</span></a>
</span><span id="AircraftPerformance-182"><a href="#AircraftPerformance-182"><span class="linenos">182</span></a><span class="sd">		Example of use:    </span>
</span><span id="AircraftPerformance-183"><a href="#AircraftPerformance-183"><span class="linenos">183</span></a><span class="sd">			ff=estimate_climb_fuel_flow(0,320)</span>
</span><span id="AircraftPerformance-184"><a href="#AircraftPerformance-184"><span class="linenos">184</span></a>
</span><span id="AircraftPerformance-185"><a href="#AircraftPerformance-185"><span class="linenos">185</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-186"><a href="#AircraftPerformance-186"><span class="linenos">186</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_ff</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">)</span>
</span><span id="AircraftPerformance-187"><a href="#AircraftPerformance-187"><span class="linenos">187</span></a>
</span><span id="AircraftPerformance-188"><a href="#AircraftPerformance-188"><span class="linenos">188</span></a>	<span class="k">def</span> <span class="nf">estimate_descent_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="AircraftPerformance-189"><a href="#AircraftPerformance-189"><span class="linenos">189</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-190"><a href="#AircraftPerformance-190"><span class="linenos">190</span></a><span class="sd">		Estimated average fuel flow between from_fl and to_fl </span>
</span><span id="AircraftPerformance-191"><a href="#AircraftPerformance-191"><span class="linenos">191</span></a><span class="sd">		for the descending phase</span>
</span><span id="AircraftPerformance-192"><a href="#AircraftPerformance-192"><span class="linenos">192</span></a>
</span><span id="AircraftPerformance-193"><a href="#AircraftPerformance-193"><span class="linenos">193</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-194"><a href="#AircraftPerformance-194"><span class="linenos">194</span></a><span class="sd">			from_fl: fl from which to start the descent</span>
</span><span id="AircraftPerformance-195"><a href="#AircraftPerformance-195"><span class="linenos">195</span></a><span class="sd">			to_fl: fl to which to end the descent</span>
</span><span id="AircraftPerformance-196"><a href="#AircraftPerformance-196"><span class="linenos">196</span></a>
</span><span id="AircraftPerformance-197"><a href="#AircraftPerformance-197"><span class="linenos">197</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-198"><a href="#AircraftPerformance-198"><span class="linenos">198</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="AircraftPerformance-199"><a href="#AircraftPerformance-199"><span class="linenos">199</span></a>
</span><span id="AircraftPerformance-200"><a href="#AircraftPerformance-200"><span class="linenos">200</span></a><span class="sd">		Example of use:    </span>
</span><span id="AircraftPerformance-201"><a href="#AircraftPerformance-201"><span class="linenos">201</span></a><span class="sd">			ff=estimate_descent_fuel_flow(320,0)</span>
</span><span id="AircraftPerformance-202"><a href="#AircraftPerformance-202"><span class="linenos">202</span></a>
</span><span id="AircraftPerformance-203"><a href="#AircraftPerformance-203"><span class="linenos">203</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-204"><a href="#AircraftPerformance-204"><span class="linenos">204</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_ff</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">)</span>
</span><span id="AircraftPerformance-205"><a href="#AircraftPerformance-205"><span class="linenos">205</span></a>
</span><span id="AircraftPerformance-206"><a href="#AircraftPerformance-206"><span class="linenos">206</span></a>	<span class="k">def</span> <span class="nf">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flv</span><span class="p">,</span> <span class="n">ffv</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="AircraftPerformance-207"><a href="#AircraftPerformance-207"><span class="linenos">207</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-208"><a href="#AircraftPerformance-208"><span class="linenos">208</span></a><span class="sd">		Compute the average fuel flow between from_fl and to_fl </span>
</span><span id="AircraftPerformance-209"><a href="#AircraftPerformance-209"><span class="linenos">209</span></a><span class="sd">		considering a vector of fl aligned with a vector of ff</span>
</span><span id="AircraftPerformance-210"><a href="#AircraftPerformance-210"><span class="linenos">210</span></a>
</span><span id="AircraftPerformance-211"><a href="#AircraftPerformance-211"><span class="linenos">211</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-212"><a href="#AircraftPerformance-212"><span class="linenos">212</span></a><span class="sd">			flv: array of flight levels (ft/100)</span>
</span><span id="AircraftPerformance-213"><a href="#AircraftPerformance-213"><span class="linenos">213</span></a><span class="sd">			ffv: array of fuel flows aligned with flv (kg/min)</span>
</span><span id="AircraftPerformance-214"><a href="#AircraftPerformance-214"><span class="linenos">214</span></a><span class="sd">			from_fl: fl from which to start the climb/descent</span>
</span><span id="AircraftPerformance-215"><a href="#AircraftPerformance-215"><span class="linenos">215</span></a><span class="sd">			to_fl: fl to which to end the climb/descent</span>
</span><span id="AircraftPerformance-216"><a href="#AircraftPerformance-216"><span class="linenos">216</span></a>
</span><span id="AircraftPerformance-217"><a href="#AircraftPerformance-217"><span class="linenos">217</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-218"><a href="#AircraftPerformance-218"><span class="linenos">218</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="AircraftPerformance-219"><a href="#AircraftPerformance-219"><span class="linenos">219</span></a>
</span><span id="AircraftPerformance-220"><a href="#AircraftPerformance-220"><span class="linenos">220</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-221"><a href="#AircraftPerformance-221"><span class="linenos">221</span></a>		<span class="n">i_closest_from</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">flv</span> <span class="o">-</span> <span class="n">from_fl</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span>
</span><span id="AircraftPerformance-222"><a href="#AircraftPerformance-222"><span class="linenos">222</span></a>		<span class="n">i_closest_to</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">flv</span> <span class="o">-</span> <span class="n">to_fl</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span>
</span><span id="AircraftPerformance-223"><a href="#AircraftPerformance-223"><span class="linenos">223</span></a>		<span class="n">i_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">i_closest_from</span><span class="p">,</span> <span class="n">i_closest_to</span><span class="p">)</span>
</span><span id="AircraftPerformance-224"><a href="#AircraftPerformance-224"><span class="linenos">224</span></a>		<span class="n">i_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">i_closest_from</span><span class="p">,</span> <span class="n">i_closest_to</span><span class="p">)</span>
</span><span id="AircraftPerformance-225"><a href="#AircraftPerformance-225"><span class="linenos">225</span></a>
</span><span id="AircraftPerformance-226"><a href="#AircraftPerformance-226"><span class="linenos">226</span></a>		<span class="k">if</span> <span class="n">i_min</span> <span class="o">==</span> <span class="n">i_max</span><span class="p">:</span>
</span><span id="AircraftPerformance-227"><a href="#AircraftPerformance-227"><span class="linenos">227</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="n">ffv</span><span class="p">[</span><span class="n">i_min</span><span class="p">]</span>
</span><span id="AircraftPerformance-228"><a href="#AircraftPerformance-228"><span class="linenos">228</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-229"><a href="#AircraftPerformance-229"><span class="linenos">229</span></a>			<span class="n">fl_s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flv</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="AircraftPerformance-230"><a href="#AircraftPerformance-230"><span class="linenos">230</span></a>			<span class="n">diff_fl</span> <span class="o">=</span> <span class="p">(</span><span class="n">fl_s</span> <span class="o">-</span> <span class="n">flv</span><span class="p">)</span>
</span><span id="AircraftPerformance-231"><a href="#AircraftPerformance-231"><span class="linenos">231</span></a>			<span class="n">diff_fl</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">diff_fl</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
</span><span id="AircraftPerformance-232"><a href="#AircraftPerformance-232"><span class="linenos">232</span></a>
</span><span id="AircraftPerformance-233"><a href="#AircraftPerformance-233"><span class="linenos">233</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">ffv</span> <span class="o">*</span> <span class="n">diff_fl</span>
</span><span id="AircraftPerformance-234"><a href="#AircraftPerformance-234"><span class="linenos">234</span></a>
</span><span id="AircraftPerformance-235"><a href="#AircraftPerformance-235"><span class="linenos">235</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">fuel_segment</span><span class="p">[</span><span class="n">i_min</span><span class="p">:(</span><span class="n">i_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span> \
</span><span id="AircraftPerformance-236"><a href="#AircraftPerformance-236"><span class="linenos">236</span></a>				 <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">diff_fl</span><span class="p">[</span><span class="n">i_min</span><span class="p">:(</span><span class="n">i_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>
</span><span id="AircraftPerformance-237"><a href="#AircraftPerformance-237"><span class="linenos">237</span></a>
</span><span id="AircraftPerformance-238"><a href="#AircraftPerformance-238"><span class="linenos">238</span></a>		<span class="k">return</span> <span class="n">ff</span>
</span><span id="AircraftPerformance-239"><a href="#AircraftPerformance-239"><span class="linenos">239</span></a>
</span><span id="AircraftPerformance-240"><a href="#AircraftPerformance-240"><span class="linenos">240</span></a>	<span class="k">def</span> <span class="nf">set_climb_fuel_flow_detailled_rate_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">rocd</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">tas</span><span class="p">):</span>
</span><span id="AircraftPerformance-241"><a href="#AircraftPerformance-241"><span class="linenos">241</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-242"><a href="#AircraftPerformance-242"><span class="linenos">242</span></a><span class="sd">		Add the fl, mass, fuel, roc, gamma and tas arrays in the fligth performance object</span>
</span><span id="AircraftPerformance-243"><a href="#AircraftPerformance-243"><span class="linenos">243</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="AircraftPerformance-244"><a href="#AircraftPerformance-244"><span class="linenos">244</span></a><span class="sd">		In this case the values are more detailled as different fuel flows and rocd are</span>
</span><span id="AircraftPerformance-245"><a href="#AircraftPerformance-245"><span class="linenos">245</span></a><span class="sd">		considered as a funcion of altitude and mass. This allow us to interpolate the </span>
</span><span id="AircraftPerformance-246"><a href="#AircraftPerformance-246"><span class="linenos">246</span></a><span class="sd">		climb and descent performances with interpolate_climb_performances function.</span>
</span><span id="AircraftPerformance-247"><a href="#AircraftPerformance-247"><span class="linenos">247</span></a>
</span><span id="AircraftPerformance-248"><a href="#AircraftPerformance-248"><span class="linenos">248</span></a><span class="sd">		Note that the performances on fuel flow are the same for all the points. These</span>
</span><span id="AircraftPerformance-249"><a href="#AircraftPerformance-249"><span class="linenos">249</span></a><span class="sd">		detailled data are used only for rocd/gamma values.</span>
</span><span id="AircraftPerformance-250"><a href="#AircraftPerformance-250"><span class="linenos">250</span></a>
</span><span id="AircraftPerformance-251"><a href="#AircraftPerformance-251"><span class="linenos">251</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-252"><a href="#AircraftPerformance-252"><span class="linenos">252</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="AircraftPerformance-253"><a href="#AircraftPerformance-253"><span class="linenos">253</span></a><span class="sd">			mass: array of massess corresponding to the fls</span>
</span><span id="AircraftPerformance-254"><a href="#AircraftPerformance-254"><span class="linenos">254</span></a><span class="sd">			fuel: array of fuels corresponding to the fls</span>
</span><span id="AircraftPerformance-255"><a href="#AircraftPerformance-255"><span class="linenos">255</span></a><span class="sd">			rocd: rate of climb/descent corresponding to the fls</span>
</span><span id="AircraftPerformance-256"><a href="#AircraftPerformance-256"><span class="linenos">256</span></a><span class="sd">			gamma: angle of climb/descent corresponding to the fls</span>
</span><span id="AircraftPerformance-257"><a href="#AircraftPerformance-257"><span class="linenos">257</span></a><span class="sd">			tas: kt TAS corresponding to the fls</span>
</span><span id="AircraftPerformance-258"><a href="#AircraftPerformance-258"><span class="linenos">258</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-259"><a href="#AircraftPerformance-259"><span class="linenos">259</span></a>
</span><span id="AircraftPerformance-260"><a href="#AircraftPerformance-260"><span class="linenos">260</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">fuel</span><span class="p">,</span> <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">rocd</span><span class="p">,</span>
</span><span id="AircraftPerformance-261"><a href="#AircraftPerformance-261"><span class="linenos">261</span></a>						   <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">gamma</span><span class="p">,</span> <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">tas</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span><span id="AircraftPerformance-262"><a href="#AircraftPerformance-262"><span class="linenos">262</span></a>
</span><span id="AircraftPerformance-263"><a href="#AircraftPerformance-263"><span class="linenos">263</span></a>	<span class="k">def</span> <span class="nf">interpolate_climb_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="AircraftPerformance-264"><a href="#AircraftPerformance-264"><span class="linenos">264</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-265"><a href="#AircraftPerformance-265"><span class="linenos">265</span></a><span class="sd">		Using the data from the ptf table interpolates the climb performances</span>
</span><span id="AircraftPerformance-266"><a href="#AircraftPerformance-266"><span class="linenos">266</span></a><span class="sd">		(fuel, rocd, gamma and tas) at a given altitude (fl) and weight (mass)</span>
</span><span id="AircraftPerformance-267"><a href="#AircraftPerformance-267"><span class="linenos">267</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="AircraftPerformance-268"><a href="#AircraftPerformance-268"><span class="linenos">268</span></a>
</span><span id="AircraftPerformance-269"><a href="#AircraftPerformance-269"><span class="linenos">269</span></a><span class="sd">		It uses the table of performances set by set_climb_fuel_flow_detailled_rate_performances</span>
</span><span id="AircraftPerformance-270"><a href="#AircraftPerformance-270"><span class="linenos">270</span></a>
</span><span id="AircraftPerformance-271"><a href="#AircraftPerformance-271"><span class="linenos">271</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-272"><a href="#AircraftPerformance-272"><span class="linenos">272</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="AircraftPerformance-273"><a href="#AircraftPerformance-273"><span class="linenos">273</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="AircraftPerformance-274"><a href="#AircraftPerformance-274"><span class="linenos">274</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="AircraftPerformance-275"><a href="#AircraftPerformance-275"><span class="linenos">275</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="AircraftPerformance-276"><a href="#AircraftPerformance-276"><span class="linenos">276</span></a>
</span><span id="AircraftPerformance-277"><a href="#AircraftPerformance-277"><span class="linenos">277</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-278"><a href="#AircraftPerformance-278"><span class="linenos">278</span></a><span class="sd">			climb_perf: dictionary with fuel, rocd, gamma and tas as result of the interpolation.</span>
</span><span id="AircraftPerformance-279"><a href="#AircraftPerformance-279"><span class="linenos">279</span></a><span class="sd">									Note that fuel and tas do not depend on the interpolation.</span>
</span><span id="AircraftPerformance-280"><a href="#AircraftPerformance-280"><span class="linenos">280</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-281"><a href="#AircraftPerformance-281"><span class="linenos">281</span></a>
</span><span id="AircraftPerformance-282"><a href="#AircraftPerformance-282"><span class="linenos">282</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-283"><a href="#AircraftPerformance-283"><span class="linenos">283</span></a>			<span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AircraftPerformance-284"><a href="#AircraftPerformance-284"><span class="linenos">284</span></a>				<span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance-285"><a href="#AircraftPerformance-285"><span class="linenos">285</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance-286"><a href="#AircraftPerformance-286"><span class="linenos">286</span></a>				<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance-287"><a href="#AircraftPerformance-287"><span class="linenos">287</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance-288"><a href="#AircraftPerformance-288"><span class="linenos">288</span></a>				<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance-289"><a href="#AircraftPerformance-289"><span class="linenos">289</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance-290"><a href="#AircraftPerformance-290"><span class="linenos">290</span></a>				<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance-291"><a href="#AircraftPerformance-291"><span class="linenos">291</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)}</span>
</span><span id="AircraftPerformance-292"><a href="#AircraftPerformance-292"><span class="linenos">292</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-293"><a href="#AircraftPerformance-293"><span class="linenos">293</span></a>			<span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance-294"><a href="#AircraftPerformance-294"><span class="linenos">294</span></a>						  <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance-295"><a href="#AircraftPerformance-295"><span class="linenos">295</span></a>						  <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance-296"><a href="#AircraftPerformance-296"><span class="linenos">296</span></a>						  <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)}</span>
</span><span id="AircraftPerformance-297"><a href="#AircraftPerformance-297"><span class="linenos">297</span></a>
</span><span id="AircraftPerformance-298"><a href="#AircraftPerformance-298"><span class="linenos">298</span></a>		<span class="k">return</span> <span class="n">climb_perf</span>
</span><span id="AircraftPerformance-299"><a href="#AircraftPerformance-299"><span class="linenos">299</span></a>
</span><span id="AircraftPerformance-300"><a href="#AircraftPerformance-300"><span class="linenos">300</span></a>	<span class="k">def</span> <span class="nf">set_descent_fuel_flow_detailled_rate_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">rocd</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">tas</span><span class="p">):</span>
</span><span id="AircraftPerformance-301"><a href="#AircraftPerformance-301"><span class="linenos">301</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-302"><a href="#AircraftPerformance-302"><span class="linenos">302</span></a><span class="sd">		Add the fl, mass, fuel, roc, gamma and tas arrays in the fligth performance object</span>
</span><span id="AircraftPerformance-303"><a href="#AircraftPerformance-303"><span class="linenos">303</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="AircraftPerformance-304"><a href="#AircraftPerformance-304"><span class="linenos">304</span></a><span class="sd">		In this case the values are more detailled as different fuel flows and rocd are</span>
</span><span id="AircraftPerformance-305"><a href="#AircraftPerformance-305"><span class="linenos">305</span></a><span class="sd">		considered as a function of altitude and mass. This allow us to interpolate the</span>
</span><span id="AircraftPerformance-306"><a href="#AircraftPerformance-306"><span class="linenos">306</span></a><span class="sd">		climb and descent performances with interpolate_descent_performances function.</span>
</span><span id="AircraftPerformance-307"><a href="#AircraftPerformance-307"><span class="linenos">307</span></a>
</span><span id="AircraftPerformance-308"><a href="#AircraftPerformance-308"><span class="linenos">308</span></a><span class="sd">		Note that the performances on fuel flow are the same for all the points. These</span>
</span><span id="AircraftPerformance-309"><a href="#AircraftPerformance-309"><span class="linenos">309</span></a><span class="sd">		detailled data are used only for rocd/gamma values.</span>
</span><span id="AircraftPerformance-310"><a href="#AircraftPerformance-310"><span class="linenos">310</span></a>
</span><span id="AircraftPerformance-311"><a href="#AircraftPerformance-311"><span class="linenos">311</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-312"><a href="#AircraftPerformance-312"><span class="linenos">312</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="AircraftPerformance-313"><a href="#AircraftPerformance-313"><span class="linenos">313</span></a><span class="sd">			mass: array of masses corresponding to the fls</span>
</span><span id="AircraftPerformance-314"><a href="#AircraftPerformance-314"><span class="linenos">314</span></a><span class="sd">			fuel: array of fuels corresponding to the fls</span>
</span><span id="AircraftPerformance-315"><a href="#AircraftPerformance-315"><span class="linenos">315</span></a><span class="sd">			rocd: rate of climb/descent corresponding to the fls</span>
</span><span id="AircraftPerformance-316"><a href="#AircraftPerformance-316"><span class="linenos">316</span></a><span class="sd">			gamma: angle of climb/descent corresponding to the fls</span>
</span><span id="AircraftPerformance-317"><a href="#AircraftPerformance-317"><span class="linenos">317</span></a><span class="sd">			tas: kt TAS corresponding to the fls</span>
</span><span id="AircraftPerformance-318"><a href="#AircraftPerformance-318"><span class="linenos">318</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-319"><a href="#AircraftPerformance-319"><span class="linenos">319</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">fuel</span><span class="p">,</span> <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">rocd</span><span class="p">,</span>
</span><span id="AircraftPerformance-320"><a href="#AircraftPerformance-320"><span class="linenos">320</span></a>							 <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">gamma</span><span class="p">,</span> <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">tas</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span><span id="AircraftPerformance-321"><a href="#AircraftPerformance-321"><span class="linenos">321</span></a>
</span><span id="AircraftPerformance-322"><a href="#AircraftPerformance-322"><span class="linenos">322</span></a>	<span class="k">def</span> <span class="nf">interpolate_descent_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="AircraftPerformance-323"><a href="#AircraftPerformance-323"><span class="linenos">323</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-324"><a href="#AircraftPerformance-324"><span class="linenos">324</span></a><span class="sd">		Using the data from the ptf table interpolates the climb performances</span>
</span><span id="AircraftPerformance-325"><a href="#AircraftPerformance-325"><span class="linenos">325</span></a><span class="sd">		(fuel, rocd, gamma and tas) at a given altitude (fl) and weight (mass)</span>
</span><span id="AircraftPerformance-326"><a href="#AircraftPerformance-326"><span class="linenos">326</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="AircraftPerformance-327"><a href="#AircraftPerformance-327"><span class="linenos">327</span></a>
</span><span id="AircraftPerformance-328"><a href="#AircraftPerformance-328"><span class="linenos">328</span></a><span class="sd">		It uses the table of performances set by set_descent_fuel_flow_detailled_rate_performances</span>
</span><span id="AircraftPerformance-329"><a href="#AircraftPerformance-329"><span class="linenos">329</span></a>
</span><span id="AircraftPerformance-330"><a href="#AircraftPerformance-330"><span class="linenos">330</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-331"><a href="#AircraftPerformance-331"><span class="linenos">331</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="AircraftPerformance-332"><a href="#AircraftPerformance-332"><span class="linenos">332</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="AircraftPerformance-333"><a href="#AircraftPerformance-333"><span class="linenos">333</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="AircraftPerformance-334"><a href="#AircraftPerformance-334"><span class="linenos">334</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="AircraftPerformance-335"><a href="#AircraftPerformance-335"><span class="linenos">335</span></a>
</span><span id="AircraftPerformance-336"><a href="#AircraftPerformance-336"><span class="linenos">336</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-337"><a href="#AircraftPerformance-337"><span class="linenos">337</span></a><span class="sd">			descent_perf: dictionary with fuel, rocd, gamma and tas as result of the interpolation.</span>
</span><span id="AircraftPerformance-338"><a href="#AircraftPerformance-338"><span class="linenos">338</span></a><span class="sd">									Note that fuel and tas do not depend on the interpolation.</span>
</span><span id="AircraftPerformance-339"><a href="#AircraftPerformance-339"><span class="linenos">339</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-340"><a href="#AircraftPerformance-340"><span class="linenos">340</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-341"><a href="#AircraftPerformance-341"><span class="linenos">341</span></a>			<span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AircraftPerformance-342"><a href="#AircraftPerformance-342"><span class="linenos">342</span></a>				<span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance-343"><a href="#AircraftPerformance-343"><span class="linenos">343</span></a>								 <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance-344"><a href="#AircraftPerformance-344"><span class="linenos">344</span></a>				<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance-345"><a href="#AircraftPerformance-345"><span class="linenos">345</span></a>								 <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance-346"><a href="#AircraftPerformance-346"><span class="linenos">346</span></a>				<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance-347"><a href="#AircraftPerformance-347"><span class="linenos">347</span></a>								  <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance-348"><a href="#AircraftPerformance-348"><span class="linenos">348</span></a>				<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance-349"><a href="#AircraftPerformance-349"><span class="linenos">349</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)}</span>
</span><span id="AircraftPerformance-350"><a href="#AircraftPerformance-350"><span class="linenos">350</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-351"><a href="#AircraftPerformance-351"><span class="linenos">351</span></a>			<span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance-352"><a href="#AircraftPerformance-352"><span class="linenos">352</span></a>							<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance-353"><a href="#AircraftPerformance-353"><span class="linenos">353</span></a>							<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span>
</span><span id="AircraftPerformance-354"><a href="#AircraftPerformance-354"><span class="linenos">354</span></a>								<span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance-355"><a href="#AircraftPerformance-355"><span class="linenos">355</span></a>							<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)}</span>
</span><span id="AircraftPerformance-356"><a href="#AircraftPerformance-356"><span class="linenos">356</span></a>
</span><span id="AircraftPerformance-357"><a href="#AircraftPerformance-357"><span class="linenos">357</span></a>		<span class="k">return</span> <span class="n">descent_perf</span>
</span><span id="AircraftPerformance-358"><a href="#AircraftPerformance-358"><span class="linenos">358</span></a>
</span><span id="AircraftPerformance-359"><a href="#AircraftPerformance-359"><span class="linenos">359</span></a>	<span class="k">def</span> <span class="nf">set_detailled_mach_nominal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
</span><span id="AircraftPerformance-360"><a href="#AircraftPerformance-360"><span class="linenos">360</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-361"><a href="#AircraftPerformance-361"><span class="linenos">361</span></a><span class="sd">		Add the fl, mass, m arrays in the fligth performance object</span>
</span><span id="AircraftPerformance-362"><a href="#AircraftPerformance-362"><span class="linenos">362</span></a><span class="sd">		These values come from the ptd table.</span>
</span><span id="AircraftPerformance-363"><a href="#AircraftPerformance-363"><span class="linenos">363</span></a><span class="sd">		This is to have the nominal Mach as a function of altitude and mass. This is</span>
</span><span id="AircraftPerformance-364"><a href="#AircraftPerformance-364"><span class="linenos">364</span></a><span class="sd">		useful for low altidues, i.e. &lt;FL360 as the nominal Mach is lower than the one</span>
</span><span id="AircraftPerformance-365"><a href="#AircraftPerformance-365"><span class="linenos">365</span></a><span class="sd">		use in a higher cruise phase.</span>
</span><span id="AircraftPerformance-366"><a href="#AircraftPerformance-366"><span class="linenos">366</span></a><span class="sd">		</span>
</span><span id="AircraftPerformance-367"><a href="#AircraftPerformance-367"><span class="linenos">367</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-368"><a href="#AircraftPerformance-368"><span class="linenos">368</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="AircraftPerformance-369"><a href="#AircraftPerformance-369"><span class="linenos">369</span></a><span class="sd">			mass: array of massess corresponding to the fls</span>
</span><span id="AircraftPerformance-370"><a href="#AircraftPerformance-370"><span class="linenos">370</span></a><span class="sd">			m: array of cruise nominal Mach speeds corresponding to the fls</span>
</span><span id="AircraftPerformance-371"><a href="#AircraftPerformance-371"><span class="linenos">371</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-372"><a href="#AircraftPerformance-372"><span class="linenos">372</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">:</span> <span class="n">m</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span><span id="AircraftPerformance-373"><a href="#AircraftPerformance-373"><span class="linenos">373</span></a>
</span><span id="AircraftPerformance-374"><a href="#AircraftPerformance-374"><span class="linenos">374</span></a>	<span class="k">def</span> <span class="nf">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="AircraftPerformance-375"><a href="#AircraftPerformance-375"><span class="linenos">375</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-376"><a href="#AircraftPerformance-376"><span class="linenos">376</span></a><span class="sd">		Using the data from the ptd table interpolates the nominal mach</span>
</span><span id="AircraftPerformance-377"><a href="#AircraftPerformance-377"><span class="linenos">377</span></a><span class="sd">		at a given altitude (fl) and weight (mass)</span>
</span><span id="AircraftPerformance-378"><a href="#AircraftPerformance-378"><span class="linenos">378</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="AircraftPerformance-379"><a href="#AircraftPerformance-379"><span class="linenos">379</span></a>
</span><span id="AircraftPerformance-380"><a href="#AircraftPerformance-380"><span class="linenos">380</span></a><span class="sd">		It uses the table of performances set by set_descent_fuel_flow_detailled_rate_performances</span>
</span><span id="AircraftPerformance-381"><a href="#AircraftPerformance-381"><span class="linenos">381</span></a>
</span><span id="AircraftPerformance-382"><a href="#AircraftPerformance-382"><span class="linenos">382</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-383"><a href="#AircraftPerformance-383"><span class="linenos">383</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="AircraftPerformance-384"><a href="#AircraftPerformance-384"><span class="linenos">384</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="AircraftPerformance-385"><a href="#AircraftPerformance-385"><span class="linenos">385</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="AircraftPerformance-386"><a href="#AircraftPerformance-386"><span class="linenos">386</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="AircraftPerformance-387"><a href="#AircraftPerformance-387"><span class="linenos">387</span></a>
</span><span id="AircraftPerformance-388"><a href="#AircraftPerformance-388"><span class="linenos">388</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-389"><a href="#AircraftPerformance-389"><span class="linenos">389</span></a><span class="sd">			m: Mach at the interpolated fl and mass.</span>
</span><span id="AircraftPerformance-390"><a href="#AircraftPerformance-390"><span class="linenos">390</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-391"><a href="#AircraftPerformance-391"><span class="linenos">391</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-392"><a href="#AircraftPerformance-392"><span class="linenos">392</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span>
</span><span id="AircraftPerformance-393"><a href="#AircraftPerformance-393"><span class="linenos">393</span></a>						 <span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)</span>
</span><span id="AircraftPerformance-394"><a href="#AircraftPerformance-394"><span class="linenos">394</span></a>
</span><span id="AircraftPerformance-395"><a href="#AircraftPerformance-395"><span class="linenos">395</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-396"><a href="#AircraftPerformance-396"><span class="linenos">396</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span>
</span><span id="AircraftPerformance-397"><a href="#AircraftPerformance-397"><span class="linenos">397</span></a>						 <span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)</span>
</span><span id="AircraftPerformance-398"><a href="#AircraftPerformance-398"><span class="linenos">398</span></a>
</span><span id="AircraftPerformance-399"><a href="#AircraftPerformance-399"><span class="linenos">399</span></a>		<span class="k">return</span> <span class="n">m</span>
</span><span id="AircraftPerformance-400"><a href="#AircraftPerformance-400"><span class="linenos">400</span></a>
</span><span id="AircraftPerformance-401"><a href="#AircraftPerformance-401"><span class="linenos">401</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_descent_estimation_from_lnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_0</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span> <span class="n">fl_1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="AircraftPerformance-402"><a href="#AircraftPerformance-402"><span class="linenos">402</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-403"><a href="#AircraftPerformance-403"><span class="linenos">403</span></a><span class="sd">		Compute the trajectory descent trajectory fl_0 and fl_1 considering</span>
</span><span id="AircraftPerformance-404"><a href="#AircraftPerformance-404"><span class="linenos">404</span></a><span class="sd">		that the landing weight is weight_lnd using the decent_perf data.</span>
</span><span id="AircraftPerformance-405"><a href="#AircraftPerformance-405"><span class="linenos">405</span></a>
</span><span id="AircraftPerformance-406"><a href="#AircraftPerformance-406"><span class="linenos">406</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-407"><a href="#AircraftPerformance-407"><span class="linenos">407</span></a><span class="sd">			fl_0: top altitude (ft/100), start of descent</span>
</span><span id="AircraftPerformance-408"><a href="#AircraftPerformance-408"><span class="linenos">408</span></a><span class="sd">			weight_lnd: mass (kg) at fl_0 (landing if fl_1=0)</span>
</span><span id="AircraftPerformance-409"><a href="#AircraftPerformance-409"><span class="linenos">409</span></a><span class="sd">			fl_1: lower altitude (ft/100), end of descent altitude</span>
</span><span id="AircraftPerformance-410"><a href="#AircraftPerformance-410"><span class="linenos">410</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="AircraftPerformance-411"><a href="#AircraftPerformance-411"><span class="linenos">411</span></a><span class="sd">						by default: 10</span>
</span><span id="AircraftPerformance-412"><a href="#AircraftPerformance-412"><span class="linenos">412</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance-413"><a href="#AircraftPerformance-413"><span class="linenos">413</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-414"><a href="#AircraftPerformance-414"><span class="linenos">414</span></a><span class="sd">			trajectory_segment: trajectory_segment with the descent</span>
</span><span id="AircraftPerformance-415"><a href="#AircraftPerformance-415"><span class="linenos">415</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-416"><a href="#AircraftPerformance-416"><span class="linenos">416</span></a>
</span><span id="AircraftPerformance-417"><a href="#AircraftPerformance-417"><span class="linenos">417</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-418"><a href="#AircraftPerformance-418"><span class="linenos">418</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-419"><a href="#AircraftPerformance-419"><span class="linenos">419</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_lnd</span>
</span><span id="AircraftPerformance-420"><a href="#AircraftPerformance-420"><span class="linenos">420</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="AircraftPerformance-421"><a href="#AircraftPerformance-421"><span class="linenos">421</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&lt;</span> <span class="n">fl_0</span><span class="p">:</span>
</span><span id="AircraftPerformance-422"><a href="#AircraftPerformance-422"><span class="linenos">422</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_descent_performances</span><span class="p">(</span><span class="n">fl_act</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance-423"><a href="#AircraftPerformance-423"><span class="linenos">423</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="AircraftPerformance-424"><a href="#AircraftPerformance-424"><span class="linenos">424</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_lnd</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span>
</span><span id="AircraftPerformance-425"><a href="#AircraftPerformance-425"><span class="linenos">425</span></a>													<span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance-426"><a href="#AircraftPerformance-426"><span class="linenos">426</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="AircraftPerformance-427"><a href="#AircraftPerformance-427"><span class="linenos">427</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance-428"><a href="#AircraftPerformance-428"><span class="linenos">428</span></a>
</span><span id="AircraftPerformance-429"><a href="#AircraftPerformance-429"><span class="linenos">429</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="AircraftPerformance-430"><a href="#AircraftPerformance-430"><span class="linenos">430</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="AircraftPerformance-431"><a href="#AircraftPerformance-431"><span class="linenos">431</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance-432"><a href="#AircraftPerformance-432"><span class="linenos">432</span></a>			<span class="n">ddits</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="AircraftPerformance-433"><a href="#AircraftPerformance-433"><span class="linenos">433</span></a>
</span><span id="AircraftPerformance-434"><a href="#AircraftPerformance-434"><span class="linenos">434</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance-435"><a href="#AircraftPerformance-435"><span class="linenos">435</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="n">dfuel</span>
</span><span id="AircraftPerformance-436"><a href="#AircraftPerformance-436"><span class="linenos">436</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddits</span>
</span><span id="AircraftPerformance-437"><a href="#AircraftPerformance-437"><span class="linenos">437</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">+</span> <span class="n">d_fl</span>
</span><span id="AircraftPerformance-438"><a href="#AircraftPerformance-438"><span class="linenos">438</span></a>
</span><span id="AircraftPerformance-439"><a href="#AircraftPerformance-439"><span class="linenos">439</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_lnd</span>
</span><span id="AircraftPerformance-440"><a href="#AircraftPerformance-440"><span class="linenos">440</span></a>
</span><span id="AircraftPerformance-441"><a href="#AircraftPerformance-441"><span class="linenos">441</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span> <span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance-442"><a href="#AircraftPerformance-442"><span class="linenos">442</span></a>
</span><span id="AircraftPerformance-443"><a href="#AircraftPerformance-443"><span class="linenos">443</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance-444"><a href="#AircraftPerformance-444"><span class="linenos">444</span></a>
</span><span id="AircraftPerformance-445"><a href="#AircraftPerformance-445"><span class="linenos">445</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="AircraftPerformance-446"><a href="#AircraftPerformance-446"><span class="linenos">446</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-447"><a href="#AircraftPerformance-447"><span class="linenos">447</span></a><span class="sd">		Compute the trajectory climb trajectory between fl_0 and fl_1 considering</span>
</span><span id="AircraftPerformance-448"><a href="#AircraftPerformance-448"><span class="linenos">448</span></a><span class="sd">		that the weight at fl_1 is weight_1 using the climb_perf data.</span>
</span><span id="AircraftPerformance-449"><a href="#AircraftPerformance-449"><span class="linenos">449</span></a>
</span><span id="AircraftPerformance-450"><a href="#AircraftPerformance-450"><span class="linenos">450</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-451"><a href="#AircraftPerformance-451"><span class="linenos">451</span></a><span class="sd">			fl_1: top altitude (ft/100), end of climb</span>
</span><span id="AircraftPerformance-452"><a href="#AircraftPerformance-452"><span class="linenos">452</span></a><span class="sd">			weight_1: mass (kg) at fl_1</span>
</span><span id="AircraftPerformance-453"><a href="#AircraftPerformance-453"><span class="linenos">453</span></a><span class="sd">			fl_0: lower altitude (ft/100), start of climb altitdue (by default 0)</span>
</span><span id="AircraftPerformance-454"><a href="#AircraftPerformance-454"><span class="linenos">454</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="AircraftPerformance-455"><a href="#AircraftPerformance-455"><span class="linenos">455</span></a><span class="sd">						by default: 10</span>
</span><span id="AircraftPerformance-456"><a href="#AircraftPerformance-456"><span class="linenos">456</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance-457"><a href="#AircraftPerformance-457"><span class="linenos">457</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-458"><a href="#AircraftPerformance-458"><span class="linenos">458</span></a><span class="sd">			trajectory_segment: trajectory_segment with the climb</span>
</span><span id="AircraftPerformance-459"><a href="#AircraftPerformance-459"><span class="linenos">459</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-460"><a href="#AircraftPerformance-460"><span class="linenos">460</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="AircraftPerformance-461"><a href="#AircraftPerformance-461"><span class="linenos">461</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-462"><a href="#AircraftPerformance-462"><span class="linenos">462</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-463"><a href="#AircraftPerformance-463"><span class="linenos">463</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance-464"><a href="#AircraftPerformance-464"><span class="linenos">464</span></a>
</span><span id="AircraftPerformance-465"><a href="#AircraftPerformance-465"><span class="linenos">465</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&gt;</span> <span class="n">fl_0</span><span class="p">:</span>
</span><span id="AircraftPerformance-466"><a href="#AircraftPerformance-466"><span class="linenos">466</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_climb_performances</span><span class="p">(</span><span class="n">fl_act</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance-467"><a href="#AircraftPerformance-467"><span class="linenos">467</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="AircraftPerformance-468"><a href="#AircraftPerformance-468"><span class="linenos">468</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_act</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span>
</span><span id="AircraftPerformance-469"><a href="#AircraftPerformance-469"><span class="linenos">469</span></a>													<span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance-470"><a href="#AircraftPerformance-470"><span class="linenos">470</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="AircraftPerformance-471"><a href="#AircraftPerformance-471"><span class="linenos">471</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance-472"><a href="#AircraftPerformance-472"><span class="linenos">472</span></a>
</span><span id="AircraftPerformance-473"><a href="#AircraftPerformance-473"><span class="linenos">473</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="AircraftPerformance-474"><a href="#AircraftPerformance-474"><span class="linenos">474</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="AircraftPerformance-475"><a href="#AircraftPerformance-475"><span class="linenos">475</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance-476"><a href="#AircraftPerformance-476"><span class="linenos">476</span></a>			<span class="n">ddist</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="AircraftPerformance-477"><a href="#AircraftPerformance-477"><span class="linenos">477</span></a>
</span><span id="AircraftPerformance-478"><a href="#AircraftPerformance-478"><span class="linenos">478</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance-479"><a href="#AircraftPerformance-479"><span class="linenos">479</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddist</span>
</span><span id="AircraftPerformance-480"><a href="#AircraftPerformance-480"><span class="linenos">480</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="n">dfuel</span>
</span><span id="AircraftPerformance-481"><a href="#AircraftPerformance-481"><span class="linenos">481</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">-</span> <span class="n">d_fl</span>
</span><span id="AircraftPerformance-482"><a href="#AircraftPerformance-482"><span class="linenos">482</span></a>
</span><span id="AircraftPerformance-483"><a href="#AircraftPerformance-483"><span class="linenos">483</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance-484"><a href="#AircraftPerformance-484"><span class="linenos">484</span></a>
</span><span id="AircraftPerformance-485"><a href="#AircraftPerformance-485"><span class="linenos">485</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance-486"><a href="#AircraftPerformance-486"><span class="linenos">486</span></a>
</span><span id="AircraftPerformance-487"><a href="#AircraftPerformance-487"><span class="linenos">487</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance-488"><a href="#AircraftPerformance-488"><span class="linenos">488</span></a>
</span><span id="AircraftPerformance-489"><a href="#AircraftPerformance-489"><span class="linenos">489</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_climb_estimation_from_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_0</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="AircraftPerformance-490"><a href="#AircraftPerformance-490"><span class="linenos">490</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-491"><a href="#AircraftPerformance-491"><span class="linenos">491</span></a><span class="sd">		Compute the trajectory climb trajectory between fl_0 and fl_1 considering</span>
</span><span id="AircraftPerformance-492"><a href="#AircraftPerformance-492"><span class="linenos">492</span></a><span class="sd">		that the weight at fl_0 is weight_0 using the climb_perf data.</span>
</span><span id="AircraftPerformance-493"><a href="#AircraftPerformance-493"><span class="linenos">493</span></a>
</span><span id="AircraftPerformance-494"><a href="#AircraftPerformance-494"><span class="linenos">494</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-495"><a href="#AircraftPerformance-495"><span class="linenos">495</span></a><span class="sd">			fl_1: top altitude (ft/100), end of climb</span>
</span><span id="AircraftPerformance-496"><a href="#AircraftPerformance-496"><span class="linenos">496</span></a><span class="sd">			weight_0: mass (kg) at fl_0</span>
</span><span id="AircraftPerformance-497"><a href="#AircraftPerformance-497"><span class="linenos">497</span></a><span class="sd">			fl_0: lower altitude (ft/100), start of climb altitdue (by default 0)</span>
</span><span id="AircraftPerformance-498"><a href="#AircraftPerformance-498"><span class="linenos">498</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="AircraftPerformance-499"><a href="#AircraftPerformance-499"><span class="linenos">499</span></a><span class="sd">						by default: 10</span>
</span><span id="AircraftPerformance-500"><a href="#AircraftPerformance-500"><span class="linenos">500</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance-501"><a href="#AircraftPerformance-501"><span class="linenos">501</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-502"><a href="#AircraftPerformance-502"><span class="linenos">502</span></a><span class="sd">			trajectory_segment: trajectory_segment with the climb</span>
</span><span id="AircraftPerformance-503"><a href="#AircraftPerformance-503"><span class="linenos">503</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-504"><a href="#AircraftPerformance-504"><span class="linenos">504</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_0</span>
</span><span id="AircraftPerformance-505"><a href="#AircraftPerformance-505"><span class="linenos">505</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-506"><a href="#AircraftPerformance-506"><span class="linenos">506</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-507"><a href="#AircraftPerformance-507"><span class="linenos">507</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_0</span>
</span><span id="AircraftPerformance-508"><a href="#AircraftPerformance-508"><span class="linenos">508</span></a>
</span><span id="AircraftPerformance-509"><a href="#AircraftPerformance-509"><span class="linenos">509</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&lt;</span> <span class="n">fl_1</span><span class="p">:</span>
</span><span id="AircraftPerformance-510"><a href="#AircraftPerformance-510"><span class="linenos">510</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_climb_performances</span><span class="p">(</span><span class="n">fl_act</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance-511"><a href="#AircraftPerformance-511"><span class="linenos">511</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="AircraftPerformance-512"><a href="#AircraftPerformance-512"><span class="linenos">512</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance-513"><a href="#AircraftPerformance-513"><span class="linenos">513</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="AircraftPerformance-514"><a href="#AircraftPerformance-514"><span class="linenos">514</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance-515"><a href="#AircraftPerformance-515"><span class="linenos">515</span></a>
</span><span id="AircraftPerformance-516"><a href="#AircraftPerformance-516"><span class="linenos">516</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="AircraftPerformance-517"><a href="#AircraftPerformance-517"><span class="linenos">517</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="AircraftPerformance-518"><a href="#AircraftPerformance-518"><span class="linenos">518</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance-519"><a href="#AircraftPerformance-519"><span class="linenos">519</span></a>			<span class="n">ddist</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="AircraftPerformance-520"><a href="#AircraftPerformance-520"><span class="linenos">520</span></a>
</span><span id="AircraftPerformance-521"><a href="#AircraftPerformance-521"><span class="linenos">521</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance-522"><a href="#AircraftPerformance-522"><span class="linenos">522</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddist</span>
</span><span id="AircraftPerformance-523"><a href="#AircraftPerformance-523"><span class="linenos">523</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">dfuel</span>
</span><span id="AircraftPerformance-524"><a href="#AircraftPerformance-524"><span class="linenos">524</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">+</span> <span class="n">d_fl</span>
</span><span id="AircraftPerformance-525"><a href="#AircraftPerformance-525"><span class="linenos">525</span></a>
</span><span id="AircraftPerformance-526"><a href="#AircraftPerformance-526"><span class="linenos">526</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight_0</span> <span class="o">-</span> <span class="n">weight</span>
</span><span id="AircraftPerformance-527"><a href="#AircraftPerformance-527"><span class="linenos">527</span></a>
</span><span id="AircraftPerformance-528"><a href="#AircraftPerformance-528"><span class="linenos">528</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight_0</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance-529"><a href="#AircraftPerformance-529"><span class="linenos">529</span></a>
</span><span id="AircraftPerformance-530"><a href="#AircraftPerformance-530"><span class="linenos">530</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance-531"><a href="#AircraftPerformance-531"><span class="linenos">531</span></a>
</span><span id="AircraftPerformance-532"><a href="#AircraftPerformance-532"><span class="linenos">532</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="AircraftPerformance-533"><a href="#AircraftPerformance-533"><span class="linenos">533</span></a>											 <span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">min_d_dist</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="AircraftPerformance-534"><a href="#AircraftPerformance-534"><span class="linenos">534</span></a>											 <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance-535"><a href="#AircraftPerformance-535"><span class="linenos">535</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-536"><a href="#AircraftPerformance-536"><span class="linenos">536</span></a><span class="sd">		Compute the trajectory cruise for a given cruise_distance and fl</span>
</span><span id="AircraftPerformance-537"><a href="#AircraftPerformance-537"><span class="linenos">537</span></a><span class="sd">		ending the cruise at weight_1</span>
</span><span id="AircraftPerformance-538"><a href="#AircraftPerformance-538"><span class="linenos">538</span></a>
</span><span id="AircraftPerformance-539"><a href="#AircraftPerformance-539"><span class="linenos">539</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-540"><a href="#AircraftPerformance-540"><span class="linenos">540</span></a><span class="sd">			fl_cruise (ft/100), altitude of cruise</span>
</span><span id="AircraftPerformance-541"><a href="#AircraftPerformance-541"><span class="linenos">541</span></a><span class="sd">			weight_1: mass (kg) at end of cruise</span>
</span><span id="AircraftPerformance-542"><a href="#AircraftPerformance-542"><span class="linenos">542</span></a><span class="sd">			cruise_distance: (nm) distance of the cruise</span>
</span><span id="AircraftPerformance-543"><a href="#AircraftPerformance-543"><span class="linenos">543</span></a>
</span><span id="AircraftPerformance-544"><a href="#AircraftPerformance-544"><span class="linenos">544</span></a><span class="sd">			use_mref: default False: If true then m_nom is used as cruising speed</span>
</span><span id="AircraftPerformance-545"><a href="#AircraftPerformance-545"><span class="linenos">545</span></a><span class="sd">												True: If cruise_fl &lt; 360 m cruise is estimated as</span>
</span><span id="AircraftPerformance-546"><a href="#AircraftPerformance-546"><span class="linenos">546</span></a><span class="sd">															interpolate_cruise_nominal_mach with weight_1</span>
</span><span id="AircraftPerformance-547"><a href="#AircraftPerformance-547"><span class="linenos">547</span></a><span class="sd">			max_steps: default 10000: maximum number of steps used to estimate the cruise</span>
</span><span id="AircraftPerformance-548"><a href="#AircraftPerformance-548"><span class="linenos">548</span></a><span class="sd">																(maximum number of divisions of the cruise in delta distance)</span>
</span><span id="AircraftPerformance-549"><a href="#AircraftPerformance-549"><span class="linenos">549</span></a><span class="sd">			min_d_dist: (nm) default 1: minimum distance of a step in delta distance</span>
</span><span id="AircraftPerformance-550"><a href="#AircraftPerformance-550"><span class="linenos">550</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance-551"><a href="#AircraftPerformance-551"><span class="linenos">551</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-552"><a href="#AircraftPerformance-552"><span class="linenos">552</span></a><span class="sd">			trajectory_segment: trajectory_segment with the cruise</span>
</span><span id="AircraftPerformance-553"><a href="#AircraftPerformance-553"><span class="linenos">553</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-554"><a href="#AircraftPerformance-554"><span class="linenos">554</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance-555"><a href="#AircraftPerformance-555"><span class="linenos">555</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">min_d_dist</span><span class="p">),</span> <span class="n">max_steps</span><span class="p">))</span>
</span><span id="AircraftPerformance-556"><a href="#AircraftPerformance-556"><span class="linenos">556</span></a>		<span class="n">d_dist</span> <span class="o">=</span> <span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="AircraftPerformance-557"><a href="#AircraftPerformance-557"><span class="linenos">557</span></a>
</span><span id="AircraftPerformance-558"><a href="#AircraftPerformance-558"><span class="linenos">558</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-559"><a href="#AircraftPerformance-559"><span class="linenos">559</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-560"><a href="#AircraftPerformance-560"><span class="linenos">560</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="AircraftPerformance-561"><a href="#AircraftPerformance-561"><span class="linenos">561</span></a>
</span><span id="AircraftPerformance-562"><a href="#AircraftPerformance-562"><span class="linenos">562</span></a>		<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_cruise</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="AircraftPerformance-563"><a href="#AircraftPerformance-563"><span class="linenos">563</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-564"><a href="#AircraftPerformance-564"><span class="linenos">564</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance-565"><a href="#AircraftPerformance-565"><span class="linenos">565</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="AircraftPerformance-566"><a href="#AircraftPerformance-566"><span class="linenos">566</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-567"><a href="#AircraftPerformance-567"><span class="linenos">567</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance-568"><a href="#AircraftPerformance-568"><span class="linenos">568</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-569"><a href="#AircraftPerformance-569"><span class="linenos">569</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance-570"><a href="#AircraftPerformance-570"><span class="linenos">570</span></a>
</span><span id="AircraftPerformance-571"><a href="#AircraftPerformance-571"><span class="linenos">571</span></a>		<span class="k">while</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">error</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="AircraftPerformance-572"><a href="#AircraftPerformance-572"><span class="linenos">572</span></a>
</span><span id="AircraftPerformance-573"><a href="#AircraftPerformance-573"><span class="linenos">573</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance-574"><a href="#AircraftPerformance-574"><span class="linenos">574</span></a>			<span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="n">d_dist</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="AircraftPerformance-575"><a href="#AircraftPerformance-575"><span class="linenos">575</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="p">(</span><span class="n">ff</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
</span><span id="AircraftPerformance-576"><a href="#AircraftPerformance-576"><span class="linenos">576</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">t</span>
</span><span id="AircraftPerformance-577"><a href="#AircraftPerformance-577"><span class="linenos">577</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">d_dist</span>
</span><span id="AircraftPerformance-578"><a href="#AircraftPerformance-578"><span class="linenos">578</span></a>			<span class="k">if</span> <span class="n">weight</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">:</span>
</span><span id="AircraftPerformance-579"><a href="#AircraftPerformance-579"><span class="linenos">579</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span>
</span><span id="AircraftPerformance-580"><a href="#AircraftPerformance-580"><span class="linenos">580</span></a>													<span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="AircraftPerformance-581"><a href="#AircraftPerformance-581"><span class="linenos">581</span></a>													<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-582"><a href="#AircraftPerformance-582"><span class="linenos">582</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="AircraftPerformance-583"><a href="#AircraftPerformance-583"><span class="linenos">583</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance-584"><a href="#AircraftPerformance-584"><span class="linenos">584</span></a>
</span><span id="AircraftPerformance-585"><a href="#AircraftPerformance-585"><span class="linenos">585</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance-586"><a href="#AircraftPerformance-586"><span class="linenos">586</span></a>
</span><span id="AircraftPerformance-587"><a href="#AircraftPerformance-587"><span class="linenos">587</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span>
</span><span id="AircraftPerformance-588"><a href="#AircraftPerformance-588"><span class="linenos">588</span></a>											<span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span> <span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-589"><a href="#AircraftPerformance-589"><span class="linenos">589</span></a>
</span><span id="AircraftPerformance-590"><a href="#AircraftPerformance-590"><span class="linenos">590</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance-591"><a href="#AircraftPerformance-591"><span class="linenos">591</span></a>
</span><span id="AircraftPerformance-592"><a href="#AircraftPerformance-592"><span class="linenos">592</span></a>	<span class="k">def</span> <span class="nf">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="AircraftPerformance-593"><a href="#AircraftPerformance-593"><span class="linenos">593</span></a>													<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">min_d_dist</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="AircraftPerformance-594"><a href="#AircraftPerformance-594"><span class="linenos">594</span></a>													<span class="n">climb_step</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">min_dist_remaining_fl</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
</span><span id="AircraftPerformance-595"><a href="#AircraftPerformance-595"><span class="linenos">595</span></a>													<span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance-596"><a href="#AircraftPerformance-596"><span class="linenos">596</span></a>
</span><span id="AircraftPerformance-597"><a href="#AircraftPerformance-597"><span class="linenos">597</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-598"><a href="#AircraftPerformance-598"><span class="linenos">598</span></a><span class="sd">		Compute the trajectory cruise for a given cruise_distance with possible</span>
</span><span id="AircraftPerformance-599"><a href="#AircraftPerformance-599"><span class="linenos">599</span></a><span class="sd">		fl changes. In this case not a trajectory_segment but a full trajectory</span>
</span><span id="AircraftPerformance-600"><a href="#AircraftPerformance-600"><span class="linenos">600</span></a><span class="sd">		is returned as the cruise might be composed of several trajectory_segments.</span>
</span><span id="AircraftPerformance-601"><a href="#AircraftPerformance-601"><span class="linenos">601</span></a><span class="sd">		The cruise is estimated considereng that the final fl used is fl_1 and </span>
</span><span id="AircraftPerformance-602"><a href="#AircraftPerformance-602"><span class="linenos">602</span></a><span class="sd">		the weight at the end of cruise is weight_1</span>
</span><span id="AircraftPerformance-603"><a href="#AircraftPerformance-603"><span class="linenos">603</span></a>
</span><span id="AircraftPerformance-604"><a href="#AircraftPerformance-604"><span class="linenos">604</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-605"><a href="#AircraftPerformance-605"><span class="linenos">605</span></a><span class="sd">			fl_1: (ft/100), altitude at the end of cruise</span>
</span><span id="AircraftPerformance-606"><a href="#AircraftPerformance-606"><span class="linenos">606</span></a><span class="sd">			weight_1: mass (kg) at end of cruise</span>
</span><span id="AircraftPerformance-607"><a href="#AircraftPerformance-607"><span class="linenos">607</span></a><span class="sd">			cruise_distance: (nm) distance of the cruise</span>
</span><span id="AircraftPerformance-608"><a href="#AircraftPerformance-608"><span class="linenos">608</span></a>
</span><span id="AircraftPerformance-609"><a href="#AircraftPerformance-609"><span class="linenos">609</span></a><span class="sd">			use_mref: default False: If true then m_nom is used as cruising speed</span>
</span><span id="AircraftPerformance-610"><a href="#AircraftPerformance-610"><span class="linenos">610</span></a><span class="sd">												True: If cruise_fl &lt; 360 m cruise is estimated as</span>
</span><span id="AircraftPerformance-611"><a href="#AircraftPerformance-611"><span class="linenos">611</span></a><span class="sd">															interpolate_cruise_nominal_mach with weight_1</span>
</span><span id="AircraftPerformance-612"><a href="#AircraftPerformance-612"><span class="linenos">612</span></a><span class="sd">															M will be reassessed everytime a climb step is</span>
</span><span id="AircraftPerformance-613"><a href="#AircraftPerformance-613"><span class="linenos">613</span></a><span class="sd">															performed.</span>
</span><span id="AircraftPerformance-614"><a href="#AircraftPerformance-614"><span class="linenos">614</span></a><span class="sd">			max_steps: default 10000: maximum number of steps used to estimate the cruise</span>
</span><span id="AircraftPerformance-615"><a href="#AircraftPerformance-615"><span class="linenos">615</span></a><span class="sd">																(maximum number of divisions of the cruise in delta distance)</span>
</span><span id="AircraftPerformance-616"><a href="#AircraftPerformance-616"><span class="linenos">616</span></a><span class="sd">			min_d_dist: (nm) default 1: minimum distance of a step in delta distance</span>
</span><span id="AircraftPerformance-617"><a href="#AircraftPerformance-617"><span class="linenos">617</span></a><span class="sd">			climb_step: (ft/100) default 20, altitude of the climb steps used</span>
</span><span id="AircraftPerformance-618"><a href="#AircraftPerformance-618"><span class="linenos">618</span></a><span class="sd">			max_climbs: default 1: number of climbs considered</span>
</span><span id="AircraftPerformance-619"><a href="#AircraftPerformance-619"><span class="linenos">619</span></a><span class="sd">			min_dist_remaining_fl: (nm) default 50, minimum cruise left before considering a climb step</span>
</span><span id="AircraftPerformance-620"><a href="#AircraftPerformance-620"><span class="linenos">620</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance-621"><a href="#AircraftPerformance-621"><span class="linenos">621</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-622"><a href="#AircraftPerformance-622"><span class="linenos">622</span></a><span class="sd">			trajectory: trajectory containing the trajectory_segment that define the cruise</span>
</span><span id="AircraftPerformance-623"><a href="#AircraftPerformance-623"><span class="linenos">623</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-624"><a href="#AircraftPerformance-624"><span class="linenos">624</span></a>
</span><span id="AircraftPerformance-625"><a href="#AircraftPerformance-625"><span class="linenos">625</span></a>		<span class="n">fl_lower</span> <span class="o">=</span> <span class="n">fl_1</span> <span class="o">-</span> <span class="n">climb_step</span>
</span><span id="AircraftPerformance-626"><a href="#AircraftPerformance-626"><span class="linenos">626</span></a>		<span class="n">fl_used</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="AircraftPerformance-627"><a href="#AircraftPerformance-627"><span class="linenos">627</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance-628"><a href="#AircraftPerformance-628"><span class="linenos">628</span></a>		<span class="n">traj</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">Trajectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bada_version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">)</span>
</span><span id="AircraftPerformance-629"><a href="#AircraftPerformance-629"><span class="linenos">629</span></a>
</span><span id="AircraftPerformance-630"><a href="#AircraftPerformance-630"><span class="linenos">630</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">min_d_dist</span><span class="p">),</span> <span class="n">max_steps</span><span class="p">))</span>
</span><span id="AircraftPerformance-631"><a href="#AircraftPerformance-631"><span class="linenos">631</span></a>		<span class="n">d_dist</span> <span class="o">=</span> <span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="AircraftPerformance-632"><a href="#AircraftPerformance-632"><span class="linenos">632</span></a>
</span><span id="AircraftPerformance-633"><a href="#AircraftPerformance-633"><span class="linenos">633</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="AircraftPerformance-634"><a href="#AircraftPerformance-634"><span class="linenos">634</span></a>
</span><span id="AircraftPerformance-635"><a href="#AircraftPerformance-635"><span class="linenos">635</span></a>		<span class="n">fuel_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-636"><a href="#AircraftPerformance-636"><span class="linenos">636</span></a>		<span class="n">time_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-637"><a href="#AircraftPerformance-637"><span class="linenos">637</span></a>		<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-638"><a href="#AircraftPerformance-638"><span class="linenos">638</span></a>
</span><span id="AircraftPerformance-639"><a href="#AircraftPerformance-639"><span class="linenos">639</span></a>		<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_used</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="AircraftPerformance-640"><a href="#AircraftPerformance-640"><span class="linenos">640</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-641"><a href="#AircraftPerformance-641"><span class="linenos">641</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance-642"><a href="#AircraftPerformance-642"><span class="linenos">642</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="AircraftPerformance-643"><a href="#AircraftPerformance-643"><span class="linenos">643</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-644"><a href="#AircraftPerformance-644"><span class="linenos">644</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance-645"><a href="#AircraftPerformance-645"><span class="linenos">645</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-646"><a href="#AircraftPerformance-646"><span class="linenos">646</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance-647"><a href="#AircraftPerformance-647"><span class="linenos">647</span></a>
</span><span id="AircraftPerformance-648"><a href="#AircraftPerformance-648"><span class="linenos">648</span></a>		<span class="k">if</span> <span class="n">cruise_distance</span> <span class="o">&lt;</span> <span class="n">error</span><span class="p">:</span>
</span><span id="AircraftPerformance-649"><a href="#AircraftPerformance-649"><span class="linenos">649</span></a>			<span class="c1"># The segment to compute is smaller than 0.1 nm. Just compute the time, fuel, etc. it takes</span>
</span><span id="AircraftPerformance-650"><a href="#AircraftPerformance-650"><span class="linenos">650</span></a>			<span class="c1"># to cover that distance and return it.</span>
</span><span id="AircraftPerformance-651"><a href="#AircraftPerformance-651"><span class="linenos">651</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance-652"><a href="#AircraftPerformance-652"><span class="linenos">652</span></a>			<span class="n">time_step</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="AircraftPerformance-653"><a href="#AircraftPerformance-653"><span class="linenos">653</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">ff</span> <span class="o">*</span> <span class="n">time_step</span>
</span><span id="AircraftPerformance-654"><a href="#AircraftPerformance-654"><span class="linenos">654</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span> <span class="o">+</span> <span class="n">fuel_segment</span>
</span><span id="AircraftPerformance-655"><a href="#AircraftPerformance-655"><span class="linenos">655</span></a>
</span><span id="AircraftPerformance-656"><a href="#AircraftPerformance-656"><span class="linenos">656</span></a>			<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="AircraftPerformance-657"><a href="#AircraftPerformance-657"><span class="linenos">657</span></a>												<span class="n">time_step</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="AircraftPerformance-658"><a href="#AircraftPerformance-658"><span class="linenos">658</span></a>												<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-659"><a href="#AircraftPerformance-659"><span class="linenos">659</span></a>
</span><span id="AircraftPerformance-660"><a href="#AircraftPerformance-660"><span class="linenos">660</span></a>			<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-661"><a href="#AircraftPerformance-661"><span class="linenos">661</span></a>
</span><span id="AircraftPerformance-662"><a href="#AircraftPerformance-662"><span class="linenos">662</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance-663"><a href="#AircraftPerformance-663"><span class="linenos">663</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-664"><a href="#AircraftPerformance-664"><span class="linenos">664</span></a>
</span><span id="AircraftPerformance-665"><a href="#AircraftPerformance-665"><span class="linenos">665</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-666"><a href="#AircraftPerformance-666"><span class="linenos">666</span></a>
</span><span id="AircraftPerformance-667"><a href="#AircraftPerformance-667"><span class="linenos">667</span></a>		<span class="n">sr</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="AircraftPerformance-668"><a href="#AircraftPerformance-668"><span class="linenos">668</span></a>		<span class="n">sr_lower</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-669"><a href="#AircraftPerformance-669"><span class="linenos">669</span></a>
</span><span id="AircraftPerformance-670"><a href="#AircraftPerformance-670"><span class="linenos">670</span></a>		<span class="k">while</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">+</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="AircraftPerformance-671"><a href="#AircraftPerformance-671"><span class="linenos">671</span></a>
</span><span id="AircraftPerformance-672"><a href="#AircraftPerformance-672"><span class="linenos">672</span></a>			<span class="k">if</span> <span class="n">max_climbs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-673"><a href="#AircraftPerformance-673"><span class="linenos">673</span></a>				<span class="n">sr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance-674"><a href="#AircraftPerformance-674"><span class="linenos">674</span></a>				<span class="n">sr_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_lower</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance-675"><a href="#AircraftPerformance-675"><span class="linenos">675</span></a>
</span><span id="AircraftPerformance-676"><a href="#AircraftPerformance-676"><span class="linenos">676</span></a>			<span class="k">while</span> <span class="p">((</span><span class="n">max_climbs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="AircraftPerformance-677"><a href="#AircraftPerformance-677"><span class="linenos">677</span></a>				   <span class="p">((</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">-</span> <span class="n">dist_cruise_segment</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">min_dist_remaining_fl</span><span class="p">)</span>
</span><span id="AircraftPerformance-678"><a href="#AircraftPerformance-678"><span class="linenos">678</span></a>				   <span class="ow">and</span> <span class="p">(</span><span class="n">sr_lower</span> <span class="o">&gt;=</span> <span class="n">sr</span><span class="p">)):</span>
</span><span id="AircraftPerformance-679"><a href="#AircraftPerformance-679"><span class="linenos">679</span></a>
</span><span id="AircraftPerformance-680"><a href="#AircraftPerformance-680"><span class="linenos">680</span></a>				<span class="c1"># Do a climb from low to used</span>
</span><span id="AircraftPerformance-681"><a href="#AircraftPerformance-681"><span class="linenos">681</span></a>				<span class="k">if</span> <span class="p">(</span><span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-682"><a href="#AircraftPerformance-682"><span class="linenos">682</span></a>					<span class="c1"># We are descending so we are too high</span>
</span><span id="AircraftPerformance-683"><a href="#AircraftPerformance-683"><span class="linenos">683</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="AircraftPerformance-684"><a href="#AircraftPerformance-684"><span class="linenos">684</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-685"><a href="#AircraftPerformance-685"><span class="linenos">685</span></a>
</span><span id="AircraftPerformance-686"><a href="#AircraftPerformance-686"><span class="linenos">686</span></a>				<span class="k">if</span> <span class="n">dist_cruise_segment</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-687"><a href="#AircraftPerformance-687"><span class="linenos">687</span></a>					<span class="c1"># Save previous cruise segment</span>
</span><span id="AircraftPerformance-688"><a href="#AircraftPerformance-688"><span class="linenos">688</span></a>
</span><span id="AircraftPerformance-689"><a href="#AircraftPerformance-689"><span class="linenos">689</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance-690"><a href="#AircraftPerformance-690"><span class="linenos">690</span></a>					<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span> <span class="n">time_segment</span><span class="p">,</span>
</span><span id="AircraftPerformance-691"><a href="#AircraftPerformance-691"><span class="linenos">691</span></a>														<span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span> <span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-692"><a href="#AircraftPerformance-692"><span class="linenos">692</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance-693"><a href="#AircraftPerformance-693"><span class="linenos">693</span></a>
</span><span id="AircraftPerformance-694"><a href="#AircraftPerformance-694"><span class="linenos">694</span></a>					<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-695"><a href="#AircraftPerformance-695"><span class="linenos">695</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-696"><a href="#AircraftPerformance-696"><span class="linenos">696</span></a>					<span class="n">time_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-697"><a href="#AircraftPerformance-697"><span class="linenos">697</span></a>
</span><span id="AircraftPerformance-698"><a href="#AircraftPerformance-698"><span class="linenos">698</span></a>				<span class="n">c_segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="n">fl_lower</span><span class="p">)</span>
</span><span id="AircraftPerformance-699"><a href="#AircraftPerformance-699"><span class="linenos">699</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">c_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance-700"><a href="#AircraftPerformance-700"><span class="linenos">700</span></a>				<span class="k">if</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-701"><a href="#AircraftPerformance-701"><span class="linenos">701</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="AircraftPerformance-702"><a href="#AircraftPerformance-702"><span class="linenos">702</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-703"><a href="#AircraftPerformance-703"><span class="linenos">703</span></a>
</span><span id="AircraftPerformance-704"><a href="#AircraftPerformance-704"><span class="linenos">704</span></a>				<span class="n">fl_used</span> <span class="o">=</span> <span class="n">fl_lower</span>
</span><span id="AircraftPerformance-705"><a href="#AircraftPerformance-705"><span class="linenos">705</span></a>				<span class="n">fl_lower</span> <span class="o">=</span> <span class="n">fl_used</span> <span class="o">-</span> <span class="n">climb_step</span>
</span><span id="AircraftPerformance-706"><a href="#AircraftPerformance-706"><span class="linenos">706</span></a>				<span class="n">weight</span> <span class="o">=</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance-707"><a href="#AircraftPerformance-707"><span class="linenos">707</span></a>				<span class="n">weight_1</span> <span class="o">=</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance-708"><a href="#AircraftPerformance-708"><span class="linenos">708</span></a>				<span class="n">n_remaining</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">/</span> <span class="n">d_dist</span>
</span><span id="AircraftPerformance-709"><a href="#AircraftPerformance-709"><span class="linenos">709</span></a>				<span class="n">d_dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_remaining</span>
</span><span id="AircraftPerformance-710"><a href="#AircraftPerformance-710"><span class="linenos">710</span></a>
</span><span id="AircraftPerformance-711"><a href="#AircraftPerformance-711"><span class="linenos">711</span></a>				<span class="n">max_climbs</span> <span class="o">=</span> <span class="n">max_climbs</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="AircraftPerformance-712"><a href="#AircraftPerformance-712"><span class="linenos">712</span></a>
</span><span id="AircraftPerformance-713"><a href="#AircraftPerformance-713"><span class="linenos">713</span></a>				<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_used</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="AircraftPerformance-714"><a href="#AircraftPerformance-714"><span class="linenos">714</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-715"><a href="#AircraftPerformance-715"><span class="linenos">715</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance-716"><a href="#AircraftPerformance-716"><span class="linenos">716</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="AircraftPerformance-717"><a href="#AircraftPerformance-717"><span class="linenos">717</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-718"><a href="#AircraftPerformance-718"><span class="linenos">718</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance-719"><a href="#AircraftPerformance-719"><span class="linenos">719</span></a>
</span><span id="AircraftPerformance-720"><a href="#AircraftPerformance-720"><span class="linenos">720</span></a>				<span class="n">sr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance-721"><a href="#AircraftPerformance-721"><span class="linenos">721</span></a>				<span class="n">sr_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_lower</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance-722"><a href="#AircraftPerformance-722"><span class="linenos">722</span></a>
</span><span id="AircraftPerformance-723"><a href="#AircraftPerformance-723"><span class="linenos">723</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">+</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="AircraftPerformance-724"><a href="#AircraftPerformance-724"><span class="linenos">724</span></a>				<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance-725"><a href="#AircraftPerformance-725"><span class="linenos">725</span></a>				<span class="n">time_step</span> <span class="o">=</span> <span class="p">(</span><span class="n">d_dist</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="AircraftPerformance-726"><a href="#AircraftPerformance-726"><span class="linenos">726</span></a>				<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="p">(</span><span class="n">ff</span> <span class="o">*</span> <span class="n">time_step</span><span class="p">)</span>
</span><span id="AircraftPerformance-727"><a href="#AircraftPerformance-727"><span class="linenos">727</span></a>				<span class="n">time_segment</span> <span class="o">=</span> <span class="n">time_segment</span> <span class="o">+</span> <span class="n">time_step</span>
</span><span id="AircraftPerformance-728"><a href="#AircraftPerformance-728"><span class="linenos">728</span></a>				<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">d_dist</span>
</span><span id="AircraftPerformance-729"><a href="#AircraftPerformance-729"><span class="linenos">729</span></a>
</span><span id="AircraftPerformance-730"><a href="#AircraftPerformance-730"><span class="linenos">730</span></a>				<span class="k">if</span> <span class="n">weight</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">:</span>
</span><span id="AircraftPerformance-731"><a href="#AircraftPerformance-731"><span class="linenos">731</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance-732"><a href="#AircraftPerformance-732"><span class="linenos">732</span></a>					<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span>
</span><span id="AircraftPerformance-733"><a href="#AircraftPerformance-733"><span class="linenos">733</span></a>														<span class="n">time_segment</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="AircraftPerformance-734"><a href="#AircraftPerformance-734"><span class="linenos">734</span></a>														<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-735"><a href="#AircraftPerformance-735"><span class="linenos">735</span></a>					<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="AircraftPerformance-736"><a href="#AircraftPerformance-736"><span class="linenos">736</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance-737"><a href="#AircraftPerformance-737"><span class="linenos">737</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="AircraftPerformance-738"><a href="#AircraftPerformance-738"><span class="linenos">738</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-739"><a href="#AircraftPerformance-739"><span class="linenos">739</span></a>
</span><span id="AircraftPerformance-740"><a href="#AircraftPerformance-740"><span class="linenos">740</span></a>		<span class="k">if</span> <span class="n">dist_cruise_segment</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-741"><a href="#AircraftPerformance-741"><span class="linenos">741</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance-742"><a href="#AircraftPerformance-742"><span class="linenos">742</span></a>			<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span>
</span><span id="AircraftPerformance-743"><a href="#AircraftPerformance-743"><span class="linenos">743</span></a>												<span class="n">time_segment</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="AircraftPerformance-744"><a href="#AircraftPerformance-744"><span class="linenos">744</span></a>												<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-745"><a href="#AircraftPerformance-745"><span class="linenos">745</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance-746"><a href="#AircraftPerformance-746"><span class="linenos">746</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-747"><a href="#AircraftPerformance-747"><span class="linenos">747</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-748"><a href="#AircraftPerformance-748"><span class="linenos">748</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">8</span>
</span><span id="AircraftPerformance-749"><a href="#AircraftPerformance-749"><span class="linenos">749</span></a>
</span><span id="AircraftPerformance-750"><a href="#AircraftPerformance-750"><span class="linenos">750</span></a>		<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-751"><a href="#AircraftPerformance-751"><span class="linenos">751</span></a>
</span><span id="AircraftPerformance-752"><a href="#AircraftPerformance-752"><span class="linenos">752</span></a>	<span class="nd">@staticmethod</span>
</span><span id="AircraftPerformance-753"><a href="#AircraftPerformance-753"><span class="linenos">753</span></a>	<span class="k">def</span> <span class="nf">error_extra_cruise</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">distance_to_cover</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance-754"><a href="#AircraftPerformance-754"><span class="linenos">754</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-755"><a href="#AircraftPerformance-755"><span class="linenos">755</span></a><span class="sd">		Method used to estimate the error on total distance done if x nm</span>
</span><span id="AircraftPerformance-756"><a href="#AircraftPerformance-756"><span class="linenos">756</span></a><span class="sd">		of cruise are done followed by a descent to FL0 with respect to the</span>
</span><span id="AircraftPerformance-757"><a href="#AircraftPerformance-757"><span class="linenos">757</span></a><span class="sd">		distance_to_cover available.</span>
</span><span id="AircraftPerformance-758"><a href="#AircraftPerformance-758"><span class="linenos">758</span></a><span class="sd">		Function used to minimize the error whe optimising the value of x</span>
</span><span id="AircraftPerformance-759"><a href="#AircraftPerformance-759"><span class="linenos">759</span></a><span class="sd">		using minimize_scalar</span>
</span><span id="AircraftPerformance-760"><a href="#AircraftPerformance-760"><span class="linenos">760</span></a>
</span><span id="AircraftPerformance-761"><a href="#AircraftPerformance-761"><span class="linenos">761</span></a><span class="sd">						 x</span>
</span><span id="AircraftPerformance-762"><a href="#AircraftPerformance-762"><span class="linenos">762</span></a><span class="sd">				. - - - -</span>
</span><span id="AircraftPerformance-763"><a href="#AircraftPerformance-763"><span class="linenos">763</span></a><span class="sd">			 .</span>
</span><span id="AircraftPerformance-764"><a href="#AircraftPerformance-764"><span class="linenos">764</span></a><span class="sd">			.</span>
</span><span id="AircraftPerformance-765"><a href="#AircraftPerformance-765"><span class="linenos">765</span></a><span class="sd">		 .</span>
</span><span id="AircraftPerformance-766"><a href="#AircraftPerformance-766"><span class="linenos">766</span></a><span class="sd">			 cd</span>
</span><span id="AircraftPerformance-767"><a href="#AircraftPerformance-767"><span class="linenos">767</span></a><span class="sd">		</span>
</span><span id="AircraftPerformance-768"><a href="#AircraftPerformance-768"><span class="linenos">768</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-769"><a href="#AircraftPerformance-769"><span class="linenos">769</span></a><span class="sd">			x: (nm) distance of cruise</span>
</span><span id="AircraftPerformance-770"><a href="#AircraftPerformance-770"><span class="linenos">770</span></a><span class="sd">			a: AircraftPerformance instance</span>
</span><span id="AircraftPerformance-771"><a href="#AircraftPerformance-771"><span class="linenos">771</span></a><span class="sd">			weight_1: (kg) weight at end of climb + cruise</span>
</span><span id="AircraftPerformance-772"><a href="#AircraftPerformance-772"><span class="linenos">772</span></a><span class="sd">			distance_to_cover: (nm) distance that needs to be covered by the climb and the cruise</span>
</span><span id="AircraftPerformance-773"><a href="#AircraftPerformance-773"><span class="linenos">773</span></a><span class="sd">			fl_cruise: (ft/100) altitude of the cruise</span>
</span><span id="AircraftPerformance-774"><a href="#AircraftPerformance-774"><span class="linenos">774</span></a><span class="sd">			m: (Mach) speed of the cruise</span>
</span><span id="AircraftPerformance-775"><a href="#AircraftPerformance-775"><span class="linenos">775</span></a>
</span><span id="AircraftPerformance-776"><a href="#AircraftPerformance-776"><span class="linenos">776</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-777"><a href="#AircraftPerformance-777"><span class="linenos">777</span></a><span class="sd">			error: (nm) abs(distance_to_cover - (x+cd))</span>
</span><span id="AircraftPerformance-778"><a href="#AircraftPerformance-778"><span class="linenos">778</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-779"><a href="#AircraftPerformance-779"><span class="linenos">779</span></a>
</span><span id="AircraftPerformance-780"><a href="#AircraftPerformance-780"><span class="linenos">780</span></a>		<span class="n">ce</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-781"><a href="#AircraftPerformance-781"><span class="linenos">781</span></a>		<span class="k">if</span> <span class="n">ce</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-782"><a href="#AircraftPerformance-782"><span class="linenos">782</span></a>			<span class="k">return</span> <span class="mi">100000</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="n">ce</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
</span><span id="AircraftPerformance-783"><a href="#AircraftPerformance-783"><span class="linenos">783</span></a>
</span><span id="AircraftPerformance-784"><a href="#AircraftPerformance-784"><span class="linenos">784</span></a>		<span class="c1"># weight = weight_1 + ce.fuel</span>
</span><span id="AircraftPerformance-785"><a href="#AircraftPerformance-785"><span class="linenos">785</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance-786"><a href="#AircraftPerformance-786"><span class="linenos">786</span></a>
</span><span id="AircraftPerformance-787"><a href="#AircraftPerformance-787"><span class="linenos">787</span></a>		<span class="n">climb_est</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance-788"><a href="#AircraftPerformance-788"><span class="linenos">788</span></a>		<span class="k">if</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-789"><a href="#AircraftPerformance-789"><span class="linenos">789</span></a>			<span class="k">return</span> <span class="mi">10000</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
</span><span id="AircraftPerformance-790"><a href="#AircraftPerformance-790"><span class="linenos">790</span></a>
</span><span id="AircraftPerformance-791"><a href="#AircraftPerformance-791"><span class="linenos">791</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
</span><span id="AircraftPerformance-792"><a href="#AircraftPerformance-792"><span class="linenos">792</span></a>
</span><span id="AircraftPerformance-793"><a href="#AircraftPerformance-793"><span class="linenos">793</span></a>		<span class="k">return</span> <span class="n">error</span>
</span><span id="AircraftPerformance-794"><a href="#AircraftPerformance-794"><span class="linenos">794</span></a>
</span><span id="AircraftPerformance-795"><a href="#AircraftPerformance-795"><span class="linenos">795</span></a>	<span class="nd">@staticmethod</span>
</span><span id="AircraftPerformance-796"><a href="#AircraftPerformance-796"><span class="linenos">796</span></a>	<span class="k">def</span> <span class="nf">error_climb_weight_from_toc</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">fl</span><span class="p">):</span>
</span><span id="AircraftPerformance-797"><a href="#AircraftPerformance-797"><span class="linenos">797</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-798"><a href="#AircraftPerformance-798"><span class="linenos">798</span></a><span class="sd">		Method used to estimate the error on distance used for climb</span>
</span><span id="AircraftPerformance-799"><a href="#AircraftPerformance-799"><span class="linenos">799</span></a><span class="sd">		if a given weight is given.</span>
</span><span id="AircraftPerformance-800"><a href="#AircraftPerformance-800"><span class="linenos">800</span></a><span class="sd">		The idea is to try to estimate using minimize_scalar which</span>
</span><span id="AircraftPerformance-801"><a href="#AircraftPerformance-801"><span class="linenos">801</span></a><span class="sd">		is the weigh that provides the maximum distance of climb for a</span>
</span><span id="AircraftPerformance-802"><a href="#AircraftPerformance-802"><span class="linenos">802</span></a><span class="sd">		given aircraft type. For this reason the function returns</span>
</span><span id="AircraftPerformance-803"><a href="#AircraftPerformance-803"><span class="linenos">803</span></a><span class="sd">		99999 * cts.fl_0 if the flight does not make it to the ground because</span>
</span><span id="AircraftPerformance-804"><a href="#AircraftPerformance-804"><span class="linenos">804</span></a><span class="sd">		it is too heavy and 99999 - cts.distance if it gets to the ground</span>
</span><span id="AircraftPerformance-805"><a href="#AircraftPerformance-805"><span class="linenos">805</span></a><span class="sd">		so when minimizing obtain the largest distance covered.</span>
</span><span id="AircraftPerformance-806"><a href="#AircraftPerformance-806"><span class="linenos">806</span></a><span class="sd">		</span>
</span><span id="AircraftPerformance-807"><a href="#AircraftPerformance-807"><span class="linenos">807</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance-808"><a href="#AircraftPerformance-808"><span class="linenos">808</span></a><span class="sd">			weight: (kg) weight at TOC</span>
</span><span id="AircraftPerformance-809"><a href="#AircraftPerformance-809"><span class="linenos">809</span></a><span class="sd">			a: AircraftPerformance instance</span>
</span><span id="AircraftPerformance-810"><a href="#AircraftPerformance-810"><span class="linenos">810</span></a><span class="sd">			fl: (ft/100) altitude of at the TOC</span>
</span><span id="AircraftPerformance-811"><a href="#AircraftPerformance-811"><span class="linenos">811</span></a>
</span><span id="AircraftPerformance-812"><a href="#AircraftPerformance-812"><span class="linenos">812</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance-813"><a href="#AircraftPerformance-813"><span class="linenos">813</span></a><span class="sd">			error: 99999 * cts.fl_0 if too heavy and not reach ground</span>
</span><span id="AircraftPerformance-814"><a href="#AircraftPerformance-814"><span class="linenos">814</span></a><span class="sd">						 99999 - cts.distance if get to ground with that weight</span>
</span><span id="AircraftPerformance-815"><a href="#AircraftPerformance-815"><span class="linenos">815</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance-816"><a href="#AircraftPerformance-816"><span class="linenos">816</span></a>		<span class="n">cts</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance-817"><a href="#AircraftPerformance-817"><span class="linenos">817</span></a>		<span class="k">if</span> <span class="n">cts</span><span class="o">.</span><span class="n">fl_0</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-818"><a href="#AircraftPerformance-818"><span class="linenos">818</span></a>			<span class="c1"># return cts.fl_0</span>
</span><span id="AircraftPerformance-819"><a href="#AircraftPerformance-819"><span class="linenos">819</span></a>			<span class="k">return</span> <span class="mi">99999</span> <span class="o">*</span> <span class="n">cts</span><span class="o">.</span><span class="n">fl_0</span>
</span><span id="AircraftPerformance-820"><a href="#AircraftPerformance-820"><span class="linenos">820</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-821"><a href="#AircraftPerformance-821"><span class="linenos">821</span></a>			<span class="k">return</span> <span class="mi">99999</span> <span class="o">-</span> <span class="n">cts</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance-822"><a href="#AircraftPerformance-822"><span class="linenos">822</span></a>
</span><span id="AircraftPerformance-823"><a href="#AircraftPerformance-823"><span class="linenos">823</span></a>	<span class="k">def</span> <span class="nf">estimate_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span>
</span><span id="AircraftPerformance-824"><a href="#AircraftPerformance-824"><span class="linenos">824</span></a>							<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">force_descent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force_climb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="AircraftPerformance-825"><a href="#AircraftPerformance-825"><span class="linenos">825</span></a>							<span class="n">cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance-826"><a href="#AircraftPerformance-826"><span class="linenos">826</span></a>		<span class="c1"># TODO force_climb not implemented</span>
</span><span id="AircraftPerformance-827"><a href="#AircraftPerformance-827"><span class="linenos">827</span></a>
</span><span id="AircraftPerformance-828"><a href="#AircraftPerformance-828"><span class="linenos">828</span></a>		<span class="n">traj</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">Trajectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bada_version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">)</span>
</span><span id="AircraftPerformance-829"><a href="#AircraftPerformance-829"><span class="linenos">829</span></a>
</span><span id="AircraftPerformance-830"><a href="#AircraftPerformance-830"><span class="linenos">830</span></a>		<span class="c1"># print(&quot;*HERE &quot;,fp_distance, fl, weight_landing, cruise_wind, max_climbs, try_lower_fl)</span>
</span><span id="AircraftPerformance-831"><a href="#AircraftPerformance-831"><span class="linenos">831</span></a>
</span><span id="AircraftPerformance-832"><a href="#AircraftPerformance-832"><span class="linenos">832</span></a>		<span class="c1"># ESTIMATE DESCENT</span>
</span><span id="AircraftPerformance-833"><a href="#AircraftPerformance-833"><span class="linenos">833</span></a>		<span class="k">if</span> <span class="n">force_descent</span><span class="p">:</span>
</span><span id="AircraftPerformance-834"><a href="#AircraftPerformance-834"><span class="linenos">834</span></a>			<span class="c1"># print(&quot;FORCED DESCENT&quot;)</span>
</span><span id="AircraftPerformance-835"><a href="#AircraftPerformance-835"><span class="linenos">835</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_descent_fuel_flow</span><span class="p">(</span><span class="n">from_fl</span><span class="o">=</span><span class="n">fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="AircraftPerformance-836"><a href="#AircraftPerformance-836"><span class="linenos">836</span></a>
</span><span id="AircraftPerformance-837"><a href="#AircraftPerformance-837"><span class="linenos">837</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_descent_performances</span><span class="p">((</span><span class="n">fl</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">)</span>
</span><span id="AircraftPerformance-838"><a href="#AircraftPerformance-838"><span class="linenos">838</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="AircraftPerformance-839"><a href="#AircraftPerformance-839"><span class="linenos">839</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="AircraftPerformance-840"><a href="#AircraftPerformance-840"><span class="linenos">840</span></a>			<span class="n">distance</span> <span class="o">=</span> <span class="n">time</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="AircraftPerformance-841"><a href="#AircraftPerformance-841"><span class="linenos">841</span></a>
</span><span id="AircraftPerformance-842"><a href="#AircraftPerformance-842"><span class="linenos">842</span></a>			<span class="n">fuel</span> <span class="o">=</span> <span class="n">time</span> <span class="o">*</span> <span class="n">ff</span>
</span><span id="AircraftPerformance-843"><a href="#AircraftPerformance-843"><span class="linenos">843</span></a>
</span><span id="AircraftPerformance-844"><a href="#AircraftPerformance-844"><span class="linenos">844</span></a>			<span class="n">descent_est</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="o">=</span><span class="n">fl</span><span class="p">,</span> <span class="n">fl_1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="o">=</span><span class="n">fuel</span><span class="p">,</span>
</span><span id="AircraftPerformance-845"><a href="#AircraftPerformance-845"><span class="linenos">845</span></a>											   <span class="n">weight_0</span><span class="o">=</span><span class="p">(</span><span class="n">weight_landing</span> <span class="o">+</span> <span class="n">fuel</span><span class="p">),</span> <span class="n">weight_1</span><span class="o">=</span><span class="n">weight_landing</span><span class="p">,</span>
</span><span id="AircraftPerformance-846"><a href="#AircraftPerformance-846"><span class="linenos">846</span></a>											   <span class="n">segment_type</span><span class="o">=</span><span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance-847"><a href="#AircraftPerformance-847"><span class="linenos">847</span></a>			<span class="n">descent_est</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">9</span>
</span><span id="AircraftPerformance-848"><a href="#AircraftPerformance-848"><span class="linenos">848</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-849"><a href="#AircraftPerformance-849"><span class="linenos">849</span></a>			<span class="n">descent_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_descent_estimation_from_lnd</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_landing</span><span class="p">)</span>
</span><span id="AircraftPerformance-850"><a href="#AircraftPerformance-850"><span class="linenos">850</span></a>
</span><span id="AircraftPerformance-851"><a href="#AircraftPerformance-851"><span class="linenos">851</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_back_trajectory_segment</span><span class="p">(</span><span class="n">descent_est</span><span class="p">)</span>
</span><span id="AircraftPerformance-852"><a href="#AircraftPerformance-852"><span class="linenos">852</span></a>		<span class="k">if</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force_descent</span><span class="p">:</span>
</span><span id="AircraftPerformance-853"><a href="#AircraftPerformance-853"><span class="linenos">853</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="AircraftPerformance-854"><a href="#AircraftPerformance-854"><span class="linenos">854</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-855"><a href="#AircraftPerformance-855"><span class="linenos">855</span></a>
</span><span id="AircraftPerformance-856"><a href="#AircraftPerformance-856"><span class="linenos">856</span></a>		<span class="n">descent_distance</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance-857"><a href="#AircraftPerformance-857"><span class="linenos">857</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance-858"><a href="#AircraftPerformance-858"><span class="linenos">858</span></a>
</span><span id="AircraftPerformance-859"><a href="#AircraftPerformance-859"><span class="linenos">859</span></a>		<span class="n">distance_missing</span> <span class="o">=</span> <span class="n">fp_distance</span> <span class="o">-</span> <span class="n">descent_distance</span>
</span><span id="AircraftPerformance-860"><a href="#AircraftPerformance-860"><span class="linenos">860</span></a>
</span><span id="AircraftPerformance-861"><a href="#AircraftPerformance-861"><span class="linenos">861</span></a>		<span class="k">if</span> <span class="n">distance_missing</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-862"><a href="#AircraftPerformance-862"><span class="linenos">862</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="AircraftPerformance-863"><a href="#AircraftPerformance-863"><span class="linenos">863</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-864"><a href="#AircraftPerformance-864"><span class="linenos">864</span></a>
</span><span id="AircraftPerformance-865"><a href="#AircraftPerformance-865"><span class="linenos">865</span></a>		<span class="c1"># ESTIMATE MINIMUM CRUISE NEEDED</span>
</span><span id="AircraftPerformance-866"><a href="#AircraftPerformance-866"><span class="linenos">866</span></a>		<span class="n">res</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_climb_weight_from_toc</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance-867"><a href="#AircraftPerformance-867"><span class="linenos">867</span></a>							  <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bounded&#39;</span><span class="p">)</span>
</span><span id="AircraftPerformance-868"><a href="#AircraftPerformance-868"><span class="linenos">868</span></a>
</span><span id="AircraftPerformance-869"><a href="#AircraftPerformance-869"><span class="linenos">869</span></a>		<span class="n">max_weight_at_toc</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">x</span>
</span><span id="AircraftPerformance-870"><a href="#AircraftPerformance-870"><span class="linenos">870</span></a>
</span><span id="AircraftPerformance-871"><a href="#AircraftPerformance-871"><span class="linenos">871</span></a>		<span class="n">max_climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">max_weight_at_toc</span><span class="p">)</span>
</span><span id="AircraftPerformance-872"><a href="#AircraftPerformance-872"><span class="linenos">872</span></a>
</span><span id="AircraftPerformance-873"><a href="#AircraftPerformance-873"><span class="linenos">873</span></a>		<span class="k">if</span> <span class="n">max_climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-874"><a href="#AircraftPerformance-874"><span class="linenos">874</span></a>			<span class="c1"># Not possible to reach this initial FL</span>
</span><span id="AircraftPerformance-875"><a href="#AircraftPerformance-875"><span class="linenos">875</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="AircraftPerformance-876"><a href="#AircraftPerformance-876"><span class="linenos">876</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-877"><a href="#AircraftPerformance-877"><span class="linenos">877</span></a>
</span><span id="AircraftPerformance-878"><a href="#AircraftPerformance-878"><span class="linenos">878</span></a>		<span class="n">min_cruise_dist</span> <span class="o">=</span> <span class="n">distance_missing</span> <span class="o">-</span> <span class="p">(</span><span class="n">max_climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
</span><span id="AircraftPerformance-879"><a href="#AircraftPerformance-879"><span class="linenos">879</span></a>
</span><span id="AircraftPerformance-880"><a href="#AircraftPerformance-880"><span class="linenos">880</span></a>		<span class="k">if</span> <span class="n">min_cruise_dist</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-881"><a href="#AircraftPerformance-881"><span class="linenos">881</span></a>			<span class="k">if</span> <span class="n">fl</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="ow">and</span> <span class="n">try_lower_fl</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-882"><a href="#AircraftPerformance-882"><span class="linenos">882</span></a>				<span class="n">try_lower_fl</span> <span class="o">=</span> <span class="n">try_lower_fl</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="AircraftPerformance-883"><a href="#AircraftPerformance-883"><span class="linenos">883</span></a>				<span class="n">traj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_trajectory</span><span class="p">(</span><span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="AircraftPerformance-884"><a href="#AircraftPerformance-884"><span class="linenos">884</span></a>												<span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="p">,</span> <span class="n">cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-885"><a href="#AircraftPerformance-885"><span class="linenos">885</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-886"><a href="#AircraftPerformance-886"><span class="linenos">886</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="AircraftPerformance-887"><a href="#AircraftPerformance-887"><span class="linenos">887</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-888"><a href="#AircraftPerformance-888"><span class="linenos">888</span></a>
</span><span id="AircraftPerformance-889"><a href="#AircraftPerformance-889"><span class="linenos">889</span></a>		<span class="c1"># ESTIMATE CRUISE</span>
</span><span id="AircraftPerformance-890"><a href="#AircraftPerformance-890"><span class="linenos">890</span></a>		<span class="n">trajectory_cruise</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span>
</span><span id="AircraftPerformance-891"><a href="#AircraftPerformance-891"><span class="linenos">891</span></a>																			 <span class="n">descent_est</span><span class="o">.</span><span class="n">weight_0</span><span class="p">,</span> <span class="n">min_cruise_dist</span><span class="p">,</span>
</span><span id="AircraftPerformance-892"><a href="#AircraftPerformance-892"><span class="linenos">892</span></a>																			 <span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="n">max_climbs</span><span class="p">,</span>
</span><span id="AircraftPerformance-893"><a href="#AircraftPerformance-893"><span class="linenos">893</span></a>																			 <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-894"><a href="#AircraftPerformance-894"><span class="linenos">894</span></a>
</span><span id="AircraftPerformance-895"><a href="#AircraftPerformance-895"><span class="linenos">895</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory</span><span class="p">(</span><span class="n">trajectory_cruise</span><span class="p">)</span>
</span><span id="AircraftPerformance-896"><a href="#AircraftPerformance-896"><span class="linenos">896</span></a>
</span><span id="AircraftPerformance-897"><a href="#AircraftPerformance-897"><span class="linenos">897</span></a>		<span class="k">if</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="AircraftPerformance-898"><a href="#AircraftPerformance-898"><span class="linenos">898</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span>
</span><span id="AircraftPerformance-899"><a href="#AircraftPerformance-899"><span class="linenos">899</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-900"><a href="#AircraftPerformance-900"><span class="linenos">900</span></a>
</span><span id="AircraftPerformance-901"><a href="#AircraftPerformance-901"><span class="linenos">901</span></a>		<span class="n">cruise_dist</span> <span class="o">=</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance-902"><a href="#AircraftPerformance-902"><span class="linenos">902</span></a>
</span><span id="AircraftPerformance-903"><a href="#AircraftPerformance-903"><span class="linenos">903</span></a>		<span class="n">weight_toc</span> <span class="o">=</span> <span class="n">traj</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance-904"><a href="#AircraftPerformance-904"><span class="linenos">904</span></a>		<span class="n">fl</span> <span class="o">=</span> <span class="n">traj</span><span class="o">.</span><span class="n">fl_0</span>
</span><span id="AircraftPerformance-905"><a href="#AircraftPerformance-905"><span class="linenos">905</span></a>
</span><span id="AircraftPerformance-906"><a href="#AircraftPerformance-906"><span class="linenos">906</span></a>		<span class="n">distance_to_airport</span> <span class="o">=</span> <span class="n">fp_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance-907"><a href="#AircraftPerformance-907"><span class="linenos">907</span></a>
</span><span id="AircraftPerformance-908"><a href="#AircraftPerformance-908"><span class="linenos">908</span></a>		<span class="c1"># DO BIT BEFORE DESCENT</span>
</span><span id="AircraftPerformance-909"><a href="#AircraftPerformance-909"><span class="linenos">909</span></a>		<span class="n">min_climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">))</span>
</span><span id="AircraftPerformance-910"><a href="#AircraftPerformance-910"><span class="linenos">910</span></a>
</span><span id="AircraftPerformance-911"><a href="#AircraftPerformance-911"><span class="linenos">911</span></a>		<span class="k">if</span> <span class="p">((</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fl_0</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">)):</span>
</span><span id="AircraftPerformance-912"><a href="#AircraftPerformance-912"><span class="linenos">912</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-913"><a href="#AircraftPerformance-913"><span class="linenos">913</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fl_0</span><span class="p">,</span>
</span><span id="AircraftPerformance-914"><a href="#AircraftPerformance-914"><span class="linenos">914</span></a>														 <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">weight_0</span><span class="p">)</span>
</span><span id="AircraftPerformance-915"><a href="#AircraftPerformance-915"><span class="linenos">915</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="AircraftPerformance-916"><a href="#AircraftPerformance-916"><span class="linenos">916</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-917"><a href="#AircraftPerformance-917"><span class="linenos">917</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance-918"><a href="#AircraftPerformance-918"><span class="linenos">918</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-919"><a href="#AircraftPerformance-919"><span class="linenos">919</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance-920"><a href="#AircraftPerformance-920"><span class="linenos">920</span></a>
</span><span id="AircraftPerformance-921"><a href="#AircraftPerformance-921"><span class="linenos">921</span></a>		<span class="n">res</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_extra_cruise</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="AircraftPerformance-922"><a href="#AircraftPerformance-922"><span class="linenos">922</span></a>															 <span class="n">weight_toc</span><span class="p">,</span>
</span><span id="AircraftPerformance-923"><a href="#AircraftPerformance-923"><span class="linenos">923</span></a>															 <span class="n">distance_to_airport</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">m</span><span class="p">),</span>
</span><span id="AircraftPerformance-924"><a href="#AircraftPerformance-924"><span class="linenos">924</span></a>							  <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">max_climb_est</span><span class="o">.</span><span class="n">distance</span> <span class="o">-</span> <span class="n">min_climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">)),</span>
</span><span id="AircraftPerformance-925"><a href="#AircraftPerformance-925"><span class="linenos">925</span></a>							  <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bounded&#39;</span><span class="p">)</span>
</span><span id="AircraftPerformance-926"><a href="#AircraftPerformance-926"><span class="linenos">926</span></a>
</span><span id="AircraftPerformance-927"><a href="#AircraftPerformance-927"><span class="linenos">927</span></a>		<span class="n">cruise_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_toc</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">use_mref</span><span class="p">,</span>
</span><span id="AircraftPerformance-928"><a href="#AircraftPerformance-928"><span class="linenos">928</span></a>															   <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance-929"><a href="#AircraftPerformance-929"><span class="linenos">929</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">cruise_est</span><span class="p">)</span>
</span><span id="AircraftPerformance-930"><a href="#AircraftPerformance-930"><span class="linenos">930</span></a>
</span><span id="AircraftPerformance-931"><a href="#AircraftPerformance-931"><span class="linenos">931</span></a>		<span class="k">if</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-932"><a href="#AircraftPerformance-932"><span class="linenos">932</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="AircraftPerformance-933"><a href="#AircraftPerformance-933"><span class="linenos">933</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-934"><a href="#AircraftPerformance-934"><span class="linenos">934</span></a>
</span><span id="AircraftPerformance-935"><a href="#AircraftPerformance-935"><span class="linenos">935</span></a>		<span class="n">weight_toc</span> <span class="o">=</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance-936"><a href="#AircraftPerformance-936"><span class="linenos">936</span></a>
</span><span id="AircraftPerformance-937"><a href="#AircraftPerformance-937"><span class="linenos">937</span></a>		<span class="n">cruise_dist</span> <span class="o">=</span> <span class="n">cruise_dist</span> <span class="o">+</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance-938"><a href="#AircraftPerformance-938"><span class="linenos">938</span></a>
</span><span id="AircraftPerformance-939"><a href="#AircraftPerformance-939"><span class="linenos">939</span></a>		<span class="c1"># ESTIMATE CLIMB</span>
</span><span id="AircraftPerformance-940"><a href="#AircraftPerformance-940"><span class="linenos">940</span></a>		<span class="n">climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_toc</span><span class="p">)</span>
</span><span id="AircraftPerformance-941"><a href="#AircraftPerformance-941"><span class="linenos">941</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">climb_est</span><span class="p">)</span>
</span><span id="AircraftPerformance-942"><a href="#AircraftPerformance-942"><span class="linenos">942</span></a>
</span><span id="AircraftPerformance-943"><a href="#AircraftPerformance-943"><span class="linenos">943</span></a>		<span class="k">if</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-944"><a href="#AircraftPerformance-944"><span class="linenos">944</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="AircraftPerformance-945"><a href="#AircraftPerformance-945"><span class="linenos">945</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-946"><a href="#AircraftPerformance-946"><span class="linenos">946</span></a>
</span><span id="AircraftPerformance-947"><a href="#AircraftPerformance-947"><span class="linenos">947</span></a>		<span class="k">if</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">&gt;</span> <span class="n">fp_distance</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">cruise_dist</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance-948"><a href="#AircraftPerformance-948"><span class="linenos">948</span></a>			<span class="k">if</span> <span class="n">fl</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="ow">and</span> <span class="n">try_lower_fl</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance-949"><a href="#AircraftPerformance-949"><span class="linenos">949</span></a>				<span class="n">try_lower_fl</span> <span class="o">=</span> <span class="n">try_lower_fl</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="AircraftPerformance-950"><a href="#AircraftPerformance-950"><span class="linenos">950</span></a>				<span class="n">traj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_trajectory</span><span class="p">(</span><span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="AircraftPerformance-951"><a href="#AircraftPerformance-951"><span class="linenos">951</span></a>												<span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="p">)</span>
</span><span id="AircraftPerformance-952"><a href="#AircraftPerformance-952"><span class="linenos">952</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance-953"><a href="#AircraftPerformance-953"><span class="linenos">953</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="AircraftPerformance-954"><a href="#AircraftPerformance-954"><span class="linenos">954</span></a>
</span><span id="AircraftPerformance-955"><a href="#AircraftPerformance-955"><span class="linenos">955</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance-956"><a href="#AircraftPerformance-956"><span class="linenos">956</span></a>
</span><span id="AircraftPerformance-957"><a href="#AircraftPerformance-957"><span class="linenos">957</span></a>		<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance-958"><a href="#AircraftPerformance-958"><span class="linenos">958</span></a>
</span><span id="AircraftPerformance-959"><a href="#AircraftPerformance-959"><span class="linenos">959</span></a>	<span class="k">def</span> <span class="nf">apu_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AircraftPerformance-960"><a href="#AircraftPerformance-960"><span class="linenos">960</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance-961"><a href="#AircraftPerformance-961"><span class="linenos">961</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project). The APU is based on APU consumption</span>
</span><span id="AircraftPerformance-962"><a href="#AircraftPerformance-962"><span class="linenos">962</span></a><span class="sd">		of some aircrafts and their mtow</span>
</span><span id="AircraftPerformance-963"><a href="#AircraftPerformance-963"><span class="linenos">963</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance-964"><a href="#AircraftPerformance-964"><span class="linenos">964</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-965"><a href="#AircraftPerformance-965"><span class="linenos">965</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformance-966"><a href="#AircraftPerformance-966"><span class="linenos">966</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformance-967"><a href="#AircraftPerformance-967"><span class="linenos">967</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-968"><a href="#AircraftPerformance-968"><span class="linenos">968</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span><span id="AircraftPerformance-969"><a href="#AircraftPerformance-969"><span class="linenos">969</span></a>
</span><span id="AircraftPerformance-970"><a href="#AircraftPerformance-970"><span class="linenos">970</span></a>	<span class="k">def</span> <span class="nf">at_gate_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AircraftPerformance-971"><a href="#AircraftPerformance-971"><span class="linenos">971</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance-972"><a href="#AircraftPerformance-972"><span class="linenos">972</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="AircraftPerformance-973"><a href="#AircraftPerformance-973"><span class="linenos">973</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance-974"><a href="#AircraftPerformance-974"><span class="linenos">974</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-975"><a href="#AircraftPerformance-975"><span class="linenos">975</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformance-976"><a href="#AircraftPerformance-976"><span class="linenos">976</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformance-977"><a href="#AircraftPerformance-977"><span class="linenos">977</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-978"><a href="#AircraftPerformance-978"><span class="linenos">978</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span><span id="AircraftPerformance-979"><a href="#AircraftPerformance-979"><span class="linenos">979</span></a>
</span><span id="AircraftPerformance-980"><a href="#AircraftPerformance-980"><span class="linenos">980</span></a>	<span class="k">def</span> <span class="nf">en_route_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AircraftPerformance-981"><a href="#AircraftPerformance-981"><span class="linenos">981</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance-982"><a href="#AircraftPerformance-982"><span class="linenos">982</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="AircraftPerformance-983"><a href="#AircraftPerformance-983"><span class="linenos">983</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance-984"><a href="#AircraftPerformance-984"><span class="linenos">984</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-985"><a href="#AircraftPerformance-985"><span class="linenos">985</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformance-986"><a href="#AircraftPerformance-986"><span class="linenos">986</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformance-987"><a href="#AircraftPerformance-987"><span class="linenos">987</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-988"><a href="#AircraftPerformance-988"><span class="linenos">988</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span><span id="AircraftPerformance-989"><a href="#AircraftPerformance-989"><span class="linenos">989</span></a>
</span><span id="AircraftPerformance-990"><a href="#AircraftPerformance-990"><span class="linenos">990</span></a>	<span class="k">def</span> <span class="nf">arrival_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AircraftPerformance-991"><a href="#AircraftPerformance-991"><span class="linenos">991</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance-992"><a href="#AircraftPerformance-992"><span class="linenos">992</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="AircraftPerformance-993"><a href="#AircraftPerformance-993"><span class="linenos">993</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance-994"><a href="#AircraftPerformance-994"><span class="linenos">994</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance-995"><a href="#AircraftPerformance-995"><span class="linenos">995</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformance-996"><a href="#AircraftPerformance-996"><span class="linenos">996</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformance-997"><a href="#AircraftPerformance-997"><span class="linenos">997</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance-998"><a href="#AircraftPerformance-998"><span class="linenos">998</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
</div>


                            <div id="AircraftPerformance.engine_type" class="classattr">
                                <div class="attr variable">
            <span class="name">engine_type</span>        =
<span class="default_value">&#39;&#39;</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.engine_type"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.bada_version" class="classattr">
                                <div class="attr variable">
            <span class="name">bada_version</span>        =
<span class="default_value">-1</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.bada_version"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.ac_icao" class="classattr">
                                <div class="attr variable">
            <span class="name">ac_icao</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.ac_icao"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.ac_model" class="classattr">
                                <div class="attr variable">
            <span class="name">ac_model</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.ac_model"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.wtc" class="classattr">
                                <div class="attr variable">
            <span class="name">wtc</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.wtc"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.s" class="classattr">
                                <div class="attr variable">
            <span class="name">s</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.s"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.wref" class="classattr">
                                <div class="attr variable">
            <span class="name">wref</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.wref"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.m_nom" class="classattr">
                                <div class="attr variable">
            <span class="name">m_nom</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.m_nom"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.mtow" class="classattr">
                                <div class="attr variable">
            <span class="name">mtow</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.mtow"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.oew" class="classattr">
                                <div class="attr variable">
            <span class="name">oew</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.oew"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.hmo" class="classattr">
                                <div class="attr variable">
            <span class="name">hmo</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.hmo"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.mpl" class="classattr">
                                <div class="attr variable">
            <span class="name">mpl</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.mpl"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.m_max" class="classattr">
                                <div class="attr variable">
            <span class="name">m_max</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.m_max"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.vfe" class="classattr">
                                <div class="attr variable">
            <span class="name">vfe</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.vfe"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.d" class="classattr">
                                <div class="attr variable">
            <span class="name">d</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.d"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.f" class="classattr">
                                <div class="attr variable">
            <span class="name">f</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.f"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.fl_climb_descent" class="classattr">
                                <div class="attr variable">
            <span class="name">fl_climb_descent</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.fl_climb_descent"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.climb_ff" class="classattr">
                                <div class="attr variable">
            <span class="name">climb_ff</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.climb_ff"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.descent_ff" class="classattr">
                                <div class="attr variable">
            <span class="name">descent_ff</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.descent_ff"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.climb_perf" class="classattr">
                                <div class="attr variable">
            <span class="name">climb_perf</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.climb_perf"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.descent_perf" class="classattr">
                                <div class="attr variable">
            <span class="name">descent_perf</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.descent_perf"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.mach_detailled_nominal" class="classattr">
                                <div class="attr variable">
            <span class="name">mach_detailled_nominal</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.mach_detailled_nominal"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.apu_ac" class="classattr">
                                <div class="attr variable">
            <span class="name">apu_ac</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.apu_ac"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.apu_sqr_mtow" class="classattr">
                                <div class="attr variable">
            <span class="name">apu_sqr_mtow</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.apu_sqr_mtow"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.apu_ff" class="classattr">
                                <div class="attr variable">
            <span class="name">apu_ff</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.apu_ff"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.apu_fit" class="classattr">
                                <div class="attr variable">
            <span class="name">apu_fit</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.apu_fit"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.at_gate_costs_min" class="classattr">
                                <div class="attr variable">
            <span class="name">at_gate_costs_min</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.at_gate_costs_min"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.en_route_costs_min" class="classattr">
                                <div class="attr variable">
            <span class="name">en_route_costs_min</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.en_route_costs_min"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.arrival_costs_min" class="classattr">
                                <div class="attr variable">
            <span class="name">arrival_costs_min</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.arrival_costs_min"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.at_gate_costs_fit" class="classattr">
                                <div class="attr variable">
            <span class="name">at_gate_costs_fit</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.at_gate_costs_fit"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.en_route_costs_fit" class="classattr">
                                <div class="attr variable">
            <span class="name">en_route_costs_fit</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.en_route_costs_fit"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.arrival_costs_fit" class="classattr">
                                <div class="attr variable">
            <span class="name">arrival_costs_fit</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformance.arrival_costs_fit"></a>
    
    

                            </div>
                            <div id="AircraftPerformance.compute_fuel_flow" class="classattr">
                                        <input id="AircraftPerformance.compute_fuel_flow-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">compute_fuel_flow</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">m</span>, </span><span class="param"><span class="n">bank</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.compute_fuel_flow-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.compute_fuel_flow"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.compute_fuel_flow-71"><a href="#AircraftPerformance.compute_fuel_flow-71"><span class="linenos">71</span></a>	<span class="nd">@abstractmethod</span>
</span><span id="AircraftPerformance.compute_fuel_flow-72"><a href="#AircraftPerformance.compute_fuel_flow-72"><span class="linenos">72</span></a>	<span class="k">def</span> <span class="nf">compute_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance.compute_fuel_flow-73"><a href="#AircraftPerformance.compute_fuel_flow-73"><span class="linenos">73</span></a>		<span class="k">pass</span>
</span></pre></div>


    

                            </div>
                            <div id="AircraftPerformance.estimate_holding_fuel_flow" class="classattr">
                                        <input id="AircraftPerformance.estimate_holding_fuel_flow-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">estimate_holding_fuel_flow</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">m_min</span><span class="o">=</span><span class="mf">0.2</span>, </span><span class="param"><span class="n">m_max</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">compute_min_max</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.estimate_holding_fuel_flow-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.estimate_holding_fuel_flow"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.estimate_holding_fuel_flow-75"><a href="#AircraftPerformance.estimate_holding_fuel_flow-75"><span class="linenos">75</span></a>	<span class="nd">@abstractmethod</span>
</span><span id="AircraftPerformance.estimate_holding_fuel_flow-76"><a href="#AircraftPerformance.estimate_holding_fuel_flow-76"><span class="linenos">76</span></a>	<span class="k">def</span> <span class="nf">estimate_holding_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m_min</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compute_min_max</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="AircraftPerformance.estimate_holding_fuel_flow-77"><a href="#AircraftPerformance.estimate_holding_fuel_flow-77"><span class="linenos">77</span></a>		<span class="k">pass</span>
</span></pre></div>


    

                            </div>
                            <div id="AircraftPerformance.estimate_avg_cruise_weight" class="classattr">
                                        <input id="AircraftPerformance.estimate_avg_cruise_weight-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">estimate_avg_cruise_weight</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">climb_kg</span>,</span><span class="param">	<span class="n">descent_kg</span>,</span><span class="param">	<span class="n">cruise_m</span>,</span><span class="param">	<span class="n">cruise_dist</span>,</span><span class="param">	<span class="n">cruise_time</span>,</span><span class="param">	<span class="n">fl</span>,</span><span class="param">	<span class="n">payload_lf</span><span class="o">=</span><span class="mf">0.8</span>,</span><span class="param">	<span class="n">force</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">cruise_wind_kt</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">cruise_nom_kt</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">cruise_ground_kt</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.estimate_avg_cruise_weight-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.estimate_avg_cruise_weight"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.estimate_avg_cruise_weight-79"><a href="#AircraftPerformance.estimate_avg_cruise_weight-79"><span class="linenos"> 79</span></a>	<span class="k">def</span> <span class="nf">estimate_avg_cruise_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">climb_kg</span><span class="p">,</span> <span class="n">descent_kg</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">,</span> <span class="n">cruise_dist</span><span class="p">,</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">payload_lf</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-80"><a href="#AircraftPerformance.estimate_avg_cruise_weight-80"><span class="linenos"> 80</span></a>								   <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cruise_wind_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cruise_nom_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cruise_ground_kt</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-81"><a href="#AircraftPerformance.estimate_avg_cruise_weight-81"><span class="linenos"> 81</span></a>		<span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="n">descent_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-82"><a href="#AircraftPerformance.estimate_avg_cruise_weight-82"><span class="linenos"> 82</span></a>															  <span class="n">cruise_dist</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-83"><a href="#AircraftPerformance.estimate_avg_cruise_weight-83"><span class="linenos"> 83</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-84"><a href="#AircraftPerformance.estimate_avg_cruise_weight-84"><span class="linenos"> 84</span></a>		<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">weight_0</span> <span class="o">+</span> <span class="n">ct</span><span class="o">.</span><span class="n">weight_1</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-85"><a href="#AircraftPerformance.estimate_avg_cruise_weight-85"><span class="linenos"> 85</span></a>		<span class="n">cruise_kg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-86"><a href="#AircraftPerformance.estimate_avg_cruise_weight-86"><span class="linenos"> 86</span></a>		<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-87"><a href="#AircraftPerformance.estimate_avg_cruise_weight-87"><span class="linenos"> 87</span></a>		<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-88"><a href="#AircraftPerformance.estimate_avg_cruise_weight-88"><span class="linenos"> 88</span></a>		<span class="n">forced</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-89"><a href="#AircraftPerformance.estimate_avg_cruise_weight-89"><span class="linenos"> 89</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-90"><a href="#AircraftPerformance.estimate_avg_cruise_weight-90"><span class="linenos"> 90</span></a>		<span class="n">too_light</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-91"><a href="#AircraftPerformance.estimate_avg_cruise_weight-91"><span class="linenos"> 91</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-92"><a href="#AircraftPerformance.estimate_avg_cruise_weight-92"><span class="linenos"> 92</span></a>		<span class="k">while</span> <span class="p">(</span><span class="n">tow</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">too_light</span><span class="p">):</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-93"><a href="#AircraftPerformance.estimate_avg_cruise_weight-93"><span class="linenos"> 93</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-94"><a href="#AircraftPerformance.estimate_avg_cruise_weight-94"><span class="linenos"> 94</span></a>			<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">avg_cruise_weight</span> <span class="o">-</span> <span class="p">(</span><span class="n">tow</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-95"><a href="#AircraftPerformance.estimate_avg_cruise_weight-95"><span class="linenos"> 95</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-96"><a href="#AircraftPerformance.estimate_avg_cruise_weight-96"><span class="linenos"> 96</span></a>			<span class="k">if</span> <span class="n">avg_cruise_weight</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">descent_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">):</span>  <span class="c1"># self.mpl*payload_lf</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-97"><a href="#AircraftPerformance.estimate_avg_cruise_weight-97"><span class="linenos"> 97</span></a>				<span class="c1"># We have reduced the weight so much that the aircraft has negative cruise weight. Finish!</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-98"><a href="#AircraftPerformance.estimate_avg_cruise_weight-98"><span class="linenos"> 98</span></a>				<span class="n">too_light</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-99"><a href="#AircraftPerformance.estimate_avg_cruise_weight-99"><span class="linenos"> 99</span></a>				<span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-100"><a href="#AircraftPerformance.estimate_avg_cruise_weight-100"><span class="linenos">100</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-101"><a href="#AircraftPerformance.estimate_avg_cruise_weight-101"><span class="linenos">101</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-102"><a href="#AircraftPerformance.estimate_avg_cruise_weight-102"><span class="linenos">102</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-103"><a href="#AircraftPerformance.estimate_avg_cruise_weight-103"><span class="linenos">103</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-104"><a href="#AircraftPerformance.estimate_avg_cruise_weight-104"><span class="linenos">104</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-105"><a href="#AircraftPerformance.estimate_avg_cruise_weight-105"><span class="linenos">105</span></a>					<span class="c1"># standard cruise even if weights might be too high</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-106"><a href="#AircraftPerformance.estimate_avg_cruise_weight-106"><span class="linenos">106</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wref</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-107"><a href="#AircraftPerformance.estimate_avg_cruise_weight-107"><span class="linenos">107</span></a>					<span class="n">cruise_m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-108"><a href="#AircraftPerformance.estimate_avg_cruise_weight-108"><span class="linenos">108</span></a>					<span class="n">cruise_nom_kt</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">cruise_m</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-109"><a href="#AircraftPerformance.estimate_avg_cruise_weight-109"><span class="linenos">109</span></a>					<span class="n">cruise_ground_kt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_nom_kt</span> <span class="o">+</span> <span class="n">cruise_wind_kt</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-110"><a href="#AircraftPerformance.estimate_avg_cruise_weight-110"><span class="linenos">110</span></a>					<span class="n">cruise_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="n">cruise_dist</span> <span class="o">/</span> <span class="n">cruise_ground_kt</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-111"><a href="#AircraftPerformance.estimate_avg_cruise_weight-111"><span class="linenos">111</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-112"><a href="#AircraftPerformance.estimate_avg_cruise_weight-112"><span class="linenos">112</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-113"><a href="#AircraftPerformance.estimate_avg_cruise_weight-113"><span class="linenos">113</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-114"><a href="#AircraftPerformance.estimate_avg_cruise_weight-114"><span class="linenos">114</span></a>					<span class="n">forced</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-115"><a href="#AircraftPerformance.estimate_avg_cruise_weight-115"><span class="linenos">115</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-116"><a href="#AircraftPerformance.estimate_avg_cruise_weight-116"><span class="linenos">116</span></a>					<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-117"><a href="#AircraftPerformance.estimate_avg_cruise_weight-117"><span class="linenos">117</span></a>					<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-118"><a href="#AircraftPerformance.estimate_avg_cruise_weight-118"><span class="linenos">118</span></a>					<span class="n">tow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">tow</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-119"><a href="#AircraftPerformance.estimate_avg_cruise_weight-119"><span class="linenos">119</span></a>					<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-120"><a href="#AircraftPerformance.estimate_avg_cruise_weight-120"><span class="linenos">120</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-121"><a href="#AircraftPerformance.estimate_avg_cruise_weight-121"><span class="linenos">121</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-122"><a href="#AircraftPerformance.estimate_avg_cruise_weight-122"><span class="linenos">122</span></a>				<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">)</span> <span class="o">*</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-123"><a href="#AircraftPerformance.estimate_avg_cruise_weight-123"><span class="linenos">123</span></a>				<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">climb_kg</span> <span class="o">+</span> <span class="n">cruise_kg</span> <span class="o">+</span> <span class="n">descent_kg</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-124"><a href="#AircraftPerformance.estimate_avg_cruise_weight-124"><span class="linenos">124</span></a>				<span class="n">tow</span> <span class="o">=</span> <span class="n">fp_fuel_kg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span> <span class="o">*</span> <span class="n">payload_lf</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-125"><a href="#AircraftPerformance.estimate_avg_cruise_weight-125"><span class="linenos">125</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-126"><a href="#AircraftPerformance.estimate_avg_cruise_weight-126"><span class="linenos">126</span></a>				<span class="n">cruise_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">cruise_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-127"><a href="#AircraftPerformance.estimate_avg_cruise_weight-127"><span class="linenos">127</span></a>				<span class="n">fp_fuel_kg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-128"><a href="#AircraftPerformance.estimate_avg_cruise_weight-128"><span class="linenos">128</span></a>				<span class="n">tow</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">tow</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-129"><a href="#AircraftPerformance.estimate_avg_cruise_weight-129"><span class="linenos">129</span></a>				<span class="n">avg_cruise_weight</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-130"><a href="#AircraftPerformance.estimate_avg_cruise_weight-130"><span class="linenos">130</span></a>
</span><span id="AircraftPerformance.estimate_avg_cruise_weight-131"><a href="#AircraftPerformance.estimate_avg_cruise_weight-131"><span class="linenos">131</span></a>		<span class="k">return</span> <span class="n">cruise_kg</span><span class="p">,</span> <span class="n">fp_fuel_kg</span><span class="p">,</span> <span class="n">tow</span><span class="p">,</span> <span class="n">avg_cruise_weight</span><span class="p">,</span> <span class="n">cruise_m</span><span class="p">,</span> <span class="n">cruise_nom_kt</span><span class="p">,</span> <span class="n">cruise_ground_kt</span><span class="p">,</span> <span class="n">cruise_time</span><span class="p">,</span> <span class="n">forced</span>
</span></pre></div>


    

                            </div>
                            <div id="AircraftPerformance.set_climb_descent_fuel_flow_performances" class="classattr">
                                        <input id="AircraftPerformance.set_climb_descent_fuel_flow_performances-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_climb_descent_fuel_flow_performances</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">climb_ff</span>, </span><span class="param"><span class="n">descent_ff</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.set_climb_descent_fuel_flow_performances-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.set_climb_descent_fuel_flow_performances"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-133"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-133"><span class="linenos">133</span></a>	<span class="k">def</span> <span class="nf">set_climb_descent_fuel_flow_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">climb_ff</span><span class="p">,</span> <span class="n">descent_ff</span><span class="p">):</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-134"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-134"><span class="linenos">134</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-135"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-135"><span class="linenos">135</span></a><span class="sd">		Add the fl, climb fuel flow and descent fuel flow arrays in the fligth performance object</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-136"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-136"><span class="linenos">136</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-137"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-137"><span class="linenos">137</span></a>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-138"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-138"><span class="linenos">138</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-139"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-139"><span class="linenos">139</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-140"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-140"><span class="linenos">140</span></a><span class="sd">			climb_ff: fuel flow at the corresponding fl when climbing</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-141"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-141"><span class="linenos">141</span></a><span class="sd">			descent_ff: fuel flow at the corresponding fl when descending</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-142"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-142"><span class="linenos">142</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-143"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-143"><span class="linenos">143</span></a>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-144"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-144"><span class="linenos">144</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span> <span class="o">=</span> <span class="n">fl</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-145"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-145"><span class="linenos">145</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_ff</span> <span class="o">=</span> <span class="n">climb_ff</span>
</span><span id="AircraftPerformance.set_climb_descent_fuel_flow_performances-146"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances-146"><span class="linenos">146</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_ff</span> <span class="o">=</span> <span class="n">descent_ff</span>
</span></pre></div>


            <div class="docstring"><p>Add the fl, climb fuel flow and descent fuel flow arrays in the fligth performance object
These values come from the ptf table.</p>

<p>Args:
        fl: array of flight levels
        climb_ff: fuel flow at the corresponding fl when climbing
        descent_ff: fuel flow at the corresponding fl when descending</p>
</div>


                            </div>
                            <div id="AircraftPerformance.compute_sr" class="classattr">
                                        <input id="AircraftPerformance.compute_sr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_sr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">m</span>, </span><span class="param"><span class="n">cruise_wind</span><span class="o">=</span><span class="mi">0</span>, </span><span class="param"><span class="n">bank</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.compute_sr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.compute_sr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.compute_sr-148"><a href="#AircraftPerformance.compute_sr-148"><span class="linenos">148</span></a>	<span class="k">def</span> <span class="nf">compute_sr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance.compute_sr-149"><a href="#AircraftPerformance.compute_sr-149"><span class="linenos">149</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.compute_sr-150"><a href="#AircraftPerformance.compute_sr-150"><span class="linenos">150</span></a><span class="sd">		Compute the specific range at a given fl, mass, mach and bank angle</span>
</span><span id="AircraftPerformance.compute_sr-151"><a href="#AircraftPerformance.compute_sr-151"><span class="linenos">151</span></a>
</span><span id="AircraftPerformance.compute_sr-152"><a href="#AircraftPerformance.compute_sr-152"><span class="linenos">152</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.compute_sr-153"><a href="#AircraftPerformance.compute_sr-153"><span class="linenos">153</span></a><span class="sd">			fl: flight level (ft/100)</span>
</span><span id="AircraftPerformance.compute_sr-154"><a href="#AircraftPerformance.compute_sr-154"><span class="linenos">154</span></a><span class="sd">			mass: mass (kg)</span>
</span><span id="AircraftPerformance.compute_sr-155"><a href="#AircraftPerformance.compute_sr-155"><span class="linenos">155</span></a><span class="sd">			m: mach (Mach)</span>
</span><span id="AircraftPerformance.compute_sr-156"><a href="#AircraftPerformance.compute_sr-156"><span class="linenos">156</span></a><span class="sd">			cruise_wind: cruise tail wind (m/s)</span>
</span><span id="AircraftPerformance.compute_sr-157"><a href="#AircraftPerformance.compute_sr-157"><span class="linenos">157</span></a><span class="sd">			bank: bank angle (rad)</span>
</span><span id="AircraftPerformance.compute_sr-158"><a href="#AircraftPerformance.compute_sr-158"><span class="linenos">158</span></a>
</span><span id="AircraftPerformance.compute_sr-159"><a href="#AircraftPerformance.compute_sr-159"><span class="linenos">159</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.compute_sr-160"><a href="#AircraftPerformance.compute_sr-160"><span class="linenos">160</span></a><span class="sd">			sr: specifc range (nm/kg)</span>
</span><span id="AircraftPerformance.compute_sr-161"><a href="#AircraftPerformance.compute_sr-161"><span class="linenos">161</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.compute_sr-162"><a href="#AircraftPerformance.compute_sr-162"><span class="linenos">162</span></a>
</span><span id="AircraftPerformance.compute_sr-163"><a href="#AircraftPerformance.compute_sr-163"><span class="linenos">163</span></a>		<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="p">)</span>
</span><span id="AircraftPerformance.compute_sr-164"><a href="#AircraftPerformance.compute_sr-164"><span class="linenos">164</span></a>
</span><span id="AircraftPerformance.compute_sr-165"><a href="#AircraftPerformance.compute_sr-165"><span class="linenos">165</span></a>		<span class="n">tas</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">sa</span><span class="o">.</span><span class="n">sound_speed</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="p">(</span><span class="n">fl</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span> <span class="o">+</span> <span class="n">cruise_wind</span>
</span><span id="AircraftPerformance.compute_sr-166"><a href="#AircraftPerformance.compute_sr-166"><span class="linenos">166</span></a>		<span class="n">sr</span> <span class="o">=</span> <span class="p">(</span><span class="n">tas</span> <span class="o">/</span> <span class="n">ff</span><span class="p">)</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">/</span> <span class="mi">1852</span>
</span><span id="AircraftPerformance.compute_sr-167"><a href="#AircraftPerformance.compute_sr-167"><span class="linenos">167</span></a>
</span><span id="AircraftPerformance.compute_sr-168"><a href="#AircraftPerformance.compute_sr-168"><span class="linenos">168</span></a>		<span class="k">return</span> <span class="n">sr</span>
</span></pre></div>


            <div class="docstring"><p>Compute the specific range at a given fl, mass, mach and bank angle</p>

<p>Args:
        fl: flight level (ft/100)
        mass: mass (kg)
        m: mach (Mach)
        cruise_wind: cruise tail wind (m/s)
        bank: bank angle (rad)</p>

<p>Returns:
        sr: specifc range (nm/kg)</p>
</div>


                            </div>
                            <div id="AircraftPerformance.estimate_climb_fuel_flow" class="classattr">
                                        <input id="AircraftPerformance.estimate_climb_fuel_flow-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">estimate_climb_fuel_flow</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">from_fl</span>, </span><span class="param"><span class="n">to_fl</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.estimate_climb_fuel_flow-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.estimate_climb_fuel_flow"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.estimate_climb_fuel_flow-170"><a href="#AircraftPerformance.estimate_climb_fuel_flow-170"><span class="linenos">170</span></a>	<span class="k">def</span> <span class="nf">estimate_climb_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-171"><a href="#AircraftPerformance.estimate_climb_fuel_flow-171"><span class="linenos">171</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-172"><a href="#AircraftPerformance.estimate_climb_fuel_flow-172"><span class="linenos">172</span></a><span class="sd">		Estimated average fuel flow between from_fl and to_fl </span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-173"><a href="#AircraftPerformance.estimate_climb_fuel_flow-173"><span class="linenos">173</span></a><span class="sd">		for the climb phase</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-174"><a href="#AircraftPerformance.estimate_climb_fuel_flow-174"><span class="linenos">174</span></a>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-175"><a href="#AircraftPerformance.estimate_climb_fuel_flow-175"><span class="linenos">175</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-176"><a href="#AircraftPerformance.estimate_climb_fuel_flow-176"><span class="linenos">176</span></a><span class="sd">			from_fl: fl from which to start the climb</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-177"><a href="#AircraftPerformance.estimate_climb_fuel_flow-177"><span class="linenos">177</span></a><span class="sd">			to_fl: fl to which to end the climb</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-178"><a href="#AircraftPerformance.estimate_climb_fuel_flow-178"><span class="linenos">178</span></a>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-179"><a href="#AircraftPerformance.estimate_climb_fuel_flow-179"><span class="linenos">179</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-180"><a href="#AircraftPerformance.estimate_climb_fuel_flow-180"><span class="linenos">180</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-181"><a href="#AircraftPerformance.estimate_climb_fuel_flow-181"><span class="linenos">181</span></a>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-182"><a href="#AircraftPerformance.estimate_climb_fuel_flow-182"><span class="linenos">182</span></a><span class="sd">		Example of use:    </span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-183"><a href="#AircraftPerformance.estimate_climb_fuel_flow-183"><span class="linenos">183</span></a><span class="sd">			ff=estimate_climb_fuel_flow(0,320)</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-184"><a href="#AircraftPerformance.estimate_climb_fuel_flow-184"><span class="linenos">184</span></a>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-185"><a href="#AircraftPerformance.estimate_climb_fuel_flow-185"><span class="linenos">185</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.estimate_climb_fuel_flow-186"><a href="#AircraftPerformance.estimate_climb_fuel_flow-186"><span class="linenos">186</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_ff</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Estimated average fuel flow between from_fl and to_fl 
for the climb phase</p>

<p>Args:
        from_fl: fl from which to start the climb
        to_fl: fl to which to end the climb</p>

<p>Returns:
        ff: fuel flow (kg/min)</p>

<p>Example of use: <br />
        ff=estimate_climb_fuel_flow(0,320)</p>
</div>


                            </div>
                            <div id="AircraftPerformance.estimate_descent_fuel_flow" class="classattr">
                                        <input id="AircraftPerformance.estimate_descent_fuel_flow-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">estimate_descent_fuel_flow</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">from_fl</span>, </span><span class="param"><span class="n">to_fl</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.estimate_descent_fuel_flow-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.estimate_descent_fuel_flow"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.estimate_descent_fuel_flow-188"><a href="#AircraftPerformance.estimate_descent_fuel_flow-188"><span class="linenos">188</span></a>	<span class="k">def</span> <span class="nf">estimate_descent_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-189"><a href="#AircraftPerformance.estimate_descent_fuel_flow-189"><span class="linenos">189</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-190"><a href="#AircraftPerformance.estimate_descent_fuel_flow-190"><span class="linenos">190</span></a><span class="sd">		Estimated average fuel flow between from_fl and to_fl </span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-191"><a href="#AircraftPerformance.estimate_descent_fuel_flow-191"><span class="linenos">191</span></a><span class="sd">		for the descending phase</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-192"><a href="#AircraftPerformance.estimate_descent_fuel_flow-192"><span class="linenos">192</span></a>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-193"><a href="#AircraftPerformance.estimate_descent_fuel_flow-193"><span class="linenos">193</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-194"><a href="#AircraftPerformance.estimate_descent_fuel_flow-194"><span class="linenos">194</span></a><span class="sd">			from_fl: fl from which to start the descent</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-195"><a href="#AircraftPerformance.estimate_descent_fuel_flow-195"><span class="linenos">195</span></a><span class="sd">			to_fl: fl to which to end the descent</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-196"><a href="#AircraftPerformance.estimate_descent_fuel_flow-196"><span class="linenos">196</span></a>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-197"><a href="#AircraftPerformance.estimate_descent_fuel_flow-197"><span class="linenos">197</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-198"><a href="#AircraftPerformance.estimate_descent_fuel_flow-198"><span class="linenos">198</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-199"><a href="#AircraftPerformance.estimate_descent_fuel_flow-199"><span class="linenos">199</span></a>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-200"><a href="#AircraftPerformance.estimate_descent_fuel_flow-200"><span class="linenos">200</span></a><span class="sd">		Example of use:    </span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-201"><a href="#AircraftPerformance.estimate_descent_fuel_flow-201"><span class="linenos">201</span></a><span class="sd">			ff=estimate_descent_fuel_flow(320,0)</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-202"><a href="#AircraftPerformance.estimate_descent_fuel_flow-202"><span class="linenos">202</span></a>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-203"><a href="#AircraftPerformance.estimate_descent_fuel_flow-203"><span class="linenos">203</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.estimate_descent_fuel_flow-204"><a href="#AircraftPerformance.estimate_descent_fuel_flow-204"><span class="linenos">204</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fl_climb_descent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_ff</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Estimated average fuel flow between from_fl and to_fl 
for the descending phase</p>

<p>Args:
        from_fl: fl from which to start the descent
        to_fl: fl to which to end the descent</p>

<p>Returns:
        ff: fuel flow (kg/min)</p>

<p>Example of use: <br />
        ff=estimate_descent_fuel_flow(320,0)</p>
</div>


                            </div>
                            <div id="AircraftPerformance.avg_climb_descent_ff" class="classattr">
                                        <input id="AircraftPerformance.avg_climb_descent_ff-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">avg_climb_descent_ff</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">flv</span>, </span><span class="param"><span class="n">ffv</span>, </span><span class="param"><span class="n">from_fl</span>, </span><span class="param"><span class="n">to_fl</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.avg_climb_descent_ff-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.avg_climb_descent_ff"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.avg_climb_descent_ff-206"><a href="#AircraftPerformance.avg_climb_descent_ff-206"><span class="linenos">206</span></a>	<span class="k">def</span> <span class="nf">avg_climb_descent_ff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flv</span><span class="p">,</span> <span class="n">ffv</span><span class="p">,</span> <span class="n">from_fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="p">):</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-207"><a href="#AircraftPerformance.avg_climb_descent_ff-207"><span class="linenos">207</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-208"><a href="#AircraftPerformance.avg_climb_descent_ff-208"><span class="linenos">208</span></a><span class="sd">		Compute the average fuel flow between from_fl and to_fl </span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-209"><a href="#AircraftPerformance.avg_climb_descent_ff-209"><span class="linenos">209</span></a><span class="sd">		considering a vector of fl aligned with a vector of ff</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-210"><a href="#AircraftPerformance.avg_climb_descent_ff-210"><span class="linenos">210</span></a>
</span><span id="AircraftPerformance.avg_climb_descent_ff-211"><a href="#AircraftPerformance.avg_climb_descent_ff-211"><span class="linenos">211</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-212"><a href="#AircraftPerformance.avg_climb_descent_ff-212"><span class="linenos">212</span></a><span class="sd">			flv: array of flight levels (ft/100)</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-213"><a href="#AircraftPerformance.avg_climb_descent_ff-213"><span class="linenos">213</span></a><span class="sd">			ffv: array of fuel flows aligned with flv (kg/min)</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-214"><a href="#AircraftPerformance.avg_climb_descent_ff-214"><span class="linenos">214</span></a><span class="sd">			from_fl: fl from which to start the climb/descent</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-215"><a href="#AircraftPerformance.avg_climb_descent_ff-215"><span class="linenos">215</span></a><span class="sd">			to_fl: fl to which to end the climb/descent</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-216"><a href="#AircraftPerformance.avg_climb_descent_ff-216"><span class="linenos">216</span></a>
</span><span id="AircraftPerformance.avg_climb_descent_ff-217"><a href="#AircraftPerformance.avg_climb_descent_ff-217"><span class="linenos">217</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-218"><a href="#AircraftPerformance.avg_climb_descent_ff-218"><span class="linenos">218</span></a><span class="sd">			ff: fuel flow (kg/min)</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-219"><a href="#AircraftPerformance.avg_climb_descent_ff-219"><span class="linenos">219</span></a>
</span><span id="AircraftPerformance.avg_climb_descent_ff-220"><a href="#AircraftPerformance.avg_climb_descent_ff-220"><span class="linenos">220</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-221"><a href="#AircraftPerformance.avg_climb_descent_ff-221"><span class="linenos">221</span></a>		<span class="n">i_closest_from</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">flv</span> <span class="o">-</span> <span class="n">from_fl</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-222"><a href="#AircraftPerformance.avg_climb_descent_ff-222"><span class="linenos">222</span></a>		<span class="n">i_closest_to</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">flv</span> <span class="o">-</span> <span class="n">to_fl</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-223"><a href="#AircraftPerformance.avg_climb_descent_ff-223"><span class="linenos">223</span></a>		<span class="n">i_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">i_closest_from</span><span class="p">,</span> <span class="n">i_closest_to</span><span class="p">)</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-224"><a href="#AircraftPerformance.avg_climb_descent_ff-224"><span class="linenos">224</span></a>		<span class="n">i_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">i_closest_from</span><span class="p">,</span> <span class="n">i_closest_to</span><span class="p">)</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-225"><a href="#AircraftPerformance.avg_climb_descent_ff-225"><span class="linenos">225</span></a>
</span><span id="AircraftPerformance.avg_climb_descent_ff-226"><a href="#AircraftPerformance.avg_climb_descent_ff-226"><span class="linenos">226</span></a>		<span class="k">if</span> <span class="n">i_min</span> <span class="o">==</span> <span class="n">i_max</span><span class="p">:</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-227"><a href="#AircraftPerformance.avg_climb_descent_ff-227"><span class="linenos">227</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="n">ffv</span><span class="p">[</span><span class="n">i_min</span><span class="p">]</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-228"><a href="#AircraftPerformance.avg_climb_descent_ff-228"><span class="linenos">228</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-229"><a href="#AircraftPerformance.avg_climb_descent_ff-229"><span class="linenos">229</span></a>			<span class="n">fl_s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flv</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-230"><a href="#AircraftPerformance.avg_climb_descent_ff-230"><span class="linenos">230</span></a>			<span class="n">diff_fl</span> <span class="o">=</span> <span class="p">(</span><span class="n">fl_s</span> <span class="o">-</span> <span class="n">flv</span><span class="p">)</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-231"><a href="#AircraftPerformance.avg_climb_descent_ff-231"><span class="linenos">231</span></a>			<span class="n">diff_fl</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">diff_fl</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-232"><a href="#AircraftPerformance.avg_climb_descent_ff-232"><span class="linenos">232</span></a>
</span><span id="AircraftPerformance.avg_climb_descent_ff-233"><a href="#AircraftPerformance.avg_climb_descent_ff-233"><span class="linenos">233</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">ffv</span> <span class="o">*</span> <span class="n">diff_fl</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-234"><a href="#AircraftPerformance.avg_climb_descent_ff-234"><span class="linenos">234</span></a>
</span><span id="AircraftPerformance.avg_climb_descent_ff-235"><a href="#AircraftPerformance.avg_climb_descent_ff-235"><span class="linenos">235</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">fuel_segment</span><span class="p">[</span><span class="n">i_min</span><span class="p">:(</span><span class="n">i_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span> \
</span><span id="AircraftPerformance.avg_climb_descent_ff-236"><a href="#AircraftPerformance.avg_climb_descent_ff-236"><span class="linenos">236</span></a>				 <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">diff_fl</span><span class="p">[</span><span class="n">i_min</span><span class="p">:(</span><span class="n">i_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>
</span><span id="AircraftPerformance.avg_climb_descent_ff-237"><a href="#AircraftPerformance.avg_climb_descent_ff-237"><span class="linenos">237</span></a>
</span><span id="AircraftPerformance.avg_climb_descent_ff-238"><a href="#AircraftPerformance.avg_climb_descent_ff-238"><span class="linenos">238</span></a>		<span class="k">return</span> <span class="n">ff</span>
</span></pre></div>


            <div class="docstring"><p>Compute the average fuel flow between from_fl and to_fl 
considering a vector of fl aligned with a vector of ff</p>

<p>Args:
        flv: array of flight levels (ft/100)
        ffv: array of fuel flows aligned with flv (kg/min)
        from_fl: fl from which to start the climb/descent
        to_fl: fl to which to end the climb/descent</p>

<p>Returns:
        ff: fuel flow (kg/min)</p>
</div>


                            </div>
                            <div id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances" class="classattr">
                                        <input id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_climb_fuel_flow_detailled_rate_performances</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">fuel</span>, </span><span class="param"><span class="n">rocd</span>, </span><span class="param"><span class="n">gamma</span>, </span><span class="param"><span class="n">tas</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-240"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-240"><span class="linenos">240</span></a>	<span class="k">def</span> <span class="nf">set_climb_fuel_flow_detailled_rate_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">rocd</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">tas</span><span class="p">):</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-241"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-241"><span class="linenos">241</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-242"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-242"><span class="linenos">242</span></a><span class="sd">		Add the fl, mass, fuel, roc, gamma and tas arrays in the fligth performance object</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-243"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-243"><span class="linenos">243</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-244"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-244"><span class="linenos">244</span></a><span class="sd">		In this case the values are more detailled as different fuel flows and rocd are</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-245"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-245"><span class="linenos">245</span></a><span class="sd">		considered as a funcion of altitude and mass. This allow us to interpolate the </span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-246"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-246"><span class="linenos">246</span></a><span class="sd">		climb and descent performances with interpolate_climb_performances function.</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-247"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-247"><span class="linenos">247</span></a>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-248"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-248"><span class="linenos">248</span></a><span class="sd">		Note that the performances on fuel flow are the same for all the points. These</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-249"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-249"><span class="linenos">249</span></a><span class="sd">		detailled data are used only for rocd/gamma values.</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-250"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-250"><span class="linenos">250</span></a>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-251"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-251"><span class="linenos">251</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-252"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-252"><span class="linenos">252</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-253"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-253"><span class="linenos">253</span></a><span class="sd">			mass: array of massess corresponding to the fls</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-254"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-254"><span class="linenos">254</span></a><span class="sd">			fuel: array of fuels corresponding to the fls</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-255"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-255"><span class="linenos">255</span></a><span class="sd">			rocd: rate of climb/descent corresponding to the fls</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-256"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-256"><span class="linenos">256</span></a><span class="sd">			gamma: angle of climb/descent corresponding to the fls</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-257"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-257"><span class="linenos">257</span></a><span class="sd">			tas: kt TAS corresponding to the fls</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-258"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-258"><span class="linenos">258</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-259"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-259"><span class="linenos">259</span></a>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-260"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-260"><span class="linenos">260</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">fuel</span><span class="p">,</span> <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">rocd</span><span class="p">,</span>
</span><span id="AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-261"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances-261"><span class="linenos">261</span></a>						   <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">gamma</span><span class="p">,</span> <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">tas</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Add the fl, mass, fuel, roc, gamma and tas arrays in the fligth performance object
These values come from the ptf table.
In this case the values are more detailled as different fuel flows and rocd are
considered as a funcion of altitude and mass. This allow us to interpolate the 
climb and descent performances with interpolate_climb_performances function.</p>

<p>Note that the performances on fuel flow are the same for all the points. These
detailled data are used only for rocd/gamma values.</p>

<p>Args:
        fl: array of flight levels
        mass: array of massess corresponding to the fls
        fuel: array of fuels corresponding to the fls
        rocd: rate of climb/descent corresponding to the fls
        gamma: angle of climb/descent corresponding to the fls
        tas: kt TAS corresponding to the fls</p>
</div>


                            </div>
                            <div id="AircraftPerformance.interpolate_climb_performances" class="classattr">
                                        <input id="AircraftPerformance.interpolate_climb_performances-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">interpolate_climb_performances</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">how</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.interpolate_climb_performances-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.interpolate_climb_performances"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.interpolate_climb_performances-263"><a href="#AircraftPerformance.interpolate_climb_performances-263"><span class="linenos">263</span></a>	<span class="k">def</span> <span class="nf">interpolate_climb_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-264"><a href="#AircraftPerformance.interpolate_climb_performances-264"><span class="linenos">264</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-265"><a href="#AircraftPerformance.interpolate_climb_performances-265"><span class="linenos">265</span></a><span class="sd">		Using the data from the ptf table interpolates the climb performances</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-266"><a href="#AircraftPerformance.interpolate_climb_performances-266"><span class="linenos">266</span></a><span class="sd">		(fuel, rocd, gamma and tas) at a given altitude (fl) and weight (mass)</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-267"><a href="#AircraftPerformance.interpolate_climb_performances-267"><span class="linenos">267</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-268"><a href="#AircraftPerformance.interpolate_climb_performances-268"><span class="linenos">268</span></a>
</span><span id="AircraftPerformance.interpolate_climb_performances-269"><a href="#AircraftPerformance.interpolate_climb_performances-269"><span class="linenos">269</span></a><span class="sd">		It uses the table of performances set by set_climb_fuel_flow_detailled_rate_performances</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-270"><a href="#AircraftPerformance.interpolate_climb_performances-270"><span class="linenos">270</span></a>
</span><span id="AircraftPerformance.interpolate_climb_performances-271"><a href="#AircraftPerformance.interpolate_climb_performances-271"><span class="linenos">271</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-272"><a href="#AircraftPerformance.interpolate_climb_performances-272"><span class="linenos">272</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-273"><a href="#AircraftPerformance.interpolate_climb_performances-273"><span class="linenos">273</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-274"><a href="#AircraftPerformance.interpolate_climb_performances-274"><span class="linenos">274</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-275"><a href="#AircraftPerformance.interpolate_climb_performances-275"><span class="linenos">275</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-276"><a href="#AircraftPerformance.interpolate_climb_performances-276"><span class="linenos">276</span></a>
</span><span id="AircraftPerformance.interpolate_climb_performances-277"><a href="#AircraftPerformance.interpolate_climb_performances-277"><span class="linenos">277</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-278"><a href="#AircraftPerformance.interpolate_climb_performances-278"><span class="linenos">278</span></a><span class="sd">			climb_perf: dictionary with fuel, rocd, gamma and tas as result of the interpolation.</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-279"><a href="#AircraftPerformance.interpolate_climb_performances-279"><span class="linenos">279</span></a><span class="sd">									Note that fuel and tas do not depend on the interpolation.</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-280"><a href="#AircraftPerformance.interpolate_climb_performances-280"><span class="linenos">280</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-281"><a href="#AircraftPerformance.interpolate_climb_performances-281"><span class="linenos">281</span></a>
</span><span id="AircraftPerformance.interpolate_climb_performances-282"><a href="#AircraftPerformance.interpolate_climb_performances-282"><span class="linenos">282</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-283"><a href="#AircraftPerformance.interpolate_climb_performances-283"><span class="linenos">283</span></a>			<span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-284"><a href="#AircraftPerformance.interpolate_climb_performances-284"><span class="linenos">284</span></a>				<span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-285"><a href="#AircraftPerformance.interpolate_climb_performances-285"><span class="linenos">285</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-286"><a href="#AircraftPerformance.interpolate_climb_performances-286"><span class="linenos">286</span></a>				<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-287"><a href="#AircraftPerformance.interpolate_climb_performances-287"><span class="linenos">287</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-288"><a href="#AircraftPerformance.interpolate_climb_performances-288"><span class="linenos">288</span></a>				<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-289"><a href="#AircraftPerformance.interpolate_climb_performances-289"><span class="linenos">289</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-290"><a href="#AircraftPerformance.interpolate_climb_performances-290"><span class="linenos">290</span></a>				<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-291"><a href="#AircraftPerformance.interpolate_climb_performances-291"><span class="linenos">291</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)}</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-292"><a href="#AircraftPerformance.interpolate_climb_performances-292"><span class="linenos">292</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-293"><a href="#AircraftPerformance.interpolate_climb_performances-293"><span class="linenos">293</span></a>			<span class="n">climb_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-294"><a href="#AircraftPerformance.interpolate_climb_performances-294"><span class="linenos">294</span></a>						  <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-295"><a href="#AircraftPerformance.interpolate_climb_performances-295"><span class="linenos">295</span></a>						  <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-296"><a href="#AircraftPerformance.interpolate_climb_performances-296"><span class="linenos">296</span></a>						  <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">climb_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)}</span>
</span><span id="AircraftPerformance.interpolate_climb_performances-297"><a href="#AircraftPerformance.interpolate_climb_performances-297"><span class="linenos">297</span></a>
</span><span id="AircraftPerformance.interpolate_climb_performances-298"><a href="#AircraftPerformance.interpolate_climb_performances-298"><span class="linenos">298</span></a>		<span class="k">return</span> <span class="n">climb_perf</span>
</span></pre></div>


            <div class="docstring"><p>Using the data from the ptf table interpolates the climb performances
(fuel, rocd, gamma and tas) at a given altitude (fl) and weight (mass)
the type of intepolation can be selected with how.</p>

<p>It uses the table of performances set by set_climb_fuel_flow_detailled_rate_performances</p>

<p>Args:
        fl: altitude (ft/10) to interpolate the performances
        mass: (kg) ac mass to interpolate the performances
        how: by default "linear". How to perform the interpolation. Griddata is used to
                         interpolate possible values are: linear, nearest, cubic</p>

<p>Returns:
        climb_perf: dictionary with fuel, rocd, gamma and tas as result of the interpolation.
                                                        Note that fuel and tas do not depend on the interpolation.</p>
</div>


                            </div>
                            <div id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances" class="classattr">
                                        <input id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_descent_fuel_flow_detailled_rate_performances</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">fuel</span>, </span><span class="param"><span class="n">rocd</span>, </span><span class="param"><span class="n">gamma</span>, </span><span class="param"><span class="n">tas</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-300"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-300"><span class="linenos">300</span></a>	<span class="k">def</span> <span class="nf">set_descent_fuel_flow_detailled_rate_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">rocd</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">tas</span><span class="p">):</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-301"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-301"><span class="linenos">301</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-302"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-302"><span class="linenos">302</span></a><span class="sd">		Add the fl, mass, fuel, roc, gamma and tas arrays in the fligth performance object</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-303"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-303"><span class="linenos">303</span></a><span class="sd">		These values come from the ptf table.</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-304"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-304"><span class="linenos">304</span></a><span class="sd">		In this case the values are more detailled as different fuel flows and rocd are</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-305"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-305"><span class="linenos">305</span></a><span class="sd">		considered as a function of altitude and mass. This allow us to interpolate the</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-306"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-306"><span class="linenos">306</span></a><span class="sd">		climb and descent performances with interpolate_descent_performances function.</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-307"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-307"><span class="linenos">307</span></a>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-308"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-308"><span class="linenos">308</span></a><span class="sd">		Note that the performances on fuel flow are the same for all the points. These</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-309"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-309"><span class="linenos">309</span></a><span class="sd">		detailled data are used only for rocd/gamma values.</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-310"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-310"><span class="linenos">310</span></a>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-311"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-311"><span class="linenos">311</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-312"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-312"><span class="linenos">312</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-313"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-313"><span class="linenos">313</span></a><span class="sd">			mass: array of masses corresponding to the fls</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-314"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-314"><span class="linenos">314</span></a><span class="sd">			fuel: array of fuels corresponding to the fls</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-315"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-315"><span class="linenos">315</span></a><span class="sd">			rocd: rate of climb/descent corresponding to the fls</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-316"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-316"><span class="linenos">316</span></a><span class="sd">			gamma: angle of climb/descent corresponding to the fls</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-317"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-317"><span class="linenos">317</span></a><span class="sd">			tas: kt TAS corresponding to the fls</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-318"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-318"><span class="linenos">318</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-319"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-319"><span class="linenos">319</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">fuel</span><span class="p">,</span> <span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">rocd</span><span class="p">,</span>
</span><span id="AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-320"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances-320"><span class="linenos">320</span></a>							 <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">gamma</span><span class="p">,</span> <span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">tas</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Add the fl, mass, fuel, roc, gamma and tas arrays in the fligth performance object
These values come from the ptf table.
In this case the values are more detailled as different fuel flows and rocd are
considered as a function of altitude and mass. This allow us to interpolate the
climb and descent performances with interpolate_descent_performances function.</p>

<p>Note that the performances on fuel flow are the same for all the points. These
detailled data are used only for rocd/gamma values.</p>

<p>Args:
        fl: array of flight levels
        mass: array of masses corresponding to the fls
        fuel: array of fuels corresponding to the fls
        rocd: rate of climb/descent corresponding to the fls
        gamma: angle of climb/descent corresponding to the fls
        tas: kt TAS corresponding to the fls</p>
</div>


                            </div>
                            <div id="AircraftPerformance.interpolate_descent_performances" class="classattr">
                                        <input id="AircraftPerformance.interpolate_descent_performances-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">interpolate_descent_performances</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">how</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.interpolate_descent_performances-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.interpolate_descent_performances"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.interpolate_descent_performances-322"><a href="#AircraftPerformance.interpolate_descent_performances-322"><span class="linenos">322</span></a>	<span class="k">def</span> <span class="nf">interpolate_descent_performances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-323"><a href="#AircraftPerformance.interpolate_descent_performances-323"><span class="linenos">323</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-324"><a href="#AircraftPerformance.interpolate_descent_performances-324"><span class="linenos">324</span></a><span class="sd">		Using the data from the ptf table interpolates the climb performances</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-325"><a href="#AircraftPerformance.interpolate_descent_performances-325"><span class="linenos">325</span></a><span class="sd">		(fuel, rocd, gamma and tas) at a given altitude (fl) and weight (mass)</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-326"><a href="#AircraftPerformance.interpolate_descent_performances-326"><span class="linenos">326</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-327"><a href="#AircraftPerformance.interpolate_descent_performances-327"><span class="linenos">327</span></a>
</span><span id="AircraftPerformance.interpolate_descent_performances-328"><a href="#AircraftPerformance.interpolate_descent_performances-328"><span class="linenos">328</span></a><span class="sd">		It uses the table of performances set by set_descent_fuel_flow_detailled_rate_performances</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-329"><a href="#AircraftPerformance.interpolate_descent_performances-329"><span class="linenos">329</span></a>
</span><span id="AircraftPerformance.interpolate_descent_performances-330"><a href="#AircraftPerformance.interpolate_descent_performances-330"><span class="linenos">330</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-331"><a href="#AircraftPerformance.interpolate_descent_performances-331"><span class="linenos">331</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-332"><a href="#AircraftPerformance.interpolate_descent_performances-332"><span class="linenos">332</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-333"><a href="#AircraftPerformance.interpolate_descent_performances-333"><span class="linenos">333</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-334"><a href="#AircraftPerformance.interpolate_descent_performances-334"><span class="linenos">334</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-335"><a href="#AircraftPerformance.interpolate_descent_performances-335"><span class="linenos">335</span></a>
</span><span id="AircraftPerformance.interpolate_descent_performances-336"><a href="#AircraftPerformance.interpolate_descent_performances-336"><span class="linenos">336</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-337"><a href="#AircraftPerformance.interpolate_descent_performances-337"><span class="linenos">337</span></a><span class="sd">			descent_perf: dictionary with fuel, rocd, gamma and tas as result of the interpolation.</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-338"><a href="#AircraftPerformance.interpolate_descent_performances-338"><span class="linenos">338</span></a><span class="sd">									Note that fuel and tas do not depend on the interpolation.</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-339"><a href="#AircraftPerformance.interpolate_descent_performances-339"><span class="linenos">339</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-340"><a href="#AircraftPerformance.interpolate_descent_performances-340"><span class="linenos">340</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-341"><a href="#AircraftPerformance.interpolate_descent_performances-341"><span class="linenos">341</span></a>			<span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-342"><a href="#AircraftPerformance.interpolate_descent_performances-342"><span class="linenos">342</span></a>				<span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-343"><a href="#AircraftPerformance.interpolate_descent_performances-343"><span class="linenos">343</span></a>								 <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-344"><a href="#AircraftPerformance.interpolate_descent_performances-344"><span class="linenos">344</span></a>				<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-345"><a href="#AircraftPerformance.interpolate_descent_performances-345"><span class="linenos">345</span></a>								 <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-346"><a href="#AircraftPerformance.interpolate_descent_performances-346"><span class="linenos">346</span></a>				<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-347"><a href="#AircraftPerformance.interpolate_descent_performances-347"><span class="linenos">347</span></a>								  <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-348"><a href="#AircraftPerformance.interpolate_descent_performances-348"><span class="linenos">348</span></a>				<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-349"><a href="#AircraftPerformance.interpolate_descent_performances-349"><span class="linenos">349</span></a>								<span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)}</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-350"><a href="#AircraftPerformance.interpolate_descent_performances-350"><span class="linenos">350</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-351"><a href="#AircraftPerformance.interpolate_descent_performances-351"><span class="linenos">351</span></a>			<span class="n">descent_perf</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fuel&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-352"><a href="#AircraftPerformance.interpolate_descent_performances-352"><span class="linenos">352</span></a>							<span class="s1">&#39;rocd&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-353"><a href="#AircraftPerformance.interpolate_descent_performances-353"><span class="linenos">353</span></a>							<span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-354"><a href="#AircraftPerformance.interpolate_descent_performances-354"><span class="linenos">354</span></a>								<span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-355"><a href="#AircraftPerformance.interpolate_descent_performances-355"><span class="linenos">355</span></a>							<span class="s1">&#39;tas&#39;</span><span class="p">:</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">descent_perf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)}</span>
</span><span id="AircraftPerformance.interpolate_descent_performances-356"><a href="#AircraftPerformance.interpolate_descent_performances-356"><span class="linenos">356</span></a>
</span><span id="AircraftPerformance.interpolate_descent_performances-357"><a href="#AircraftPerformance.interpolate_descent_performances-357"><span class="linenos">357</span></a>		<span class="k">return</span> <span class="n">descent_perf</span>
</span></pre></div>


            <div class="docstring"><p>Using the data from the ptf table interpolates the climb performances
(fuel, rocd, gamma and tas) at a given altitude (fl) and weight (mass)
the type of intepolation can be selected with how.</p>

<p>It uses the table of performances set by set_descent_fuel_flow_detailled_rate_performances</p>

<p>Args:
        fl: altitude (ft/10) to interpolate the performances
        mass: (kg) ac mass to interpolate the performances
        how: by default "linear". How to perform the interpolation. Griddata is used to
                         interpolate possible values are: linear, nearest, cubic</p>

<p>Returns:
        descent_perf: dictionary with fuel, rocd, gamma and tas as result of the interpolation.
                                                        Note that fuel and tas do not depend on the interpolation.</p>
</div>


                            </div>
                            <div id="AircraftPerformance.set_detailled_mach_nominal" class="classattr">
                                        <input id="AircraftPerformance.set_detailled_mach_nominal-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_detailled_mach_nominal</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">m</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.set_detailled_mach_nominal-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.set_detailled_mach_nominal"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.set_detailled_mach_nominal-359"><a href="#AircraftPerformance.set_detailled_mach_nominal-359"><span class="linenos">359</span></a>	<span class="k">def</span> <span class="nf">set_detailled_mach_nominal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-360"><a href="#AircraftPerformance.set_detailled_mach_nominal-360"><span class="linenos">360</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-361"><a href="#AircraftPerformance.set_detailled_mach_nominal-361"><span class="linenos">361</span></a><span class="sd">		Add the fl, mass, m arrays in the fligth performance object</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-362"><a href="#AircraftPerformance.set_detailled_mach_nominal-362"><span class="linenos">362</span></a><span class="sd">		These values come from the ptd table.</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-363"><a href="#AircraftPerformance.set_detailled_mach_nominal-363"><span class="linenos">363</span></a><span class="sd">		This is to have the nominal Mach as a function of altitude and mass. This is</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-364"><a href="#AircraftPerformance.set_detailled_mach_nominal-364"><span class="linenos">364</span></a><span class="sd">		useful for low altidues, i.e. &lt;FL360 as the nominal Mach is lower than the one</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-365"><a href="#AircraftPerformance.set_detailled_mach_nominal-365"><span class="linenos">365</span></a><span class="sd">		use in a higher cruise phase.</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-366"><a href="#AircraftPerformance.set_detailled_mach_nominal-366"><span class="linenos">366</span></a><span class="sd">		</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-367"><a href="#AircraftPerformance.set_detailled_mach_nominal-367"><span class="linenos">367</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-368"><a href="#AircraftPerformance.set_detailled_mach_nominal-368"><span class="linenos">368</span></a><span class="sd">			fl: array of flight levels</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-369"><a href="#AircraftPerformance.set_detailled_mach_nominal-369"><span class="linenos">369</span></a><span class="sd">			mass: array of massess corresponding to the fls</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-370"><a href="#AircraftPerformance.set_detailled_mach_nominal-370"><span class="linenos">370</span></a><span class="sd">			m: array of cruise nominal Mach speeds corresponding to the fls</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-371"><a href="#AircraftPerformance.set_detailled_mach_nominal-371"><span class="linenos">371</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.set_detailled_mach_nominal-372"><a href="#AircraftPerformance.set_detailled_mach_nominal-372"><span class="linenos">372</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fl&#39;</span><span class="p">:</span> <span class="n">fl</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">:</span> <span class="n">mass</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">:</span> <span class="n">m</span><span class="p">,</span> <span class="s1">&#39;fl_mass_points&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Add the fl, mass, m arrays in the fligth performance object
These values come from the ptd table.
This is to have the nominal Mach as a function of altitude and mass. This is
useful for low altidues, i.e. <FL360 as the nominal Mach is lower than the one
use in a higher cruise phase.</p>

<p>Args:
        fl: array of flight levels
        mass: array of massess corresponding to the fls
        m: array of cruise nominal Mach speeds corresponding to the fls</p>
</div>


                            </div>
                            <div id="AircraftPerformance.interpolate_cruise_nominal_mach" class="classattr">
                                        <input id="AircraftPerformance.interpolate_cruise_nominal_mach-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">interpolate_cruise_nominal_mach</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">how</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.interpolate_cruise_nominal_mach-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.interpolate_cruise_nominal_mach"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-374"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-374"><span class="linenos">374</span></a>	<span class="k">def</span> <span class="nf">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;linear&quot;</span><span class="p">):</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-375"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-375"><span class="linenos">375</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-376"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-376"><span class="linenos">376</span></a><span class="sd">		Using the data from the ptd table interpolates the nominal mach</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-377"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-377"><span class="linenos">377</span></a><span class="sd">		at a given altitude (fl) and weight (mass)</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-378"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-378"><span class="linenos">378</span></a><span class="sd">		the type of intepolation can be selected with how.</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-379"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-379"><span class="linenos">379</span></a>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-380"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-380"><span class="linenos">380</span></a><span class="sd">		It uses the table of performances set by set_descent_fuel_flow_detailled_rate_performances</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-381"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-381"><span class="linenos">381</span></a>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-382"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-382"><span class="linenos">382</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-383"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-383"><span class="linenos">383</span></a><span class="sd">			fl: altitude (ft/10) to interpolate the performances</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-384"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-384"><span class="linenos">384</span></a><span class="sd">			mass: (kg) ac mass to interpolate the performances</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-385"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-385"><span class="linenos">385</span></a><span class="sd">			how: by default &quot;linear&quot;. How to perform the interpolation. Griddata is used to</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-386"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-386"><span class="linenos">386</span></a><span class="sd">					 interpolate possible values are: linear, nearest, cubic</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-387"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-387"><span class="linenos">387</span></a>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-388"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-388"><span class="linenos">388</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-389"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-389"><span class="linenos">389</span></a><span class="sd">			m: Mach at the interpolated fl and mass.</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-390"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-390"><span class="linenos">390</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-391"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-391"><span class="linenos">391</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-392"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-392"><span class="linenos">392</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="n">griddata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl_mass_points&#39;</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-393"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-393"><span class="linenos">393</span></a>						 <span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="n">how</span><span class="p">)</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-394"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-394"><span class="linenos">394</span></a>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-395"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-395"><span class="linenos">395</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-396"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-396"><span class="linenos">396</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fl&#39;</span><span class="p">),</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-397"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-397"><span class="linenos">397</span></a>						 <span class="bp">self</span><span class="o">.</span><span class="n">mach_detailled_nominal</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">),</span> <span class="n">kind</span><span class="o">=</span><span class="n">how</span><span class="p">)(</span><span class="n">fl</span><span class="p">)</span>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-398"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-398"><span class="linenos">398</span></a>
</span><span id="AircraftPerformance.interpolate_cruise_nominal_mach-399"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach-399"><span class="linenos">399</span></a>		<span class="k">return</span> <span class="n">m</span>
</span></pre></div>


            <div class="docstring"><p>Using the data from the ptd table interpolates the nominal mach
at a given altitude (fl) and weight (mass)
the type of intepolation can be selected with how.</p>

<p>It uses the table of performances set by set_descent_fuel_flow_detailled_rate_performances</p>

<p>Args:
        fl: altitude (ft/10) to interpolate the performances
        mass: (kg) ac mass to interpolate the performances
        how: by default "linear". How to perform the interpolation. Griddata is used to
                         interpolate possible values are: linear, nearest, cubic</p>

<p>Returns:
        m: Mach at the interpolated fl and mass.</p>
</div>


                            </div>
                            <div id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd" class="classattr">
                                        <input id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trajectory_segment_descent_estimation_from_lnd</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl_0</span>, </span><span class="param"><span class="n">weight_lnd</span>, </span><span class="param"><span class="n">fl_1</span><span class="o">=</span><span class="mi">0</span>, </span><span class="param"><span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-401"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-401"><span class="linenos">401</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_descent_estimation_from_lnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_0</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span> <span class="n">fl_1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-402"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-402"><span class="linenos">402</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-403"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-403"><span class="linenos">403</span></a><span class="sd">		Compute the trajectory descent trajectory fl_0 and fl_1 considering</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-404"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-404"><span class="linenos">404</span></a><span class="sd">		that the landing weight is weight_lnd using the decent_perf data.</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-405"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-405"><span class="linenos">405</span></a>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-406"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-406"><span class="linenos">406</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-407"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-407"><span class="linenos">407</span></a><span class="sd">			fl_0: top altitude (ft/100), start of descent</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-408"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-408"><span class="linenos">408</span></a><span class="sd">			weight_lnd: mass (kg) at fl_0 (landing if fl_1=0)</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-409"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-409"><span class="linenos">409</span></a><span class="sd">			fl_1: lower altitude (ft/100), end of descent altitude</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-410"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-410"><span class="linenos">410</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-411"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-411"><span class="linenos">411</span></a><span class="sd">						by default: 10</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-412"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-412"><span class="linenos">412</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-413"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-413"><span class="linenos">413</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-414"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-414"><span class="linenos">414</span></a><span class="sd">			trajectory_segment: trajectory_segment with the descent</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-415"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-415"><span class="linenos">415</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-416"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-416"><span class="linenos">416</span></a>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-417"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-417"><span class="linenos">417</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-418"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-418"><span class="linenos">418</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-419"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-419"><span class="linenos">419</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_lnd</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-420"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-420"><span class="linenos">420</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-421"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-421"><span class="linenos">421</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&lt;</span> <span class="n">fl_0</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-422"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-422"><span class="linenos">422</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_descent_performances</span><span class="p">(</span><span class="n">fl_act</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-423"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-423"><span class="linenos">423</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-424"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-424"><span class="linenos">424</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_lnd</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-425"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-425"><span class="linenos">425</span></a>													<span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-426"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-426"><span class="linenos">426</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-427"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-427"><span class="linenos">427</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-428"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-428"><span class="linenos">428</span></a>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-429"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-429"><span class="linenos">429</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-430"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-430"><span class="linenos">430</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-431"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-431"><span class="linenos">431</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-432"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-432"><span class="linenos">432</span></a>			<span class="n">ddits</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-433"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-433"><span class="linenos">433</span></a>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-434"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-434"><span class="linenos">434</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-435"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-435"><span class="linenos">435</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="n">dfuel</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-436"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-436"><span class="linenos">436</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddits</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-437"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-437"><span class="linenos">437</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">+</span> <span class="n">d_fl</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-438"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-438"><span class="linenos">438</span></a>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-439"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-439"><span class="linenos">439</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_lnd</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-440"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-440"><span class="linenos">440</span></a>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-441"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-441"><span class="linenos">441</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_lnd</span><span class="p">,</span> <span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-442"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-442"><span class="linenos">442</span></a>
</span><span id="AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-443"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd-443"><span class="linenos">443</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span></pre></div>


            <div class="docstring"><p>Compute the trajectory descent trajectory fl_0 and fl_1 considering
that the landing weight is weight_lnd using the decent_perf data.</p>

<p>Args:
        fl_0: top altitude (ft/100), start of descent
        weight_lnd: mass (kg) at fl_0 (landing if fl_1=0)
        fl_1: lower altitude (ft/100), end of descent altitude
        d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),
                                by default: 10</p>

<p>Returns:
        trajectory_segment: trajectory_segment with the descent</p>
</div>


                            </div>
                            <div id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc" class="classattr">
                                        <input id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trajectory_segment_climb_estimation_from_toc</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl_1</span>, </span><span class="param"><span class="n">weight_1</span>, </span><span class="param"><span class="n">fl_0</span><span class="o">=</span><span class="mi">0</span>, </span><span class="param"><span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-445"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-445"><span class="linenos">445</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-446"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-446"><span class="linenos">446</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-447"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-447"><span class="linenos">447</span></a><span class="sd">		Compute the trajectory climb trajectory between fl_0 and fl_1 considering</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-448"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-448"><span class="linenos">448</span></a><span class="sd">		that the weight at fl_1 is weight_1 using the climb_perf data.</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-449"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-449"><span class="linenos">449</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-450"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-450"><span class="linenos">450</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-451"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-451"><span class="linenos">451</span></a><span class="sd">			fl_1: top altitude (ft/100), end of climb</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-452"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-452"><span class="linenos">452</span></a><span class="sd">			weight_1: mass (kg) at fl_1</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-453"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-453"><span class="linenos">453</span></a><span class="sd">			fl_0: lower altitude (ft/100), start of climb altitdue (by default 0)</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-454"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-454"><span class="linenos">454</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-455"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-455"><span class="linenos">455</span></a><span class="sd">						by default: 10</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-456"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-456"><span class="linenos">456</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-457"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-457"><span class="linenos">457</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-458"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-458"><span class="linenos">458</span></a><span class="sd">			trajectory_segment: trajectory_segment with the climb</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-459"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-459"><span class="linenos">459</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-460"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-460"><span class="linenos">460</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-461"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-461"><span class="linenos">461</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-462"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-462"><span class="linenos">462</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-463"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-463"><span class="linenos">463</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-464"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-464"><span class="linenos">464</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-465"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-465"><span class="linenos">465</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&gt;</span> <span class="n">fl_0</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-466"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-466"><span class="linenos">466</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_climb_performances</span><span class="p">(</span><span class="n">fl_act</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-467"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-467"><span class="linenos">467</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-468"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-468"><span class="linenos">468</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_act</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-469"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-469"><span class="linenos">469</span></a>													<span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-470"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-470"><span class="linenos">470</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-471"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-471"><span class="linenos">471</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-472"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-472"><span class="linenos">472</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-473"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-473"><span class="linenos">473</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-474"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-474"><span class="linenos">474</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-475"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-475"><span class="linenos">475</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-476"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-476"><span class="linenos">476</span></a>			<span class="n">ddist</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-477"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-477"><span class="linenos">477</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-478"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-478"><span class="linenos">478</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-479"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-479"><span class="linenos">479</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddist</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-480"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-480"><span class="linenos">480</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="n">dfuel</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-481"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-481"><span class="linenos">481</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">-</span> <span class="n">d_fl</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-482"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-482"><span class="linenos">482</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-483"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-483"><span class="linenos">483</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-484"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-484"><span class="linenos">484</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-485"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-485"><span class="linenos">485</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-486"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-486"><span class="linenos">486</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_toc-487"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc-487"><span class="linenos">487</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span></pre></div>


            <div class="docstring"><p>Compute the trajectory climb trajectory between fl_0 and fl_1 considering
that the weight at fl_1 is weight_1 using the climb_perf data.</p>

<p>Args:
        fl_1: top altitude (ft/100), end of climb
        weight_1: mass (kg) at fl_1
        fl_0: lower altitude (ft/100), start of climb altitdue (by default 0)
        d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),
                                by default: 10</p>

<p>Returns:
        trajectory_segment: trajectory_segment with the climb</p>
</div>


                            </div>
                            <div id="AircraftPerformance.trajectory_segment_climb_estimation_from_to" class="classattr">
                                        <input id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trajectory_segment_climb_estimation_from_to</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl_1</span>, </span><span class="param"><span class="n">weight_0</span>, </span><span class="param"><span class="n">fl_0</span><span class="o">=</span><span class="mi">0</span>, </span><span class="param"><span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.trajectory_segment_climb_estimation_from_to-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-489"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-489"><span class="linenos">489</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_climb_estimation_from_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_0</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d_fl</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-490"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-490"><span class="linenos">490</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-491"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-491"><span class="linenos">491</span></a><span class="sd">		Compute the trajectory climb trajectory between fl_0 and fl_1 considering</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-492"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-492"><span class="linenos">492</span></a><span class="sd">		that the weight at fl_0 is weight_0 using the climb_perf data.</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-493"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-493"><span class="linenos">493</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-494"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-494"><span class="linenos">494</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-495"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-495"><span class="linenos">495</span></a><span class="sd">			fl_1: top altitude (ft/100), end of climb</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-496"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-496"><span class="linenos">496</span></a><span class="sd">			weight_0: mass (kg) at fl_0</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-497"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-497"><span class="linenos">497</span></a><span class="sd">			fl_0: lower altitude (ft/100), start of climb altitdue (by default 0)</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-498"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-498"><span class="linenos">498</span></a><span class="sd">			d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-499"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-499"><span class="linenos">499</span></a><span class="sd">						by default: 10</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-500"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-500"><span class="linenos">500</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-501"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-501"><span class="linenos">501</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-502"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-502"><span class="linenos">502</span></a><span class="sd">			trajectory_segment: trajectory_segment with the climb</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-503"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-503"><span class="linenos">503</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-504"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-504"><span class="linenos">504</span></a>		<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_0</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-505"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-505"><span class="linenos">505</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-506"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-506"><span class="linenos">506</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-507"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-507"><span class="linenos">507</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_0</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-508"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-508"><span class="linenos">508</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-509"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-509"><span class="linenos">509</span></a>		<span class="k">while</span> <span class="n">fl_act</span> <span class="o">&lt;</span> <span class="n">fl_1</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-510"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-510"><span class="linenos">510</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_climb_performances</span><span class="p">(</span><span class="n">fl_act</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-511"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-511"><span class="linenos">511</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">))):</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-512"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-512"><span class="linenos">512</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-513"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-513"><span class="linenos">513</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-514"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-514"><span class="linenos">514</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-515"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-515"><span class="linenos">515</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-516"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-516"><span class="linenos">516</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-517"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-517"><span class="linenos">517</span></a>			<span class="n">dtime</span> <span class="o">=</span> <span class="n">d_fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-518"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-518"><span class="linenos">518</span></a>			<span class="n">dfuel</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fuel&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-519"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-519"><span class="linenos">519</span></a>			<span class="n">ddist</span> <span class="o">=</span> <span class="n">dtime</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-520"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-520"><span class="linenos">520</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-521"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-521"><span class="linenos">521</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">dtime</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-522"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-522"><span class="linenos">522</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">ddist</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-523"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-523"><span class="linenos">523</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">dfuel</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-524"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-524"><span class="linenos">524</span></a>			<span class="n">fl_act</span> <span class="o">=</span> <span class="n">fl_act</span> <span class="o">+</span> <span class="n">d_fl</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-525"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-525"><span class="linenos">525</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-526"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-526"><span class="linenos">526</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight_0</span> <span class="o">-</span> <span class="n">weight</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-527"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-527"><span class="linenos">527</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-528"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-528"><span class="linenos">528</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="p">,</span> <span class="n">weight_0</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="s2">&quot;climb&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-529"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-529"><span class="linenos">529</span></a>
</span><span id="AircraftPerformance.trajectory_segment_climb_estimation_from_to-530"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to-530"><span class="linenos">530</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span></pre></div>


            <div class="docstring"><p>Compute the trajectory climb trajectory between fl_0 and fl_1 considering
that the weight at fl_0 is weight_0 using the climb_perf data.</p>

<p>Args:
        fl_1: top altitude (ft/100), end of climb
        weight_0: mass (kg) at fl_0
        fl_0: lower altitude (ft/100), start of climb altitdue (by default 0)
        d_fl: (ft/100), increment in altitude use to estimate the trajectory (Delta_fl),
                                by default: 10</p>

<p>Returns:
        trajectory_segment: trajectory_segment with the climb</p>
</div>


                            </div>
                            <div id="AircraftPerformance.trajectory_segment_cruise_estimation" class="classattr">
                                        <input id="AircraftPerformance.trajectory_segment_cruise_estimation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trajectory_segment_cruise_estimation</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">fl_cruise</span>,</span><span class="param">	<span class="n">weight_1</span>,</span><span class="param">	<span class="n">cruise_distance</span>,</span><span class="param">	<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">max_steps</span><span class="o">=</span><span class="mi">10000</span>,</span><span class="param">	<span class="n">min_d_dist</span><span class="o">=</span><span class="mi">1</span>,</span><span class="param">	<span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.trajectory_segment_cruise_estimation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.trajectory_segment_cruise_estimation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-532"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-532"><span class="linenos">532</span></a>	<span class="k">def</span> <span class="nf">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-533"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-533"><span class="linenos">533</span></a>											 <span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">min_d_dist</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-534"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-534"><span class="linenos">534</span></a>											 <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-535"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-535"><span class="linenos">535</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-536"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-536"><span class="linenos">536</span></a><span class="sd">		Compute the trajectory cruise for a given cruise_distance and fl</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-537"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-537"><span class="linenos">537</span></a><span class="sd">		ending the cruise at weight_1</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-538"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-538"><span class="linenos">538</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-539"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-539"><span class="linenos">539</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-540"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-540"><span class="linenos">540</span></a><span class="sd">			fl_cruise (ft/100), altitude of cruise</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-541"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-541"><span class="linenos">541</span></a><span class="sd">			weight_1: mass (kg) at end of cruise</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-542"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-542"><span class="linenos">542</span></a><span class="sd">			cruise_distance: (nm) distance of the cruise</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-543"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-543"><span class="linenos">543</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-544"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-544"><span class="linenos">544</span></a><span class="sd">			use_mref: default False: If true then m_nom is used as cruising speed</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-545"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-545"><span class="linenos">545</span></a><span class="sd">												True: If cruise_fl &lt; 360 m cruise is estimated as</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-546"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-546"><span class="linenos">546</span></a><span class="sd">															interpolate_cruise_nominal_mach with weight_1</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-547"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-547"><span class="linenos">547</span></a><span class="sd">			max_steps: default 10000: maximum number of steps used to estimate the cruise</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-548"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-548"><span class="linenos">548</span></a><span class="sd">																(maximum number of divisions of the cruise in delta distance)</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-549"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-549"><span class="linenos">549</span></a><span class="sd">			min_d_dist: (nm) default 1: minimum distance of a step in delta distance</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-550"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-550"><span class="linenos">550</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-551"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-551"><span class="linenos">551</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-552"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-552"><span class="linenos">552</span></a><span class="sd">			trajectory_segment: trajectory_segment with the cruise</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-553"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-553"><span class="linenos">553</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-554"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-554"><span class="linenos">554</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-555"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-555"><span class="linenos">555</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">min_d_dist</span><span class="p">),</span> <span class="n">max_steps</span><span class="p">))</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-556"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-556"><span class="linenos">556</span></a>		<span class="n">d_dist</span> <span class="o">=</span> <span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-557"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-557"><span class="linenos">557</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-558"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-558"><span class="linenos">558</span></a>		<span class="n">dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-559"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-559"><span class="linenos">559</span></a>		<span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-560"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-560"><span class="linenos">560</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-561"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-561"><span class="linenos">561</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-562"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-562"><span class="linenos">562</span></a>		<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_cruise</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-563"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-563"><span class="linenos">563</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-564"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-564"><span class="linenos">564</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-565"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-565"><span class="linenos">565</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-566"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-566"><span class="linenos">566</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-567"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-567"><span class="linenos">567</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-568"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-568"><span class="linenos">568</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-569"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-569"><span class="linenos">569</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-570"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-570"><span class="linenos">570</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-571"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-571"><span class="linenos">571</span></a>		<span class="k">while</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">error</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-572"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-572"><span class="linenos">572</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-573"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-573"><span class="linenos">573</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-574"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-574"><span class="linenos">574</span></a>			<span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="n">d_dist</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-575"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-575"><span class="linenos">575</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="p">(</span><span class="n">ff</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-576"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-576"><span class="linenos">576</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">t</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-577"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-577"><span class="linenos">577</span></a>			<span class="n">dist</span> <span class="o">=</span> <span class="n">dist</span> <span class="o">+</span> <span class="n">d_dist</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-578"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-578"><span class="linenos">578</span></a>			<span class="k">if</span> <span class="n">weight</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-579"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-579"><span class="linenos">579</span></a>				<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-580"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-580"><span class="linenos">580</span></a>													<span class="p">(</span><span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span><span class="p">),</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-581"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-581"><span class="linenos">581</span></a>													<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-582"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-582"><span class="linenos">582</span></a>				<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-583"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-583"><span class="linenos">583</span></a>				<span class="k">return</span> <span class="n">traj_segment</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-584"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-584"><span class="linenos">584</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-585"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-585"><span class="linenos">585</span></a>		<span class="n">fuel</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-586"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-586"><span class="linenos">586</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-587"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-587"><span class="linenos">587</span></a>		<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-588"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-588"><span class="linenos">588</span></a>											<span class="n">fuel</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span> <span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-589"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-589"><span class="linenos">589</span></a>
</span><span id="AircraftPerformance.trajectory_segment_cruise_estimation-590"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation-590"><span class="linenos">590</span></a>		<span class="k">return</span> <span class="n">traj_segment</span>
</span></pre></div>


            <div class="docstring"><p>Compute the trajectory cruise for a given cruise_distance and fl
ending the cruise at weight_1</p>

<p>Args:
        fl_cruise (ft/100), altitude of cruise
        weight_1: mass (kg) at end of cruise
        cruise_distance: (nm) distance of the cruise</p>

<pre><code>    use_mref: default False: If true then m_nom is used as cruising speed
                                                                            True: If cruise_fl &lt; 360 m cruise is estimated as
                                                                                                    interpolate_cruise_nominal_mach with weight_1
    max_steps: default 10000: maximum number of steps used to estimate the cruise
                                                                                                            (maximum number of divisions of the cruise in delta distance)
    min_d_dist: (nm) default 1: minimum distance of a step in delta distance
</code></pre>

<p>Returns:
        trajectory_segment: trajectory_segment with the cruise</p>
</div>


                            </div>
                            <div id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change" class="classattr">
                                        <input id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">trajectory_cruise_estimation_with_fl_change</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">fl_1</span>,</span><span class="param">	<span class="n">weight_1</span>,</span><span class="param">	<span class="n">cruise_distance</span>,</span><span class="param">	<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">max_steps</span><span class="o">=</span><span class="mi">10000</span>,</span><span class="param">	<span class="n">min_d_dist</span><span class="o">=</span><span class="mi">1</span>,</span><span class="param">	<span class="n">climb_step</span><span class="o">=</span><span class="mi">20</span>,</span><span class="param">	<span class="n">max_climbs</span><span class="o">=</span><span class="mi">1</span>,</span><span class="param">	<span class="n">min_dist_remaining_fl</span><span class="o">=</span><span class="mi">50</span>,</span><span class="param">	<span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-592"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-592"><span class="linenos">592</span></a>	<span class="k">def</span> <span class="nf">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl_1</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-593"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-593"><span class="linenos">593</span></a>													<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_steps</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">min_d_dist</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-594"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-594"><span class="linenos">594</span></a>													<span class="n">climb_step</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">min_dist_remaining_fl</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-595"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-595"><span class="linenos">595</span></a>													<span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-596"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-596"><span class="linenos">596</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-597"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-597"><span class="linenos">597</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-598"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-598"><span class="linenos">598</span></a><span class="sd">		Compute the trajectory cruise for a given cruise_distance with possible</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-599"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-599"><span class="linenos">599</span></a><span class="sd">		fl changes. In this case not a trajectory_segment but a full trajectory</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-600"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-600"><span class="linenos">600</span></a><span class="sd">		is returned as the cruise might be composed of several trajectory_segments.</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-601"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-601"><span class="linenos">601</span></a><span class="sd">		The cruise is estimated considereng that the final fl used is fl_1 and </span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-602"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-602"><span class="linenos">602</span></a><span class="sd">		the weight at the end of cruise is weight_1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-603"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-603"><span class="linenos">603</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-604"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-604"><span class="linenos">604</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-605"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-605"><span class="linenos">605</span></a><span class="sd">			fl_1: (ft/100), altitude at the end of cruise</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-606"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-606"><span class="linenos">606</span></a><span class="sd">			weight_1: mass (kg) at end of cruise</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-607"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-607"><span class="linenos">607</span></a><span class="sd">			cruise_distance: (nm) distance of the cruise</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-608"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-608"><span class="linenos">608</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-609"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-609"><span class="linenos">609</span></a><span class="sd">			use_mref: default False: If true then m_nom is used as cruising speed</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-610"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-610"><span class="linenos">610</span></a><span class="sd">												True: If cruise_fl &lt; 360 m cruise is estimated as</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-611"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-611"><span class="linenos">611</span></a><span class="sd">															interpolate_cruise_nominal_mach with weight_1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-612"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-612"><span class="linenos">612</span></a><span class="sd">															M will be reassessed everytime a climb step is</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-613"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-613"><span class="linenos">613</span></a><span class="sd">															performed.</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-614"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-614"><span class="linenos">614</span></a><span class="sd">			max_steps: default 10000: maximum number of steps used to estimate the cruise</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-615"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-615"><span class="linenos">615</span></a><span class="sd">																(maximum number of divisions of the cruise in delta distance)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-616"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-616"><span class="linenos">616</span></a><span class="sd">			min_d_dist: (nm) default 1: minimum distance of a step in delta distance</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-617"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-617"><span class="linenos">617</span></a><span class="sd">			climb_step: (ft/100) default 20, altitude of the climb steps used</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-618"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-618"><span class="linenos">618</span></a><span class="sd">			max_climbs: default 1: number of climbs considered</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-619"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-619"><span class="linenos">619</span></a><span class="sd">			min_dist_remaining_fl: (nm) default 50, minimum cruise left before considering a climb step</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-620"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-620"><span class="linenos">620</span></a><span class="sd">			</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-621"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-621"><span class="linenos">621</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-622"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-622"><span class="linenos">622</span></a><span class="sd">			trajectory: trajectory containing the trajectory_segment that define the cruise</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-623"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-623"><span class="linenos">623</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-624"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-624"><span class="linenos">624</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-625"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-625"><span class="linenos">625</span></a>		<span class="n">fl_lower</span> <span class="o">=</span> <span class="n">fl_1</span> <span class="o">-</span> <span class="n">climb_step</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-626"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-626"><span class="linenos">626</span></a>		<span class="n">fl_used</span> <span class="o">=</span> <span class="n">fl_1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-627"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-627"><span class="linenos">627</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-628"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-628"><span class="linenos">628</span></a>		<span class="n">traj</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">Trajectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bada_version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-629"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-629"><span class="linenos">629</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-630"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-630"><span class="linenos">630</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">min_d_dist</span><span class="p">),</span> <span class="n">max_steps</span><span class="p">))</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-631"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-631"><span class="linenos">631</span></a>		<span class="n">d_dist</span> <span class="o">=</span> <span class="n">cruise_distance</span> <span class="o">/</span> <span class="n">n</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-632"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-632"><span class="linenos">632</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-633"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-633"><span class="linenos">633</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-634"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-634"><span class="linenos">634</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-635"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-635"><span class="linenos">635</span></a>		<span class="n">fuel_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-636"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-636"><span class="linenos">636</span></a>		<span class="n">time_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-637"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-637"><span class="linenos">637</span></a>		<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-638"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-638"><span class="linenos">638</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-639"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-639"><span class="linenos">639</span></a>		<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_used</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-640"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-640"><span class="linenos">640</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-641"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-641"><span class="linenos">641</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-642"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-642"><span class="linenos">642</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-643"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-643"><span class="linenos">643</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-644"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-644"><span class="linenos">644</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-645"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-645"><span class="linenos">645</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-646"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-646"><span class="linenos">646</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-647"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-647"><span class="linenos">647</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-648"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-648"><span class="linenos">648</span></a>		<span class="k">if</span> <span class="n">cruise_distance</span> <span class="o">&lt;</span> <span class="n">error</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-649"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-649"><span class="linenos">649</span></a>			<span class="c1"># The segment to compute is smaller than 0.1 nm. Just compute the time, fuel, etc. it takes</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-650"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-650"><span class="linenos">650</span></a>			<span class="c1"># to cover that distance and return it.</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-651"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-651"><span class="linenos">651</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-652"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-652"><span class="linenos">652</span></a>			<span class="n">time_step</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-653"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-653"><span class="linenos">653</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">ff</span> <span class="o">*</span> <span class="n">time_step</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-654"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-654"><span class="linenos">654</span></a>			<span class="n">weight</span> <span class="o">=</span> <span class="n">weight_1</span> <span class="o">+</span> <span class="n">fuel_segment</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-655"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-655"><span class="linenos">655</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-656"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-656"><span class="linenos">656</span></a>			<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">cruise_distance</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-657"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-657"><span class="linenos">657</span></a>												<span class="n">time_step</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-658"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-658"><span class="linenos">658</span></a>												<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-659"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-659"><span class="linenos">659</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-660"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-660"><span class="linenos">660</span></a>			<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-661"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-661"><span class="linenos">661</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-662"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-662"><span class="linenos">662</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-663"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-663"><span class="linenos">663</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-664"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-664"><span class="linenos">664</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-665"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-665"><span class="linenos">665</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-666"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-666"><span class="linenos">666</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-667"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-667"><span class="linenos">667</span></a>		<span class="n">sr</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-668"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-668"><span class="linenos">668</span></a>		<span class="n">sr_lower</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-669"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-669"><span class="linenos">669</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-670"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-670"><span class="linenos">670</span></a>		<span class="k">while</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">+</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-671"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-671"><span class="linenos">671</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-672"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-672"><span class="linenos">672</span></a>			<span class="k">if</span> <span class="n">max_climbs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-673"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-673"><span class="linenos">673</span></a>				<span class="n">sr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-674"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-674"><span class="linenos">674</span></a>				<span class="n">sr_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_lower</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-675"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-675"><span class="linenos">675</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-676"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-676"><span class="linenos">676</span></a>			<span class="k">while</span> <span class="p">((</span><span class="n">max_climbs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-677"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-677"><span class="linenos">677</span></a>				   <span class="p">((</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">-</span> <span class="n">dist_cruise_segment</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">min_dist_remaining_fl</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-678"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-678"><span class="linenos">678</span></a>				   <span class="ow">and</span> <span class="p">(</span><span class="n">sr_lower</span> <span class="o">&gt;=</span> <span class="n">sr</span><span class="p">)):</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-679"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-679"><span class="linenos">679</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-680"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-680"><span class="linenos">680</span></a>				<span class="c1"># Do a climb from low to used</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-681"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-681"><span class="linenos">681</span></a>				<span class="k">if</span> <span class="p">(</span><span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-682"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-682"><span class="linenos">682</span></a>					<span class="c1"># We are descending so we are too high</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-683"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-683"><span class="linenos">683</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">7</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-684"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-684"><span class="linenos">684</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-685"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-685"><span class="linenos">685</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-686"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-686"><span class="linenos">686</span></a>				<span class="k">if</span> <span class="n">dist_cruise_segment</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-687"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-687"><span class="linenos">687</span></a>					<span class="c1"># Save previous cruise segment</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-688"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-688"><span class="linenos">688</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-689"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-689"><span class="linenos">689</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-690"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-690"><span class="linenos">690</span></a>					<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span> <span class="n">time_segment</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-691"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-691"><span class="linenos">691</span></a>														<span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span> <span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-692"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-692"><span class="linenos">692</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-693"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-693"><span class="linenos">693</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-694"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-694"><span class="linenos">694</span></a>					<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-695"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-695"><span class="linenos">695</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-696"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-696"><span class="linenos">696</span></a>					<span class="n">time_segment</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-697"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-697"><span class="linenos">697</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-698"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-698"><span class="linenos">698</span></a>				<span class="n">c_segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">fl_0</span><span class="o">=</span><span class="n">fl_lower</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-699"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-699"><span class="linenos">699</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">c_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-700"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-700"><span class="linenos">700</span></a>				<span class="k">if</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-701"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-701"><span class="linenos">701</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">5</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-702"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-702"><span class="linenos">702</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-703"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-703"><span class="linenos">703</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-704"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-704"><span class="linenos">704</span></a>				<span class="n">fl_used</span> <span class="o">=</span> <span class="n">fl_lower</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-705"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-705"><span class="linenos">705</span></a>				<span class="n">fl_lower</span> <span class="o">=</span> <span class="n">fl_used</span> <span class="o">-</span> <span class="n">climb_step</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-706"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-706"><span class="linenos">706</span></a>				<span class="n">weight</span> <span class="o">=</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-707"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-707"><span class="linenos">707</span></a>				<span class="n">weight_1</span> <span class="o">=</span> <span class="n">c_segment</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-708"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-708"><span class="linenos">708</span></a>				<span class="n">n_remaining</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">/</span> <span class="n">d_dist</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-709"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-709"><span class="linenos">709</span></a>				<span class="n">d_dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">cruise_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_remaining</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-710"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-710"><span class="linenos">710</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-711"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-711"><span class="linenos">711</span></a>				<span class="n">max_climbs</span> <span class="o">=</span> <span class="n">max_climbs</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-712"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-712"><span class="linenos">712</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-713"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-713"><span class="linenos">713</span></a>				<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fl_used</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">):</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-714"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-714"><span class="linenos">714</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-715"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-715"><span class="linenos">715</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-716"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-716"><span class="linenos">716</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-717"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-717"><span class="linenos">717</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-718"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-718"><span class="linenos">718</span></a>						<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-719"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-719"><span class="linenos">719</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-720"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-720"><span class="linenos">720</span></a>				<span class="n">sr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-721"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-721"><span class="linenos">721</span></a>				<span class="n">sr_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_sr</span><span class="p">(</span><span class="n">fl_lower</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-722"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-722"><span class="linenos">722</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-723"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-723"><span class="linenos">723</span></a>			<span class="k">if</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">+</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">cruise_distance</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-724"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-724"><span class="linenos">724</span></a>				<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_fuel_flow</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-725"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-725"><span class="linenos">725</span></a>				<span class="n">time_step</span> <span class="o">=</span> <span class="p">(</span><span class="n">d_dist</span> <span class="o">/</span> <span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">)</span> <span class="o">+</span> <span class="n">avg_cruise_wind</span><span class="p">))</span> <span class="o">*</span> <span class="mi">60</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-726"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-726"><span class="linenos">726</span></a>				<span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">+</span> <span class="p">(</span><span class="n">ff</span> <span class="o">*</span> <span class="n">time_step</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-727"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-727"><span class="linenos">727</span></a>				<span class="n">time_segment</span> <span class="o">=</span> <span class="n">time_segment</span> <span class="o">+</span> <span class="n">time_step</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-728"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-728"><span class="linenos">728</span></a>				<span class="n">dist_cruise_segment</span> <span class="o">=</span> <span class="n">dist_cruise_segment</span> <span class="o">+</span> <span class="n">d_dist</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-729"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-729"><span class="linenos">729</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-730"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-730"><span class="linenos">730</span></a>				<span class="k">if</span> <span class="n">weight</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-731"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-731"><span class="linenos">731</span></a>					<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-732"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-732"><span class="linenos">732</span></a>					<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-733"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-733"><span class="linenos">733</span></a>														<span class="n">time_segment</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-734"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-734"><span class="linenos">734</span></a>														<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-735"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-735"><span class="linenos">735</span></a>					<span class="n">traj_segment</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-736"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-736"><span class="linenos">736</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-737"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-737"><span class="linenos">737</span></a>					<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-738"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-738"><span class="linenos">738</span></a>					<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-739"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-739"><span class="linenos">739</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-740"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-740"><span class="linenos">740</span></a>		<span class="k">if</span> <span class="n">dist_cruise_segment</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-741"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-741"><span class="linenos">741</span></a>			<span class="n">fuel_segment</span> <span class="o">=</span> <span class="n">weight</span> <span class="o">-</span> <span class="n">weight_1</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-742"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-742"><span class="linenos">742</span></a>			<span class="n">traj_segment</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_used</span><span class="p">,</span> <span class="n">fl_used</span><span class="p">,</span> <span class="n">dist_cruise_segment</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-743"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-743"><span class="linenos">743</span></a>												<span class="n">time_segment</span><span class="p">,</span> <span class="n">fuel_segment</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="s2">&quot;cruise&quot;</span><span class="p">,</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-744"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-744"><span class="linenos">744</span></a>												<span class="n">avg_wind</span><span class="o">=</span><span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-745"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-745"><span class="linenos">745</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">traj_segment</span><span class="p">)</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-746"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-746"><span class="linenos">746</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-747"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-747"><span class="linenos">747</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-748"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-748"><span class="linenos">748</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">8</span>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-749"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-749"><span class="linenos">749</span></a>
</span><span id="AircraftPerformance.trajectory_cruise_estimation_with_fl_change-750"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change-750"><span class="linenos">750</span></a>		<span class="k">return</span> <span class="n">traj</span>
</span></pre></div>


            <div class="docstring"><p>Compute the trajectory cruise for a given cruise_distance with possible
fl changes. In this case not a trajectory_segment but a full trajectory
is returned as the cruise might be composed of several trajectory_segments.
The cruise is estimated considereng that the final fl used is fl_1 and 
the weight at the end of cruise is weight_1</p>

<p>Args:
        fl_1: (ft/100), altitude at the end of cruise
        weight_1: mass (kg) at end of cruise
        cruise_distance: (nm) distance of the cruise</p>

<pre><code>    use_mref: default False: If true then m_nom is used as cruising speed
                                                                            True: If cruise_fl &lt; 360 m cruise is estimated as
                                                                                                    interpolate_cruise_nominal_mach with weight_1
                                                                                                    M will be reassessed everytime a climb step is
                                                                                                    performed.
    max_steps: default 10000: maximum number of steps used to estimate the cruise
                                                                                                            (maximum number of divisions of the cruise in delta distance)
    min_d_dist: (nm) default 1: minimum distance of a step in delta distance
    climb_step: (ft/100) default 20, altitude of the climb steps used
    max_climbs: default 1: number of climbs considered
    min_dist_remaining_fl: (nm) default 50, minimum cruise left before considering a climb step
</code></pre>

<p>Returns:
        trajectory: trajectory containing the trajectory_segment that define the cruise</p>
</div>


                            </div>
                            <div id="AircraftPerformance.error_extra_cruise" class="classattr">
                                        <input id="AircraftPerformance.error_extra_cruise-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">error_extra_cruise</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">x</span>, </span><span class="param"><span class="n">a</span>, </span><span class="param"><span class="n">weight_1</span>, </span><span class="param"><span class="n">distance_to_cover</span>, </span><span class="param"><span class="n">fl_cruise</span>, </span><span class="param"><span class="n">m</span>, </span><span class="param"><span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.error_extra_cruise-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.error_extra_cruise"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.error_extra_cruise-752"><a href="#AircraftPerformance.error_extra_cruise-752"><span class="linenos">752</span></a>	<span class="nd">@staticmethod</span>
</span><span id="AircraftPerformance.error_extra_cruise-753"><a href="#AircraftPerformance.error_extra_cruise-753"><span class="linenos">753</span></a>	<span class="k">def</span> <span class="nf">error_extra_cruise</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">distance_to_cover</span><span class="p">,</span> <span class="n">fl_cruise</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance.error_extra_cruise-754"><a href="#AircraftPerformance.error_extra_cruise-754"><span class="linenos">754</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.error_extra_cruise-755"><a href="#AircraftPerformance.error_extra_cruise-755"><span class="linenos">755</span></a><span class="sd">		Method used to estimate the error on total distance done if x nm</span>
</span><span id="AircraftPerformance.error_extra_cruise-756"><a href="#AircraftPerformance.error_extra_cruise-756"><span class="linenos">756</span></a><span class="sd">		of cruise are done followed by a descent to FL0 with respect to the</span>
</span><span id="AircraftPerformance.error_extra_cruise-757"><a href="#AircraftPerformance.error_extra_cruise-757"><span class="linenos">757</span></a><span class="sd">		distance_to_cover available.</span>
</span><span id="AircraftPerformance.error_extra_cruise-758"><a href="#AircraftPerformance.error_extra_cruise-758"><span class="linenos">758</span></a><span class="sd">		Function used to minimize the error whe optimising the value of x</span>
</span><span id="AircraftPerformance.error_extra_cruise-759"><a href="#AircraftPerformance.error_extra_cruise-759"><span class="linenos">759</span></a><span class="sd">		using minimize_scalar</span>
</span><span id="AircraftPerformance.error_extra_cruise-760"><a href="#AircraftPerformance.error_extra_cruise-760"><span class="linenos">760</span></a>
</span><span id="AircraftPerformance.error_extra_cruise-761"><a href="#AircraftPerformance.error_extra_cruise-761"><span class="linenos">761</span></a><span class="sd">						 x</span>
</span><span id="AircraftPerformance.error_extra_cruise-762"><a href="#AircraftPerformance.error_extra_cruise-762"><span class="linenos">762</span></a><span class="sd">				. - - - -</span>
</span><span id="AircraftPerformance.error_extra_cruise-763"><a href="#AircraftPerformance.error_extra_cruise-763"><span class="linenos">763</span></a><span class="sd">			 .</span>
</span><span id="AircraftPerformance.error_extra_cruise-764"><a href="#AircraftPerformance.error_extra_cruise-764"><span class="linenos">764</span></a><span class="sd">			.</span>
</span><span id="AircraftPerformance.error_extra_cruise-765"><a href="#AircraftPerformance.error_extra_cruise-765"><span class="linenos">765</span></a><span class="sd">		 .</span>
</span><span id="AircraftPerformance.error_extra_cruise-766"><a href="#AircraftPerformance.error_extra_cruise-766"><span class="linenos">766</span></a><span class="sd">			 cd</span>
</span><span id="AircraftPerformance.error_extra_cruise-767"><a href="#AircraftPerformance.error_extra_cruise-767"><span class="linenos">767</span></a><span class="sd">		</span>
</span><span id="AircraftPerformance.error_extra_cruise-768"><a href="#AircraftPerformance.error_extra_cruise-768"><span class="linenos">768</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.error_extra_cruise-769"><a href="#AircraftPerformance.error_extra_cruise-769"><span class="linenos">769</span></a><span class="sd">			x: (nm) distance of cruise</span>
</span><span id="AircraftPerformance.error_extra_cruise-770"><a href="#AircraftPerformance.error_extra_cruise-770"><span class="linenos">770</span></a><span class="sd">			a: AircraftPerformance instance</span>
</span><span id="AircraftPerformance.error_extra_cruise-771"><a href="#AircraftPerformance.error_extra_cruise-771"><span class="linenos">771</span></a><span class="sd">			weight_1: (kg) weight at end of climb + cruise</span>
</span><span id="AircraftPerformance.error_extra_cruise-772"><a href="#AircraftPerformance.error_extra_cruise-772"><span class="linenos">772</span></a><span class="sd">			distance_to_cover: (nm) distance that needs to be covered by the climb and the cruise</span>
</span><span id="AircraftPerformance.error_extra_cruise-773"><a href="#AircraftPerformance.error_extra_cruise-773"><span class="linenos">773</span></a><span class="sd">			fl_cruise: (ft/100) altitude of the cruise</span>
</span><span id="AircraftPerformance.error_extra_cruise-774"><a href="#AircraftPerformance.error_extra_cruise-774"><span class="linenos">774</span></a><span class="sd">			m: (Mach) speed of the cruise</span>
</span><span id="AircraftPerformance.error_extra_cruise-775"><a href="#AircraftPerformance.error_extra_cruise-775"><span class="linenos">775</span></a>
</span><span id="AircraftPerformance.error_extra_cruise-776"><a href="#AircraftPerformance.error_extra_cruise-776"><span class="linenos">776</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.error_extra_cruise-777"><a href="#AircraftPerformance.error_extra_cruise-777"><span class="linenos">777</span></a><span class="sd">			error: (nm) abs(distance_to_cover - (x+cd))</span>
</span><span id="AircraftPerformance.error_extra_cruise-778"><a href="#AircraftPerformance.error_extra_cruise-778"><span class="linenos">778</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.error_extra_cruise-779"><a href="#AircraftPerformance.error_extra_cruise-779"><span class="linenos">779</span></a>
</span><span id="AircraftPerformance.error_extra_cruise-780"><a href="#AircraftPerformance.error_extra_cruise-780"><span class="linenos">780</span></a>		<span class="n">ce</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight_1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">avg_cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.error_extra_cruise-781"><a href="#AircraftPerformance.error_extra_cruise-781"><span class="linenos">781</span></a>		<span class="k">if</span> <span class="n">ce</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.error_extra_cruise-782"><a href="#AircraftPerformance.error_extra_cruise-782"><span class="linenos">782</span></a>			<span class="k">return</span> <span class="mi">100000</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="n">ce</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
</span><span id="AircraftPerformance.error_extra_cruise-783"><a href="#AircraftPerformance.error_extra_cruise-783"><span class="linenos">783</span></a>
</span><span id="AircraftPerformance.error_extra_cruise-784"><a href="#AircraftPerformance.error_extra_cruise-784"><span class="linenos">784</span></a>		<span class="c1"># weight = weight_1 + ce.fuel</span>
</span><span id="AircraftPerformance.error_extra_cruise-785"><a href="#AircraftPerformance.error_extra_cruise-785"><span class="linenos">785</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance.error_extra_cruise-786"><a href="#AircraftPerformance.error_extra_cruise-786"><span class="linenos">786</span></a>
</span><span id="AircraftPerformance.error_extra_cruise-787"><a href="#AircraftPerformance.error_extra_cruise-787"><span class="linenos">787</span></a>		<span class="n">climb_est</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl_cruise</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance.error_extra_cruise-788"><a href="#AircraftPerformance.error_extra_cruise-788"><span class="linenos">788</span></a>		<span class="k">if</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.error_extra_cruise-789"><a href="#AircraftPerformance.error_extra_cruise-789"><span class="linenos">789</span></a>			<span class="k">return</span> <span class="mi">10000</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
</span><span id="AircraftPerformance.error_extra_cruise-790"><a href="#AircraftPerformance.error_extra_cruise-790"><span class="linenos">790</span></a>
</span><span id="AircraftPerformance.error_extra_cruise-791"><a href="#AircraftPerformance.error_extra_cruise-791"><span class="linenos">791</span></a>		<span class="n">error</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">distance_to_cover</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
</span><span id="AircraftPerformance.error_extra_cruise-792"><a href="#AircraftPerformance.error_extra_cruise-792"><span class="linenos">792</span></a>
</span><span id="AircraftPerformance.error_extra_cruise-793"><a href="#AircraftPerformance.error_extra_cruise-793"><span class="linenos">793</span></a>		<span class="k">return</span> <span class="n">error</span>
</span></pre></div>


            <div class="docstring"><p>Method used to estimate the error on total distance done if x nm
of cruise are done followed by a descent to FL0 with respect to the
distance_to_cover available.
Function used to minimize the error whe optimising the value of x
using minimize_scalar</p>

<pre><code>                             x
            . - - - -
     .
    .
</code></pre>

<p>.
         cd</p>

<p>Args:
        x: (nm) distance of cruise
        a: AircraftPerformance instance
        weight_1: (kg) weight at end of climb + cruise
        distance_to_cover: (nm) distance that needs to be covered by the climb and the cruise
        fl_cruise: (ft/100) altitude of the cruise
        m: (Mach) speed of the cruise</p>

<p>Returns:
        error: (nm) abs(distance_to_cover - (x+cd))</p>
</div>


                            </div>
                            <div id="AircraftPerformance.error_climb_weight_from_toc" class="classattr">
                                        <input id="AircraftPerformance.error_climb_weight_from_toc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">error_climb_weight_from_toc</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">weight</span>, </span><span class="param"><span class="n">a</span>, </span><span class="param"><span class="n">fl</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.error_climb_weight_from_toc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.error_climb_weight_from_toc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.error_climb_weight_from_toc-795"><a href="#AircraftPerformance.error_climb_weight_from_toc-795"><span class="linenos">795</span></a>	<span class="nd">@staticmethod</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-796"><a href="#AircraftPerformance.error_climb_weight_from_toc-796"><span class="linenos">796</span></a>	<span class="k">def</span> <span class="nf">error_climb_weight_from_toc</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">fl</span><span class="p">):</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-797"><a href="#AircraftPerformance.error_climb_weight_from_toc-797"><span class="linenos">797</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-798"><a href="#AircraftPerformance.error_climb_weight_from_toc-798"><span class="linenos">798</span></a><span class="sd">		Method used to estimate the error on distance used for climb</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-799"><a href="#AircraftPerformance.error_climb_weight_from_toc-799"><span class="linenos">799</span></a><span class="sd">		if a given weight is given.</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-800"><a href="#AircraftPerformance.error_climb_weight_from_toc-800"><span class="linenos">800</span></a><span class="sd">		The idea is to try to estimate using minimize_scalar which</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-801"><a href="#AircraftPerformance.error_climb_weight_from_toc-801"><span class="linenos">801</span></a><span class="sd">		is the weigh that provides the maximum distance of climb for a</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-802"><a href="#AircraftPerformance.error_climb_weight_from_toc-802"><span class="linenos">802</span></a><span class="sd">		given aircraft type. For this reason the function returns</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-803"><a href="#AircraftPerformance.error_climb_weight_from_toc-803"><span class="linenos">803</span></a><span class="sd">		99999 * cts.fl_0 if the flight does not make it to the ground because</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-804"><a href="#AircraftPerformance.error_climb_weight_from_toc-804"><span class="linenos">804</span></a><span class="sd">		it is too heavy and 99999 - cts.distance if it gets to the ground</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-805"><a href="#AircraftPerformance.error_climb_weight_from_toc-805"><span class="linenos">805</span></a><span class="sd">		so when minimizing obtain the largest distance covered.</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-806"><a href="#AircraftPerformance.error_climb_weight_from_toc-806"><span class="linenos">806</span></a><span class="sd">		</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-807"><a href="#AircraftPerformance.error_climb_weight_from_toc-807"><span class="linenos">807</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-808"><a href="#AircraftPerformance.error_climb_weight_from_toc-808"><span class="linenos">808</span></a><span class="sd">			weight: (kg) weight at TOC</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-809"><a href="#AircraftPerformance.error_climb_weight_from_toc-809"><span class="linenos">809</span></a><span class="sd">			a: AircraftPerformance instance</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-810"><a href="#AircraftPerformance.error_climb_weight_from_toc-810"><span class="linenos">810</span></a><span class="sd">			fl: (ft/100) altitude of at the TOC</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-811"><a href="#AircraftPerformance.error_climb_weight_from_toc-811"><span class="linenos">811</span></a>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-812"><a href="#AircraftPerformance.error_climb_weight_from_toc-812"><span class="linenos">812</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-813"><a href="#AircraftPerformance.error_climb_weight_from_toc-813"><span class="linenos">813</span></a><span class="sd">			error: 99999 * cts.fl_0 if too heavy and not reach ground</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-814"><a href="#AircraftPerformance.error_climb_weight_from_toc-814"><span class="linenos">814</span></a><span class="sd">						 99999 - cts.distance if get to ground with that weight</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-815"><a href="#AircraftPerformance.error_climb_weight_from_toc-815"><span class="linenos">815</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-816"><a href="#AircraftPerformance.error_climb_weight_from_toc-816"><span class="linenos">816</span></a>		<span class="n">cts</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-817"><a href="#AircraftPerformance.error_climb_weight_from_toc-817"><span class="linenos">817</span></a>		<span class="k">if</span> <span class="n">cts</span><span class="o">.</span><span class="n">fl_0</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-818"><a href="#AircraftPerformance.error_climb_weight_from_toc-818"><span class="linenos">818</span></a>			<span class="c1"># return cts.fl_0</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-819"><a href="#AircraftPerformance.error_climb_weight_from_toc-819"><span class="linenos">819</span></a>			<span class="k">return</span> <span class="mi">99999</span> <span class="o">*</span> <span class="n">cts</span><span class="o">.</span><span class="n">fl_0</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-820"><a href="#AircraftPerformance.error_climb_weight_from_toc-820"><span class="linenos">820</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.error_climb_weight_from_toc-821"><a href="#AircraftPerformance.error_climb_weight_from_toc-821"><span class="linenos">821</span></a>			<span class="k">return</span> <span class="mi">99999</span> <span class="o">-</span> <span class="n">cts</span><span class="o">.</span><span class="n">distance</span>
</span></pre></div>


            <div class="docstring"><p>Method used to estimate the error on distance used for climb
if a given weight is given.
The idea is to try to estimate using minimize_scalar which
is the weigh that provides the maximum distance of climb for a
given aircraft type. For this reason the function returns
99999 * cts.fl_0 if the flight does not make it to the ground because
it is too heavy and 99999 - cts.distance if it gets to the ground
so when minimizing obtain the largest distance covered.</p>

<p>Args:
        weight: (kg) weight at TOC
        a: AircraftPerformance instance
        fl: (ft/100) altitude of at the TOC</p>

<p>Returns:
        error: 99999 * cts.fl_0 if too heavy and not reach ground
                                 99999 - cts.distance if get to ground with that weight</p>
</div>


                            </div>
                            <div id="AircraftPerformance.estimate_trajectory" class="classattr">
                                        <input id="AircraftPerformance.estimate_trajectory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">estimate_trajectory</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">weight_landing</span>,</span><span class="param">	<span class="n">fp_distance</span>,</span><span class="param">	<span class="n">fl</span>,</span><span class="param">	<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">max_climbs</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">try_lower_fl</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">force_descent</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">force_climb</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">cruise_wind</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.estimate_trajectory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.estimate_trajectory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.estimate_trajectory-823"><a href="#AircraftPerformance.estimate_trajectory-823"><span class="linenos">823</span></a>	<span class="k">def</span> <span class="nf">estimate_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-824"><a href="#AircraftPerformance.estimate_trajectory-824"><span class="linenos">824</span></a>							<span class="n">use_mref</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">force_descent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force_climb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-825"><a href="#AircraftPerformance.estimate_trajectory-825"><span class="linenos">825</span></a>							<span class="n">cruise_wind</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance.estimate_trajectory-826"><a href="#AircraftPerformance.estimate_trajectory-826"><span class="linenos">826</span></a>		<span class="c1"># TODO force_climb not implemented</span>
</span><span id="AircraftPerformance.estimate_trajectory-827"><a href="#AircraftPerformance.estimate_trajectory-827"><span class="linenos">827</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-828"><a href="#AircraftPerformance.estimate_trajectory-828"><span class="linenos">828</span></a>		<span class="n">traj</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">Trajectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bada_version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-829"><a href="#AircraftPerformance.estimate_trajectory-829"><span class="linenos">829</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-830"><a href="#AircraftPerformance.estimate_trajectory-830"><span class="linenos">830</span></a>		<span class="c1"># print(&quot;*HERE &quot;,fp_distance, fl, weight_landing, cruise_wind, max_climbs, try_lower_fl)</span>
</span><span id="AircraftPerformance.estimate_trajectory-831"><a href="#AircraftPerformance.estimate_trajectory-831"><span class="linenos">831</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-832"><a href="#AircraftPerformance.estimate_trajectory-832"><span class="linenos">832</span></a>		<span class="c1"># ESTIMATE DESCENT</span>
</span><span id="AircraftPerformance.estimate_trajectory-833"><a href="#AircraftPerformance.estimate_trajectory-833"><span class="linenos">833</span></a>		<span class="k">if</span> <span class="n">force_descent</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-834"><a href="#AircraftPerformance.estimate_trajectory-834"><span class="linenos">834</span></a>			<span class="c1"># print(&quot;FORCED DESCENT&quot;)</span>
</span><span id="AircraftPerformance.estimate_trajectory-835"><a href="#AircraftPerformance.estimate_trajectory-835"><span class="linenos">835</span></a>			<span class="n">ff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_descent_fuel_flow</span><span class="p">(</span><span class="n">from_fl</span><span class="o">=</span><span class="n">fl</span><span class="p">,</span> <span class="n">to_fl</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-836"><a href="#AircraftPerformance.estimate_trajectory-836"><span class="linenos">836</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-837"><a href="#AircraftPerformance.estimate_trajectory-837"><span class="linenos">837</span></a>			<span class="n">perf_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_descent_performances</span><span class="p">((</span><span class="n">fl</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">mpl</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-838"><a href="#AircraftPerformance.estimate_trajectory-838"><span class="linenos">838</span></a>			<span class="n">rocd</span> <span class="o">=</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rocd&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
</span><span id="AircraftPerformance.estimate_trajectory-839"><a href="#AircraftPerformance.estimate_trajectory-839"><span class="linenos">839</span></a>			<span class="n">time</span> <span class="o">=</span> <span class="n">fl</span> <span class="o">/</span> <span class="n">rocd</span>
</span><span id="AircraftPerformance.estimate_trajectory-840"><a href="#AircraftPerformance.estimate_trajectory-840"><span class="linenos">840</span></a>			<span class="n">distance</span> <span class="o">=</span> <span class="n">time</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">perf_int</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tas&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span>
</span><span id="AircraftPerformance.estimate_trajectory-841"><a href="#AircraftPerformance.estimate_trajectory-841"><span class="linenos">841</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-842"><a href="#AircraftPerformance.estimate_trajectory-842"><span class="linenos">842</span></a>			<span class="n">fuel</span> <span class="o">=</span> <span class="n">time</span> <span class="o">*</span> <span class="n">ff</span>
</span><span id="AircraftPerformance.estimate_trajectory-843"><a href="#AircraftPerformance.estimate_trajectory-843"><span class="linenos">843</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-844"><a href="#AircraftPerformance.estimate_trajectory-844"><span class="linenos">844</span></a>			<span class="n">descent_est</span> <span class="o">=</span> <span class="n">tr</span><span class="o">.</span><span class="n">TrajectorySegment</span><span class="p">(</span><span class="n">fl_0</span><span class="o">=</span><span class="n">fl</span><span class="p">,</span> <span class="n">fl_1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">fuel</span><span class="o">=</span><span class="n">fuel</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-845"><a href="#AircraftPerformance.estimate_trajectory-845"><span class="linenos">845</span></a>											   <span class="n">weight_0</span><span class="o">=</span><span class="p">(</span><span class="n">weight_landing</span> <span class="o">+</span> <span class="n">fuel</span><span class="p">),</span> <span class="n">weight_1</span><span class="o">=</span><span class="n">weight_landing</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-846"><a href="#AircraftPerformance.estimate_trajectory-846"><span class="linenos">846</span></a>											   <span class="n">segment_type</span><span class="o">=</span><span class="s2">&quot;descent&quot;</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-847"><a href="#AircraftPerformance.estimate_trajectory-847"><span class="linenos">847</span></a>			<span class="n">descent_est</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">9</span>
</span><span id="AircraftPerformance.estimate_trajectory-848"><a href="#AircraftPerformance.estimate_trajectory-848"><span class="linenos">848</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-849"><a href="#AircraftPerformance.estimate_trajectory-849"><span class="linenos">849</span></a>			<span class="n">descent_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_descent_estimation_from_lnd</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_landing</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-850"><a href="#AircraftPerformance.estimate_trajectory-850"><span class="linenos">850</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-851"><a href="#AircraftPerformance.estimate_trajectory-851"><span class="linenos">851</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_back_trajectory_segment</span><span class="p">(</span><span class="n">descent_est</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-852"><a href="#AircraftPerformance.estimate_trajectory-852"><span class="linenos">852</span></a>		<span class="k">if</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force_descent</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-853"><a href="#AircraftPerformance.estimate_trajectory-853"><span class="linenos">853</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="AircraftPerformance.estimate_trajectory-854"><a href="#AircraftPerformance.estimate_trajectory-854"><span class="linenos">854</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.estimate_trajectory-855"><a href="#AircraftPerformance.estimate_trajectory-855"><span class="linenos">855</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-856"><a href="#AircraftPerformance.estimate_trajectory-856"><span class="linenos">856</span></a>		<span class="n">descent_distance</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance.estimate_trajectory-857"><a href="#AircraftPerformance.estimate_trajectory-857"><span class="linenos">857</span></a>		<span class="n">weight</span> <span class="o">=</span> <span class="n">descent_est</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance.estimate_trajectory-858"><a href="#AircraftPerformance.estimate_trajectory-858"><span class="linenos">858</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-859"><a href="#AircraftPerformance.estimate_trajectory-859"><span class="linenos">859</span></a>		<span class="n">distance_missing</span> <span class="o">=</span> <span class="n">fp_distance</span> <span class="o">-</span> <span class="n">descent_distance</span>
</span><span id="AircraftPerformance.estimate_trajectory-860"><a href="#AircraftPerformance.estimate_trajectory-860"><span class="linenos">860</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-861"><a href="#AircraftPerformance.estimate_trajectory-861"><span class="linenos">861</span></a>		<span class="k">if</span> <span class="n">distance_missing</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-862"><a href="#AircraftPerformance.estimate_trajectory-862"><span class="linenos">862</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="AircraftPerformance.estimate_trajectory-863"><a href="#AircraftPerformance.estimate_trajectory-863"><span class="linenos">863</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.estimate_trajectory-864"><a href="#AircraftPerformance.estimate_trajectory-864"><span class="linenos">864</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-865"><a href="#AircraftPerformance.estimate_trajectory-865"><span class="linenos">865</span></a>		<span class="c1"># ESTIMATE MINIMUM CRUISE NEEDED</span>
</span><span id="AircraftPerformance.estimate_trajectory-866"><a href="#AircraftPerformance.estimate_trajectory-866"><span class="linenos">866</span></a>		<span class="n">res</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_climb_weight_from_toc</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">),</span>
</span><span id="AircraftPerformance.estimate_trajectory-867"><a href="#AircraftPerformance.estimate_trajectory-867"><span class="linenos">867</span></a>							  <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mtow</span><span class="p">),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bounded&#39;</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-868"><a href="#AircraftPerformance.estimate_trajectory-868"><span class="linenos">868</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-869"><a href="#AircraftPerformance.estimate_trajectory-869"><span class="linenos">869</span></a>		<span class="n">max_weight_at_toc</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">x</span>
</span><span id="AircraftPerformance.estimate_trajectory-870"><a href="#AircraftPerformance.estimate_trajectory-870"><span class="linenos">870</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-871"><a href="#AircraftPerformance.estimate_trajectory-871"><span class="linenos">871</span></a>		<span class="n">max_climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">max_weight_at_toc</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-872"><a href="#AircraftPerformance.estimate_trajectory-872"><span class="linenos">872</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-873"><a href="#AircraftPerformance.estimate_trajectory-873"><span class="linenos">873</span></a>		<span class="k">if</span> <span class="n">max_climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-874"><a href="#AircraftPerformance.estimate_trajectory-874"><span class="linenos">874</span></a>			<span class="c1"># Not possible to reach this initial FL</span>
</span><span id="AircraftPerformance.estimate_trajectory-875"><a href="#AircraftPerformance.estimate_trajectory-875"><span class="linenos">875</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="AircraftPerformance.estimate_trajectory-876"><a href="#AircraftPerformance.estimate_trajectory-876"><span class="linenos">876</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.estimate_trajectory-877"><a href="#AircraftPerformance.estimate_trajectory-877"><span class="linenos">877</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-878"><a href="#AircraftPerformance.estimate_trajectory-878"><span class="linenos">878</span></a>		<span class="n">min_cruise_dist</span> <span class="o">=</span> <span class="n">distance_missing</span> <span class="o">-</span> <span class="p">(</span><span class="n">max_climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-879"><a href="#AircraftPerformance.estimate_trajectory-879"><span class="linenos">879</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-880"><a href="#AircraftPerformance.estimate_trajectory-880"><span class="linenos">880</span></a>		<span class="k">if</span> <span class="n">min_cruise_dist</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-881"><a href="#AircraftPerformance.estimate_trajectory-881"><span class="linenos">881</span></a>			<span class="k">if</span> <span class="n">fl</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="ow">and</span> <span class="n">try_lower_fl</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-882"><a href="#AircraftPerformance.estimate_trajectory-882"><span class="linenos">882</span></a>				<span class="n">try_lower_fl</span> <span class="o">=</span> <span class="n">try_lower_fl</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="AircraftPerformance.estimate_trajectory-883"><a href="#AircraftPerformance.estimate_trajectory-883"><span class="linenos">883</span></a>				<span class="n">traj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_trajectory</span><span class="p">(</span><span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-884"><a href="#AircraftPerformance.estimate_trajectory-884"><span class="linenos">884</span></a>												<span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="p">,</span> <span class="n">cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-885"><a href="#AircraftPerformance.estimate_trajectory-885"><span class="linenos">885</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-886"><a href="#AircraftPerformance.estimate_trajectory-886"><span class="linenos">886</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="AircraftPerformance.estimate_trajectory-887"><a href="#AircraftPerformance.estimate_trajectory-887"><span class="linenos">887</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.estimate_trajectory-888"><a href="#AircraftPerformance.estimate_trajectory-888"><span class="linenos">888</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-889"><a href="#AircraftPerformance.estimate_trajectory-889"><span class="linenos">889</span></a>		<span class="c1"># ESTIMATE CRUISE</span>
</span><span id="AircraftPerformance.estimate_trajectory-890"><a href="#AircraftPerformance.estimate_trajectory-890"><span class="linenos">890</span></a>		<span class="n">trajectory_cruise</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_cruise_estimation_with_fl_change</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-891"><a href="#AircraftPerformance.estimate_trajectory-891"><span class="linenos">891</span></a>																			 <span class="n">descent_est</span><span class="o">.</span><span class="n">weight_0</span><span class="p">,</span> <span class="n">min_cruise_dist</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-892"><a href="#AircraftPerformance.estimate_trajectory-892"><span class="linenos">892</span></a>																			 <span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="o">=</span><span class="n">max_climbs</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-893"><a href="#AircraftPerformance.estimate_trajectory-893"><span class="linenos">893</span></a>																			 <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-894"><a href="#AircraftPerformance.estimate_trajectory-894"><span class="linenos">894</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-895"><a href="#AircraftPerformance.estimate_trajectory-895"><span class="linenos">895</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory</span><span class="p">(</span><span class="n">trajectory_cruise</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-896"><a href="#AircraftPerformance.estimate_trajectory-896"><span class="linenos">896</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-897"><a href="#AircraftPerformance.estimate_trajectory-897"><span class="linenos">897</span></a>		<span class="k">if</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">8</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-898"><a href="#AircraftPerformance.estimate_trajectory-898"><span class="linenos">898</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">status</span>
</span><span id="AircraftPerformance.estimate_trajectory-899"><a href="#AircraftPerformance.estimate_trajectory-899"><span class="linenos">899</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.estimate_trajectory-900"><a href="#AircraftPerformance.estimate_trajectory-900"><span class="linenos">900</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-901"><a href="#AircraftPerformance.estimate_trajectory-901"><span class="linenos">901</span></a>		<span class="n">cruise_dist</span> <span class="o">=</span> <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance.estimate_trajectory-902"><a href="#AircraftPerformance.estimate_trajectory-902"><span class="linenos">902</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-903"><a href="#AircraftPerformance.estimate_trajectory-903"><span class="linenos">903</span></a>		<span class="n">weight_toc</span> <span class="o">=</span> <span class="n">traj</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance.estimate_trajectory-904"><a href="#AircraftPerformance.estimate_trajectory-904"><span class="linenos">904</span></a>		<span class="n">fl</span> <span class="o">=</span> <span class="n">traj</span><span class="o">.</span><span class="n">fl_0</span>
</span><span id="AircraftPerformance.estimate_trajectory-905"><a href="#AircraftPerformance.estimate_trajectory-905"><span class="linenos">905</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-906"><a href="#AircraftPerformance.estimate_trajectory-906"><span class="linenos">906</span></a>		<span class="n">distance_to_airport</span> <span class="o">=</span> <span class="n">fp_distance</span> <span class="o">-</span> <span class="n">traj</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance.estimate_trajectory-907"><a href="#AircraftPerformance.estimate_trajectory-907"><span class="linenos">907</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-908"><a href="#AircraftPerformance.estimate_trajectory-908"><span class="linenos">908</span></a>		<span class="c1"># DO BIT BEFORE DESCENT</span>
</span><span id="AircraftPerformance.estimate_trajectory-909"><a href="#AircraftPerformance.estimate_trajectory-909"><span class="linenos">909</span></a>		<span class="n">min_climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oew</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">))</span>
</span><span id="AircraftPerformance.estimate_trajectory-910"><a href="#AircraftPerformance.estimate_trajectory-910"><span class="linenos">910</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-911"><a href="#AircraftPerformance.estimate_trajectory-911"><span class="linenos">911</span></a>		<span class="k">if</span> <span class="p">((</span><span class="ow">not</span> <span class="n">use_mref</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fl_0</span> <span class="o">&lt;</span> <span class="mi">360</span><span class="p">)):</span>
</span><span id="AircraftPerformance.estimate_trajectory-912"><a href="#AircraftPerformance.estimate_trajectory-912"><span class="linenos">912</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-913"><a href="#AircraftPerformance.estimate_trajectory-913"><span class="linenos">913</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_cruise_nominal_mach</span><span class="p">(</span><span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fl_0</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-914"><a href="#AircraftPerformance.estimate_trajectory-914"><span class="linenos">914</span></a>														 <span class="n">trajectory_cruise</span><span class="o">.</span><span class="n">trajectory_segments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">weight_0</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-915"><a href="#AircraftPerformance.estimate_trajectory-915"><span class="linenos">915</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-916"><a href="#AircraftPerformance.estimate_trajectory-916"><span class="linenos">916</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-917"><a href="#AircraftPerformance.estimate_trajectory-917"><span class="linenos">917</span></a>				<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance.estimate_trajectory-918"><a href="#AircraftPerformance.estimate_trajectory-918"><span class="linenos">918</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-919"><a href="#AircraftPerformance.estimate_trajectory-919"><span class="linenos">919</span></a>			<span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_nom</span>
</span><span id="AircraftPerformance.estimate_trajectory-920"><a href="#AircraftPerformance.estimate_trajectory-920"><span class="linenos">920</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-921"><a href="#AircraftPerformance.estimate_trajectory-921"><span class="linenos">921</span></a>		<span class="n">res</span> <span class="o">=</span> <span class="n">minimize_scalar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_extra_cruise</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-922"><a href="#AircraftPerformance.estimate_trajectory-922"><span class="linenos">922</span></a>															 <span class="n">weight_toc</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-923"><a href="#AircraftPerformance.estimate_trajectory-923"><span class="linenos">923</span></a>															 <span class="n">distance_to_airport</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">m</span><span class="p">),</span>
</span><span id="AircraftPerformance.estimate_trajectory-924"><a href="#AircraftPerformance.estimate_trajectory-924"><span class="linenos">924</span></a>							  <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">max_climb_est</span><span class="o">.</span><span class="n">distance</span> <span class="o">-</span> <span class="n">min_climb_est</span><span class="o">.</span><span class="n">distance</span><span class="p">)),</span>
</span><span id="AircraftPerformance.estimate_trajectory-925"><a href="#AircraftPerformance.estimate_trajectory-925"><span class="linenos">925</span></a>							  <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bounded&#39;</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-926"><a href="#AircraftPerformance.estimate_trajectory-926"><span class="linenos">926</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-927"><a href="#AircraftPerformance.estimate_trajectory-927"><span class="linenos">927</span></a>		<span class="n">cruise_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_cruise_estimation</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_toc</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">use_mref</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-928"><a href="#AircraftPerformance.estimate_trajectory-928"><span class="linenos">928</span></a>															   <span class="n">avg_cruise_wind</span><span class="o">=</span><span class="n">cruise_wind</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-929"><a href="#AircraftPerformance.estimate_trajectory-929"><span class="linenos">929</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">cruise_est</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-930"><a href="#AircraftPerformance.estimate_trajectory-930"><span class="linenos">930</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-931"><a href="#AircraftPerformance.estimate_trajectory-931"><span class="linenos">931</span></a>		<span class="k">if</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-932"><a href="#AircraftPerformance.estimate_trajectory-932"><span class="linenos">932</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="AircraftPerformance.estimate_trajectory-933"><a href="#AircraftPerformance.estimate_trajectory-933"><span class="linenos">933</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.estimate_trajectory-934"><a href="#AircraftPerformance.estimate_trajectory-934"><span class="linenos">934</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-935"><a href="#AircraftPerformance.estimate_trajectory-935"><span class="linenos">935</span></a>		<span class="n">weight_toc</span> <span class="o">=</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">weight_0</span>
</span><span id="AircraftPerformance.estimate_trajectory-936"><a href="#AircraftPerformance.estimate_trajectory-936"><span class="linenos">936</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-937"><a href="#AircraftPerformance.estimate_trajectory-937"><span class="linenos">937</span></a>		<span class="n">cruise_dist</span> <span class="o">=</span> <span class="n">cruise_dist</span> <span class="o">+</span> <span class="n">cruise_est</span><span class="o">.</span><span class="n">distance</span>
</span><span id="AircraftPerformance.estimate_trajectory-938"><a href="#AircraftPerformance.estimate_trajectory-938"><span class="linenos">938</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-939"><a href="#AircraftPerformance.estimate_trajectory-939"><span class="linenos">939</span></a>		<span class="c1"># ESTIMATE CLIMB</span>
</span><span id="AircraftPerformance.estimate_trajectory-940"><a href="#AircraftPerformance.estimate_trajectory-940"><span class="linenos">940</span></a>		<span class="n">climb_est</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">trajectory_segment_climb_estimation_from_toc</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">weight_toc</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-941"><a href="#AircraftPerformance.estimate_trajectory-941"><span class="linenos">941</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">add_front_trajectory_segment</span><span class="p">(</span><span class="n">climb_est</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-942"><a href="#AircraftPerformance.estimate_trajectory-942"><span class="linenos">942</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-943"><a href="#AircraftPerformance.estimate_trajectory-943"><span class="linenos">943</span></a>		<span class="k">if</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-944"><a href="#AircraftPerformance.estimate_trajectory-944"><span class="linenos">944</span></a>			<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">climb_est</span><span class="o">.</span><span class="n">status</span>
</span><span id="AircraftPerformance.estimate_trajectory-945"><a href="#AircraftPerformance.estimate_trajectory-945"><span class="linenos">945</span></a>			<span class="k">return</span> <span class="n">traj</span>
</span><span id="AircraftPerformance.estimate_trajectory-946"><a href="#AircraftPerformance.estimate_trajectory-946"><span class="linenos">946</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-947"><a href="#AircraftPerformance.estimate_trajectory-947"><span class="linenos">947</span></a>		<span class="k">if</span> <span class="p">(</span><span class="n">traj</span><span class="o">.</span><span class="n">distance</span> <span class="o">&gt;</span> <span class="n">fp_distance</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">cruise_dist</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformance.estimate_trajectory-948"><a href="#AircraftPerformance.estimate_trajectory-948"><span class="linenos">948</span></a>			<span class="k">if</span> <span class="n">fl</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="ow">and</span> <span class="n">try_lower_fl</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-949"><a href="#AircraftPerformance.estimate_trajectory-949"><span class="linenos">949</span></a>				<span class="n">try_lower_fl</span> <span class="o">=</span> <span class="n">try_lower_fl</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="AircraftPerformance.estimate_trajectory-950"><a href="#AircraftPerformance.estimate_trajectory-950"><span class="linenos">950</span></a>				<span class="n">traj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_trajectory</span><span class="p">(</span><span class="n">weight_landing</span><span class="p">,</span> <span class="n">fp_distance</span><span class="p">,</span> <span class="n">fl</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
</span><span id="AircraftPerformance.estimate_trajectory-951"><a href="#AircraftPerformance.estimate_trajectory-951"><span class="linenos">951</span></a>												<span class="n">use_mref</span><span class="p">,</span> <span class="n">max_climbs</span><span class="p">,</span> <span class="n">try_lower_fl</span><span class="p">)</span>
</span><span id="AircraftPerformance.estimate_trajectory-952"><a href="#AircraftPerformance.estimate_trajectory-952"><span class="linenos">952</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="AircraftPerformance.estimate_trajectory-953"><a href="#AircraftPerformance.estimate_trajectory-953"><span class="linenos">953</span></a>				<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">6</span>
</span><span id="AircraftPerformance.estimate_trajectory-954"><a href="#AircraftPerformance.estimate_trajectory-954"><span class="linenos">954</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-955"><a href="#AircraftPerformance.estimate_trajectory-955"><span class="linenos">955</span></a>		<span class="n">traj</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AircraftPerformance.estimate_trajectory-956"><a href="#AircraftPerformance.estimate_trajectory-956"><span class="linenos">956</span></a>
</span><span id="AircraftPerformance.estimate_trajectory-957"><a href="#AircraftPerformance.estimate_trajectory-957"><span class="linenos">957</span></a>		<span class="k">return</span> <span class="n">traj</span>
</span></pre></div>


    

                            </div>
                            <div id="AircraftPerformance.apu_fuel_flow" class="classattr">
                                        <input id="AircraftPerformance.apu_fuel_flow-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">apu_fuel_flow</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.apu_fuel_flow-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.apu_fuel_flow"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.apu_fuel_flow-959"><a href="#AircraftPerformance.apu_fuel_flow-959"><span class="linenos">959</span></a>	<span class="k">def</span> <span class="nf">apu_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AircraftPerformance.apu_fuel_flow-960"><a href="#AircraftPerformance.apu_fuel_flow-960"><span class="linenos">960</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance.apu_fuel_flow-961"><a href="#AircraftPerformance.apu_fuel_flow-961"><span class="linenos">961</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project). The APU is based on APU consumption</span>
</span><span id="AircraftPerformance.apu_fuel_flow-962"><a href="#AircraftPerformance.apu_fuel_flow-962"><span class="linenos">962</span></a><span class="sd">		of some aircrafts and their mtow</span>
</span><span id="AircraftPerformance.apu_fuel_flow-963"><a href="#AircraftPerformance.apu_fuel_flow-963"><span class="linenos">963</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance.apu_fuel_flow-964"><a href="#AircraftPerformance.apu_fuel_flow-964"><span class="linenos">964</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.apu_fuel_flow-965"><a href="#AircraftPerformance.apu_fuel_flow-965"><span class="linenos">965</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformance.apu_fuel_flow-966"><a href="#AircraftPerformance.apu_fuel_flow-966"><span class="linenos">966</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformance.apu_fuel_flow-967"><a href="#AircraftPerformance.apu_fuel_flow-967"><span class="linenos">967</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.apu_fuel_flow-968"><a href="#AircraftPerformance.apu_fuel_flow-968"><span class="linenos">968</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>This is not BADA but from estimations done in the past (CC project). The APU is based on APU consumption
of some aircrafts and their mtow</p>
</div>


                            </div>
                            <div id="AircraftPerformance.at_gate_costs_per_minute" class="classattr">
                                        <input id="AircraftPerformance.at_gate_costs_per_minute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">at_gate_costs_per_minute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.at_gate_costs_per_minute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.at_gate_costs_per_minute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.at_gate_costs_per_minute-970"><a href="#AircraftPerformance.at_gate_costs_per_minute-970"><span class="linenos">970</span></a>	<span class="k">def</span> <span class="nf">at_gate_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AircraftPerformance.at_gate_costs_per_minute-971"><a href="#AircraftPerformance.at_gate_costs_per_minute-971"><span class="linenos">971</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance.at_gate_costs_per_minute-972"><a href="#AircraftPerformance.at_gate_costs_per_minute-972"><span class="linenos">972</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="AircraftPerformance.at_gate_costs_per_minute-973"><a href="#AircraftPerformance.at_gate_costs_per_minute-973"><span class="linenos">973</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance.at_gate_costs_per_minute-974"><a href="#AircraftPerformance.at_gate_costs_per_minute-974"><span class="linenos">974</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.at_gate_costs_per_minute-975"><a href="#AircraftPerformance.at_gate_costs_per_minute-975"><span class="linenos">975</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformance.at_gate_costs_per_minute-976"><a href="#AircraftPerformance.at_gate_costs_per_minute-976"><span class="linenos">976</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformance.at_gate_costs_per_minute-977"><a href="#AircraftPerformance.at_gate_costs_per_minute-977"><span class="linenos">977</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.at_gate_costs_per_minute-978"><a href="#AircraftPerformance.at_gate_costs_per_minute-978"><span class="linenos">978</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">at_gate_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>This is not BADA but from estimations done in the past (CC project).</p>
</div>


                            </div>
                            <div id="AircraftPerformance.en_route_costs_per_minute" class="classattr">
                                        <input id="AircraftPerformance.en_route_costs_per_minute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">en_route_costs_per_minute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.en_route_costs_per_minute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.en_route_costs_per_minute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.en_route_costs_per_minute-980"><a href="#AircraftPerformance.en_route_costs_per_minute-980"><span class="linenos">980</span></a>	<span class="k">def</span> <span class="nf">en_route_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AircraftPerformance.en_route_costs_per_minute-981"><a href="#AircraftPerformance.en_route_costs_per_minute-981"><span class="linenos">981</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance.en_route_costs_per_minute-982"><a href="#AircraftPerformance.en_route_costs_per_minute-982"><span class="linenos">982</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="AircraftPerformance.en_route_costs_per_minute-983"><a href="#AircraftPerformance.en_route_costs_per_minute-983"><span class="linenos">983</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance.en_route_costs_per_minute-984"><a href="#AircraftPerformance.en_route_costs_per_minute-984"><span class="linenos">984</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.en_route_costs_per_minute-985"><a href="#AircraftPerformance.en_route_costs_per_minute-985"><span class="linenos">985</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformance.en_route_costs_per_minute-986"><a href="#AircraftPerformance.en_route_costs_per_minute-986"><span class="linenos">986</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformance.en_route_costs_per_minute-987"><a href="#AircraftPerformance.en_route_costs_per_minute-987"><span class="linenos">987</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.en_route_costs_per_minute-988"><a href="#AircraftPerformance.en_route_costs_per_minute-988"><span class="linenos">988</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">en_route_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>This is not BADA but from estimations done in the past (CC project).</p>
</div>


                            </div>
                            <div id="AircraftPerformance.arrival_costs_per_minute" class="classattr">
                                        <input id="AircraftPerformance.arrival_costs_per_minute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">arrival_costs_per_minute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformance.arrival_costs_per_minute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformance.arrival_costs_per_minute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformance.arrival_costs_per_minute-990"><a href="#AircraftPerformance.arrival_costs_per_minute-990"><span class="linenos">990</span></a>	<span class="k">def</span> <span class="nf">arrival_costs_per_minute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AircraftPerformance.arrival_costs_per_minute-991"><a href="#AircraftPerformance.arrival_costs_per_minute-991"><span class="linenos">991</span></a><span class="w">		</span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance.arrival_costs_per_minute-992"><a href="#AircraftPerformance.arrival_costs_per_minute-992"><span class="linenos">992</span></a><span class="sd">		This is not BADA but from estimations done in the past (CC project).</span>
</span><span id="AircraftPerformance.arrival_costs_per_minute-993"><a href="#AircraftPerformance.arrival_costs_per_minute-993"><span class="linenos">993</span></a><span class="sd">		&#39;&#39;&#39;</span>
</span><span id="AircraftPerformance.arrival_costs_per_minute-994"><a href="#AircraftPerformance.arrival_costs_per_minute-994"><span class="linenos">994</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformance.arrival_costs_per_minute-995"><a href="#AircraftPerformance.arrival_costs_per_minute-995"><span class="linenos">995</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apu_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformance.arrival_costs_per_minute-996"><a href="#AircraftPerformance.arrival_costs_per_minute-996"><span class="linenos">996</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_min</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformance.arrival_costs_per_minute-997"><a href="#AircraftPerformance.arrival_costs_per_minute-997"><span class="linenos">997</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformance.arrival_costs_per_minute-998"><a href="#AircraftPerformance.arrival_costs_per_minute-998"><span class="linenos">998</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrival_costs_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>This is not BADA but from estimations done in the past (CC project).</p>
</div>


                            </div>
                </section>
                <section id="AircraftPerformanceBada3">
                            <input id="AircraftPerformanceBada3-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AircraftPerformanceBada3</span><wbr>(<span class="base"><a href="#AircraftPerformance">AircraftPerformance</a></span>):

                <label class="view-source-button" for="AircraftPerformanceBada3-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3-1001"><a href="#AircraftPerformanceBada3-1001"><span class="linenos">1001</span></a><span class="k">class</span> <span class="nc">AircraftPerformanceBada3</span><span class="p">(</span><span class="n">AircraftPerformance</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3-1002"><a href="#AircraftPerformanceBada3-1002"><span class="linenos">1002</span></a>	<span class="n">bada_version</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="AircraftPerformanceBada3-1003"><a href="#AircraftPerformanceBada3-1003"><span class="linenos">1003</span></a>
</span><span id="AircraftPerformanceBada3-1004"><a href="#AircraftPerformanceBada3-1004"><span class="linenos">1004</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3-1005"><a href="#AircraftPerformanceBada3-1005"><span class="linenos">1005</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="AircraftPerformanceBada3-1006"><a href="#AircraftPerformanceBada3-1006"><span class="linenos">1006</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3-1007"><a href="#AircraftPerformanceBada3-1007"><span class="linenos">1007</span></a>
</span><span id="AircraftPerformanceBada3-1008"><a href="#AircraftPerformanceBada3-1008"><span class="linenos">1008</span></a>		<span class="n">AircraftPerformance</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span> <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3-1009"><a href="#AircraftPerformanceBada3-1009"><span class="linenos">1009</span></a>
</span><span id="AircraftPerformanceBada3-1010"><a href="#AircraftPerformanceBada3-1010"><span class="linenos">1010</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">v_stall</span> <span class="o">=</span> <span class="n">v_stall</span>
</span><span id="AircraftPerformanceBada3-1011"><a href="#AircraftPerformanceBada3-1011"><span class="linenos">1011</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">clbo_mo</span> <span class="o">=</span> <span class="n">clbo_mo</span>
</span><span id="AircraftPerformanceBada3-1012"><a href="#AircraftPerformanceBada3-1012"><span class="linenos">1012</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span>
</span><span id="AircraftPerformanceBada3-1013"><a href="#AircraftPerformanceBada3-1013"><span class="linenos">1013</span></a>
</span><span id="AircraftPerformanceBada3-1014"><a href="#AircraftPerformanceBada3-1014"><span class="linenos">1014</span></a>		<span class="c1"># For holding BADA 3, this is not from BADA but from previous projects (i.e., CC)</span>
</span><span id="AircraftPerformanceBada3-1015"><a href="#AircraftPerformanceBada3-1015"><span class="linenos">1015</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_ac</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AT43&#39;</span><span class="p">,</span> <span class="s1">&#39;AT72&#39;</span><span class="p">,</span> <span class="s1">&#39;DH8D&#39;</span><span class="p">,</span> <span class="s1">&#39;E190&#39;</span><span class="p">,</span> <span class="s1">&#39;B735&#39;</span><span class="p">,</span> <span class="s1">&#39;B733&#39;</span><span class="p">,</span> <span class="s1">&#39;B734&#39;</span><span class="p">,</span> <span class="s1">&#39;A319&#39;</span><span class="p">,</span> <span class="s1">&#39;A320&#39;</span><span class="p">,</span> <span class="s1">&#39;B738&#39;</span><span class="p">,</span> <span class="s1">&#39;A321&#39;</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3-1016"><a href="#AircraftPerformanceBada3-1016"><span class="linenos">1016</span></a>						   <span class="s1">&#39;B752&#39;</span><span class="p">,</span> <span class="s1">&#39;B763&#39;</span><span class="p">,</span> <span class="s1">&#39;A332&#39;</span><span class="p">,</span> <span class="s1">&#39;B744&#39;</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3-1017"><a href="#AircraftPerformanceBada3-1017"><span class="linenos">1017</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_sqr_mtow</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4.1</span><span class="p">,</span> <span class="mf">4.71</span><span class="p">,</span> <span class="mf">5.4</span><span class="p">,</span> <span class="mf">6.98</span><span class="p">,</span> <span class="mf">7.46</span><span class="p">,</span> <span class="mf">7.77</span><span class="p">,</span> <span class="mf">8.09</span><span class="p">,</span> <span class="mf">8.19</span><span class="p">,</span> <span class="mf">8.6</span><span class="p">,</span> <span class="mf">8.64</span><span class="p">,</span> <span class="mf">9.31</span><span class="p">,</span> <span class="mf">10.38</span><span class="p">,</span> <span class="mf">13.47</span><span class="p">,</span> <span class="mf">15.18</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3-1018"><a href="#AircraftPerformanceBada3-1018"><span class="linenos">1018</span></a>								 <span class="mf">19.82</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3-1019"><a href="#AircraftPerformanceBada3-1019"><span class="linenos">1019</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span> <span class="o">=</span> <span class="p">[</span><span class="mf">9.19</span><span class="p">,</span> <span class="mf">11.8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mf">25.3</span><span class="p">,</span> <span class="mf">33.3</span><span class="p">,</span> <span class="mf">41.4</span><span class="p">,</span> <span class="mf">34.64</span><span class="p">,</span> <span class="mf">33.37</span><span class="p">,</span> <span class="mf">35.42</span><span class="p">,</span> <span class="mf">35.1</span><span class="p">,</span> <span class="mf">40.34</span><span class="p">,</span> <span class="mf">49.27</span><span class="p">,</span> <span class="mf">61.24</span><span class="p">,</span> <span class="mf">76.07</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3-1020"><a href="#AircraftPerformanceBada3-1020"><span class="linenos">1020</span></a>						   <span class="mf">119.51</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3-1021"><a href="#AircraftPerformanceBada3-1021"><span class="linenos">1021</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">holding_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="AircraftPerformanceBada3-1022"><a href="#AircraftPerformanceBada3-1022"><span class="linenos">1022</span></a>
</span><span id="AircraftPerformanceBada3-1023"><a href="#AircraftPerformanceBada3-1023"><span class="linenos">1023</span></a>	<span class="k">def</span> <span class="nf">compute_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3-1024"><a href="#AircraftPerformanceBada3-1024"><span class="linenos">1024</span></a>
</span><span id="AircraftPerformanceBada3-1025"><a href="#AircraftPerformanceBada3-1025"><span class="linenos">1025</span></a>		<span class="n">v_tas</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3-1026"><a href="#AircraftPerformanceBada3-1026"><span class="linenos">1026</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_tsfc</span><span class="p">(</span><span class="n">v_tas</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3-1027"><a href="#AircraftPerformanceBada3-1027"><span class="linenos">1027</span></a>		<span class="n">T</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_drag</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span>
</span><span id="AircraftPerformanceBada3-1028"><a href="#AircraftPerformanceBada3-1028"><span class="linenos">1028</span></a>		<span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># cruise fuel factor</span>
</span><span id="AircraftPerformanceBada3-1029"><a href="#AircraftPerformanceBada3-1029"><span class="linenos">1029</span></a>
</span><span id="AircraftPerformanceBada3-1030"><a href="#AircraftPerformanceBada3-1030"><span class="linenos">1030</span></a>		<span class="n">ff</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">T</span> <span class="o">*</span> <span class="n">c</span>
</span><span id="AircraftPerformanceBada3-1031"><a href="#AircraftPerformanceBada3-1031"><span class="linenos">1031</span></a>		<span class="k">return</span> <span class="n">ff</span>
</span><span id="AircraftPerformanceBada3-1032"><a href="#AircraftPerformanceBada3-1032"><span class="linenos">1032</span></a>
</span><span id="AircraftPerformanceBada3-1033"><a href="#AircraftPerformanceBada3-1033"><span class="linenos">1033</span></a>	<span class="k">def</span> <span class="nf">compute_drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3-1034"><a href="#AircraftPerformanceBada3-1034"><span class="linenos">1034</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformanceBada3-1035"><a href="#AircraftPerformanceBada3-1035"><span class="linenos">1035</span></a><span class="sd">		Compute drag in N at a given fl, mass, mach, bank angle.</span>
</span><span id="AircraftPerformanceBada3-1036"><a href="#AircraftPerformanceBada3-1036"><span class="linenos">1036</span></a>
</span><span id="AircraftPerformanceBada3-1037"><a href="#AircraftPerformanceBada3-1037"><span class="linenos">1037</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformanceBada3-1038"><a href="#AircraftPerformanceBada3-1038"><span class="linenos">1038</span></a><span class="sd">			fl: flight level (ft/100)</span>
</span><span id="AircraftPerformanceBada3-1039"><a href="#AircraftPerformanceBada3-1039"><span class="linenos">1039</span></a><span class="sd">			mass: mass (kg)</span>
</span><span id="AircraftPerformanceBada3-1040"><a href="#AircraftPerformanceBada3-1040"><span class="linenos">1040</span></a><span class="sd">			m: mach (Mach)</span>
</span><span id="AircraftPerformanceBada3-1041"><a href="#AircraftPerformanceBada3-1041"><span class="linenos">1041</span></a><span class="sd">			bank: bank angle (rad)</span>
</span><span id="AircraftPerformanceBada3-1042"><a href="#AircraftPerformanceBada3-1042"><span class="linenos">1042</span></a>
</span><span id="AircraftPerformanceBada3-1043"><a href="#AircraftPerformanceBada3-1043"><span class="linenos">1043</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformanceBada3-1044"><a href="#AircraftPerformanceBada3-1044"><span class="linenos">1044</span></a><span class="sd">			drag: Drag (N)</span>
</span><span id="AircraftPerformanceBada3-1045"><a href="#AircraftPerformanceBada3-1045"><span class="linenos">1045</span></a>
</span><span id="AircraftPerformanceBada3-1046"><a href="#AircraftPerformanceBada3-1046"><span class="linenos">1046</span></a><span class="sd">		Example of use:    </span>
</span><span id="AircraftPerformanceBada3-1047"><a href="#AircraftPerformanceBada3-1047"><span class="linenos">1047</span></a><span class="sd">			fl = 340</span>
</span><span id="AircraftPerformanceBada3-1048"><a href="#AircraftPerformanceBada3-1048"><span class="linenos">1048</span></a><span class="sd">			mass = 67010</span>
</span><span id="AircraftPerformanceBada3-1049"><a href="#AircraftPerformanceBada3-1049"><span class="linenos">1049</span></a><span class="sd">			m = 0.78      </span>
</span><span id="AircraftPerformanceBada3-1050"><a href="#AircraftPerformanceBada3-1050"><span class="linenos">1050</span></a>
</span><span id="AircraftPerformanceBada3-1051"><a href="#AircraftPerformanceBada3-1051"><span class="linenos">1051</span></a><span class="sd">			drag=compute_drag(fl,mass,m)</span>
</span><span id="AircraftPerformanceBada3-1052"><a href="#AircraftPerformanceBada3-1052"><span class="linenos">1052</span></a>
</span><span id="AircraftPerformanceBada3-1053"><a href="#AircraftPerformanceBada3-1053"><span class="linenos">1053</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformanceBada3-1054"><a href="#AircraftPerformanceBada3-1054"><span class="linenos">1054</span></a>
</span><span id="AircraftPerformanceBada3-1055"><a href="#AircraftPerformanceBada3-1055"><span class="linenos">1055</span></a>		<span class="n">density</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">density</span><span class="p">(</span><span class="n">fl</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3-1056"><a href="#AircraftPerformanceBada3-1056"><span class="linenos">1056</span></a>		<span class="n">v_tas</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl</span><span class="p">)</span> <span class="o">/</span> <span class="n">uc</span><span class="o">.</span><span class="n">ms2kt</span>
</span><span id="AircraftPerformanceBada3-1057"><a href="#AircraftPerformanceBada3-1057"><span class="linenos">1057</span></a>
</span><span id="AircraftPerformanceBada3-1058"><a href="#AircraftPerformanceBada3-1058"><span class="linenos">1058</span></a>		<span class="n">cl</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mass</span> <span class="o">*</span> <span class="n">sa</span><span class="o">.</span><span class="n">g</span> <span class="o">/</span> <span class="p">(</span><span class="n">density</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bank</span><span class="p">)</span> <span class="o">*</span> <span class="n">v_tas</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3-1059"><a href="#AircraftPerformanceBada3-1059"><span class="linenos">1059</span></a>
</span><span id="AircraftPerformanceBada3-1060"><a href="#AircraftPerformanceBada3-1060"><span class="linenos">1060</span></a>		<span class="n">cd_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3-1061"><a href="#AircraftPerformanceBada3-1061"><span class="linenos">1061</span></a>		<span class="n">cd_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3-1062"><a href="#AircraftPerformanceBada3-1062"><span class="linenos">1062</span></a>
</span><span id="AircraftPerformanceBada3-1063"><a href="#AircraftPerformanceBada3-1063"><span class="linenos">1063</span></a>		<span class="n">cd</span> <span class="o">=</span> <span class="n">cd_0</span> <span class="o">+</span> <span class="n">cd_2</span> <span class="o">*</span> <span class="n">cl</span> <span class="o">**</span> <span class="mi">2</span>
</span><span id="AircraftPerformanceBada3-1064"><a href="#AircraftPerformanceBada3-1064"><span class="linenos">1064</span></a>
</span><span id="AircraftPerformanceBada3-1065"><a href="#AircraftPerformanceBada3-1065"><span class="linenos">1065</span></a>		<span class="n">drag</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">*</span> <span class="n">density</span> <span class="o">*</span> <span class="n">cd</span> <span class="o">*</span> <span class="n">v_tas</span> <span class="o">**</span> <span class="mi">2</span>
</span><span id="AircraftPerformanceBada3-1066"><a href="#AircraftPerformanceBada3-1066"><span class="linenos">1066</span></a>
</span><span id="AircraftPerformanceBada3-1067"><a href="#AircraftPerformanceBada3-1067"><span class="linenos">1067</span></a>		<span class="k">return</span> <span class="n">drag</span>
</span><span id="AircraftPerformanceBada3-1068"><a href="#AircraftPerformanceBada3-1068"><span class="linenos">1068</span></a>
</span><span id="AircraftPerformanceBada3-1069"><a href="#AircraftPerformanceBada3-1069"><span class="linenos">1069</span></a>	<span class="k">def</span> <span class="nf">estimate_holding_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m_min</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compute_min_max</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3-1070"><a href="#AircraftPerformanceBada3-1070"><span class="linenos">1070</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformanceBada3-1071"><a href="#AircraftPerformanceBada3-1071"><span class="linenos">1071</span></a><span class="sd">		TODO with BADA</span>
</span><span id="AircraftPerformanceBada3-1072"><a href="#AircraftPerformanceBada3-1072"><span class="linenos">1072</span></a><span class="sd">		This is not BADA, this is based on values used in previous projects (CC) and in the ac mtow</span>
</span><span id="AircraftPerformanceBada3-1073"><a href="#AircraftPerformanceBada3-1073"><span class="linenos">1073</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformanceBada3-1074"><a href="#AircraftPerformanceBada3-1074"><span class="linenos">1074</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformanceBada3-1075"><a href="#AircraftPerformanceBada3-1075"><span class="linenos">1075</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3-1076"><a href="#AircraftPerformanceBada3-1076"><span class="linenos">1076</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3-1077"><a href="#AircraftPerformanceBada3-1077"><span class="linenos">1077</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformanceBada3-1078"><a href="#AircraftPerformanceBada3-1078"><span class="linenos">1078</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
</div>


                            <div id="AircraftPerformanceBada3.__init__" class="classattr">
                                        <input id="AircraftPerformanceBada3.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AircraftPerformanceBada3</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">ac_icao</span>,</span><span class="param">	<span class="n">wtc</span>,</span><span class="param">	<span class="n">s</span>,</span><span class="param">	<span class="n">wref</span>,</span><span class="param">	<span class="n">m_nom</span>,</span><span class="param">	<span class="n">mtow</span>,</span><span class="param">	<span class="n">oew</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">mpl</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">hmo</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">vfe</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">m_max</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>,</span><span class="param">	<span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>,</span><span class="param">	<span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">k</span><span class="o">=</span><span class="mi">0</span></span>)</span>

                <label class="view-source-button" for="AircraftPerformanceBada3.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3.__init__-1004"><a href="#AircraftPerformanceBada3.__init__-1004"><span class="linenos">1004</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3.__init__-1005"><a href="#AircraftPerformanceBada3.__init__-1005"><span class="linenos">1005</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="AircraftPerformanceBada3.__init__-1006"><a href="#AircraftPerformanceBada3.__init__-1006"><span class="linenos">1006</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3.__init__-1007"><a href="#AircraftPerformanceBada3.__init__-1007"><span class="linenos">1007</span></a>
</span><span id="AircraftPerformanceBada3.__init__-1008"><a href="#AircraftPerformanceBada3.__init__-1008"><span class="linenos">1008</span></a>		<span class="n">AircraftPerformance</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span> <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3.__init__-1009"><a href="#AircraftPerformanceBada3.__init__-1009"><span class="linenos">1009</span></a>
</span><span id="AircraftPerformanceBada3.__init__-1010"><a href="#AircraftPerformanceBada3.__init__-1010"><span class="linenos">1010</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">v_stall</span> <span class="o">=</span> <span class="n">v_stall</span>
</span><span id="AircraftPerformanceBada3.__init__-1011"><a href="#AircraftPerformanceBada3.__init__-1011"><span class="linenos">1011</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">clbo_mo</span> <span class="o">=</span> <span class="n">clbo_mo</span>
</span><span id="AircraftPerformanceBada3.__init__-1012"><a href="#AircraftPerformanceBada3.__init__-1012"><span class="linenos">1012</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="n">k</span>
</span><span id="AircraftPerformanceBada3.__init__-1013"><a href="#AircraftPerformanceBada3.__init__-1013"><span class="linenos">1013</span></a>
</span><span id="AircraftPerformanceBada3.__init__-1014"><a href="#AircraftPerformanceBada3.__init__-1014"><span class="linenos">1014</span></a>		<span class="c1"># For holding BADA 3, this is not from BADA but from previous projects (i.e., CC)</span>
</span><span id="AircraftPerformanceBada3.__init__-1015"><a href="#AircraftPerformanceBada3.__init__-1015"><span class="linenos">1015</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_ac</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AT43&#39;</span><span class="p">,</span> <span class="s1">&#39;AT72&#39;</span><span class="p">,</span> <span class="s1">&#39;DH8D&#39;</span><span class="p">,</span> <span class="s1">&#39;E190&#39;</span><span class="p">,</span> <span class="s1">&#39;B735&#39;</span><span class="p">,</span> <span class="s1">&#39;B733&#39;</span><span class="p">,</span> <span class="s1">&#39;B734&#39;</span><span class="p">,</span> <span class="s1">&#39;A319&#39;</span><span class="p">,</span> <span class="s1">&#39;A320&#39;</span><span class="p">,</span> <span class="s1">&#39;B738&#39;</span><span class="p">,</span> <span class="s1">&#39;A321&#39;</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3.__init__-1016"><a href="#AircraftPerformanceBada3.__init__-1016"><span class="linenos">1016</span></a>						   <span class="s1">&#39;B752&#39;</span><span class="p">,</span> <span class="s1">&#39;B763&#39;</span><span class="p">,</span> <span class="s1">&#39;A332&#39;</span><span class="p">,</span> <span class="s1">&#39;B744&#39;</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3.__init__-1017"><a href="#AircraftPerformanceBada3.__init__-1017"><span class="linenos">1017</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_sqr_mtow</span> <span class="o">=</span> <span class="p">[</span><span class="mf">4.1</span><span class="p">,</span> <span class="mf">4.71</span><span class="p">,</span> <span class="mf">5.4</span><span class="p">,</span> <span class="mf">6.98</span><span class="p">,</span> <span class="mf">7.46</span><span class="p">,</span> <span class="mf">7.77</span><span class="p">,</span> <span class="mf">8.09</span><span class="p">,</span> <span class="mf">8.19</span><span class="p">,</span> <span class="mf">8.6</span><span class="p">,</span> <span class="mf">8.64</span><span class="p">,</span> <span class="mf">9.31</span><span class="p">,</span> <span class="mf">10.38</span><span class="p">,</span> <span class="mf">13.47</span><span class="p">,</span> <span class="mf">15.18</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3.__init__-1018"><a href="#AircraftPerformanceBada3.__init__-1018"><span class="linenos">1018</span></a>								 <span class="mf">19.82</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3.__init__-1019"><a href="#AircraftPerformanceBada3.__init__-1019"><span class="linenos">1019</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span> <span class="o">=</span> <span class="p">[</span><span class="mf">9.19</span><span class="p">,</span> <span class="mf">11.8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mf">25.3</span><span class="p">,</span> <span class="mf">33.3</span><span class="p">,</span> <span class="mf">41.4</span><span class="p">,</span> <span class="mf">34.64</span><span class="p">,</span> <span class="mf">33.37</span><span class="p">,</span> <span class="mf">35.42</span><span class="p">,</span> <span class="mf">35.1</span><span class="p">,</span> <span class="mf">40.34</span><span class="p">,</span> <span class="mf">49.27</span><span class="p">,</span> <span class="mf">61.24</span><span class="p">,</span> <span class="mf">76.07</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3.__init__-1020"><a href="#AircraftPerformanceBada3.__init__-1020"><span class="linenos">1020</span></a>						   <span class="mf">119.51</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3.__init__-1021"><a href="#AircraftPerformanceBada3.__init__-1021"><span class="linenos">1021</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">holding_sqr_mtow</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span></pre></div>


    

                            </div>
                            <div id="AircraftPerformanceBada3.bada_version" class="classattr">
                                <div class="attr variable">
            <span class="name">bada_version</span>        =
<span class="default_value">3</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.bada_version"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3.v_stall" class="classattr">
                                <div class="attr variable">
            <span class="name">v_stall</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.v_stall"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3.clbo_mo" class="classattr">
                                <div class="attr variable">
            <span class="name">clbo_mo</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.clbo_mo"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3.k" class="classattr">
                                <div class="attr variable">
            <span class="name">k</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.k"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3.holding_ac" class="classattr">
                                <div class="attr variable">
            <span class="name">holding_ac</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.holding_ac"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3.holding_sqr_mtow" class="classattr">
                                <div class="attr variable">
            <span class="name">holding_sqr_mtow</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.holding_sqr_mtow"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3.holding_ff" class="classattr">
                                <div class="attr variable">
            <span class="name">holding_ff</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.holding_ff"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3.holding_fit" class="classattr">
                                <div class="attr variable">
            <span class="name">holding_fit</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.holding_fit"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3.compute_fuel_flow" class="classattr">
                                        <input id="AircraftPerformanceBada3.compute_fuel_flow-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_fuel_flow</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">m</span>, </span><span class="param"><span class="n">bank</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformanceBada3.compute_fuel_flow-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.compute_fuel_flow"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3.compute_fuel_flow-1023"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1023"><span class="linenos">1023</span></a>	<span class="k">def</span> <span class="nf">compute_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3.compute_fuel_flow-1024"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1024"><span class="linenos">1024</span></a>
</span><span id="AircraftPerformanceBada3.compute_fuel_flow-1025"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1025"><span class="linenos">1025</span></a>		<span class="n">v_tas</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3.compute_fuel_flow-1026"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1026"><span class="linenos">1026</span></a>		<span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_tsfc</span><span class="p">(</span><span class="n">v_tas</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3.compute_fuel_flow-1027"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1027"><span class="linenos">1027</span></a>		<span class="n">T</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compute_drag</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span>
</span><span id="AircraftPerformanceBada3.compute_fuel_flow-1028"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1028"><span class="linenos">1028</span></a>		<span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># cruise fuel factor</span>
</span><span id="AircraftPerformanceBada3.compute_fuel_flow-1029"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1029"><span class="linenos">1029</span></a>
</span><span id="AircraftPerformanceBada3.compute_fuel_flow-1030"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1030"><span class="linenos">1030</span></a>		<span class="n">ff</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">T</span> <span class="o">*</span> <span class="n">c</span>
</span><span id="AircraftPerformanceBada3.compute_fuel_flow-1031"><a href="#AircraftPerformanceBada3.compute_fuel_flow-1031"><span class="linenos">1031</span></a>		<span class="k">return</span> <span class="n">ff</span>
</span></pre></div>


    

                            </div>
                            <div id="AircraftPerformanceBada3.compute_drag" class="classattr">
                                        <input id="AircraftPerformanceBada3.compute_drag-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_drag</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">m</span>, </span><span class="param"><span class="n">bank</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformanceBada3.compute_drag-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.compute_drag"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3.compute_drag-1033"><a href="#AircraftPerformanceBada3.compute_drag-1033"><span class="linenos">1033</span></a>	<span class="k">def</span> <span class="nf">compute_drag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">bank</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1034"><a href="#AircraftPerformanceBada3.compute_drag-1034"><span class="linenos">1034</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1035"><a href="#AircraftPerformanceBada3.compute_drag-1035"><span class="linenos">1035</span></a><span class="sd">		Compute drag in N at a given fl, mass, mach, bank angle.</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1036"><a href="#AircraftPerformanceBada3.compute_drag-1036"><span class="linenos">1036</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1037"><a href="#AircraftPerformanceBada3.compute_drag-1037"><span class="linenos">1037</span></a><span class="sd">		Args:</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1038"><a href="#AircraftPerformanceBada3.compute_drag-1038"><span class="linenos">1038</span></a><span class="sd">			fl: flight level (ft/100)</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1039"><a href="#AircraftPerformanceBada3.compute_drag-1039"><span class="linenos">1039</span></a><span class="sd">			mass: mass (kg)</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1040"><a href="#AircraftPerformanceBada3.compute_drag-1040"><span class="linenos">1040</span></a><span class="sd">			m: mach (Mach)</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1041"><a href="#AircraftPerformanceBada3.compute_drag-1041"><span class="linenos">1041</span></a><span class="sd">			bank: bank angle (rad)</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1042"><a href="#AircraftPerformanceBada3.compute_drag-1042"><span class="linenos">1042</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1043"><a href="#AircraftPerformanceBada3.compute_drag-1043"><span class="linenos">1043</span></a><span class="sd">		Returns:</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1044"><a href="#AircraftPerformanceBada3.compute_drag-1044"><span class="linenos">1044</span></a><span class="sd">			drag: Drag (N)</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1045"><a href="#AircraftPerformanceBada3.compute_drag-1045"><span class="linenos">1045</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1046"><a href="#AircraftPerformanceBada3.compute_drag-1046"><span class="linenos">1046</span></a><span class="sd">		Example of use:    </span>
</span><span id="AircraftPerformanceBada3.compute_drag-1047"><a href="#AircraftPerformanceBada3.compute_drag-1047"><span class="linenos">1047</span></a><span class="sd">			fl = 340</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1048"><a href="#AircraftPerformanceBada3.compute_drag-1048"><span class="linenos">1048</span></a><span class="sd">			mass = 67010</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1049"><a href="#AircraftPerformanceBada3.compute_drag-1049"><span class="linenos">1049</span></a><span class="sd">			m = 0.78      </span>
</span><span id="AircraftPerformanceBada3.compute_drag-1050"><a href="#AircraftPerformanceBada3.compute_drag-1050"><span class="linenos">1050</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1051"><a href="#AircraftPerformanceBada3.compute_drag-1051"><span class="linenos">1051</span></a><span class="sd">			drag=compute_drag(fl,mass,m)</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1052"><a href="#AircraftPerformanceBada3.compute_drag-1052"><span class="linenos">1052</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1053"><a href="#AircraftPerformanceBada3.compute_drag-1053"><span class="linenos">1053</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1054"><a href="#AircraftPerformanceBada3.compute_drag-1054"><span class="linenos">1054</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1055"><a href="#AircraftPerformanceBada3.compute_drag-1055"><span class="linenos">1055</span></a>		<span class="n">density</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">density</span><span class="p">(</span><span class="n">fl</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1056"><a href="#AircraftPerformanceBada3.compute_drag-1056"><span class="linenos">1056</span></a>		<span class="n">v_tas</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">fl</span><span class="p">)</span> <span class="o">/</span> <span class="n">uc</span><span class="o">.</span><span class="n">ms2kt</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1057"><a href="#AircraftPerformanceBada3.compute_drag-1057"><span class="linenos">1057</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1058"><a href="#AircraftPerformanceBada3.compute_drag-1058"><span class="linenos">1058</span></a>		<span class="n">cl</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">mass</span> <span class="o">*</span> <span class="n">sa</span><span class="o">.</span><span class="n">g</span> <span class="o">/</span> <span class="p">(</span><span class="n">density</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">bank</span><span class="p">)</span> <span class="o">*</span> <span class="n">v_tas</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1059"><a href="#AircraftPerformanceBada3.compute_drag-1059"><span class="linenos">1059</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1060"><a href="#AircraftPerformanceBada3.compute_drag-1060"><span class="linenos">1060</span></a>		<span class="n">cd_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1061"><a href="#AircraftPerformanceBada3.compute_drag-1061"><span class="linenos">1061</span></a>		<span class="n">cd_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1062"><a href="#AircraftPerformanceBada3.compute_drag-1062"><span class="linenos">1062</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1063"><a href="#AircraftPerformanceBada3.compute_drag-1063"><span class="linenos">1063</span></a>		<span class="n">cd</span> <span class="o">=</span> <span class="n">cd_0</span> <span class="o">+</span> <span class="n">cd_2</span> <span class="o">*</span> <span class="n">cl</span> <span class="o">**</span> <span class="mi">2</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1064"><a href="#AircraftPerformanceBada3.compute_drag-1064"><span class="linenos">1064</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1065"><a href="#AircraftPerformanceBada3.compute_drag-1065"><span class="linenos">1065</span></a>		<span class="n">drag</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">*</span> <span class="n">density</span> <span class="o">*</span> <span class="n">cd</span> <span class="o">*</span> <span class="n">v_tas</span> <span class="o">**</span> <span class="mi">2</span>
</span><span id="AircraftPerformanceBada3.compute_drag-1066"><a href="#AircraftPerformanceBada3.compute_drag-1066"><span class="linenos">1066</span></a>
</span><span id="AircraftPerformanceBada3.compute_drag-1067"><a href="#AircraftPerformanceBada3.compute_drag-1067"><span class="linenos">1067</span></a>		<span class="k">return</span> <span class="n">drag</span>
</span></pre></div>


            <div class="docstring"><p>Compute drag in N at a given fl, mass, mach, bank angle.</p>

<p>Args:
        fl: flight level (ft/100)
        mass: mass (kg)
        m: mach (Mach)
        bank: bank angle (rad)</p>

<p>Returns:
        drag: Drag (N)</p>

<p>Example of use: <br />
        fl = 340
        mass = 67010
        m = 0.78      </p>

<pre><code>    drag=compute_drag(fl,mass,m)
</code></pre>
</div>


                            </div>
                            <div id="AircraftPerformanceBada3.estimate_holding_fuel_flow" class="classattr">
                                        <input id="AircraftPerformanceBada3.estimate_holding_fuel_flow-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">estimate_holding_fuel_flow</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fl</span>, </span><span class="param"><span class="n">mass</span>, </span><span class="param"><span class="n">m_min</span><span class="o">=</span><span class="mf">0.2</span>, </span><span class="param"><span class="n">m_max</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">compute_min_max</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformanceBada3.estimate_holding_fuel_flow-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3.estimate_holding_fuel_flow"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1069"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1069"><span class="linenos">1069</span></a>	<span class="k">def</span> <span class="nf">estimate_holding_fuel_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fl</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">m_min</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">compute_min_max</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1070"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1070"><span class="linenos">1070</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1071"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1071"><span class="linenos">1071</span></a><span class="sd">		TODO with BADA</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1072"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1072"><span class="linenos">1072</span></a><span class="sd">		This is not BADA, this is based on values used in previous projects (CC) and in the ac mtow</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1073"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1073"><span class="linenos">1073</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1074"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1074"><span class="linenos">1074</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1075"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1075"><span class="linenos">1075</span></a>			<span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ac</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ac_icao</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1076"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1076"><span class="linenos">1076</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_ff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1077"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1077"><span class="linenos">1077</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="AircraftPerformanceBada3.estimate_holding_fuel_flow-1078"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow-1078"><span class="linenos">1078</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">holding_fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mtow</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>TODO with BADA
This is not BADA, this is based on values used in previous projects (CC) and in the ac mtow</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#AircraftPerformance">AircraftPerformance</a></dt>
                                <dd id="AircraftPerformanceBada3.engine_type" class="variable"><a href="#AircraftPerformance.engine_type">engine_type</a></dd>
                <dd id="AircraftPerformanceBada3.ac_icao" class="variable"><a href="#AircraftPerformance.ac_icao">ac_icao</a></dd>
                <dd id="AircraftPerformanceBada3.ac_model" class="variable"><a href="#AircraftPerformance.ac_model">ac_model</a></dd>
                <dd id="AircraftPerformanceBada3.wtc" class="variable"><a href="#AircraftPerformance.wtc">wtc</a></dd>
                <dd id="AircraftPerformanceBada3.s" class="variable"><a href="#AircraftPerformance.s">s</a></dd>
                <dd id="AircraftPerformanceBada3.wref" class="variable"><a href="#AircraftPerformance.wref">wref</a></dd>
                <dd id="AircraftPerformanceBada3.m_nom" class="variable"><a href="#AircraftPerformance.m_nom">m_nom</a></dd>
                <dd id="AircraftPerformanceBada3.mtow" class="variable"><a href="#AircraftPerformance.mtow">mtow</a></dd>
                <dd id="AircraftPerformanceBada3.oew" class="variable"><a href="#AircraftPerformance.oew">oew</a></dd>
                <dd id="AircraftPerformanceBada3.hmo" class="variable"><a href="#AircraftPerformance.hmo">hmo</a></dd>
                <dd id="AircraftPerformanceBada3.mpl" class="variable"><a href="#AircraftPerformance.mpl">mpl</a></dd>
                <dd id="AircraftPerformanceBada3.m_max" class="variable"><a href="#AircraftPerformance.m_max">m_max</a></dd>
                <dd id="AircraftPerformanceBada3.vfe" class="variable"><a href="#AircraftPerformance.vfe">vfe</a></dd>
                <dd id="AircraftPerformanceBada3.d" class="variable"><a href="#AircraftPerformance.d">d</a></dd>
                <dd id="AircraftPerformanceBada3.f" class="variable"><a href="#AircraftPerformance.f">f</a></dd>
                <dd id="AircraftPerformanceBada3.fl_climb_descent" class="variable"><a href="#AircraftPerformance.fl_climb_descent">fl_climb_descent</a></dd>
                <dd id="AircraftPerformanceBada3.climb_ff" class="variable"><a href="#AircraftPerformance.climb_ff">climb_ff</a></dd>
                <dd id="AircraftPerformanceBada3.descent_ff" class="variable"><a href="#AircraftPerformance.descent_ff">descent_ff</a></dd>
                <dd id="AircraftPerformanceBada3.climb_perf" class="variable"><a href="#AircraftPerformance.climb_perf">climb_perf</a></dd>
                <dd id="AircraftPerformanceBada3.descent_perf" class="variable"><a href="#AircraftPerformance.descent_perf">descent_perf</a></dd>
                <dd id="AircraftPerformanceBada3.mach_detailled_nominal" class="variable"><a href="#AircraftPerformance.mach_detailled_nominal">mach_detailled_nominal</a></dd>
                <dd id="AircraftPerformanceBada3.apu_ac" class="variable"><a href="#AircraftPerformance.apu_ac">apu_ac</a></dd>
                <dd id="AircraftPerformanceBada3.apu_sqr_mtow" class="variable"><a href="#AircraftPerformance.apu_sqr_mtow">apu_sqr_mtow</a></dd>
                <dd id="AircraftPerformanceBada3.apu_ff" class="variable"><a href="#AircraftPerformance.apu_ff">apu_ff</a></dd>
                <dd id="AircraftPerformanceBada3.apu_fit" class="variable"><a href="#AircraftPerformance.apu_fit">apu_fit</a></dd>
                <dd id="AircraftPerformanceBada3.at_gate_costs_min" class="variable"><a href="#AircraftPerformance.at_gate_costs_min">at_gate_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3.en_route_costs_min" class="variable"><a href="#AircraftPerformance.en_route_costs_min">en_route_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3.arrival_costs_min" class="variable"><a href="#AircraftPerformance.arrival_costs_min">arrival_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3.at_gate_costs_fit" class="variable"><a href="#AircraftPerformance.at_gate_costs_fit">at_gate_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3.en_route_costs_fit" class="variable"><a href="#AircraftPerformance.en_route_costs_fit">en_route_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3.arrival_costs_fit" class="variable"><a href="#AircraftPerformance.arrival_costs_fit">arrival_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3.estimate_avg_cruise_weight" class="function"><a href="#AircraftPerformance.estimate_avg_cruise_weight">estimate_avg_cruise_weight</a></dd>
                <dd id="AircraftPerformanceBada3.set_climb_descent_fuel_flow_performances" class="function"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances">set_climb_descent_fuel_flow_performances</a></dd>
                <dd id="AircraftPerformanceBada3.compute_sr" class="function"><a href="#AircraftPerformance.compute_sr">compute_sr</a></dd>
                <dd id="AircraftPerformanceBada3.estimate_climb_fuel_flow" class="function"><a href="#AircraftPerformance.estimate_climb_fuel_flow">estimate_climb_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3.estimate_descent_fuel_flow" class="function"><a href="#AircraftPerformance.estimate_descent_fuel_flow">estimate_descent_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3.avg_climb_descent_ff" class="function"><a href="#AircraftPerformance.avg_climb_descent_ff">avg_climb_descent_ff</a></dd>
                <dd id="AircraftPerformanceBada3.set_climb_fuel_flow_detailled_rate_performances" class="function"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances">set_climb_fuel_flow_detailled_rate_performances</a></dd>
                <dd id="AircraftPerformanceBada3.interpolate_climb_performances" class="function"><a href="#AircraftPerformance.interpolate_climb_performances">interpolate_climb_performances</a></dd>
                <dd id="AircraftPerformanceBada3.set_descent_fuel_flow_detailled_rate_performances" class="function"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances">set_descent_fuel_flow_detailled_rate_performances</a></dd>
                <dd id="AircraftPerformanceBada3.interpolate_descent_performances" class="function"><a href="#AircraftPerformance.interpolate_descent_performances">interpolate_descent_performances</a></dd>
                <dd id="AircraftPerformanceBada3.set_detailled_mach_nominal" class="function"><a href="#AircraftPerformance.set_detailled_mach_nominal">set_detailled_mach_nominal</a></dd>
                <dd id="AircraftPerformanceBada3.interpolate_cruise_nominal_mach" class="function"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach">interpolate_cruise_nominal_mach</a></dd>
                <dd id="AircraftPerformanceBada3.trajectory_segment_descent_estimation_from_lnd" class="function"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd">trajectory_segment_descent_estimation_from_lnd</a></dd>
                <dd id="AircraftPerformanceBada3.trajectory_segment_climb_estimation_from_toc" class="function"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc">trajectory_segment_climb_estimation_from_toc</a></dd>
                <dd id="AircraftPerformanceBada3.trajectory_segment_climb_estimation_from_to" class="function"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to">trajectory_segment_climb_estimation_from_to</a></dd>
                <dd id="AircraftPerformanceBada3.trajectory_segment_cruise_estimation" class="function"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation">trajectory_segment_cruise_estimation</a></dd>
                <dd id="AircraftPerformanceBada3.trajectory_cruise_estimation_with_fl_change" class="function"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change">trajectory_cruise_estimation_with_fl_change</a></dd>
                <dd id="AircraftPerformanceBada3.error_extra_cruise" class="function"><a href="#AircraftPerformance.error_extra_cruise">error_extra_cruise</a></dd>
                <dd id="AircraftPerformanceBada3.error_climb_weight_from_toc" class="function"><a href="#AircraftPerformance.error_climb_weight_from_toc">error_climb_weight_from_toc</a></dd>
                <dd id="AircraftPerformanceBada3.estimate_trajectory" class="function"><a href="#AircraftPerformance.estimate_trajectory">estimate_trajectory</a></dd>
                <dd id="AircraftPerformanceBada3.apu_fuel_flow" class="function"><a href="#AircraftPerformance.apu_fuel_flow">apu_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3.at_gate_costs_per_minute" class="function"><a href="#AircraftPerformance.at_gate_costs_per_minute">at_gate_costs_per_minute</a></dd>
                <dd id="AircraftPerformanceBada3.en_route_costs_per_minute" class="function"><a href="#AircraftPerformance.en_route_costs_per_minute">en_route_costs_per_minute</a></dd>
                <dd id="AircraftPerformanceBada3.arrival_costs_per_minute" class="function"><a href="#AircraftPerformance.arrival_costs_per_minute">arrival_costs_per_minute</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AircraftPerformanceBada3Jet">
                            <input id="AircraftPerformanceBada3Jet-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AircraftPerformanceBada3Jet</span><wbr>(<span class="base"><a href="#AircraftPerformanceBada3">AircraftPerformanceBada3</a></span>):

                <label class="view-source-button" for="AircraftPerformanceBada3Jet-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3Jet"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3Jet-1081"><a href="#AircraftPerformanceBada3Jet-1081"><span class="linenos">1081</span></a><span class="k">class</span> <span class="nc">AircraftPerformanceBada3Jet</span><span class="p">(</span><span class="n">AircraftPerformanceBada3</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3Jet-1082"><a href="#AircraftPerformanceBada3Jet-1082"><span class="linenos">1082</span></a>	<span class="n">engine_type</span> <span class="o">=</span> <span class="s2">&quot;JET&quot;</span>
</span><span id="AircraftPerformanceBada3Jet-1083"><a href="#AircraftPerformanceBada3Jet-1083"><span class="linenos">1083</span></a>
</span><span id="AircraftPerformanceBada3Jet-1084"><a href="#AircraftPerformanceBada3Jet-1084"><span class="linenos">1084</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3Jet-1085"><a href="#AircraftPerformanceBada3Jet-1085"><span class="linenos">1085</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="AircraftPerformanceBada3Jet-1086"><a href="#AircraftPerformanceBada3Jet-1086"><span class="linenos">1086</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3Jet-1087"><a href="#AircraftPerformanceBada3Jet-1087"><span class="linenos">1087</span></a>		<span class="n">AircraftPerformanceBada3</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3Jet-1088"><a href="#AircraftPerformanceBada3Jet-1088"><span class="linenos">1088</span></a>										  <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">v_stall</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">clbo_mo</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3Jet-1089"><a href="#AircraftPerformanceBada3Jet-1089"><span class="linenos">1089</span></a>
</span><span id="AircraftPerformanceBada3Jet-1090"><a href="#AircraftPerformanceBada3Jet-1090"><span class="linenos">1090</span></a>	<span class="k">def</span> <span class="nf">compute_tsfc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_tas</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3Jet-1091"><a href="#AircraftPerformanceBada3Jet-1091"><span class="linenos">1091</span></a>		<span class="n">cf1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3Jet-1092"><a href="#AircraftPerformanceBada3Jet-1092"><span class="linenos">1092</span></a>		<span class="n">cf2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3Jet-1093"><a href="#AircraftPerformanceBada3Jet-1093"><span class="linenos">1093</span></a>		<span class="k">return</span> <span class="n">cf1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">v_tas</span> <span class="o">/</span> <span class="n">cf2</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
</div>


                            <div id="AircraftPerformanceBada3Jet.__init__" class="classattr">
                                        <input id="AircraftPerformanceBada3Jet.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AircraftPerformanceBada3Jet</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">ac_icao</span>,</span><span class="param">	<span class="n">wtc</span>,</span><span class="param">	<span class="n">s</span>,</span><span class="param">	<span class="n">wref</span>,</span><span class="param">	<span class="n">m_nom</span>,</span><span class="param">	<span class="n">mtow</span>,</span><span class="param">	<span class="n">oew</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">mpl</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">hmo</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">vfe</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">m_max</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>,</span><span class="param">	<span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>,</span><span class="param">	<span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">k</span><span class="o">=</span><span class="mi">0</span></span>)</span>

                <label class="view-source-button" for="AircraftPerformanceBada3Jet.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3Jet.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3Jet.__init__-1084"><a href="#AircraftPerformanceBada3Jet.__init__-1084"><span class="linenos">1084</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3Jet.__init__-1085"><a href="#AircraftPerformanceBada3Jet.__init__-1085"><span class="linenos">1085</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="AircraftPerformanceBada3Jet.__init__-1086"><a href="#AircraftPerformanceBada3Jet.__init__-1086"><span class="linenos">1086</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3Jet.__init__-1087"><a href="#AircraftPerformanceBada3Jet.__init__-1087"><span class="linenos">1087</span></a>		<span class="n">AircraftPerformanceBada3</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3Jet.__init__-1088"><a href="#AircraftPerformanceBada3Jet.__init__-1088"><span class="linenos">1088</span></a>										  <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">v_stall</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">clbo_mo</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AircraftPerformanceBada3Jet.engine_type" class="classattr">
                                <div class="attr variable">
            <span class="name">engine_type</span>        =
<span class="default_value">&#39;JET&#39;</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3Jet.engine_type"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3Jet.compute_tsfc" class="classattr">
                                        <input id="AircraftPerformanceBada3Jet.compute_tsfc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_tsfc</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">v_tas</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformanceBada3Jet.compute_tsfc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3Jet.compute_tsfc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3Jet.compute_tsfc-1090"><a href="#AircraftPerformanceBada3Jet.compute_tsfc-1090"><span class="linenos">1090</span></a>	<span class="k">def</span> <span class="nf">compute_tsfc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_tas</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3Jet.compute_tsfc-1091"><a href="#AircraftPerformanceBada3Jet.compute_tsfc-1091"><span class="linenos">1091</span></a>		<span class="n">cf1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3Jet.compute_tsfc-1092"><a href="#AircraftPerformanceBada3Jet.compute_tsfc-1092"><span class="linenos">1092</span></a>		<span class="n">cf2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3Jet.compute_tsfc-1093"><a href="#AircraftPerformanceBada3Jet.compute_tsfc-1093"><span class="linenos">1093</span></a>		<span class="k">return</span> <span class="n">cf1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="n">v_tas</span> <span class="o">/</span> <span class="n">cf2</span><span class="p">))</span>
</span></pre></div>


    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#AircraftPerformanceBada3">AircraftPerformanceBada3</a></dt>
                                <dd id="AircraftPerformanceBada3Jet.bada_version" class="variable"><a href="#AircraftPerformanceBada3.bada_version">bada_version</a></dd>
                <dd id="AircraftPerformanceBada3Jet.v_stall" class="variable"><a href="#AircraftPerformanceBada3.v_stall">v_stall</a></dd>
                <dd id="AircraftPerformanceBada3Jet.clbo_mo" class="variable"><a href="#AircraftPerformanceBada3.clbo_mo">clbo_mo</a></dd>
                <dd id="AircraftPerformanceBada3Jet.k" class="variable"><a href="#AircraftPerformanceBada3.k">k</a></dd>
                <dd id="AircraftPerformanceBada3Jet.holding_ac" class="variable"><a href="#AircraftPerformanceBada3.holding_ac">holding_ac</a></dd>
                <dd id="AircraftPerformanceBada3Jet.holding_sqr_mtow" class="variable"><a href="#AircraftPerformanceBada3.holding_sqr_mtow">holding_sqr_mtow</a></dd>
                <dd id="AircraftPerformanceBada3Jet.holding_ff" class="variable"><a href="#AircraftPerformanceBada3.holding_ff">holding_ff</a></dd>
                <dd id="AircraftPerformanceBada3Jet.holding_fit" class="variable"><a href="#AircraftPerformanceBada3.holding_fit">holding_fit</a></dd>
                <dd id="AircraftPerformanceBada3Jet.compute_fuel_flow" class="function"><a href="#AircraftPerformanceBada3.compute_fuel_flow">compute_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3Jet.compute_drag" class="function"><a href="#AircraftPerformanceBada3.compute_drag">compute_drag</a></dd>
                <dd id="AircraftPerformanceBada3Jet.estimate_holding_fuel_flow" class="function"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow">estimate_holding_fuel_flow</a></dd>

            </div>
            <div><dt><a href="#AircraftPerformance">AircraftPerformance</a></dt>
                                <dd id="AircraftPerformanceBada3Jet.ac_icao" class="variable"><a href="#AircraftPerformance.ac_icao">ac_icao</a></dd>
                <dd id="AircraftPerformanceBada3Jet.ac_model" class="variable"><a href="#AircraftPerformance.ac_model">ac_model</a></dd>
                <dd id="AircraftPerformanceBada3Jet.wtc" class="variable"><a href="#AircraftPerformance.wtc">wtc</a></dd>
                <dd id="AircraftPerformanceBada3Jet.s" class="variable"><a href="#AircraftPerformance.s">s</a></dd>
                <dd id="AircraftPerformanceBada3Jet.wref" class="variable"><a href="#AircraftPerformance.wref">wref</a></dd>
                <dd id="AircraftPerformanceBada3Jet.m_nom" class="variable"><a href="#AircraftPerformance.m_nom">m_nom</a></dd>
                <dd id="AircraftPerformanceBada3Jet.mtow" class="variable"><a href="#AircraftPerformance.mtow">mtow</a></dd>
                <dd id="AircraftPerformanceBada3Jet.oew" class="variable"><a href="#AircraftPerformance.oew">oew</a></dd>
                <dd id="AircraftPerformanceBada3Jet.hmo" class="variable"><a href="#AircraftPerformance.hmo">hmo</a></dd>
                <dd id="AircraftPerformanceBada3Jet.mpl" class="variable"><a href="#AircraftPerformance.mpl">mpl</a></dd>
                <dd id="AircraftPerformanceBada3Jet.m_max" class="variable"><a href="#AircraftPerformance.m_max">m_max</a></dd>
                <dd id="AircraftPerformanceBada3Jet.vfe" class="variable"><a href="#AircraftPerformance.vfe">vfe</a></dd>
                <dd id="AircraftPerformanceBada3Jet.d" class="variable"><a href="#AircraftPerformance.d">d</a></dd>
                <dd id="AircraftPerformanceBada3Jet.f" class="variable"><a href="#AircraftPerformance.f">f</a></dd>
                <dd id="AircraftPerformanceBada3Jet.fl_climb_descent" class="variable"><a href="#AircraftPerformance.fl_climb_descent">fl_climb_descent</a></dd>
                <dd id="AircraftPerformanceBada3Jet.climb_ff" class="variable"><a href="#AircraftPerformance.climb_ff">climb_ff</a></dd>
                <dd id="AircraftPerformanceBada3Jet.descent_ff" class="variable"><a href="#AircraftPerformance.descent_ff">descent_ff</a></dd>
                <dd id="AircraftPerformanceBada3Jet.climb_perf" class="variable"><a href="#AircraftPerformance.climb_perf">climb_perf</a></dd>
                <dd id="AircraftPerformanceBada3Jet.descent_perf" class="variable"><a href="#AircraftPerformance.descent_perf">descent_perf</a></dd>
                <dd id="AircraftPerformanceBada3Jet.mach_detailled_nominal" class="variable"><a href="#AircraftPerformance.mach_detailled_nominal">mach_detailled_nominal</a></dd>
                <dd id="AircraftPerformanceBada3Jet.apu_ac" class="variable"><a href="#AircraftPerformance.apu_ac">apu_ac</a></dd>
                <dd id="AircraftPerformanceBada3Jet.apu_sqr_mtow" class="variable"><a href="#AircraftPerformance.apu_sqr_mtow">apu_sqr_mtow</a></dd>
                <dd id="AircraftPerformanceBada3Jet.apu_ff" class="variable"><a href="#AircraftPerformance.apu_ff">apu_ff</a></dd>
                <dd id="AircraftPerformanceBada3Jet.apu_fit" class="variable"><a href="#AircraftPerformance.apu_fit">apu_fit</a></dd>
                <dd id="AircraftPerformanceBada3Jet.at_gate_costs_min" class="variable"><a href="#AircraftPerformance.at_gate_costs_min">at_gate_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3Jet.en_route_costs_min" class="variable"><a href="#AircraftPerformance.en_route_costs_min">en_route_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3Jet.arrival_costs_min" class="variable"><a href="#AircraftPerformance.arrival_costs_min">arrival_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3Jet.at_gate_costs_fit" class="variable"><a href="#AircraftPerformance.at_gate_costs_fit">at_gate_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3Jet.en_route_costs_fit" class="variable"><a href="#AircraftPerformance.en_route_costs_fit">en_route_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3Jet.arrival_costs_fit" class="variable"><a href="#AircraftPerformance.arrival_costs_fit">arrival_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3Jet.estimate_avg_cruise_weight" class="function"><a href="#AircraftPerformance.estimate_avg_cruise_weight">estimate_avg_cruise_weight</a></dd>
                <dd id="AircraftPerformanceBada3Jet.set_climb_descent_fuel_flow_performances" class="function"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances">set_climb_descent_fuel_flow_performances</a></dd>
                <dd id="AircraftPerformanceBada3Jet.compute_sr" class="function"><a href="#AircraftPerformance.compute_sr">compute_sr</a></dd>
                <dd id="AircraftPerformanceBada3Jet.estimate_climb_fuel_flow" class="function"><a href="#AircraftPerformance.estimate_climb_fuel_flow">estimate_climb_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3Jet.estimate_descent_fuel_flow" class="function"><a href="#AircraftPerformance.estimate_descent_fuel_flow">estimate_descent_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3Jet.avg_climb_descent_ff" class="function"><a href="#AircraftPerformance.avg_climb_descent_ff">avg_climb_descent_ff</a></dd>
                <dd id="AircraftPerformanceBada3Jet.set_climb_fuel_flow_detailled_rate_performances" class="function"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances">set_climb_fuel_flow_detailled_rate_performances</a></dd>
                <dd id="AircraftPerformanceBada3Jet.interpolate_climb_performances" class="function"><a href="#AircraftPerformance.interpolate_climb_performances">interpolate_climb_performances</a></dd>
                <dd id="AircraftPerformanceBada3Jet.set_descent_fuel_flow_detailled_rate_performances" class="function"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances">set_descent_fuel_flow_detailled_rate_performances</a></dd>
                <dd id="AircraftPerformanceBada3Jet.interpolate_descent_performances" class="function"><a href="#AircraftPerformance.interpolate_descent_performances">interpolate_descent_performances</a></dd>
                <dd id="AircraftPerformanceBada3Jet.set_detailled_mach_nominal" class="function"><a href="#AircraftPerformance.set_detailled_mach_nominal">set_detailled_mach_nominal</a></dd>
                <dd id="AircraftPerformanceBada3Jet.interpolate_cruise_nominal_mach" class="function"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach">interpolate_cruise_nominal_mach</a></dd>
                <dd id="AircraftPerformanceBada3Jet.trajectory_segment_descent_estimation_from_lnd" class="function"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd">trajectory_segment_descent_estimation_from_lnd</a></dd>
                <dd id="AircraftPerformanceBada3Jet.trajectory_segment_climb_estimation_from_toc" class="function"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc">trajectory_segment_climb_estimation_from_toc</a></dd>
                <dd id="AircraftPerformanceBada3Jet.trajectory_segment_climb_estimation_from_to" class="function"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to">trajectory_segment_climb_estimation_from_to</a></dd>
                <dd id="AircraftPerformanceBada3Jet.trajectory_segment_cruise_estimation" class="function"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation">trajectory_segment_cruise_estimation</a></dd>
                <dd id="AircraftPerformanceBada3Jet.trajectory_cruise_estimation_with_fl_change" class="function"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change">trajectory_cruise_estimation_with_fl_change</a></dd>
                <dd id="AircraftPerformanceBada3Jet.error_extra_cruise" class="function"><a href="#AircraftPerformance.error_extra_cruise">error_extra_cruise</a></dd>
                <dd id="AircraftPerformanceBada3Jet.error_climb_weight_from_toc" class="function"><a href="#AircraftPerformance.error_climb_weight_from_toc">error_climb_weight_from_toc</a></dd>
                <dd id="AircraftPerformanceBada3Jet.estimate_trajectory" class="function"><a href="#AircraftPerformance.estimate_trajectory">estimate_trajectory</a></dd>
                <dd id="AircraftPerformanceBada3Jet.apu_fuel_flow" class="function"><a href="#AircraftPerformance.apu_fuel_flow">apu_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3Jet.at_gate_costs_per_minute" class="function"><a href="#AircraftPerformance.at_gate_costs_per_minute">at_gate_costs_per_minute</a></dd>
                <dd id="AircraftPerformanceBada3Jet.en_route_costs_per_minute" class="function"><a href="#AircraftPerformance.en_route_costs_per_minute">en_route_costs_per_minute</a></dd>
                <dd id="AircraftPerformanceBada3Jet.arrival_costs_per_minute" class="function"><a href="#AircraftPerformance.arrival_costs_per_minute">arrival_costs_per_minute</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="AircraftPerformanceBada3TP">
                            <input id="AircraftPerformanceBada3TP-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AircraftPerformanceBada3TP</span><wbr>(<span class="base"><a href="#AircraftPerformanceBada3">AircraftPerformanceBada3</a></span>):

                <label class="view-source-button" for="AircraftPerformanceBada3TP-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3TP"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3TP-1096"><a href="#AircraftPerformanceBada3TP-1096"><span class="linenos">1096</span></a><span class="k">class</span> <span class="nc">AircraftPerformanceBada3TP</span><span class="p">(</span><span class="n">AircraftPerformanceBada3</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3TP-1097"><a href="#AircraftPerformanceBada3TP-1097"><span class="linenos">1097</span></a>	<span class="n">engine_type</span> <span class="o">=</span> <span class="s2">&quot;TURBOPROP&quot;</span>
</span><span id="AircraftPerformanceBada3TP-1098"><a href="#AircraftPerformanceBada3TP-1098"><span class="linenos">1098</span></a>
</span><span id="AircraftPerformanceBada3TP-1099"><a href="#AircraftPerformanceBada3TP-1099"><span class="linenos">1099</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3TP-1100"><a href="#AircraftPerformanceBada3TP-1100"><span class="linenos">1100</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="AircraftPerformanceBada3TP-1101"><a href="#AircraftPerformanceBada3TP-1101"><span class="linenos">1101</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3TP-1102"><a href="#AircraftPerformanceBada3TP-1102"><span class="linenos">1102</span></a>		<span class="n">AircraftPerformanceBada3</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3TP-1103"><a href="#AircraftPerformanceBada3TP-1103"><span class="linenos">1103</span></a>										  <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">v_stall</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">clbo_mo</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span id="AircraftPerformanceBada3TP-1104"><a href="#AircraftPerformanceBada3TP-1104"><span class="linenos">1104</span></a>
</span><span id="AircraftPerformanceBada3TP-1105"><a href="#AircraftPerformanceBada3TP-1105"><span class="linenos">1105</span></a>	<span class="k">def</span> <span class="nf">compute_tsfc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_tas</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3TP-1106"><a href="#AircraftPerformanceBada3TP-1106"><span class="linenos">1106</span></a>		<span class="n">cf1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3TP-1107"><a href="#AircraftPerformanceBada3TP-1107"><span class="linenos">1107</span></a>		<span class="n">cf2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3TP-1108"><a href="#AircraftPerformanceBada3TP-1108"><span class="linenos">1108</span></a>		<span class="k">return</span> <span class="n">cf1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">v_tas</span> <span class="o">/</span> <span class="n">cf2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">v_tas</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
</div>


                            <div id="AircraftPerformanceBada3TP.__init__" class="classattr">
                                        <input id="AircraftPerformanceBada3TP.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AircraftPerformanceBada3TP</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">ac_icao</span>,</span><span class="param">	<span class="n">wtc</span>,</span><span class="param">	<span class="n">s</span>,</span><span class="param">	<span class="n">wref</span>,</span><span class="param">	<span class="n">m_nom</span>,</span><span class="param">	<span class="n">mtow</span>,</span><span class="param">	<span class="n">oew</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">mpl</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">hmo</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">vfe</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">m_max</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>,</span><span class="param">	<span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>,</span><span class="param">	<span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">k</span><span class="o">=</span><span class="mi">0</span></span>)</span>

                <label class="view-source-button" for="AircraftPerformanceBada3TP.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3TP.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3TP.__init__-1099"><a href="#AircraftPerformanceBada3TP.__init__-1099"><span class="linenos">1099</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3TP.__init__-1100"><a href="#AircraftPerformanceBada3TP.__init__-1100"><span class="linenos">1100</span></a>				 <span class="n">oew</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mpl</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hmo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vfe</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">m_max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">v_stall</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="AircraftPerformanceBada3TP.__init__-1101"><a href="#AircraftPerformanceBada3TP.__init__-1101"><span class="linenos">1101</span></a>				 <span class="n">f</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">clbo_mo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3TP.__init__-1102"><a href="#AircraftPerformanceBada3TP.__init__-1102"><span class="linenos">1102</span></a>		<span class="n">AircraftPerformanceBada3</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac_icao</span><span class="p">,</span> <span class="n">wtc</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">wref</span><span class="p">,</span> <span class="n">m_nom</span><span class="p">,</span> <span class="n">mtow</span><span class="p">,</span>
</span><span id="AircraftPerformanceBada3TP.__init__-1103"><a href="#AircraftPerformanceBada3TP.__init__-1103"><span class="linenos">1103</span></a>										  <span class="n">oew</span><span class="p">,</span> <span class="n">mpl</span><span class="p">,</span> <span class="n">hmo</span><span class="p">,</span> <span class="n">vfe</span><span class="p">,</span> <span class="n">m_max</span><span class="p">,</span> <span class="n">v_stall</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">clbo_mo</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AircraftPerformanceBada3TP.engine_type" class="classattr">
                                <div class="attr variable">
            <span class="name">engine_type</span>        =
<span class="default_value">&#39;TURBOPROP&#39;</span>

        
    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3TP.engine_type"></a>
    
    

                            </div>
                            <div id="AircraftPerformanceBada3TP.compute_tsfc" class="classattr">
                                        <input id="AircraftPerformanceBada3TP.compute_tsfc-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_tsfc</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">v_tas</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AircraftPerformanceBada3TP.compute_tsfc-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AircraftPerformanceBada3TP.compute_tsfc"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AircraftPerformanceBada3TP.compute_tsfc-1105"><a href="#AircraftPerformanceBada3TP.compute_tsfc-1105"><span class="linenos">1105</span></a>	<span class="k">def</span> <span class="nf">compute_tsfc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_tas</span><span class="p">):</span>
</span><span id="AircraftPerformanceBada3TP.compute_tsfc-1106"><a href="#AircraftPerformanceBada3TP.compute_tsfc-1106"><span class="linenos">1106</span></a>		<span class="n">cf1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3TP.compute_tsfc-1107"><a href="#AircraftPerformanceBada3TP.compute_tsfc-1107"><span class="linenos">1107</span></a>		<span class="n">cf2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="AircraftPerformanceBada3TP.compute_tsfc-1108"><a href="#AircraftPerformanceBada3TP.compute_tsfc-1108"><span class="linenos">1108</span></a>		<span class="k">return</span> <span class="n">cf1</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">v_tas</span> <span class="o">/</span> <span class="n">cf2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">v_tas</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#AircraftPerformanceBada3">AircraftPerformanceBada3</a></dt>
                                <dd id="AircraftPerformanceBada3TP.bada_version" class="variable"><a href="#AircraftPerformanceBada3.bada_version">bada_version</a></dd>
                <dd id="AircraftPerformanceBada3TP.v_stall" class="variable"><a href="#AircraftPerformanceBada3.v_stall">v_stall</a></dd>
                <dd id="AircraftPerformanceBada3TP.clbo_mo" class="variable"><a href="#AircraftPerformanceBada3.clbo_mo">clbo_mo</a></dd>
                <dd id="AircraftPerformanceBada3TP.k" class="variable"><a href="#AircraftPerformanceBada3.k">k</a></dd>
                <dd id="AircraftPerformanceBada3TP.holding_ac" class="variable"><a href="#AircraftPerformanceBada3.holding_ac">holding_ac</a></dd>
                <dd id="AircraftPerformanceBada3TP.holding_sqr_mtow" class="variable"><a href="#AircraftPerformanceBada3.holding_sqr_mtow">holding_sqr_mtow</a></dd>
                <dd id="AircraftPerformanceBada3TP.holding_ff" class="variable"><a href="#AircraftPerformanceBada3.holding_ff">holding_ff</a></dd>
                <dd id="AircraftPerformanceBada3TP.holding_fit" class="variable"><a href="#AircraftPerformanceBada3.holding_fit">holding_fit</a></dd>
                <dd id="AircraftPerformanceBada3TP.compute_fuel_flow" class="function"><a href="#AircraftPerformanceBada3.compute_fuel_flow">compute_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3TP.compute_drag" class="function"><a href="#AircraftPerformanceBada3.compute_drag">compute_drag</a></dd>
                <dd id="AircraftPerformanceBada3TP.estimate_holding_fuel_flow" class="function"><a href="#AircraftPerformanceBada3.estimate_holding_fuel_flow">estimate_holding_fuel_flow</a></dd>

            </div>
            <div><dt><a href="#AircraftPerformance">AircraftPerformance</a></dt>
                                <dd id="AircraftPerformanceBada3TP.ac_icao" class="variable"><a href="#AircraftPerformance.ac_icao">ac_icao</a></dd>
                <dd id="AircraftPerformanceBada3TP.ac_model" class="variable"><a href="#AircraftPerformance.ac_model">ac_model</a></dd>
                <dd id="AircraftPerformanceBada3TP.wtc" class="variable"><a href="#AircraftPerformance.wtc">wtc</a></dd>
                <dd id="AircraftPerformanceBada3TP.s" class="variable"><a href="#AircraftPerformance.s">s</a></dd>
                <dd id="AircraftPerformanceBada3TP.wref" class="variable"><a href="#AircraftPerformance.wref">wref</a></dd>
                <dd id="AircraftPerformanceBada3TP.m_nom" class="variable"><a href="#AircraftPerformance.m_nom">m_nom</a></dd>
                <dd id="AircraftPerformanceBada3TP.mtow" class="variable"><a href="#AircraftPerformance.mtow">mtow</a></dd>
                <dd id="AircraftPerformanceBada3TP.oew" class="variable"><a href="#AircraftPerformance.oew">oew</a></dd>
                <dd id="AircraftPerformanceBada3TP.hmo" class="variable"><a href="#AircraftPerformance.hmo">hmo</a></dd>
                <dd id="AircraftPerformanceBada3TP.mpl" class="variable"><a href="#AircraftPerformance.mpl">mpl</a></dd>
                <dd id="AircraftPerformanceBada3TP.m_max" class="variable"><a href="#AircraftPerformance.m_max">m_max</a></dd>
                <dd id="AircraftPerformanceBada3TP.vfe" class="variable"><a href="#AircraftPerformance.vfe">vfe</a></dd>
                <dd id="AircraftPerformanceBada3TP.d" class="variable"><a href="#AircraftPerformance.d">d</a></dd>
                <dd id="AircraftPerformanceBada3TP.f" class="variable"><a href="#AircraftPerformance.f">f</a></dd>
                <dd id="AircraftPerformanceBada3TP.fl_climb_descent" class="variable"><a href="#AircraftPerformance.fl_climb_descent">fl_climb_descent</a></dd>
                <dd id="AircraftPerformanceBada3TP.climb_ff" class="variable"><a href="#AircraftPerformance.climb_ff">climb_ff</a></dd>
                <dd id="AircraftPerformanceBada3TP.descent_ff" class="variable"><a href="#AircraftPerformance.descent_ff">descent_ff</a></dd>
                <dd id="AircraftPerformanceBada3TP.climb_perf" class="variable"><a href="#AircraftPerformance.climb_perf">climb_perf</a></dd>
                <dd id="AircraftPerformanceBada3TP.descent_perf" class="variable"><a href="#AircraftPerformance.descent_perf">descent_perf</a></dd>
                <dd id="AircraftPerformanceBada3TP.mach_detailled_nominal" class="variable"><a href="#AircraftPerformance.mach_detailled_nominal">mach_detailled_nominal</a></dd>
                <dd id="AircraftPerformanceBada3TP.apu_ac" class="variable"><a href="#AircraftPerformance.apu_ac">apu_ac</a></dd>
                <dd id="AircraftPerformanceBada3TP.apu_sqr_mtow" class="variable"><a href="#AircraftPerformance.apu_sqr_mtow">apu_sqr_mtow</a></dd>
                <dd id="AircraftPerformanceBada3TP.apu_ff" class="variable"><a href="#AircraftPerformance.apu_ff">apu_ff</a></dd>
                <dd id="AircraftPerformanceBada3TP.apu_fit" class="variable"><a href="#AircraftPerformance.apu_fit">apu_fit</a></dd>
                <dd id="AircraftPerformanceBada3TP.at_gate_costs_min" class="variable"><a href="#AircraftPerformance.at_gate_costs_min">at_gate_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3TP.en_route_costs_min" class="variable"><a href="#AircraftPerformance.en_route_costs_min">en_route_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3TP.arrival_costs_min" class="variable"><a href="#AircraftPerformance.arrival_costs_min">arrival_costs_min</a></dd>
                <dd id="AircraftPerformanceBada3TP.at_gate_costs_fit" class="variable"><a href="#AircraftPerformance.at_gate_costs_fit">at_gate_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3TP.en_route_costs_fit" class="variable"><a href="#AircraftPerformance.en_route_costs_fit">en_route_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3TP.arrival_costs_fit" class="variable"><a href="#AircraftPerformance.arrival_costs_fit">arrival_costs_fit</a></dd>
                <dd id="AircraftPerformanceBada3TP.estimate_avg_cruise_weight" class="function"><a href="#AircraftPerformance.estimate_avg_cruise_weight">estimate_avg_cruise_weight</a></dd>
                <dd id="AircraftPerformanceBada3TP.set_climb_descent_fuel_flow_performances" class="function"><a href="#AircraftPerformance.set_climb_descent_fuel_flow_performances">set_climb_descent_fuel_flow_performances</a></dd>
                <dd id="AircraftPerformanceBada3TP.compute_sr" class="function"><a href="#AircraftPerformance.compute_sr">compute_sr</a></dd>
                <dd id="AircraftPerformanceBada3TP.estimate_climb_fuel_flow" class="function"><a href="#AircraftPerformance.estimate_climb_fuel_flow">estimate_climb_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3TP.estimate_descent_fuel_flow" class="function"><a href="#AircraftPerformance.estimate_descent_fuel_flow">estimate_descent_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3TP.avg_climb_descent_ff" class="function"><a href="#AircraftPerformance.avg_climb_descent_ff">avg_climb_descent_ff</a></dd>
                <dd id="AircraftPerformanceBada3TP.set_climb_fuel_flow_detailled_rate_performances" class="function"><a href="#AircraftPerformance.set_climb_fuel_flow_detailled_rate_performances">set_climb_fuel_flow_detailled_rate_performances</a></dd>
                <dd id="AircraftPerformanceBada3TP.interpolate_climb_performances" class="function"><a href="#AircraftPerformance.interpolate_climb_performances">interpolate_climb_performances</a></dd>
                <dd id="AircraftPerformanceBada3TP.set_descent_fuel_flow_detailled_rate_performances" class="function"><a href="#AircraftPerformance.set_descent_fuel_flow_detailled_rate_performances">set_descent_fuel_flow_detailled_rate_performances</a></dd>
                <dd id="AircraftPerformanceBada3TP.interpolate_descent_performances" class="function"><a href="#AircraftPerformance.interpolate_descent_performances">interpolate_descent_performances</a></dd>
                <dd id="AircraftPerformanceBada3TP.set_detailled_mach_nominal" class="function"><a href="#AircraftPerformance.set_detailled_mach_nominal">set_detailled_mach_nominal</a></dd>
                <dd id="AircraftPerformanceBada3TP.interpolate_cruise_nominal_mach" class="function"><a href="#AircraftPerformance.interpolate_cruise_nominal_mach">interpolate_cruise_nominal_mach</a></dd>
                <dd id="AircraftPerformanceBada3TP.trajectory_segment_descent_estimation_from_lnd" class="function"><a href="#AircraftPerformance.trajectory_segment_descent_estimation_from_lnd">trajectory_segment_descent_estimation_from_lnd</a></dd>
                <dd id="AircraftPerformanceBada3TP.trajectory_segment_climb_estimation_from_toc" class="function"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_toc">trajectory_segment_climb_estimation_from_toc</a></dd>
                <dd id="AircraftPerformanceBada3TP.trajectory_segment_climb_estimation_from_to" class="function"><a href="#AircraftPerformance.trajectory_segment_climb_estimation_from_to">trajectory_segment_climb_estimation_from_to</a></dd>
                <dd id="AircraftPerformanceBada3TP.trajectory_segment_cruise_estimation" class="function"><a href="#AircraftPerformance.trajectory_segment_cruise_estimation">trajectory_segment_cruise_estimation</a></dd>
                <dd id="AircraftPerformanceBada3TP.trajectory_cruise_estimation_with_fl_change" class="function"><a href="#AircraftPerformance.trajectory_cruise_estimation_with_fl_change">trajectory_cruise_estimation_with_fl_change</a></dd>
                <dd id="AircraftPerformanceBada3TP.error_extra_cruise" class="function"><a href="#AircraftPerformance.error_extra_cruise">error_extra_cruise</a></dd>
                <dd id="AircraftPerformanceBada3TP.error_climb_weight_from_toc" class="function"><a href="#AircraftPerformance.error_climb_weight_from_toc">error_climb_weight_from_toc</a></dd>
                <dd id="AircraftPerformanceBada3TP.estimate_trajectory" class="function"><a href="#AircraftPerformance.estimate_trajectory">estimate_trajectory</a></dd>
                <dd id="AircraftPerformanceBada3TP.apu_fuel_flow" class="function"><a href="#AircraftPerformance.apu_fuel_flow">apu_fuel_flow</a></dd>
                <dd id="AircraftPerformanceBada3TP.at_gate_costs_per_minute" class="function"><a href="#AircraftPerformance.at_gate_costs_per_minute">at_gate_costs_per_minute</a></dd>
                <dd id="AircraftPerformanceBada3TP.en_route_costs_per_minute" class="function"><a href="#AircraftPerformance.en_route_costs_per_minute">en_route_costs_per_minute</a></dd>
                <dd id="AircraftPerformanceBada3TP.arrival_costs_per_minute" class="function"><a href="#AircraftPerformance.arrival_costs_per_minute">arrival_costs_per_minute</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>