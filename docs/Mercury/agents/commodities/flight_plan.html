<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>Mercury.agents.commodities.flight_plan API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../commodities.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;Mercury.agents.commodities</a>

            <img src="https://github.com/UoW-ATM/Mercury/blob/master/mercury_logo_small.png" class="logo" alt="project logo"/>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#build_proj">build_proj</a>
            </li>
            <li>
                    <a class="class" href="#FlightPlanPoint">FlightPlanPoint</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FlightPlanPoint.__init__">FlightPlanPoint</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.coords">coords</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.alt_ft">alt_ft</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.time_min">time_min</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.planned_segment_time">planned_segment_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.planned_dist_segment_nm">planned_dist_segment_nm</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.dist_from_orig_nm">dist_from_orig_nm</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.dist_to_dest_nm">dist_to_dest_nm</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.event">event</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.wind">wind</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.ansp">ansp</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.weight">weight</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.fuel">fuel</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.number_order">number_order</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.planned_segment_speed_kt">planned_segment_speed_kt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.min_uncertainty">min_uncertainty</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.nm_uncertainty">nm_uncertainty</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlanPoint.dict_speeds">dict_speeds</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.my_deep_copy">my_deep_copy</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.set_event">set_event</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.set_name">set_name</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.get_dist_from_orig_nm">get_dist_from_orig_nm</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.get_name">get_name</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.get_event">get_event</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.get_time_min">get_time_min</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.get_alt_ft">get_alt_ft</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.get_coords">get_coords</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlanPoint.print_full">print_full</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#FlightPlan">FlightPlan</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#FlightPlan.__init__">FlightPlan</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.fp_pool_id">fp_pool_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.crco_cost_EUR">crco_cost_EUR</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.unique_id">unique_id</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.origin_airport_uid">origin_airport_uid</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.destination_airport_uid">destination_airport_uid</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.origin_icao">origin_icao</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.destination_icao">destination_icao</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.flight_uid">flight_uid</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.fuel_price">fuel_price</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.bada_code_ac_model">bada_code_ac_model</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.points_original_planned">points_original_planned</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.dict_points_original_planned_number">dict_points_original_planned_number</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.points_planned">points_planned</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.points_tod_landing">points_tod_landing</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.points_planned_tod_landing">points_planned_tod_landing</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.points_dci_tod_landing">points_dci_tod_landing</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.dci_cruise_extention_nm">dci_cruise_extention_nm</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.current_point">current_point</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.points_executed">points_executed</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.status">status</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.execution_delta_time">execution_delta_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eobt">eobt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.sobt">sobt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.sibt">sibt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.cobt">cobt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.atfm_delay">atfm_delay</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.reactionary_delay">reactionary_delay</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.exot">exot</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.exit">exit</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.aobt">aobt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.aibt">aibt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.axot">axot</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.axit">axit</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.pbrt">pbrt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.atot">atot</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.alt">alt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eibt">eibt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.holding_time">holding_time</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.holding_fuel">holding_fuel</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eaman_planned_assigned_delay">eaman_planned_assigned_delay</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eaman_planned_absorbed_air">eaman_planned_absorbed_air</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eaman_planned_perc_selected">eaman_planned_perc_selected</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eaman_planned_fuel">eaman_planned_fuel</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eaman_planned_clt">eaman_planned_clt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eaman_tactical_assigned_delay">eaman_tactical_assigned_delay</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.eaman_tactical_clt">eaman_tactical_clt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.clt">clt</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.dci_decisions">dci_decisions</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.wfp_decisions">wfp_decisions</a>
                        </li>
                        <li>
                                <a class="variable" href="#FlightPlan.curfew">curfew</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_estimated_fuel_consumption">get_estimated_fuel_consumption</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_point">get_point</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_current_point">get_current_point</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_dist_to_dest">get_dist_to_dest</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.copy_point_from_planned">copy_point_from_planned</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_list_points_missing">get_list_points_missing</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_points_planned">get_points_planned</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.prepare_accepted_fp">prepare_accepted_fp</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.update_speed_percentage">update_speed_percentage</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_copy_points_from_tod_planned">get_copy_points_from_tod_planned</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.set_extra_cruise_dci">set_extra_cruise_dci</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.split_uncertainty_min">split_uncertainty_min</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.split_uncertainty_nm">split_uncertainty_nm</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.generate_uncertainty">generate_uncertainty</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_xot">get_xot</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_xit">get_xit</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_obt">get_obt</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_ibt">get_ibt</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_eta_wo_atfm">get_eta_wo_atfm</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_atfm_delay">get_atfm_delay</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_atfm_reason">get_atfm_reason</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_point_times">get_point_times</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_point_names">get_point_names</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_planned_flying_time_to_landing">get_planned_flying_time_to_landing</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_planned_landing_time">get_planned_landing_time</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_current_eibt">get_current_eibt</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.compute_eibt">compute_eibt</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_estimated_takeoff_time">get_estimated_takeoff_time</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_estimated_landing_time">get_estimated_landing_time</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_total_planned_distance">get_total_planned_distance</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.set_atfm_delay">set_atfm_delay</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.has_atfm_delay">has_atfm_delay</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.remove_atfm_delay">remove_atfm_delay</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.update_eobt">update_eobt</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_status">get_status</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.set_status">set_status</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_unique_id">get_unique_id</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.number_points">number_points</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.compute_speeds_original_planned">compute_speeds_original_planned</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.compute_max_min_mrc_speed_cruise">compute_max_min_mrc_speed_cruise</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.add_point_original_planned">add_point_original_planned</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.add_event_to_point">add_event_to_point</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.add_initial_points">add_initial_points</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.sort_points">sort_points</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.recompute_speeds_new_point">recompute_speeds_new_point</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.name_point">name_point</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.get_named_points">get_named_points</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.put_delay">put_delay</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.find_intersecting_point">find_intersecting_point</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.print_full">print_full</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.print_coordinates">print_coordinates</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.print_all_points_info">print_all_points_info</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.print_full_planned_executed">print_full_planned_executed</a>
                        </li>
                        <li>
                                <a class="function" href="#FlightPlan.create_plot_trajectory">create_plot_trajectory</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../Mercury.html">Mercury</a><wbr>.<a href="./../../agents.html">agents</a><wbr>.<a href="./../commodities.html">commodities</a><wbr>.flight_plan    </h1>

                
                        <input id="mod-flight_plan-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-flight_plan-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">from</span> <span class="nn">Mercury.libs.performance_trajectory.unit_conversions</span> <span class="kn">import</span> <span class="n">m2kt</span><span class="p">,</span> <span class="n">nm2km</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">from</span> <span class="nn">Mercury.libs.uow_tool_belt.general_tools</span> <span class="kn">import</span> <span class="n">distance_euclidean</span><span class="p">,</span> <span class="n">haversine</span><span class="p">,</span> <span class="n">alert_print</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="c1"># from .debug_flights import flight_uid_DEBUG</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="k">def</span> <span class="nf">build_proj</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">proj_type</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">AzimuthalEquidistant</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a>			   <span class="n">proj_initial</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1000.</span><span class="p">):</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="sd">	Scale is here for convenience, because projected are big by default</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="sd">	(they are in meters).</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a>	<span class="n">proj</span> <span class="o">=</span> <span class="n">proj_type</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="n">central_longitude</span><span class="p">,</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>					<span class="n">central_latitude</span><span class="o">=</span><span class="n">central_latitude</span><span class="p">)</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a>	<span class="k">def</span> <span class="nf">proj_forward</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>		<span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">proj</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">proj_initial</span><span class="p">))</span><span class="o">/</span><span class="n">scale</span><span class="p">)</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>	<span class="k">def</span> <span class="nf">proj_inv</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>		<span class="k">return</span> <span class="n">proj_initial</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="o">*</span><span class="nb">tuple</span><span class="p">(</span><span class="n">array</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span><span class="o">*</span><span class="n">scale</span><span class="p">),</span> <span class="n">proj</span><span class="p">)</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>	<span class="k">return</span> <span class="n">proj_forward</span><span class="p">,</span> <span class="n">proj_inv</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="k">class</span> <span class="nc">FlightPlanPoint</span><span class="p">:</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">	A point in the flight plan</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alt_ft</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_min</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>		<span class="n">dist_from_orig_nm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dist_to_dest_nm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wind</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ansp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>		<span class="n">weight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fuel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">number_order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>		<span class="n">planned_segment_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">segment_max_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">segment_min_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>		<span class="n">segment_mrc_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">coords</span> <span class="o">=</span> <span class="n">coords</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="n">alt_ft</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="n">time_min</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">=</span> <span class="n">dist_from_orig_nm</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">=</span> <span class="n">dist_to_dest_nm</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">event</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wind</span> <span class="o">=</span> <span class="n">wind</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="n">ansp</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fuel</span> <span class="o">=</span> <span class="n">fuel</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">number_order</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_speed_kt</span> <span class="o">=</span> <span class="n">planned_segment_speed_kt</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">min_uncertainty</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">nm_uncertainty</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dict_speeds</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>						<span class="s1">&#39;max_kt&#39;</span><span class="p">:</span> <span class="n">segment_max_speed_kt</span><span class="p">,</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>						<span class="s1">&#39;min_kt&#39;</span><span class="p">:</span> <span class="n">segment_min_speed_kt</span><span class="p">,</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a>						<span class="s1">&#39;mrc_kt&#39;</span><span class="p">:</span> <span class="n">segment_mrc_speed_kt</span><span class="p">,</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>						<span class="s1">&#39;perc_selected&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>						<span class="s1">&#39;perc_nominal&#39;</span><span class="p">:</span> <span class="kc">None</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>						<span class="p">}</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>	<span class="k">def</span> <span class="nf">my_deep_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">normal_copy</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="sd">		Copy a Waypoint from the FlightPlan with deepcopy of all elements</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>		<span class="n">copyPoint</span> <span class="o">=</span> <span class="n">FlightPlanPoint</span><span class="p">()</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>		<span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>				<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>				<span class="k">if</span> <span class="n">normal_copy</span><span class="p">:</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>					<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">copy</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a>					<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>		<span class="k">return</span> <span class="n">copyPoint</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a>	<span class="k">def</span> <span class="nf">set_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="sd">		Set an event to the Point</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">event</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>	<span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="sd">		Set a Name to the Point</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>	<span class="k">def</span> <span class="nf">get_dist_from_orig_nm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>	<span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>	<span class="k">def</span> <span class="nf">get_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>	<span class="k">def</span> <span class="nf">get_time_min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>	<span class="k">def</span> <span class="nf">get_alt_ft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>	<span class="k">def</span> <span class="nf">get_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>	<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a><span class="sd">		Return in string from the information of the Point</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>		<span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> : [coords: (</span><span class="si">{:.2f}</span><span class="s1">, </span><span class="si">{:.2f}</span><span class="s1">) ; alt: </span><span class="si">{}</span><span class="s1"> ; t: </span><span class="si">{:.2f}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> 
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>																			<span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>																			<span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>																			<span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>																			<span class="bp">self</span><span class="o">.</span><span class="n">time_min</span><span class="p">)</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>	<span class="k">def</span> <span class="nf">print_full</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a><span class="sd">		Print in full the information of the Point</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="s2">&quot;number &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number_order</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>					<span class="o">+</span> <span class="s2">&quot;name &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>					<span class="o">+</span> <span class="s2">&quot;coords &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>					<span class="o">+</span> <span class="s2">&quot;alt &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>					<span class="o">+</span> <span class="s2">&quot;time &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_min</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>					<span class="o">+</span> <span class="s2">&quot;planned time segment &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_time</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>					<span class="o">+</span> <span class="s2">&quot;planned dist segment &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>					<span class="o">+</span> <span class="s2">&quot;dist_from_orig &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>					<span class="o">+</span> <span class="s2">&quot;dist_to_dest &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist_to_dest_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>					<span class="o">+</span> <span class="s2">&quot;event &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>					<span class="o">+</span> <span class="s2">&quot;wind &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wind</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>					<span class="o">+</span> <span class="s2">&quot;ansp &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ansp</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>					<span class="o">+</span> <span class="s2">&quot;weight &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>					<span class="o">+</span> <span class="s2">&quot;fuel &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>					<span class="o">+</span> <span class="s2">&quot;speed kt &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_speed_kt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>					<span class="o">+</span> <span class="s2">&quot;dict speeds &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">)</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>			<span class="n">info_full</span> <span class="o">+=</span> <span class="s2">&quot;min_uncertainty: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_uncertainty</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>			<span class="n">info_full</span> <span class="o">+=</span> <span class="s2">&quot;nm_uncertainty: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nm_uncertainty</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>			<span class="k">pass</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>		<span class="k">return</span> <span class="n">info_full</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="k">class</span> <span class="nc">FlightPlan</span><span class="p">:</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">	FlighPlan object.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">	A flight plan does generally composed by a list of FlightPoints, but it&#39;s not only that.</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">	It contains the information of the planned flight plan and also of the realisation of the flight.</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="sd">	So, in reality it keeps track of both, of the plan (which can be updated), the trajectory ahead (which could</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a><span class="sd">	contain uncertainty), and the realisation of the flight trajectory (once flown and during the flight).</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a><span class="sd">	We could consider in the future to disentangle some of this in different objects/elements.</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp_pool_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crco_cost_EUR</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fuel_price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>		<span class="n">unique_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">flight_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destination_airport_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>		<span class="n">origin_airport_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">eobt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sobt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sibt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>		<span class="n">status</span><span class="o">=</span><span class="s1">&#39;non-submitted&#39;</span><span class="p">,</span> <span class="n">origin_icao</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destination_icao</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>		
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>		<span class="c1"># Static information about the flight plan</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fp_pool_id</span> <span class="o">=</span> <span class="n">fp_pool_id</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">crco_cost_EUR</span> <span class="o">=</span> <span class="n">crco_cost_EUR</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span> <span class="o">=</span> <span class="n">unique_id</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">origin_airport_uid</span> <span class="o">=</span> <span class="n">origin_airport_uid</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">destination_airport_uid</span> <span class="o">=</span> <span class="n">destination_airport_uid</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">origin_icao</span> <span class="o">=</span> <span class="n">origin_icao</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">destination_icao</span> <span class="o">=</span> <span class="n">destination_icao</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">flight_uid</span> <span class="o">=</span> <span class="n">flight_uid</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fuel_price</span> <span class="o">=</span> <span class="n">fuel_price</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">bada_code_ac_model</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Aircaft type used for the flight</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>		<span class="c1"># List of Points that define the originally planned flight plan</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dict_points_original_planned_number</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>		<span class="c1"># Points planned for the descend phase</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>		<span class="c1"># Point to be used if DCI is used, the descent will be &#39;steeper&#39; and the cruise a bit longer</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>		<span class="c1"># This has been pre-computed based on ac performance when speeding up.</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>		<span class="c1"># This is to have more &#39;realistic&#39; speed increments, as otherwise the delay that can be recovered</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>		<span class="c1"># by speeding up is very low. This won&#39;t be needed if full 4D trajectories are updated when</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>		<span class="c1"># speed adjustments done.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>		<span class="c1"># By how much the cruise is extended if speed increment is done (DCI on)</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>		<span class="c1"># Current point in the flight plan</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>		<span class="c1"># List of FPPoints that have already been flown</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>		<span class="c1"># Flight status could be:</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>		<span class="c1"># - non-submitted</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>		<span class="c1"># - boarding</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>		<span class="c1"># - push-back-ready</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>		<span class="c1"># - climbing</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>		<span class="c1"># - descending</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>		<span class="c1"># - cruising</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>		<span class="c1"># - landed</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>		<span class="c1"># Difference in time between executed flight plan and planned one</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>		<span class="c1"># EOBT, SOBT, SIBT</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="n">eobt</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">sobt</span> <span class="o">=</span> <span class="n">sobt</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">sibt</span> <span class="o">=</span> <span class="n">sibt</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>		<span class="c1"># COBT and ATFM delay information if regulated</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>		<span class="c1"># Amount of reactionary delay (if any)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">reactionary_delay</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>		<span class="c1"># Taxi out and in times</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">exot</span> <span class="o">=</span> <span class="mi">0</span> 
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">exit</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>		<span class="c1"># Actual times</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">axot</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">axit</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">pbrt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atot</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Actual take-off time</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">alt</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Actual landing time</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eibt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>		<span class="c1"># Holding time and fuel</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_fuel</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>		<span class="c1"># Arrival delay provided by EAMAN (planned and actual)</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_assigned_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_absorbed_air</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_perc_selected</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_fuel</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_clt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_tactical_assigned_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_tactical_clt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">clt</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Control landing time if assigned</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>		<span class="c1"># DCI</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_decisions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list of dictionaries with dci decisions</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>		
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>		<span class="c1"># WFP</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wfp_decisions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">curfew</span> <span class="o">=</span> <span class="mi">9999999999999999999</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>	<span class="k">def</span> <span class="nf">get_estimated_fuel_consumption</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="sd">		Assumes first and last are takeoff and landing and that</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a><span class="sd">		they have been named already.</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span>  <span class="c1"># - self.points[&#39;takeoff&#39;].fuel</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>	<span class="k">def</span> <span class="nf">get_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>		<span class="k">if</span> <span class="n">number</span><span class="o">&gt;=</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>			<span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span><span class="p">[</span><span class="n">number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()))]</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>			<span class="n">p</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">number</span><span class="p">]</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>		<span class="k">return</span> <span class="n">p</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>	<span class="k">def</span> <span class="nf">get_current_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>		<span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_point</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>	<span class="k">def</span> <span class="nf">get_dist_to_dest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_point</span><span class="p">()</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>	<span class="k">def</span> <span class="nf">copy_point_from_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>		<span class="k">return</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_point</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>		<span class="c1"># if number&gt;=len(list(self.points_planned.values())):</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>		<span class="c1"># 	p = copy(self.points_tod_landing[number-len(list(self.points_planned.values()))])</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>		<span class="c1"># else:</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>		<span class="c1"># 	p = copy(list(self.points_planned.values())[number]) </span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>		<span class="c1"># return p</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>	<span class="k">def</span> <span class="nf">get_list_points_missing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_number</span><span class="p">,</span> <span class="n">dci_landing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>		<span class="k">if</span> <span class="n">from_number</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>			<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">from_number</span><span class="p">:]</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>			<span class="c1"># print(len(self.points_dci_tod_landing),len(self.points_tod_landing))</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>			<span class="c1"># for p in self.points_tod_landing:</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>			<span class="c1">#     print(p.print_full())</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>			<span class="c1"># print(&quot;---&quot;)</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>			<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>				<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>				<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>			<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>				<span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">from_number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):]</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>				<span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span><span class="p">[</span><span class="n">from_number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):]</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>		<span class="k">return</span> <span class="n">l</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>	<span class="k">def</span> <span class="nf">get_points_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dci_landing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>		<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[:]</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>		<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>			<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>			<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>		<span class="k">return</span> <span class="n">l</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>	<span class="k">def</span> <span class="nf">prepare_accepted_fp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_cruise</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">compute_speeds_original_planned</span><span class="p">()</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>		<span class="n">doing_landing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>			<span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;TOD&quot;</span><span class="p">:</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>				<span class="n">doing_landing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>			<span class="k">if</span> <span class="n">doing_landing</span><span class="p">:</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">+=</span> <span class="p">[</span><span class="n">copy</span><span class="p">(</span><span class="n">v</span><span class="p">)]</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>	<span class="k">def</span> <span class="nf">update_speed_percentage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">perc_selected</span><span class="p">,</span> <span class="n">change_tod_dci</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>		<span class="k">if</span> <span class="n">change_tod_dci</span><span class="p">:</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>			<span class="c1"># Doing speed variation, therefore change tod</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>		<span class="n">points_missing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_list_points_missing</span><span class="p">(</span><span class="n">from_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_point</span><span class="p">)</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points_missing</span><span class="p">:</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>			<span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_selected&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">perc_selected</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>	<span class="k">def</span> <span class="nf">get_copy_points_from_tod_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">copy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span><span class="p">]</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>	<span class="k">def</span> <span class="nf">set_extra_cruise_dci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_cruise_dci</span><span class="p">):</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>		<span class="n">swap</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>			<span class="n">point_at_tod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>			<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>			<span class="k">raise</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>		<span class="n">min_descent</span> <span class="o">=</span> <span class="mi">30</span>  <span class="c1"># Keep at least 30 nm for descent even if cruise is extended</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">,</span> <span class="n">extra_cruise_dci</span><span class="o">-</span><span class="p">(</span><span class="n">min_descent</span><span class="o">+</span><span class="n">extra_cruise_dci</span><span class="o">-</span><span class="n">point_at_tod</span><span class="o">.</span><span class="n">dist_to_dest_nm</span><span class="p">)))</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>		<span class="n">extra_cruise_dci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>		<span class="c1"># Copy queue as planned</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_copy_points_from_tod_planned</span><span class="p">()</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>		<span class="c1"># 	print()</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>		<span class="c1"># 	print(&#39;ALOOOOOOOOOOOOOOOOOOOOOO self.points_dci_tod_landing:&#39;, self.points_dci_tod_landing)</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>		<span class="c1"># 	print(&#39;Points before extra cruise applied:&#39;)</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>		<span class="c1"># 	print(self.print_full())</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>		<span class="c1"># Time on previous point from TOD</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>		<span class="n">prev_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>		<span class="c1"># Distance form origin of the previous point</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>		<span class="n">dist_from_orig_nm_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>		<span class="n">i_tod</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>		<span class="c1"># Extend TOD by extra cruise</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>		<span class="n">dist_to_dest_planned_from_tod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>		<span class="n">cruise_fl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> 
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">+=</span> <span class="n">extra_cruise_dci</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">-=</span> <span class="n">extra_cruise_dci</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">+=</span> <span class="n">extra_cruise_dci</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>		
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="n">i_tod</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>			<span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">:</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>				<span class="n">point_aux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">point_aux</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="n">cruise_fl</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">)</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>				<span class="n">ansp_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="n">ansp_prev</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>				<span class="n">swap</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>				<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>				<span class="c1"># Recompute segment times and distances</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>				<span class="n">time_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>				<span class="n">dist_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>				
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>				<span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>					<span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;FUCK&#39;</span><span class="p">)</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>				<span class="c1"># time_prev = self.points_dci_tod_landing[i-1].time_min</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>				<span class="c1"># dist_prev = self.points_dci_tod_landing[i-1].dist_from_orig_nm</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>				<span class="c1"># self.points_dci_tod_landing[i].planned_segment_time = self.points_dci_tod_landing[i].time_min - time_prev</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>				<span class="c1"># self.points_dci_tod_landing[i].planned_dist_segment_nm = self.points_dci_tod_landing[i].dist_from_orig_nm - dist_prev</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>				
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;AAAAAAAAAAARGGGGGGGGG&quot;</span><span class="p">)</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">)</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>			<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-------&quot;</span><span class="p">)</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>			<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>			<span class="k">raise</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>		<span class="n">i_tod</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>		<span class="c1"># Now all swapped and we are at the first point that should be recomputed</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>		<span class="n">new_angle</span> <span class="o">=</span> <span class="n">cruise_fl</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i_tod</span><span class="p">)</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">):</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">*</span> <span class="n">new_angle</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_from_orig_nm_prev</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>		<span class="c1"># Now recompute time needed per segment</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>			<span class="n">speed_planned_kt</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">/</span> <span class="p">(</span><span class="n">speed_planned_kt</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">wind</span><span class="p">)</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>				<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>				<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">)</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>				<span class="k">for</span> <span class="n">wp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>					<span class="nb">print</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>				<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HERE ERROR&quot;</span><span class="p">)</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="p">,</span> <span class="n">speed_planned_kt</span><span class="p">)</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">number_order</span><span class="p">)</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">)</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>				<span class="k">raise</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>			<span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="n">prev_time</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>			<span class="n">prev_time</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>		<span class="c1"># 	print(&#39;Points after extra cruise applied:&#39;)</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>		<span class="c1"># 	print(self.print_full())</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>		<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">swap</span><span class="p">:</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>			<span class="c1">#	print(&#39;Entering BRANCH in set extra cruise dci. self.points_dci_tod_landing: {} ; name: {}&#39;.format(self.points_dci_tod_landing, s))</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">recompute_speeds_new_point</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">)</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>	<span class="k">def</span> <span class="nf">split_uncertainty_min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">min_uncertainty</span><span class="p">):</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>		<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">min_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">):</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>			<span class="k">return</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>			<span class="n">times</span> <span class="o">=</span> <span class="p">[[]</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">planned_segment_time</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">min_uncertainty</span><span class="o">-</span><span class="mf">0.5</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>  <span class="c1"># This -0.5 is to leave at least 0.5 minute per segment</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>			<span class="n">times</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">times</span><span class="p">]</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>			<span class="n">to_remove</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>				<span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>					<span class="n">to_remove</span> <span class="o">+=</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>			<span class="n">to_remove</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">to_remove</span><span class="p">:</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>				<span class="k">del</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>				<span class="k">del</span> <span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>			
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>				<span class="k">return</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>			<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">min_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>				<span class="n">min_assigned</span> <span class="o">=</span> <span class="n">min_uncertainty</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>				<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>				<span class="n">min_assigned</span> <span class="o">=</span> <span class="n">min_uncertainty</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>				<span class="k">if</span> <span class="n">min_assigned</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>					<span class="n">min_assigned</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">min_assigned</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">times</span><span class="p">))</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>			<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>			<span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">times</span><span class="p">))),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">times</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">times</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>			
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>			<span class="n">points</span><span class="p">[</span><span class="n">draw</span><span class="p">]</span><span class="o">.</span><span class="n">min_uncertainty</span> <span class="o">+=</span> <span class="n">min_assigned</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>			<span class="n">to_assign</span> <span class="o">=</span> <span class="n">min_uncertainty</span> <span class="o">-</span> <span class="n">min_assigned</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_min</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">to_assign</span><span class="p">)</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>	<span class="k">def</span> <span class="nf">split_uncertainty_nm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">nm_uncertainty</span><span class="p">):</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>		<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">nm_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">):</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>			<span class="k">return</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>			<span class="n">distances</span> <span class="o">=</span> <span class="p">[[]</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">nm_uncertainty</span><span class="o">-</span><span class="mf">0.5</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>  <span class="c1"># This -0.5 to keep at least 0.5 nm</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>			<span class="n">distances</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">distances</span><span class="p">]</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>			<span class="n">to_remove</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">distances</span><span class="p">):</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>				<span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>					<span class="n">to_remove</span> <span class="o">+=</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>			<span class="n">to_remove</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">to_remove</span><span class="p">:</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>				<span class="k">del</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>				<span class="k">del</span> <span class="n">distances</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>				<span class="k">return</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>			<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">nm_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>				<span class="n">nm_assigned</span> <span class="o">=</span> <span class="n">nm_uncertainty</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>				<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>				<span class="n">nm_assigned</span> <span class="o">=</span> <span class="n">nm_uncertainty</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>				<span class="k">if</span> <span class="n">nm_assigned</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>					<span class="n">nm_assigned</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">nm_assigned</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">distances</span><span class="p">))</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>			<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>			<span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">distances</span><span class="p">))),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">distances</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>			<span class="n">points</span><span class="p">[</span><span class="n">draw</span><span class="p">]</span><span class="o">.</span><span class="n">nm_uncertainty</span> <span class="o">+=</span> <span class="n">nm_assigned</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>			<span class="n">to_assign</span> <span class="o">=</span> <span class="n">nm_uncertainty</span> <span class="o">-</span> <span class="n">nm_assigned</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_nm</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">to_assign</span><span class="p">)</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>	<span class="k">def</span> <span class="nf">generate_uncertainty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uncertainty_climb_min</span><span class="p">,</span> <span class="n">uncertanity_climb_from_fl</span><span class="p">,</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>		<span class="n">uncertainty_cruise_nm</span><span class="p">,</span> <span class="n">uncertanity_cruise_from_fl</span><span class="p">):</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_cruise_nm</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>		<span class="c1"># Split climb uncertainty</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>		<span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;TOC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">&gt;=</span> <span class="n">uncertanity_climb_from_fl</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>			<span class="p">(</span><span class="n">uncertainty_climb_min</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)):</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>			<span class="n">potential_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>			<span class="n">planned_climb_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>			<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>				<span class="n">potential_points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">point</span><span class="p">]</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>				<span class="n">planned_climb_time</span> <span class="o">+=</span> <span class="n">point</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOC&quot;</span><span class="p">:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>					<span class="k">break</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>			<span class="k">if</span> <span class="n">planned_climb_time</span><span class="o">+</span><span class="n">uncertainty_climb_min</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>				<span class="c1"># At least 15 minute of climb</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>				<span class="k">if</span> <span class="n">planned_climb_time</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>					<span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">15</span> <span class="o">-</span> <span class="n">planned_climb_time</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>					<span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="n">uncertainty_climb_min</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>	
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_min</span><span class="p">(</span><span class="n">potential_points</span><span class="p">,</span> <span class="n">uncertainty_climb_min</span><span class="p">)</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>		<span class="c1"># Split cruise uncertainty</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;TOC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">&gt;=</span> <span class="n">uncertanity_cruise_from_fl</span><span class="p">:</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>			<span class="n">potential_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>			<span class="n">planned_cruise_dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>			<span class="n">counting</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>			<span class="n">alt_ft_prev</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>			<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>				<span class="k">if</span> <span class="n">counting</span><span class="p">:</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>					<span class="k">if</span> <span class="n">alt_ft_prev</span> <span class="o">==</span> <span class="n">point</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">:</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>						<span class="n">potential_points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">point</span><span class="p">]</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>						<span class="n">planned_cruise_dist</span> <span class="o">+=</span> <span class="n">point</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOC&quot;</span><span class="p">:</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>					<span class="n">counting</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOD&quot;</span><span class="p">:</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>					<span class="k">break</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>				<span class="n">alt_ft_prev</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_nm</span><span class="p">(</span><span class="n">potential_points</span><span class="p">,</span> <span class="n">uncertainty_cruise_nm</span><span class="p">)</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>	<span class="k">def</span> <span class="nf">get_xot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>			<span class="n">taxi_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axot</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>			<span class="n">taxi_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exot</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>		<span class="k">return</span> <span class="n">taxi_out</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>	<span class="k">def</span> <span class="nf">get_xit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>			<span class="n">taxi_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axit</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>			<span class="n">taxi_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>		<span class="k">return</span> <span class="n">taxi_in</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>	<span class="k">def</span> <span class="nf">get_obt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>			<span class="n">obt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>			<span class="n">obt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eobt</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>		<span class="k">return</span> <span class="n">obt</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>	<span class="k">def</span> <span class="nf">get_ibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>			<span class="n">ibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>			<span class="n">ibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eibt</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>		<span class="k">return</span> <span class="n">ibt</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>	<span class="k">def</span> <span class="nf">get_eta_wo_atfm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="sd">		Estimated time of arrival without ATFM delay</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_estimated_landing_time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_atfm_delay</span><span class="p">()</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>	<span class="k">def</span> <span class="nf">get_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>			<span class="k">return</span> <span class="mf">0.</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>	<span class="k">def</span> <span class="nf">get_atfm_reason</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>			<span class="k">return</span> <span class="kc">None</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">reason</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>	<span class="k">def</span> <span class="nf">get_point_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">time_min</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>	<span class="k">def</span> <span class="nf">get_point_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>	<span class="k">def</span> <span class="nf">get_planned_flying_time_to_landing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a><span class="sd">		Length of trajectory in minute, up to landing.</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>		<span class="c1"># TODO I need to review this with the new flight plan structure</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>	<span class="k">def</span> <span class="nf">get_planned_landing_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sobt</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>	<span class="k">def</span> <span class="nf">get_current_eibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>		<span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span> <span class="o">+</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xit</span><span class="p">())</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>	<span class="k">def</span> <span class="nf">compute_eibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_eibt</span><span class="p">()</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>	<span class="k">def</span> <span class="nf">get_estimated_takeoff_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>	<span class="k">def</span> <span class="nf">get_estimated_landing_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>	<span class="k">def</span> <span class="nf">get_total_planned_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>	<span class="k">def</span> <span class="nf">set_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">atfm_delay</span><span class="p">):</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">remove_atfm_delay</span><span class="p">()</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>			
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="n">atfm_delay</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>		<span class="k">if</span> <span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">+</span> <span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cobt</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>	<span class="k">def</span> <span class="nf">has_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>		<span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;atfm_delay&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>	<span class="k">def</span> <span class="nf">remove_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>	<span class="k">def</span> <span class="nf">update_eobt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_eobt</span><span class="p">):</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="n">new_eobt</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>	<span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>	<span class="k">def</span> <span class="nf">set_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>	<span class="k">def</span> <span class="nf">get_unique_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>	<span class="k">def</span> <span class="nf">number_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>			<span class="n">p</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">s</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>			<span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>	<span class="k">def</span> <span class="nf">compute_speeds_original_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>		<span class="n">time_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>		<span class="n">dist_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>		<span class="n">speed_kt_prev</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">speed_kt_prev</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span><span class="p">)</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">wind</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>					<span class="n">speed_kt_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]:</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>			<span class="k">except</span><span class="p">:</span>  <span class="c1"># DANGEROUS!!!!</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>			<span class="c1"># 	print(&#39;For flight {} ({}) finished computing speed of point {}: {}&#39;.format(self.flight_uid, self, v, v.dict_speeds))</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>			<span class="n">time_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>			<span class="n">dist_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>	<span class="k">def</span> <span class="nf">compute_max_min_mrc_speed_cruise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bada_performances</span><span class="p">):</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>		<span class="c1"># Note this will crash if bada_performances are not BADA4</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>		<span class="n">alt_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>		<span class="n">weight_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>		<span class="n">m_min_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>			<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">==</span> <span class="n">alt_prev</span><span class="p">:</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>				<span class="c1"># cruise</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>				<span class="n">m_min_end</span><span class="p">,</span> <span class="n">m_max_end</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_min_max_mach</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>				<span class="k">if</span> <span class="n">m_min_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>					<span class="n">m_min_start</span><span class="p">,</span> <span class="n">m_max_start</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_min_max_mach</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="n">weight_prev</span><span class="p">)</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>				<span class="c1"># if m_min_end is None:</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>				<span class="c1">#     print(&quot;---------&quot;)</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>				<span class="c1">#     print(bada_performances.bada_version, bada_performances.ac_icao, bada_performances.ac_model, v.weight, weight_prev, v.name, v.coords, v.alt_ft)</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>				<span class="c1">#     print(&quot;---------&quot;)</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>				<span class="c1">#     print()</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>				<span class="k">if</span> <span class="n">m_min_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>					<span class="n">m_min</span> <span class="o">=</span> <span class="n">m_min_start</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>					<span class="c1"># v.segment_min_speed_kt = None</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>					<span class="k">if</span> <span class="n">m_min_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>						<span class="n">m_min</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">m_min_end</span><span class="p">,</span> <span class="n">m_min_start</span><span class="p">)</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>						<span class="n">m_min</span> <span class="o">=</span> <span class="n">m_min_end</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>					<span class="c1"># v.segment_min_speed_kt = m2kt(m=m_min,fl=v.alt_ft)</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_min</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>				<span class="k">if</span> <span class="n">m_max_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>					<span class="n">m_max</span> <span class="o">=</span> <span class="n">m_max_start</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>					<span class="c1"># v.segment_max_speed_kt = None</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>					<span class="k">if</span> <span class="n">m_max_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>						<span class="n">m_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">m_max_end</span><span class="p">,</span> <span class="n">m_max_start</span><span class="p">)</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>						<span class="n">m_max</span> <span class="o">=</span> <span class="n">m_max_end</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>					<span class="c1"># v.segment_max_speed_kt = m2kt(m=m_max,fl=v.alt_ft)</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_max</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>				<span class="n">m_min_start</span> <span class="o">=</span> <span class="n">m_min</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>				<span class="n">m_max_start</span> <span class="o">=</span> <span class="n">m_max</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>				
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>				<span class="n">m_mrc</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_mrc_speed</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">weight</span><span class="o">+</span><span class="n">weight_prev</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>				<span class="k">if</span> <span class="n">m_mrc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>					<span class="c1"># v.segment_mrc_speed_kt = m2kt(m=m_mrc,fl=v.alt_ft)</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_mrc</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>					<span class="c1"># v.segment_mrc_speed_kt = None</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>				<span class="n">m_min_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>	
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>			<span class="n">weight_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">weight</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>			<span class="n">alt_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>	<span class="k">def</span> <span class="nf">add_point_original_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> 
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">		Used to add a point to the flight plan.</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a><span class="sd">		If the point is not supposed to be at end, one needs to call sort_points</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a><span class="sd">		after that.</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>		<span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>			<span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;coords&#39;</span><span class="p">])</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">FlightPlanPoint</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>	<span class="k">def</span> <span class="nf">add_event_to_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">point_name</span><span class="p">):</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">point_name</span><span class="p">]</span><span class="o">.</span><span class="n">set_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>	<span class="k">def</span> <span class="nf">add_initial_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp_points</span><span class="p">):</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>		<span class="k">for</span> <span class="n">coords</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">alt</span><span class="p">,</span> <span class="n">dist_from_orig_nm</span> <span class="ow">in</span> <span class="n">fp_points</span><span class="p">:</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>			<span class="c1"># TODO add_point doesn&#39;t seem to be defined!</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">add_point</span><span class="p">(</span><span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">alt</span><span class="o">=</span><span class="n">alt</span><span class="p">,</span> <span class="n">dist_from_orig_nm</span><span class="o">=</span><span class="n">dist_from_orig_nm</span><span class="p">)</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>	<span class="k">def</span> <span class="nf">sort_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compute_eibt</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>		<span class="c1"># self.points_original_planned = OrderedDict(sorted(self.points_original_planned.items(), key=lambda x:x[1].get_time_min()))</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>		<span class="c1"># Sort by time and if two times the same then by name of the point desc. This is to ensure that if take-off inside execution horizon we get: take-off, enter_eaman_planning_radius, enter_eaman_execution_radius</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_time_min</span><span class="p">())</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>		
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>		
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>			<span class="n">v</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">dict_points_original_planned_number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>		<span class="k">if</span> <span class="n">compute_eibt</span><span class="p">:</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>	<span class="k">def</span> <span class="nf">recompute_speeds_new_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a><span class="sd">		This recomputes the speed of the point &quot;name&quot; and the next one.</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a><span class="sd">		Note: this does not add a new point.</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a><span class="sd">		Parameters</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a><span class="sd">		==========</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a><span class="sd">		name: id of point to recompute.</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a><span class="sd">		points:  list of points existing already.</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>		<span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>			<span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>		<span class="c1">#</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>		<span class="c1"># 	print(&#39;Speed recomputation of new point ({}) for flight {} ({})&#39;.format(name, self.flight_uid, self))</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>		<span class="c1"># 	# self.print_full_planned_executed()</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>		<span class="c1"># 	print(&#39;POINTS:&#39;, points)</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>		<span class="c1"># 	for point in points:</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>		<span class="c1"># 		print(&#39;wind at point {}: {}&#39;.format(point, point.wind))</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>		<span class="n">next_one_recompute</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>		<span class="n">computing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="ow">and</span> <span class="n">computing</span><span class="p">:</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>			<span class="n">v</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>			<span class="k">if</span> <span class="n">next_one_recompute</span><span class="p">:</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>				<span class="n">computing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>			<span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>				<span class="n">next_one_recompute</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>				<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>				<span class="c1"># 	print(&#39;Point before: {} ;  Point after: {}&#39;.format(points[i-1].name, points[i+1].name))</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>			<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span> <span class="ow">or</span> <span class="n">next_one_recompute</span><span class="p">:</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>				<span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>						<span class="n">avg_gs</span> <span class="o">=</span> <span class="mi">60</span><span class="o">*</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="o">-</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="o">-</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="p">)</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>					<span class="k">except</span><span class="p">:</span>  <span class="c1"># DANGEROUS!</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>						<span class="n">avg_gs</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Points at same position e.g. entering EAMAN and TOD</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>					<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. avg_gs: {}; &#39;.format(self.flight_uid, avg_gs))</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].time_min: {} ; points[i-1].time_min: {}&#39;.format(self.flight_uid, points[i].time_min, points[i-1].time_min))</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].dist_from_orig_nm: {} ; points[i-1].dist_from_orig_nm: {}&#39;.format(self.flight_uid, points[i].dist_from_orig_nm, points[i-1].dist_from_orig_nm))</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].wind: {}&#39;.format(self.flight_uid, points[i].wind))</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>					<span class="n">planned_segment_speed_kt</span> <span class="o">=</span> <span class="n">avg_gs</span> <span class="o">-</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">planned_segment_speed_kt</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>    
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>						<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]:</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>							<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>						<span class="k">else</span><span class="p">:</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>							<span class="c1"># print(v.dict_speeds[&#39;speed_kt&#39;],v.dict_speeds[&#39;mrc_kt&#39;],v.dict_speeds[&#39;max_kt&#39;])</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>							<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>    
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>			<span class="c1"># 	print(&#39;Speed for point {} for flight {}: {}&#39;.format(i, self.flight_uid, v.dict_speeds))</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>	<span class="k">def</span> <span class="nf">name_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a><span class="sd">		need to sort the point after that</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a><span class="sd">		TODO: deletion should be done before adding the new one</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a><span class="sd">		to avoid removing the new point.</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>			<span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;YOUPI:&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>			<span class="k">raise</span>	
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>	<span class="k">def</span> <span class="nf">get_named_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">pt</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>	<span class="k">def</span> <span class="nf">put_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delay</span><span class="p">):</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>		<span class="k">pass</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>	<span class="k">def</span> <span class="nf">find_intersecting_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="n">geom</span><span class="o">=</span><span class="p">{}):</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a><span class="sd">		Note: coordinates are lat/lon in the objects.</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>		<span class="k">if</span> <span class="n">typ</span> <span class="o">==</span> <span class="s1">&#39;radius&#39;</span><span class="p">:</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>			<span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>			<span class="n">r</span> <span class="o">=</span> <span class="n">geom</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>			<span class="n">r</span> <span class="o">*=</span> <span class="n">nm2km</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>			<span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">geom</span><span class="p">[</span><span class="s1">&#39;coords_center&#39;</span><span class="p">]</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>			<span class="c1"># Using azimuthal equidistant projection for points, centered on the &quot;center&quot;, x0, y0.</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>			<span class="c1"># This should be exact.</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>			<span class="c1"># Note: distance are conserved, so GCD is also projected distance.</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>			<span class="n">proj_forward</span><span class="p">,</span> <span class="n">proj_inv</span> <span class="o">=</span> <span class="n">build_proj</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="n">y0</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="n">x0</span><span class="p">)</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>			<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">dic</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>				<span class="c1"># Note: we do not use haversine formula here, because it differs sligthly </span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>				<span class="c1"># from the cartopy projection, which leads to errors.</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>				<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dic</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>				<span class="n">d</span> <span class="o">=</span> <span class="n">distance_euclidean</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>				<span class="c1"># d = haversine(geom[&#39;coords_center&#39;][1], geom[&#39;coords_center&#39;][0], dic.coords[1], dic.coords[0])</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>				<span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>					<span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>					<span class="k">break</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>			<span class="k">if</span> <span class="n">found</span><span class="p">:</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>				<span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>					<span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>				
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>				<span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>					<span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>				
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>				<span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>				<span class="k">if</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>					<span class="c1"># This means that the first point is already in the circle.</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>					<span class="c1"># In this case, the event should be triggered immediately</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>					<span class="c1"># after takeoff.</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>					<span class="n">pt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>					
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>					<span class="n">t</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>					<span class="n">alt</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>					<span class="n">sol</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">coords</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>					<span class="n">d_int</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>					<span class="n">d_des_int</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>					<span class="n">wind</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">wind</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>					<span class="n">weight</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">weight</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>					<span class="n">fuel</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">fuel</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>					<span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>					
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>					<span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>					<span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>					<span class="k">if</span> <span class="n">x1_p</span><span class="o">!=</span><span class="n">x2_p</span><span class="p">:</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>						<span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2_p</span><span class="o">-</span><span class="n">y1_p</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x2_p</span><span class="o">-</span><span class="n">x1_p</span><span class="p">)</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>						<span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">x2_p</span><span class="o">*</span><span class="n">y1_p</span><span class="o">-</span><span class="n">y2_p</span><span class="o">*</span><span class="n">x1_p</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x2_p</span><span class="o">-</span><span class="n">x1_p</span><span class="p">)</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>						<span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span><span class="o">+</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>						<span class="n">B_p</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>						<span class="n">C</span> <span class="o">=</span> <span class="n">b</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>						<span class="n">delta</span> <span class="o">=</span> <span class="n">B_p</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">A</span><span class="o">*</span><span class="n">C</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>						<span class="k">try</span><span class="p">:</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>							<span class="k">assert</span> <span class="n">delta</span> <span class="o">&gt;=</span> <span class="mf">0.</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>						<span class="k">except</span><span class="p">:</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;TINTININ&#39;</span><span class="p">)</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>							<span class="c1"># print(&#39;DEBUG&#39;, &#39;x3, y3&#39;, x3, y3)</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>							<span class="c1"># print(&#39;DEBUG&#39;, &#39;x3_p, y3_p&#39;, x3_p, y3_p)</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>							<span class="c1"># print (&#39;DEBUG&#39;, &#39;r_p&#39;, r_p)</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;a, b&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;A, B_p, C&#39;</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B_p</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;delta&#39;</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>							<span class="k">raise</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>						<span class="n">x_sol_p</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span> <span class="n">B_p</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span><span class="o">/</span><span class="n">A</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>						
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>						<span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">x_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)):</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>							<span class="n">x_sol_p</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span> <span class="n">B_p</span> <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span><span class="o">/</span><span class="n">A</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>							
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>							<span class="k">try</span><span class="p">:</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>								<span class="k">assert</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">x_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">))</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>							<span class="k">except</span><span class="p">:</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;YO&#39;</span><span class="p">)</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, x_sol_p, x2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>  <span class="c1">#, b)</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;r=&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>								<span class="k">raise</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>						<span class="n">y_sol_p</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x_sol_p</span> <span class="o">+</span> <span class="n">b</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>						<span class="n">x_sol_p</span> <span class="o">=</span> <span class="n">x1_p</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>						<span class="n">y_sol_p</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x_sol_p</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>						<span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">y_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)):</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>							<span class="n">y_sol_p</span> <span class="o">=</span> <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x_sol_p</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>						<span class="k">try</span><span class="p">:</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>							<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">y_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>						<span class="k">except</span><span class="p">:</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;IO&#39;</span><span class="p">)</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;y1_p, y_sol_p, y2_p&#39;</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>							<span class="c1"># print (&#39;DEBUG&#39;, &#39;a&#39;, a)</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>							<span class="k">raise</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>					<span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol</span> <span class="o">=</span> <span class="n">proj_inv</span><span class="p">(</span><span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>					<span class="n">sol</span> <span class="o">=</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>					<span class="c1"># Get distances in flight plan from origin to compute flown distance</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>					<span class="n">d1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>					<span class="n">d2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>					<span class="n">dd</span> <span class="o">=</span> <span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>					<span class="k">assert</span> <span class="n">dd</span> <span class="o">&gt;=</span> <span class="mf">0.</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>					<span class="c1"># Compute GCD to do the ratio between both</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>					<span class="n">dd_gcd</span> <span class="o">=</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>					<span class="c1"># Get GCD between point 1 and intersection</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>					<span class="n">dd_gcd_int</span> <span class="o">=</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">)</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>					<span class="n">rho</span> <span class="o">=</span> <span class="n">dd_gcd_int</span><span class="o">/</span><span class="n">dd_gcd</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>					<span class="c1"># Compute real distance from origin (linear interpolation)</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>					<span class="n">d_int</span> <span class="o">=</span> <span class="n">d1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dd</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>						<span class="k">assert</span> <span class="n">d1</span><span class="o">&lt;=</span><span class="n">d_int</span><span class="o">&lt;=</span><span class="n">d2</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;d1, d2, d_int&#39;</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">d_int</span><span class="p">)</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd&#39;</span><span class="p">,</span> <span class="n">dd</span><span class="p">)</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd_gcd&#39;</span><span class="p">,</span> <span class="n">dd_gcd</span><span class="p">)</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd_gcd_int&#39;</span><span class="p">,</span> <span class="n">dd_gcd_int</span><span class="p">)</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;rho&#39;</span><span class="p">,</span> <span class="n">rho</span><span class="p">)</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x_sol, y_sol, x_sol_p, y_sol_p&#39;</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>						<span class="k">raise</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>					<span class="c1"># Compute real distance to destination (linear interpolation)</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>					<span class="n">d_des1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>					<span class="n">d_des2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>					<span class="n">dd_des</span> <span class="o">=</span> <span class="n">d_des2</span> <span class="o">-</span> <span class="n">d_des1</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>					<span class="n">d_des_int</span> <span class="o">=</span> <span class="n">d_des1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dd_des</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>					<span class="k">assert</span> <span class="n">d_des2</span> <span class="o">&lt;=</span> <span class="n">d_des_int</span><span class="o">&lt;=</span><span class="n">d_des1</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>					<span class="c1"># Time of intersection, same linear interpolation</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>					<span class="n">t1</span><span class="p">,</span> <span class="n">t2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>					<span class="n">dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">)</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>					<span class="n">t</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dt</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>						<span class="k">assert</span> <span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="n">t2</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x_sol, y_sol, x_sol_p, y_sol_p&#39;</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>						<span class="k">raise</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>					<span class="c1"># Alt of intersection, same interpolation</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>					<span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>					<span class="n">dalt</span> <span class="o">=</span> <span class="p">(</span><span class="n">alt2</span> <span class="o">-</span> <span class="n">alt1</span><span class="p">)</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>					<span class="n">alt</span> <span class="o">=</span> <span class="n">alt1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dalt</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>					<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">alt</span> <span class="o">&lt;=</span> <span class="nb">max</span><span class="p">(</span><span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span><span class="p">)</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>					<span class="c1"># Wind, same interpolation</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>					<span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>					<span class="n">dwind</span> <span class="o">=</span> <span class="p">(</span><span class="n">wind2</span> <span class="o">-</span> <span class="n">wind1</span><span class="p">)</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>					<span class="n">wind</span> <span class="o">=</span> <span class="n">wind1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dwind</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>					<span class="c1"># Weight, same interpolation</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>					<span class="n">weight1</span><span class="p">,</span> <span class="n">weight2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>					<span class="n">dweight</span> <span class="o">=</span> <span class="p">(</span><span class="n">weight2</span> <span class="o">-</span> <span class="n">weight1</span><span class="p">)</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>					<span class="n">weight</span> <span class="o">=</span> <span class="n">weight1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dweight</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>					<span class="c1"># Fuel, same interpolation</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>					<span class="n">fuel1</span><span class="p">,</span> <span class="n">fuel2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>					<span class="n">dfuel</span> <span class="o">=</span> <span class="p">(</span><span class="n">fuel2</span> <span class="o">-</span> <span class="n">fuel1</span><span class="p">)</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>					<span class="n">fuel</span> <span class="o">=</span> <span class="n">fuel1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dfuel</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>					<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">wind</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span><span class="p">)</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>				<span class="c1"># else:</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>				<span class="c1">#     print (self.points_original_planned)</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>				<span class="c1">#     raise Exception(&#39;Intersection not found&#39;)</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>		<span class="k">return</span> <span class="n">sol</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">alt</span><span class="p">,</span> <span class="n">d_int</span><span class="p">,</span> <span class="n">d_des_int</span><span class="p">,</span> <span class="n">wind</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">fuel</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>	<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>		<span class="k">return</span> <span class="s2">&quot;FP &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span><span class="p">)</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>	<span class="k">def</span> <span class="nf">__long_repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>		<span class="k">return</span> <span class="s2">&quot;FP no &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; from &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin_airport_uid</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_airport_uid</span><span class="p">)</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>	<span class="k">def</span> <span class="nf">print_full</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="s2">&quot;FP no &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; from &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin_airport_uid</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_airport_uid</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>					<span class="o">+</span><span class="s2">&quot;status &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>					<span class="o">+</span><span class="s2">&quot;sobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>					<span class="o">+</span><span class="s2">&quot;sibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>					<span class="o">+</span><span class="s2">&quot;eobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>					<span class="o">+</span><span class="s2">&quot;cobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>					<span class="o">+</span><span class="s2">&quot;aobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>					<span class="o">+</span><span class="s2">&quot;eibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>					<span class="o">+</span><span class="s2">&quot;aibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>					<span class="o">+</span><span class="s2">&quot;atot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>					<span class="o">+</span><span class="s2">&quot;alt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;atfm_delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;atfm_delay 0 </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;exot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>					<span class="o">+</span><span class="s2">&quot;exit &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exit</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>					<span class="o">+</span><span class="s2">&quot;axot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>					<span class="o">+</span><span class="s2">&quot;axit &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axit</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;departing delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aobt</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;arrival delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aibt</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>		<span class="n">info_full</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">FP Planned&quot;</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">----&quot;</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">()</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>		<span class="n">info_full</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">FP Executed&quot;</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">----&quot;</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">()</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>		<span class="k">return</span> <span class="n">info_full</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>	<span class="k">def</span> <span class="nf">print_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>		<span class="n">coord</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>			<span class="n">coord</span> <span class="o">=</span> <span class="n">coord</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>		<span class="n">coord</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>			<span class="n">coord</span> <span class="o">=</span> <span class="n">coord</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>		<span class="k">return</span> <span class="n">coord</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>	<span class="k">def</span> <span class="nf">print_all_points_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-*-*-*-*&quot;</span><span class="p">)</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>	<span class="k">def</span> <span class="nf">print_full_planned_executed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PLANNED&quot;</span><span class="p">)</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXECUTED&quot;</span><span class="p">)</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;++++++++++&quot;</span><span class="p">)</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>	<span class="k">def</span> <span class="nf">create_plot_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fig_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">build_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>		<span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>			<span class="n">points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>		<span class="k">if</span> <span class="n">build_name</span><span class="p">:</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>			<span class="n">fig_name</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin_icao</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_icao</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bada_code_ac_model</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flight_uid</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.svg&quot;</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>		<span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>		<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>		<span class="n">speeds</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>		<span class="n">label_name</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>			<span class="n">x</span><span class="o">+=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">]</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>			<span class="n">y</span><span class="o">+=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">]</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>			<span class="n">label_name</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>			<span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>				<span class="n">speeds</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])]</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>				<span class="n">speeds</span><span class="o">+=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>		
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>		<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">)):</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>			<span class="c1"># print(x[i],y[i],label_name[i], speeds[i])</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;bx&#39;</span><span class="p">)</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;\_&#39;</span><span class="p">),</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>				<span class="c1"># plt.plot(x[i],y[i],&#39;ro&#39;)</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>				<span class="c1"># plt.annotate(speeds[i], xy=(x[i],y[i]-5))</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">speeds</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>				<span class="c1"># plt.annotate(speeds[i], xy=(x[i],y[i]-5))</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>		<span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>		<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>		<span class="n">label_name</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>			<span class="n">x</span> <span class="o">+=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">]</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>			<span class="n">y</span> <span class="o">+=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">]</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>			<span class="n">label_name</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;g--x&#39;</span><span class="p">)</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">)):</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>				<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>					<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;\_&#39;</span><span class="p">),</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>		<span class="k">if</span> <span class="n">fig_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fig_name</span><span class="p">)</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>		<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
</span></pre></div>


            </section>
                <section id="build_proj">
                            <input id="build_proj-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">build_proj</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">central_longitude</span><span class="o">=</span><span class="mf">0.0</span>,</span><span class="param">	<span class="n">central_latitude</span><span class="o">=</span><span class="mf">0.0</span>,</span><span class="param">	proj_type=&lt;class &#x27;cartopy.crs.AzimuthalEquidistant&#x27;&gt;,</span><span class="param">	<span class="n">proj_initial</span><span class="o">=&lt;</span><span class="n">Projected</span> <span class="n">CRS</span><span class="p">:</span> <span class="o">+</span><span class="n">proj</span><span class="o">=</span><span class="n">eqc</span> <span class="o">+</span><span class="n">ellps</span><span class="o">=</span><span class="n">WGS84</span> <span class="o">+</span><span class="n">a</span><span class="o">=</span><span class="mf">6378137.0</span> <span class="o">+</span><span class="n">lon_0</span><span class="o">=</span><span class="mf">0.0</span> <span class="o">+</span><span class="n">to</span> <span class="o">...&gt;</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">unknown</span>
<span class="n">Axis</span> <span class="n">Info</span> <span class="p">[</span><span class="n">cartesian</span><span class="p">]:</span>
<span class="o">-</span> <span class="n">E</span><span class="p">[</span><span class="n">east</span><span class="p">]:</span> <span class="n">Easting</span> <span class="p">(</span><span class="n">unknown</span><span class="p">)</span>
<span class="o">-</span> <span class="n">N</span><span class="p">[</span><span class="n">north</span><span class="p">]:</span> <span class="n">Northing</span> <span class="p">(</span><span class="n">unknown</span><span class="p">)</span>
<span class="o">-</span> <span class="n">h</span><span class="p">[</span><span class="n">up</span><span class="p">]:</span> <span class="n">Ellipsoidal</span> <span class="n">height</span> <span class="p">(</span><span class="n">metre</span><span class="p">)</span>
<span class="n">Area</span> <span class="n">of</span> <span class="n">Use</span><span class="p">:</span>
<span class="o">-</span> <span class="n">undefined</span>
<span class="n">Coordinate</span> <span class="n">Operation</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">unknown</span>
<span class="o">-</span> <span class="n">method</span><span class="p">:</span> <span class="n">Equidistant</span> <span class="n">Cylindrical</span>
<span class="n">Datum</span><span class="p">:</span> <span class="n">Unknown</span> <span class="n">based</span> <span class="n">on</span> <span class="n">WGS</span> <span class="mi">84</span> <span class="n">ellipsoid</span>
<span class="o">-</span> <span class="n">Ellipsoid</span><span class="p">:</span> <span class="n">WGS</span> <span class="mi">84</span>
<span class="o">-</span> <span class="n">Prime</span> <span class="n">Meridian</span><span class="p">:</span> <span class="n">Greenwich</span>,</span><span class="param">	<span class="n">scale</span><span class="o">=</span><span class="mf">1000.0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="build_proj-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#build_proj"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="build_proj-15"><a href="#build_proj-15"><span class="linenos">15</span></a><span class="k">def</span> <span class="nf">build_proj</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">proj_type</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">AzimuthalEquidistant</span><span class="p">,</span>
</span><span id="build_proj-16"><a href="#build_proj-16"><span class="linenos">16</span></a>			   <span class="n">proj_initial</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1000.</span><span class="p">):</span>
</span><span id="build_proj-17"><a href="#build_proj-17"><span class="linenos">17</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="build_proj-18"><a href="#build_proj-18"><span class="linenos">18</span></a><span class="sd">	Scale is here for convenience, because projected are big by default</span>
</span><span id="build_proj-19"><a href="#build_proj-19"><span class="linenos">19</span></a><span class="sd">	(they are in meters).</span>
</span><span id="build_proj-20"><a href="#build_proj-20"><span class="linenos">20</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="build_proj-21"><a href="#build_proj-21"><span class="linenos">21</span></a>	<span class="n">proj</span> <span class="o">=</span> <span class="n">proj_type</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="n">central_longitude</span><span class="p">,</span>
</span><span id="build_proj-22"><a href="#build_proj-22"><span class="linenos">22</span></a>					<span class="n">central_latitude</span><span class="o">=</span><span class="n">central_latitude</span><span class="p">)</span>
</span><span id="build_proj-23"><a href="#build_proj-23"><span class="linenos">23</span></a>
</span><span id="build_proj-24"><a href="#build_proj-24"><span class="linenos">24</span></a>	<span class="k">def</span> <span class="nf">proj_forward</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">):</span>
</span><span id="build_proj-25"><a href="#build_proj-25"><span class="linenos">25</span></a>		<span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">proj</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">proj_initial</span><span class="p">))</span><span class="o">/</span><span class="n">scale</span><span class="p">)</span>
</span><span id="build_proj-26"><a href="#build_proj-26"><span class="linenos">26</span></a>
</span><span id="build_proj-27"><a href="#build_proj-27"><span class="linenos">27</span></a>	<span class="k">def</span> <span class="nf">proj_inv</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="build_proj-28"><a href="#build_proj-28"><span class="linenos">28</span></a>		<span class="k">return</span> <span class="n">proj_initial</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="o">*</span><span class="nb">tuple</span><span class="p">(</span><span class="n">array</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span><span class="o">*</span><span class="n">scale</span><span class="p">),</span> <span class="n">proj</span><span class="p">)</span>
</span><span id="build_proj-29"><a href="#build_proj-29"><span class="linenos">29</span></a>
</span><span id="build_proj-30"><a href="#build_proj-30"><span class="linenos">30</span></a>	<span class="k">return</span> <span class="n">proj_forward</span><span class="p">,</span> <span class="n">proj_inv</span>
</span></pre></div>


            <div class="docstring"><p>Scale is here for convenience, because projected are big by default
(they are in meters).</p>
</div>


                </section>
                <section id="FlightPlanPoint">
                            <input id="FlightPlanPoint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FlightPlanPoint</span>:

                <label class="view-source-button" for="FlightPlanPoint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint-32"><a href="#FlightPlanPoint-32"><span class="linenos"> 32</span></a><span class="k">class</span> <span class="nc">FlightPlanPoint</span><span class="p">:</span>
</span><span id="FlightPlanPoint-33"><a href="#FlightPlanPoint-33"><span class="linenos"> 33</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-34"><a href="#FlightPlanPoint-34"><span class="linenos"> 34</span></a><span class="sd">	A point in the flight plan</span>
</span><span id="FlightPlanPoint-35"><a href="#FlightPlanPoint-35"><span class="linenos"> 35</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-36"><a href="#FlightPlanPoint-36"><span class="linenos"> 36</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alt_ft</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_min</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint-37"><a href="#FlightPlanPoint-37"><span class="linenos"> 37</span></a>		<span class="n">dist_from_orig_nm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dist_to_dest_nm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wind</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ansp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint-38"><a href="#FlightPlanPoint-38"><span class="linenos"> 38</span></a>		<span class="n">weight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fuel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">number_order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="FlightPlanPoint-39"><a href="#FlightPlanPoint-39"><span class="linenos"> 39</span></a>		<span class="n">planned_segment_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">segment_max_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">segment_min_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint-40"><a href="#FlightPlanPoint-40"><span class="linenos"> 40</span></a>		<span class="n">segment_mrc_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="FlightPlanPoint-41"><a href="#FlightPlanPoint-41"><span class="linenos"> 41</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="FlightPlanPoint-42"><a href="#FlightPlanPoint-42"><span class="linenos"> 42</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">coords</span> <span class="o">=</span> <span class="n">coords</span>
</span><span id="FlightPlanPoint-43"><a href="#FlightPlanPoint-43"><span class="linenos"> 43</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="n">alt_ft</span>
</span><span id="FlightPlanPoint-44"><a href="#FlightPlanPoint-44"><span class="linenos"> 44</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="n">time_min</span>
</span><span id="FlightPlanPoint-45"><a href="#FlightPlanPoint-45"><span class="linenos"> 45</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlanPoint-46"><a href="#FlightPlanPoint-46"><span class="linenos"> 46</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlanPoint-47"><a href="#FlightPlanPoint-47"><span class="linenos"> 47</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">=</span> <span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlanPoint-48"><a href="#FlightPlanPoint-48"><span class="linenos"> 48</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">=</span> <span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlanPoint-49"><a href="#FlightPlanPoint-49"><span class="linenos"> 49</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">event</span>
</span><span id="FlightPlanPoint-50"><a href="#FlightPlanPoint-50"><span class="linenos"> 50</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wind</span> <span class="o">=</span> <span class="n">wind</span>
</span><span id="FlightPlanPoint-51"><a href="#FlightPlanPoint-51"><span class="linenos"> 51</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="n">ansp</span>
</span><span id="FlightPlanPoint-52"><a href="#FlightPlanPoint-52"><span class="linenos"> 52</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
</span><span id="FlightPlanPoint-53"><a href="#FlightPlanPoint-53"><span class="linenos"> 53</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fuel</span> <span class="o">=</span> <span class="n">fuel</span>
</span><span id="FlightPlanPoint-54"><a href="#FlightPlanPoint-54"><span class="linenos"> 54</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">number_order</span>
</span><span id="FlightPlanPoint-55"><a href="#FlightPlanPoint-55"><span class="linenos"> 55</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_speed_kt</span> <span class="o">=</span> <span class="n">planned_segment_speed_kt</span>
</span><span id="FlightPlanPoint-56"><a href="#FlightPlanPoint-56"><span class="linenos"> 56</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">min_uncertainty</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlanPoint-57"><a href="#FlightPlanPoint-57"><span class="linenos"> 57</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">nm_uncertainty</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlanPoint-58"><a href="#FlightPlanPoint-58"><span class="linenos"> 58</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dict_speeds</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint-59"><a href="#FlightPlanPoint-59"><span class="linenos"> 59</span></a>						<span class="s1">&#39;max_kt&#39;</span><span class="p">:</span> <span class="n">segment_max_speed_kt</span><span class="p">,</span>
</span><span id="FlightPlanPoint-60"><a href="#FlightPlanPoint-60"><span class="linenos"> 60</span></a>						<span class="s1">&#39;min_kt&#39;</span><span class="p">:</span> <span class="n">segment_min_speed_kt</span><span class="p">,</span>
</span><span id="FlightPlanPoint-61"><a href="#FlightPlanPoint-61"><span class="linenos"> 61</span></a>						<span class="s1">&#39;mrc_kt&#39;</span><span class="p">:</span> <span class="n">segment_mrc_speed_kt</span><span class="p">,</span>
</span><span id="FlightPlanPoint-62"><a href="#FlightPlanPoint-62"><span class="linenos"> 62</span></a>						<span class="s1">&#39;perc_selected&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint-63"><a href="#FlightPlanPoint-63"><span class="linenos"> 63</span></a>						<span class="s1">&#39;perc_nominal&#39;</span><span class="p">:</span> <span class="kc">None</span>
</span><span id="FlightPlanPoint-64"><a href="#FlightPlanPoint-64"><span class="linenos"> 64</span></a>						<span class="p">}</span>
</span><span id="FlightPlanPoint-65"><a href="#FlightPlanPoint-65"><span class="linenos"> 65</span></a>
</span><span id="FlightPlanPoint-66"><a href="#FlightPlanPoint-66"><span class="linenos"> 66</span></a>	<span class="k">def</span> <span class="nf">my_deep_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">normal_copy</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="FlightPlanPoint-67"><a href="#FlightPlanPoint-67"><span class="linenos"> 67</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-68"><a href="#FlightPlanPoint-68"><span class="linenos"> 68</span></a><span class="sd">		Copy a Waypoint from the FlightPlan with deepcopy of all elements</span>
</span><span id="FlightPlanPoint-69"><a href="#FlightPlanPoint-69"><span class="linenos"> 69</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-70"><a href="#FlightPlanPoint-70"><span class="linenos"> 70</span></a>		<span class="n">copyPoint</span> <span class="o">=</span> <span class="n">FlightPlanPoint</span><span class="p">()</span>
</span><span id="FlightPlanPoint-71"><a href="#FlightPlanPoint-71"><span class="linenos"> 71</span></a>		<span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlanPoint-72"><a href="#FlightPlanPoint-72"><span class="linenos"> 72</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlanPoint-73"><a href="#FlightPlanPoint-73"><span class="linenos"> 73</span></a>				<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="FlightPlanPoint-74"><a href="#FlightPlanPoint-74"><span class="linenos"> 74</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlanPoint-75"><a href="#FlightPlanPoint-75"><span class="linenos"> 75</span></a>				<span class="k">if</span> <span class="n">normal_copy</span><span class="p">:</span>
</span><span id="FlightPlanPoint-76"><a href="#FlightPlanPoint-76"><span class="linenos"> 76</span></a>					<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">copy</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="FlightPlanPoint-77"><a href="#FlightPlanPoint-77"><span class="linenos"> 77</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlanPoint-78"><a href="#FlightPlanPoint-78"><span class="linenos"> 78</span></a>					<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="FlightPlanPoint-79"><a href="#FlightPlanPoint-79"><span class="linenos"> 79</span></a>		<span class="k">return</span> <span class="n">copyPoint</span>
</span><span id="FlightPlanPoint-80"><a href="#FlightPlanPoint-80"><span class="linenos"> 80</span></a>
</span><span id="FlightPlanPoint-81"><a href="#FlightPlanPoint-81"><span class="linenos"> 81</span></a>	<span class="k">def</span> <span class="nf">set_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="FlightPlanPoint-82"><a href="#FlightPlanPoint-82"><span class="linenos"> 82</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-83"><a href="#FlightPlanPoint-83"><span class="linenos"> 83</span></a><span class="sd">		Set an event to the Point</span>
</span><span id="FlightPlanPoint-84"><a href="#FlightPlanPoint-84"><span class="linenos"> 84</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-85"><a href="#FlightPlanPoint-85"><span class="linenos"> 85</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">event</span>
</span><span id="FlightPlanPoint-86"><a href="#FlightPlanPoint-86"><span class="linenos"> 86</span></a>
</span><span id="FlightPlanPoint-87"><a href="#FlightPlanPoint-87"><span class="linenos"> 87</span></a>	<span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="FlightPlanPoint-88"><a href="#FlightPlanPoint-88"><span class="linenos"> 88</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-89"><a href="#FlightPlanPoint-89"><span class="linenos"> 89</span></a><span class="sd">		Set a Name to the Point</span>
</span><span id="FlightPlanPoint-90"><a href="#FlightPlanPoint-90"><span class="linenos"> 90</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-91"><a href="#FlightPlanPoint-91"><span class="linenos"> 91</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="FlightPlanPoint-92"><a href="#FlightPlanPoint-92"><span class="linenos"> 92</span></a>
</span><span id="FlightPlanPoint-93"><a href="#FlightPlanPoint-93"><span class="linenos"> 93</span></a>	<span class="k">def</span> <span class="nf">get_dist_from_orig_nm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint-94"><a href="#FlightPlanPoint-94"><span class="linenos"> 94</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlanPoint-95"><a href="#FlightPlanPoint-95"><span class="linenos"> 95</span></a>
</span><span id="FlightPlanPoint-96"><a href="#FlightPlanPoint-96"><span class="linenos"> 96</span></a>	<span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint-97"><a href="#FlightPlanPoint-97"><span class="linenos"> 97</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span id="FlightPlanPoint-98"><a href="#FlightPlanPoint-98"><span class="linenos"> 98</span></a>
</span><span id="FlightPlanPoint-99"><a href="#FlightPlanPoint-99"><span class="linenos"> 99</span></a>	<span class="k">def</span> <span class="nf">get_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint-100"><a href="#FlightPlanPoint-100"><span class="linenos">100</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span>
</span><span id="FlightPlanPoint-101"><a href="#FlightPlanPoint-101"><span class="linenos">101</span></a>
</span><span id="FlightPlanPoint-102"><a href="#FlightPlanPoint-102"><span class="linenos">102</span></a>	<span class="k">def</span> <span class="nf">get_time_min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint-103"><a href="#FlightPlanPoint-103"><span class="linenos">103</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlanPoint-104"><a href="#FlightPlanPoint-104"><span class="linenos">104</span></a>
</span><span id="FlightPlanPoint-105"><a href="#FlightPlanPoint-105"><span class="linenos">105</span></a>	<span class="k">def</span> <span class="nf">get_alt_ft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint-106"><a href="#FlightPlanPoint-106"><span class="linenos">106</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="FlightPlanPoint-107"><a href="#FlightPlanPoint-107"><span class="linenos">107</span></a>
</span><span id="FlightPlanPoint-108"><a href="#FlightPlanPoint-108"><span class="linenos">108</span></a>	<span class="k">def</span> <span class="nf">get_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint-109"><a href="#FlightPlanPoint-109"><span class="linenos">109</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span>
</span><span id="FlightPlanPoint-110"><a href="#FlightPlanPoint-110"><span class="linenos">110</span></a>
</span><span id="FlightPlanPoint-111"><a href="#FlightPlanPoint-111"><span class="linenos">111</span></a>	<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint-112"><a href="#FlightPlanPoint-112"><span class="linenos">112</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-113"><a href="#FlightPlanPoint-113"><span class="linenos">113</span></a><span class="sd">		Return in string from the information of the Point</span>
</span><span id="FlightPlanPoint-114"><a href="#FlightPlanPoint-114"><span class="linenos">114</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-115"><a href="#FlightPlanPoint-115"><span class="linenos">115</span></a>		<span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> : [coords: (</span><span class="si">{:.2f}</span><span class="s1">, </span><span class="si">{:.2f}</span><span class="s1">) ; alt: </span><span class="si">{}</span><span class="s1"> ; t: </span><span class="si">{:.2f}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> 
</span><span id="FlightPlanPoint-116"><a href="#FlightPlanPoint-116"><span class="linenos">116</span></a>																			<span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="FlightPlanPoint-117"><a href="#FlightPlanPoint-117"><span class="linenos">117</span></a>																			<span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="FlightPlanPoint-118"><a href="#FlightPlanPoint-118"><span class="linenos">118</span></a>																			<span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span>
</span><span id="FlightPlanPoint-119"><a href="#FlightPlanPoint-119"><span class="linenos">119</span></a>																			<span class="bp">self</span><span class="o">.</span><span class="n">time_min</span><span class="p">)</span>
</span><span id="FlightPlanPoint-120"><a href="#FlightPlanPoint-120"><span class="linenos">120</span></a>
</span><span id="FlightPlanPoint-121"><a href="#FlightPlanPoint-121"><span class="linenos">121</span></a>	<span class="k">def</span> <span class="nf">print_full</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint-122"><a href="#FlightPlanPoint-122"><span class="linenos">122</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-123"><a href="#FlightPlanPoint-123"><span class="linenos">123</span></a><span class="sd">		Print in full the information of the Point</span>
</span><span id="FlightPlanPoint-124"><a href="#FlightPlanPoint-124"><span class="linenos">124</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint-125"><a href="#FlightPlanPoint-125"><span class="linenos">125</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="s2">&quot;number &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number_order</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-126"><a href="#FlightPlanPoint-126"><span class="linenos">126</span></a>					<span class="o">+</span> <span class="s2">&quot;name &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-127"><a href="#FlightPlanPoint-127"><span class="linenos">127</span></a>					<span class="o">+</span> <span class="s2">&quot;coords &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-128"><a href="#FlightPlanPoint-128"><span class="linenos">128</span></a>					<span class="o">+</span> <span class="s2">&quot;alt &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-129"><a href="#FlightPlanPoint-129"><span class="linenos">129</span></a>					<span class="o">+</span> <span class="s2">&quot;time &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_min</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-130"><a href="#FlightPlanPoint-130"><span class="linenos">130</span></a>					<span class="o">+</span> <span class="s2">&quot;planned time segment &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_time</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-131"><a href="#FlightPlanPoint-131"><span class="linenos">131</span></a>					<span class="o">+</span> <span class="s2">&quot;planned dist segment &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-132"><a href="#FlightPlanPoint-132"><span class="linenos">132</span></a>					<span class="o">+</span> <span class="s2">&quot;dist_from_orig &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-133"><a href="#FlightPlanPoint-133"><span class="linenos">133</span></a>					<span class="o">+</span> <span class="s2">&quot;dist_to_dest &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist_to_dest_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-134"><a href="#FlightPlanPoint-134"><span class="linenos">134</span></a>					<span class="o">+</span> <span class="s2">&quot;event &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-135"><a href="#FlightPlanPoint-135"><span class="linenos">135</span></a>					<span class="o">+</span> <span class="s2">&quot;wind &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wind</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-136"><a href="#FlightPlanPoint-136"><span class="linenos">136</span></a>					<span class="o">+</span> <span class="s2">&quot;ansp &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ansp</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-137"><a href="#FlightPlanPoint-137"><span class="linenos">137</span></a>					<span class="o">+</span> <span class="s2">&quot;weight &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-138"><a href="#FlightPlanPoint-138"><span class="linenos">138</span></a>					<span class="o">+</span> <span class="s2">&quot;fuel &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-139"><a href="#FlightPlanPoint-139"><span class="linenos">139</span></a>					<span class="o">+</span> <span class="s2">&quot;speed kt &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_speed_kt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint-140"><a href="#FlightPlanPoint-140"><span class="linenos">140</span></a>					<span class="o">+</span> <span class="s2">&quot;dict speeds &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">)</span>
</span><span id="FlightPlanPoint-141"><a href="#FlightPlanPoint-141"><span class="linenos">141</span></a>
</span><span id="FlightPlanPoint-142"><a href="#FlightPlanPoint-142"><span class="linenos">142</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlanPoint-143"><a href="#FlightPlanPoint-143"><span class="linenos">143</span></a>			<span class="n">info_full</span> <span class="o">+=</span> <span class="s2">&quot;min_uncertainty: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_uncertainty</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlanPoint-144"><a href="#FlightPlanPoint-144"><span class="linenos">144</span></a>			<span class="n">info_full</span> <span class="o">+=</span> <span class="s2">&quot;nm_uncertainty: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nm_uncertainty</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlanPoint-145"><a href="#FlightPlanPoint-145"><span class="linenos">145</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlanPoint-146"><a href="#FlightPlanPoint-146"><span class="linenos">146</span></a>			<span class="k">pass</span>
</span><span id="FlightPlanPoint-147"><a href="#FlightPlanPoint-147"><span class="linenos">147</span></a>
</span><span id="FlightPlanPoint-148"><a href="#FlightPlanPoint-148"><span class="linenos">148</span></a>		<span class="k">return</span> <span class="n">info_full</span>
</span></pre></div>


            <div class="docstring"><p>A point in the flight plan</p>
</div>


                            <div id="FlightPlanPoint.__init__" class="classattr">
                                        <input id="FlightPlanPoint.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">FlightPlanPoint</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">coords</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">alt_ft</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">time_min</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">dist_from_orig_nm</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">dist_to_dest_nm</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">event</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">wind</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">ansp</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">weight</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">fuel</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">number_order</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">planned_segment_speed_kt</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">segment_max_speed_kt</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">segment_min_speed_kt</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">segment_mrc_speed_kt</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="FlightPlanPoint.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.__init__-36"><a href="#FlightPlanPoint.__init__-36"><span class="linenos">36</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alt_ft</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_min</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint.__init__-37"><a href="#FlightPlanPoint.__init__-37"><span class="linenos">37</span></a>		<span class="n">dist_from_orig_nm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dist_to_dest_nm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wind</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ansp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint.__init__-38"><a href="#FlightPlanPoint.__init__-38"><span class="linenos">38</span></a>		<span class="n">weight</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fuel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">number_order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="FlightPlanPoint.__init__-39"><a href="#FlightPlanPoint.__init__-39"><span class="linenos">39</span></a>		<span class="n">planned_segment_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">segment_max_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">segment_min_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint.__init__-40"><a href="#FlightPlanPoint.__init__-40"><span class="linenos">40</span></a>		<span class="n">segment_mrc_speed_kt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="FlightPlanPoint.__init__-41"><a href="#FlightPlanPoint.__init__-41"><span class="linenos">41</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="FlightPlanPoint.__init__-42"><a href="#FlightPlanPoint.__init__-42"><span class="linenos">42</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">coords</span> <span class="o">=</span> <span class="n">coords</span>
</span><span id="FlightPlanPoint.__init__-43"><a href="#FlightPlanPoint.__init__-43"><span class="linenos">43</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="n">alt_ft</span>
</span><span id="FlightPlanPoint.__init__-44"><a href="#FlightPlanPoint.__init__-44"><span class="linenos">44</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="n">time_min</span>
</span><span id="FlightPlanPoint.__init__-45"><a href="#FlightPlanPoint.__init__-45"><span class="linenos">45</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlanPoint.__init__-46"><a href="#FlightPlanPoint.__init__-46"><span class="linenos">46</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlanPoint.__init__-47"><a href="#FlightPlanPoint.__init__-47"><span class="linenos">47</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">=</span> <span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlanPoint.__init__-48"><a href="#FlightPlanPoint.__init__-48"><span class="linenos">48</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">=</span> <span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlanPoint.__init__-49"><a href="#FlightPlanPoint.__init__-49"><span class="linenos">49</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">event</span>
</span><span id="FlightPlanPoint.__init__-50"><a href="#FlightPlanPoint.__init__-50"><span class="linenos">50</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wind</span> <span class="o">=</span> <span class="n">wind</span>
</span><span id="FlightPlanPoint.__init__-51"><a href="#FlightPlanPoint.__init__-51"><span class="linenos">51</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="n">ansp</span>
</span><span id="FlightPlanPoint.__init__-52"><a href="#FlightPlanPoint.__init__-52"><span class="linenos">52</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
</span><span id="FlightPlanPoint.__init__-53"><a href="#FlightPlanPoint.__init__-53"><span class="linenos">53</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fuel</span> <span class="o">=</span> <span class="n">fuel</span>
</span><span id="FlightPlanPoint.__init__-54"><a href="#FlightPlanPoint.__init__-54"><span class="linenos">54</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">number_order</span>
</span><span id="FlightPlanPoint.__init__-55"><a href="#FlightPlanPoint.__init__-55"><span class="linenos">55</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_speed_kt</span> <span class="o">=</span> <span class="n">planned_segment_speed_kt</span>
</span><span id="FlightPlanPoint.__init__-56"><a href="#FlightPlanPoint.__init__-56"><span class="linenos">56</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">min_uncertainty</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlanPoint.__init__-57"><a href="#FlightPlanPoint.__init__-57"><span class="linenos">57</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">nm_uncertainty</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlanPoint.__init__-58"><a href="#FlightPlanPoint.__init__-58"><span class="linenos">58</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dict_speeds</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint.__init__-59"><a href="#FlightPlanPoint.__init__-59"><span class="linenos">59</span></a>						<span class="s1">&#39;max_kt&#39;</span><span class="p">:</span> <span class="n">segment_max_speed_kt</span><span class="p">,</span>
</span><span id="FlightPlanPoint.__init__-60"><a href="#FlightPlanPoint.__init__-60"><span class="linenos">60</span></a>						<span class="s1">&#39;min_kt&#39;</span><span class="p">:</span> <span class="n">segment_min_speed_kt</span><span class="p">,</span>
</span><span id="FlightPlanPoint.__init__-61"><a href="#FlightPlanPoint.__init__-61"><span class="linenos">61</span></a>						<span class="s1">&#39;mrc_kt&#39;</span><span class="p">:</span> <span class="n">segment_mrc_speed_kt</span><span class="p">,</span>
</span><span id="FlightPlanPoint.__init__-62"><a href="#FlightPlanPoint.__init__-62"><span class="linenos">62</span></a>						<span class="s1">&#39;perc_selected&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="FlightPlanPoint.__init__-63"><a href="#FlightPlanPoint.__init__-63"><span class="linenos">63</span></a>						<span class="s1">&#39;perc_nominal&#39;</span><span class="p">:</span> <span class="kc">None</span>
</span><span id="FlightPlanPoint.__init__-64"><a href="#FlightPlanPoint.__init__-64"><span class="linenos">64</span></a>						<span class="p">}</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlanPoint.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.name"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.coords" class="classattr">
                                <div class="attr variable">
            <span class="name">coords</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.coords"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.alt_ft" class="classattr">
                                <div class="attr variable">
            <span class="name">alt_ft</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.alt_ft"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.time_min" class="classattr">
                                <div class="attr variable">
            <span class="name">time_min</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.time_min"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.planned_segment_time" class="classattr">
                                <div class="attr variable">
            <span class="name">planned_segment_time</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.planned_segment_time"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.planned_dist_segment_nm" class="classattr">
                                <div class="attr variable">
            <span class="name">planned_dist_segment_nm</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.planned_dist_segment_nm"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.dist_from_orig_nm" class="classattr">
                                <div class="attr variable">
            <span class="name">dist_from_orig_nm</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.dist_from_orig_nm"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.dist_to_dest_nm" class="classattr">
                                <div class="attr variable">
            <span class="name">dist_to_dest_nm</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.dist_to_dest_nm"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.event" class="classattr">
                                <div class="attr variable">
            <span class="name">event</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.event"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.wind" class="classattr">
                                <div class="attr variable">
            <span class="name">wind</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.wind"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.ansp" class="classattr">
                                <div class="attr variable">
            <span class="name">ansp</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.ansp"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.weight" class="classattr">
                                <div class="attr variable">
            <span class="name">weight</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.weight"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.fuel" class="classattr">
                                <div class="attr variable">
            <span class="name">fuel</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.fuel"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.number_order" class="classattr">
                                <div class="attr variable">
            <span class="name">number_order</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.number_order"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.planned_segment_speed_kt" class="classattr">
                                <div class="attr variable">
            <span class="name">planned_segment_speed_kt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.planned_segment_speed_kt"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.min_uncertainty" class="classattr">
                                <div class="attr variable">
            <span class="name">min_uncertainty</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.min_uncertainty"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.nm_uncertainty" class="classattr">
                                <div class="attr variable">
            <span class="name">nm_uncertainty</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.nm_uncertainty"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.dict_speeds" class="classattr">
                                <div class="attr variable">
            <span class="name">dict_speeds</span>

        
    </div>
    <a class="headerlink" href="#FlightPlanPoint.dict_speeds"></a>
    
    

                            </div>
                            <div id="FlightPlanPoint.my_deep_copy" class="classattr">
                                        <input id="FlightPlanPoint.my_deep_copy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">my_deep_copy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">normal_copy</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.my_deep_copy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.my_deep_copy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.my_deep_copy-66"><a href="#FlightPlanPoint.my_deep_copy-66"><span class="linenos">66</span></a>	<span class="k">def</span> <span class="nf">my_deep_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">normal_copy</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="FlightPlanPoint.my_deep_copy-67"><a href="#FlightPlanPoint.my_deep_copy-67"><span class="linenos">67</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint.my_deep_copy-68"><a href="#FlightPlanPoint.my_deep_copy-68"><span class="linenos">68</span></a><span class="sd">		Copy a Waypoint from the FlightPlan with deepcopy of all elements</span>
</span><span id="FlightPlanPoint.my_deep_copy-69"><a href="#FlightPlanPoint.my_deep_copy-69"><span class="linenos">69</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint.my_deep_copy-70"><a href="#FlightPlanPoint.my_deep_copy-70"><span class="linenos">70</span></a>		<span class="n">copyPoint</span> <span class="o">=</span> <span class="n">FlightPlanPoint</span><span class="p">()</span>
</span><span id="FlightPlanPoint.my_deep_copy-71"><a href="#FlightPlanPoint.my_deep_copy-71"><span class="linenos">71</span></a>		<span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlanPoint.my_deep_copy-72"><a href="#FlightPlanPoint.my_deep_copy-72"><span class="linenos">72</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlanPoint.my_deep_copy-73"><a href="#FlightPlanPoint.my_deep_copy-73"><span class="linenos">73</span></a>				<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="FlightPlanPoint.my_deep_copy-74"><a href="#FlightPlanPoint.my_deep_copy-74"><span class="linenos">74</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlanPoint.my_deep_copy-75"><a href="#FlightPlanPoint.my_deep_copy-75"><span class="linenos">75</span></a>				<span class="k">if</span> <span class="n">normal_copy</span><span class="p">:</span>
</span><span id="FlightPlanPoint.my_deep_copy-76"><a href="#FlightPlanPoint.my_deep_copy-76"><span class="linenos">76</span></a>					<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">copy</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="FlightPlanPoint.my_deep_copy-77"><a href="#FlightPlanPoint.my_deep_copy-77"><span class="linenos">77</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlanPoint.my_deep_copy-78"><a href="#FlightPlanPoint.my_deep_copy-78"><span class="linenos">78</span></a>					<span class="nb">setattr</span><span class="p">(</span><span class="n">copyPoint</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="FlightPlanPoint.my_deep_copy-79"><a href="#FlightPlanPoint.my_deep_copy-79"><span class="linenos">79</span></a>		<span class="k">return</span> <span class="n">copyPoint</span>
</span></pre></div>


            <div class="docstring"><p>Copy a Waypoint from the FlightPlan with deepcopy of all elements</p>
</div>


                            </div>
                            <div id="FlightPlanPoint.set_event" class="classattr">
                                        <input id="FlightPlanPoint.set_event-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_event</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.set_event-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.set_event"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.set_event-81"><a href="#FlightPlanPoint.set_event-81"><span class="linenos">81</span></a>	<span class="k">def</span> <span class="nf">set_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="FlightPlanPoint.set_event-82"><a href="#FlightPlanPoint.set_event-82"><span class="linenos">82</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint.set_event-83"><a href="#FlightPlanPoint.set_event-83"><span class="linenos">83</span></a><span class="sd">		Set an event to the Point</span>
</span><span id="FlightPlanPoint.set_event-84"><a href="#FlightPlanPoint.set_event-84"><span class="linenos">84</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint.set_event-85"><a href="#FlightPlanPoint.set_event-85"><span class="linenos">85</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">event</span>
</span></pre></div>


            <div class="docstring"><p>Set an event to the Point</p>
</div>


                            </div>
                            <div id="FlightPlanPoint.set_name" class="classattr">
                                        <input id="FlightPlanPoint.set_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.set_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.set_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.set_name-87"><a href="#FlightPlanPoint.set_name-87"><span class="linenos">87</span></a>	<span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="FlightPlanPoint.set_name-88"><a href="#FlightPlanPoint.set_name-88"><span class="linenos">88</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint.set_name-89"><a href="#FlightPlanPoint.set_name-89"><span class="linenos">89</span></a><span class="sd">		Set a Name to the Point</span>
</span><span id="FlightPlanPoint.set_name-90"><a href="#FlightPlanPoint.set_name-90"><span class="linenos">90</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint.set_name-91"><a href="#FlightPlanPoint.set_name-91"><span class="linenos">91</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span></pre></div>


            <div class="docstring"><p>Set a Name to the Point</p>
</div>


                            </div>
                            <div id="FlightPlanPoint.get_dist_from_orig_nm" class="classattr">
                                        <input id="FlightPlanPoint.get_dist_from_orig_nm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_dist_from_orig_nm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.get_dist_from_orig_nm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.get_dist_from_orig_nm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.get_dist_from_orig_nm-93"><a href="#FlightPlanPoint.get_dist_from_orig_nm-93"><span class="linenos">93</span></a>	<span class="k">def</span> <span class="nf">get_dist_from_orig_nm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint.get_dist_from_orig_nm-94"><a href="#FlightPlanPoint.get_dist_from_orig_nm-94"><span class="linenos">94</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlanPoint.get_name" class="classattr">
                                        <input id="FlightPlanPoint.get_name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.get_name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.get_name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.get_name-96"><a href="#FlightPlanPoint.get_name-96"><span class="linenos">96</span></a>	<span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint.get_name-97"><a href="#FlightPlanPoint.get_name-97"><span class="linenos">97</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlanPoint.get_event" class="classattr">
                                        <input id="FlightPlanPoint.get_event-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_event</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.get_event-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.get_event"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.get_event-99"><a href="#FlightPlanPoint.get_event-99"><span class="linenos"> 99</span></a>	<span class="k">def</span> <span class="nf">get_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint.get_event-100"><a href="#FlightPlanPoint.get_event-100"><span class="linenos">100</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlanPoint.get_time_min" class="classattr">
                                        <input id="FlightPlanPoint.get_time_min-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_time_min</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.get_time_min-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.get_time_min"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.get_time_min-102"><a href="#FlightPlanPoint.get_time_min-102"><span class="linenos">102</span></a>	<span class="k">def</span> <span class="nf">get_time_min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint.get_time_min-103"><a href="#FlightPlanPoint.get_time_min-103"><span class="linenos">103</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_min</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlanPoint.get_alt_ft" class="classattr">
                                        <input id="FlightPlanPoint.get_alt_ft-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_alt_ft</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.get_alt_ft-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.get_alt_ft"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.get_alt_ft-105"><a href="#FlightPlanPoint.get_alt_ft-105"><span class="linenos">105</span></a>	<span class="k">def</span> <span class="nf">get_alt_ft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint.get_alt_ft-106"><a href="#FlightPlanPoint.get_alt_ft-106"><span class="linenos">106</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlanPoint.get_coords" class="classattr">
                                        <input id="FlightPlanPoint.get_coords-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_coords</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.get_coords-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.get_coords"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.get_coords-108"><a href="#FlightPlanPoint.get_coords-108"><span class="linenos">108</span></a>	<span class="k">def</span> <span class="nf">get_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint.get_coords-109"><a href="#FlightPlanPoint.get_coords-109"><span class="linenos">109</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlanPoint.print_full" class="classattr">
                                        <input id="FlightPlanPoint.print_full-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">print_full</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlanPoint.print_full-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlanPoint.print_full"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlanPoint.print_full-121"><a href="#FlightPlanPoint.print_full-121"><span class="linenos">121</span></a>	<span class="k">def</span> <span class="nf">print_full</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlanPoint.print_full-122"><a href="#FlightPlanPoint.print_full-122"><span class="linenos">122</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint.print_full-123"><a href="#FlightPlanPoint.print_full-123"><span class="linenos">123</span></a><span class="sd">		Print in full the information of the Point</span>
</span><span id="FlightPlanPoint.print_full-124"><a href="#FlightPlanPoint.print_full-124"><span class="linenos">124</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlanPoint.print_full-125"><a href="#FlightPlanPoint.print_full-125"><span class="linenos">125</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="s2">&quot;number &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number_order</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-126"><a href="#FlightPlanPoint.print_full-126"><span class="linenos">126</span></a>					<span class="o">+</span> <span class="s2">&quot;name &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-127"><a href="#FlightPlanPoint.print_full-127"><span class="linenos">127</span></a>					<span class="o">+</span> <span class="s2">&quot;coords &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-128"><a href="#FlightPlanPoint.print_full-128"><span class="linenos">128</span></a>					<span class="o">+</span> <span class="s2">&quot;alt &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-129"><a href="#FlightPlanPoint.print_full-129"><span class="linenos">129</span></a>					<span class="o">+</span> <span class="s2">&quot;time &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">time_min</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-130"><a href="#FlightPlanPoint.print_full-130"><span class="linenos">130</span></a>					<span class="o">+</span> <span class="s2">&quot;planned time segment &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_time</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-131"><a href="#FlightPlanPoint.print_full-131"><span class="linenos">131</span></a>					<span class="o">+</span> <span class="s2">&quot;planned dist segment &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-132"><a href="#FlightPlanPoint.print_full-132"><span class="linenos">132</span></a>					<span class="o">+</span> <span class="s2">&quot;dist_from_orig &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-133"><a href="#FlightPlanPoint.print_full-133"><span class="linenos">133</span></a>					<span class="o">+</span> <span class="s2">&quot;dist_to_dest &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dist_to_dest_nm</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-134"><a href="#FlightPlanPoint.print_full-134"><span class="linenos">134</span></a>					<span class="o">+</span> <span class="s2">&quot;event &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-135"><a href="#FlightPlanPoint.print_full-135"><span class="linenos">135</span></a>					<span class="o">+</span> <span class="s2">&quot;wind &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wind</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-136"><a href="#FlightPlanPoint.print_full-136"><span class="linenos">136</span></a>					<span class="o">+</span> <span class="s2">&quot;ansp &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ansp</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-137"><a href="#FlightPlanPoint.print_full-137"><span class="linenos">137</span></a>					<span class="o">+</span> <span class="s2">&quot;weight &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-138"><a href="#FlightPlanPoint.print_full-138"><span class="linenos">138</span></a>					<span class="o">+</span> <span class="s2">&quot;fuel &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-139"><a href="#FlightPlanPoint.print_full-139"><span class="linenos">139</span></a>					<span class="o">+</span> <span class="s2">&quot;speed kt &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">planned_segment_speed_kt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlanPoint.print_full-140"><a href="#FlightPlanPoint.print_full-140"><span class="linenos">140</span></a>					<span class="o">+</span> <span class="s2">&quot;dict speeds &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">)</span>
</span><span id="FlightPlanPoint.print_full-141"><a href="#FlightPlanPoint.print_full-141"><span class="linenos">141</span></a>
</span><span id="FlightPlanPoint.print_full-142"><a href="#FlightPlanPoint.print_full-142"><span class="linenos">142</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlanPoint.print_full-143"><a href="#FlightPlanPoint.print_full-143"><span class="linenos">143</span></a>			<span class="n">info_full</span> <span class="o">+=</span> <span class="s2">&quot;min_uncertainty: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_uncertainty</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlanPoint.print_full-144"><a href="#FlightPlanPoint.print_full-144"><span class="linenos">144</span></a>			<span class="n">info_full</span> <span class="o">+=</span> <span class="s2">&quot;nm_uncertainty: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nm_uncertainty</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlanPoint.print_full-145"><a href="#FlightPlanPoint.print_full-145"><span class="linenos">145</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlanPoint.print_full-146"><a href="#FlightPlanPoint.print_full-146"><span class="linenos">146</span></a>			<span class="k">pass</span>
</span><span id="FlightPlanPoint.print_full-147"><a href="#FlightPlanPoint.print_full-147"><span class="linenos">147</span></a>
</span><span id="FlightPlanPoint.print_full-148"><a href="#FlightPlanPoint.print_full-148"><span class="linenos">148</span></a>		<span class="k">return</span> <span class="n">info_full</span>
</span></pre></div>


            <div class="docstring"><p>Print in full the information of the Point</p>
</div>


                            </div>
                </section>
                <section id="FlightPlan">
                            <input id="FlightPlan-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">FlightPlan</span>:

                <label class="view-source-button" for="FlightPlan-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan-151"><a href="#FlightPlan-151"><span class="linenos"> 151</span></a><span class="k">class</span> <span class="nc">FlightPlan</span><span class="p">:</span>
</span><span id="FlightPlan-152"><a href="#FlightPlan-152"><span class="linenos"> 152</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan-153"><a href="#FlightPlan-153"><span class="linenos"> 153</span></a><span class="sd">	FlighPlan object.</span>
</span><span id="FlightPlan-154"><a href="#FlightPlan-154"><span class="linenos"> 154</span></a><span class="sd">	A flight plan does generally composed by a list of FlightPoints, but it&#39;s not only that.</span>
</span><span id="FlightPlan-155"><a href="#FlightPlan-155"><span class="linenos"> 155</span></a><span class="sd">	It contains the information of the planned flight plan and also of the realisation of the flight.</span>
</span><span id="FlightPlan-156"><a href="#FlightPlan-156"><span class="linenos"> 156</span></a><span class="sd">	So, in reality it keeps track of both, of the plan (which can be updated), the trajectory ahead (which could</span>
</span><span id="FlightPlan-157"><a href="#FlightPlan-157"><span class="linenos"> 157</span></a><span class="sd">	contain uncertainty), and the realisation of the flight trajectory (once flown and during the flight).</span>
</span><span id="FlightPlan-158"><a href="#FlightPlan-158"><span class="linenos"> 158</span></a><span class="sd">	We could consider in the future to disentangle some of this in different objects/elements.</span>
</span><span id="FlightPlan-159"><a href="#FlightPlan-159"><span class="linenos"> 159</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="FlightPlan-160"><a href="#FlightPlan-160"><span class="linenos"> 160</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp_pool_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crco_cost_EUR</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fuel_price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="FlightPlan-161"><a href="#FlightPlan-161"><span class="linenos"> 161</span></a>		<span class="n">unique_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">flight_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destination_airport_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="FlightPlan-162"><a href="#FlightPlan-162"><span class="linenos"> 162</span></a>		<span class="n">origin_airport_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">eobt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sobt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sibt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="FlightPlan-163"><a href="#FlightPlan-163"><span class="linenos"> 163</span></a>		<span class="n">status</span><span class="o">=</span><span class="s1">&#39;non-submitted&#39;</span><span class="p">,</span> <span class="n">origin_icao</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destination_icao</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="FlightPlan-164"><a href="#FlightPlan-164"><span class="linenos"> 164</span></a>		
</span><span id="FlightPlan-165"><a href="#FlightPlan-165"><span class="linenos"> 165</span></a>		<span class="c1"># Static information about the flight plan</span>
</span><span id="FlightPlan-166"><a href="#FlightPlan-166"><span class="linenos"> 166</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fp_pool_id</span> <span class="o">=</span> <span class="n">fp_pool_id</span>
</span><span id="FlightPlan-167"><a href="#FlightPlan-167"><span class="linenos"> 167</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">crco_cost_EUR</span> <span class="o">=</span> <span class="n">crco_cost_EUR</span>
</span><span id="FlightPlan-168"><a href="#FlightPlan-168"><span class="linenos"> 168</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span> <span class="o">=</span> <span class="n">unique_id</span>
</span><span id="FlightPlan-169"><a href="#FlightPlan-169"><span class="linenos"> 169</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">origin_airport_uid</span> <span class="o">=</span> <span class="n">origin_airport_uid</span>
</span><span id="FlightPlan-170"><a href="#FlightPlan-170"><span class="linenos"> 170</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">destination_airport_uid</span> <span class="o">=</span> <span class="n">destination_airport_uid</span>
</span><span id="FlightPlan-171"><a href="#FlightPlan-171"><span class="linenos"> 171</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">origin_icao</span> <span class="o">=</span> <span class="n">origin_icao</span>
</span><span id="FlightPlan-172"><a href="#FlightPlan-172"><span class="linenos"> 172</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">destination_icao</span> <span class="o">=</span> <span class="n">destination_icao</span>
</span><span id="FlightPlan-173"><a href="#FlightPlan-173"><span class="linenos"> 173</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">flight_uid</span> <span class="o">=</span> <span class="n">flight_uid</span>
</span><span id="FlightPlan-174"><a href="#FlightPlan-174"><span class="linenos"> 174</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fuel_price</span> <span class="o">=</span> <span class="n">fuel_price</span>
</span><span id="FlightPlan-175"><a href="#FlightPlan-175"><span class="linenos"> 175</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">bada_code_ac_model</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Aircaft type used for the flight</span>
</span><span id="FlightPlan-176"><a href="#FlightPlan-176"><span class="linenos"> 176</span></a>
</span><span id="FlightPlan-177"><a href="#FlightPlan-177"><span class="linenos"> 177</span></a>		<span class="c1"># List of Points that define the originally planned flight plan</span>
</span><span id="FlightPlan-178"><a href="#FlightPlan-178"><span class="linenos"> 178</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</span><span id="FlightPlan-179"><a href="#FlightPlan-179"><span class="linenos"> 179</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dict_points_original_planned_number</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="FlightPlan-180"><a href="#FlightPlan-180"><span class="linenos"> 180</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</span><span id="FlightPlan-181"><a href="#FlightPlan-181"><span class="linenos"> 181</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-182"><a href="#FlightPlan-182"><span class="linenos"> 182</span></a>
</span><span id="FlightPlan-183"><a href="#FlightPlan-183"><span class="linenos"> 183</span></a>		<span class="c1"># Points planned for the descend phase</span>
</span><span id="FlightPlan-184"><a href="#FlightPlan-184"><span class="linenos"> 184</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-185"><a href="#FlightPlan-185"><span class="linenos"> 185</span></a>		<span class="c1"># Point to be used if DCI is used, the descent will be &#39;steeper&#39; and the cruise a bit longer</span>
</span><span id="FlightPlan-186"><a href="#FlightPlan-186"><span class="linenos"> 186</span></a>		<span class="c1"># This has been pre-computed based on ac performance when speeding up.</span>
</span><span id="FlightPlan-187"><a href="#FlightPlan-187"><span class="linenos"> 187</span></a>		<span class="c1"># This is to have more &#39;realistic&#39; speed increments, as otherwise the delay that can be recovered</span>
</span><span id="FlightPlan-188"><a href="#FlightPlan-188"><span class="linenos"> 188</span></a>		<span class="c1"># by speeding up is very low. This won&#39;t be needed if full 4D trajectories are updated when</span>
</span><span id="FlightPlan-189"><a href="#FlightPlan-189"><span class="linenos"> 189</span></a>		<span class="c1"># speed adjustments done.</span>
</span><span id="FlightPlan-190"><a href="#FlightPlan-190"><span class="linenos"> 190</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-191"><a href="#FlightPlan-191"><span class="linenos"> 191</span></a>		<span class="c1"># By how much the cruise is extended if speed increment is done (DCI on)</span>
</span><span id="FlightPlan-192"><a href="#FlightPlan-192"><span class="linenos"> 192</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-193"><a href="#FlightPlan-193"><span class="linenos"> 193</span></a>
</span><span id="FlightPlan-194"><a href="#FlightPlan-194"><span class="linenos"> 194</span></a>		<span class="c1"># Current point in the flight plan</span>
</span><span id="FlightPlan-195"><a href="#FlightPlan-195"><span class="linenos"> 195</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-196"><a href="#FlightPlan-196"><span class="linenos"> 196</span></a>
</span><span id="FlightPlan-197"><a href="#FlightPlan-197"><span class="linenos"> 197</span></a>		<span class="c1"># List of FPPoints that have already been flown</span>
</span><span id="FlightPlan-198"><a href="#FlightPlan-198"><span class="linenos"> 198</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-199"><a href="#FlightPlan-199"><span class="linenos"> 199</span></a>
</span><span id="FlightPlan-200"><a href="#FlightPlan-200"><span class="linenos"> 200</span></a>		<span class="c1"># Flight status could be:</span>
</span><span id="FlightPlan-201"><a href="#FlightPlan-201"><span class="linenos"> 201</span></a>		<span class="c1"># - non-submitted</span>
</span><span id="FlightPlan-202"><a href="#FlightPlan-202"><span class="linenos"> 202</span></a>		<span class="c1"># - boarding</span>
</span><span id="FlightPlan-203"><a href="#FlightPlan-203"><span class="linenos"> 203</span></a>		<span class="c1"># - push-back-ready</span>
</span><span id="FlightPlan-204"><a href="#FlightPlan-204"><span class="linenos"> 204</span></a>		<span class="c1"># - climbing</span>
</span><span id="FlightPlan-205"><a href="#FlightPlan-205"><span class="linenos"> 205</span></a>		<span class="c1"># - descending</span>
</span><span id="FlightPlan-206"><a href="#FlightPlan-206"><span class="linenos"> 206</span></a>		<span class="c1"># - cruising</span>
</span><span id="FlightPlan-207"><a href="#FlightPlan-207"><span class="linenos"> 207</span></a>		<span class="c1"># - landed</span>
</span><span id="FlightPlan-208"><a href="#FlightPlan-208"><span class="linenos"> 208</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
</span><span id="FlightPlan-209"><a href="#FlightPlan-209"><span class="linenos"> 209</span></a>
</span><span id="FlightPlan-210"><a href="#FlightPlan-210"><span class="linenos"> 210</span></a>		<span class="c1"># Difference in time between executed flight plan and planned one</span>
</span><span id="FlightPlan-211"><a href="#FlightPlan-211"><span class="linenos"> 211</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-212"><a href="#FlightPlan-212"><span class="linenos"> 212</span></a>
</span><span id="FlightPlan-213"><a href="#FlightPlan-213"><span class="linenos"> 213</span></a>		<span class="c1"># EOBT, SOBT, SIBT</span>
</span><span id="FlightPlan-214"><a href="#FlightPlan-214"><span class="linenos"> 214</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="n">eobt</span>
</span><span id="FlightPlan-215"><a href="#FlightPlan-215"><span class="linenos"> 215</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">sobt</span> <span class="o">=</span> <span class="n">sobt</span>
</span><span id="FlightPlan-216"><a href="#FlightPlan-216"><span class="linenos"> 216</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">sibt</span> <span class="o">=</span> <span class="n">sibt</span>
</span><span id="FlightPlan-217"><a href="#FlightPlan-217"><span class="linenos"> 217</span></a>
</span><span id="FlightPlan-218"><a href="#FlightPlan-218"><span class="linenos"> 218</span></a>		<span class="c1"># COBT and ATFM delay information if regulated</span>
</span><span id="FlightPlan-219"><a href="#FlightPlan-219"><span class="linenos"> 219</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-220"><a href="#FlightPlan-220"><span class="linenos"> 220</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-221"><a href="#FlightPlan-221"><span class="linenos"> 221</span></a>
</span><span id="FlightPlan-222"><a href="#FlightPlan-222"><span class="linenos"> 222</span></a>		<span class="c1"># Amount of reactionary delay (if any)</span>
</span><span id="FlightPlan-223"><a href="#FlightPlan-223"><span class="linenos"> 223</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">reactionary_delay</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-224"><a href="#FlightPlan-224"><span class="linenos"> 224</span></a>
</span><span id="FlightPlan-225"><a href="#FlightPlan-225"><span class="linenos"> 225</span></a>		<span class="c1"># Taxi out and in times</span>
</span><span id="FlightPlan-226"><a href="#FlightPlan-226"><span class="linenos"> 226</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">exot</span> <span class="o">=</span> <span class="mi">0</span> 
</span><span id="FlightPlan-227"><a href="#FlightPlan-227"><span class="linenos"> 227</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">exit</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-228"><a href="#FlightPlan-228"><span class="linenos"> 228</span></a>
</span><span id="FlightPlan-229"><a href="#FlightPlan-229"><span class="linenos"> 229</span></a>		<span class="c1"># Actual times</span>
</span><span id="FlightPlan-230"><a href="#FlightPlan-230"><span class="linenos"> 230</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-231"><a href="#FlightPlan-231"><span class="linenos"> 231</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-232"><a href="#FlightPlan-232"><span class="linenos"> 232</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">axot</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-233"><a href="#FlightPlan-233"><span class="linenos"> 233</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">axit</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-234"><a href="#FlightPlan-234"><span class="linenos"> 234</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">pbrt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-235"><a href="#FlightPlan-235"><span class="linenos"> 235</span></a>
</span><span id="FlightPlan-236"><a href="#FlightPlan-236"><span class="linenos"> 236</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atot</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Actual take-off time</span>
</span><span id="FlightPlan-237"><a href="#FlightPlan-237"><span class="linenos"> 237</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">alt</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Actual landing time</span>
</span><span id="FlightPlan-238"><a href="#FlightPlan-238"><span class="linenos"> 238</span></a>
</span><span id="FlightPlan-239"><a href="#FlightPlan-239"><span class="linenos"> 239</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eibt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-240"><a href="#FlightPlan-240"><span class="linenos"> 240</span></a>
</span><span id="FlightPlan-241"><a href="#FlightPlan-241"><span class="linenos"> 241</span></a>		<span class="c1"># Holding time and fuel</span>
</span><span id="FlightPlan-242"><a href="#FlightPlan-242"><span class="linenos"> 242</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-243"><a href="#FlightPlan-243"><span class="linenos"> 243</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_fuel</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-244"><a href="#FlightPlan-244"><span class="linenos"> 244</span></a>
</span><span id="FlightPlan-245"><a href="#FlightPlan-245"><span class="linenos"> 245</span></a>		<span class="c1"># Arrival delay provided by EAMAN (planned and actual)</span>
</span><span id="FlightPlan-246"><a href="#FlightPlan-246"><span class="linenos"> 246</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_assigned_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-247"><a href="#FlightPlan-247"><span class="linenos"> 247</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_absorbed_air</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-248"><a href="#FlightPlan-248"><span class="linenos"> 248</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_perc_selected</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-249"><a href="#FlightPlan-249"><span class="linenos"> 249</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_fuel</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-250"><a href="#FlightPlan-250"><span class="linenos"> 250</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_clt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-251"><a href="#FlightPlan-251"><span class="linenos"> 251</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_tactical_assigned_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-252"><a href="#FlightPlan-252"><span class="linenos"> 252</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_tactical_clt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-253"><a href="#FlightPlan-253"><span class="linenos"> 253</span></a>
</span><span id="FlightPlan-254"><a href="#FlightPlan-254"><span class="linenos"> 254</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">clt</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Control landing time if assigned</span>
</span><span id="FlightPlan-255"><a href="#FlightPlan-255"><span class="linenos"> 255</span></a>
</span><span id="FlightPlan-256"><a href="#FlightPlan-256"><span class="linenos"> 256</span></a>		<span class="c1"># DCI</span>
</span><span id="FlightPlan-257"><a href="#FlightPlan-257"><span class="linenos"> 257</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_decisions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list of dictionaries with dci decisions</span>
</span><span id="FlightPlan-258"><a href="#FlightPlan-258"><span class="linenos"> 258</span></a>		
</span><span id="FlightPlan-259"><a href="#FlightPlan-259"><span class="linenos"> 259</span></a>		<span class="c1"># WFP</span>
</span><span id="FlightPlan-260"><a href="#FlightPlan-260"><span class="linenos"> 260</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wfp_decisions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-261"><a href="#FlightPlan-261"><span class="linenos"> 261</span></a>
</span><span id="FlightPlan-262"><a href="#FlightPlan-262"><span class="linenos"> 262</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">curfew</span> <span class="o">=</span> <span class="mi">9999999999999999999</span>
</span><span id="FlightPlan-263"><a href="#FlightPlan-263"><span class="linenos"> 263</span></a>
</span><span id="FlightPlan-264"><a href="#FlightPlan-264"><span class="linenos"> 264</span></a>	<span class="k">def</span> <span class="nf">get_estimated_fuel_consumption</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-265"><a href="#FlightPlan-265"><span class="linenos"> 265</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan-266"><a href="#FlightPlan-266"><span class="linenos"> 266</span></a><span class="sd">		Assumes first and last are takeoff and landing and that</span>
</span><span id="FlightPlan-267"><a href="#FlightPlan-267"><span class="linenos"> 267</span></a><span class="sd">		they have been named already.</span>
</span><span id="FlightPlan-268"><a href="#FlightPlan-268"><span class="linenos"> 268</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan-269"><a href="#FlightPlan-269"><span class="linenos"> 269</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span>  <span class="c1"># - self.points[&#39;takeoff&#39;].fuel</span>
</span><span id="FlightPlan-270"><a href="#FlightPlan-270"><span class="linenos"> 270</span></a>
</span><span id="FlightPlan-271"><a href="#FlightPlan-271"><span class="linenos"> 271</span></a>	<span class="k">def</span> <span class="nf">get_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="FlightPlan-272"><a href="#FlightPlan-272"><span class="linenos"> 272</span></a>		<span class="k">if</span> <span class="n">number</span><span class="o">&gt;=</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):</span>
</span><span id="FlightPlan-273"><a href="#FlightPlan-273"><span class="linenos"> 273</span></a>			<span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span><span class="p">[</span><span class="n">number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()))]</span>
</span><span id="FlightPlan-274"><a href="#FlightPlan-274"><span class="linenos"> 274</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-275"><a href="#FlightPlan-275"><span class="linenos"> 275</span></a>			<span class="n">p</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">number</span><span class="p">]</span>
</span><span id="FlightPlan-276"><a href="#FlightPlan-276"><span class="linenos"> 276</span></a>		<span class="k">return</span> <span class="n">p</span>
</span><span id="FlightPlan-277"><a href="#FlightPlan-277"><span class="linenos"> 277</span></a>
</span><span id="FlightPlan-278"><a href="#FlightPlan-278"><span class="linenos"> 278</span></a>	<span class="k">def</span> <span class="nf">get_current_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-279"><a href="#FlightPlan-279"><span class="linenos"> 279</span></a>		<span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
</span><span id="FlightPlan-280"><a href="#FlightPlan-280"><span class="linenos"> 280</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_point</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="FlightPlan-281"><a href="#FlightPlan-281"><span class="linenos"> 281</span></a>
</span><span id="FlightPlan-282"><a href="#FlightPlan-282"><span class="linenos"> 282</span></a>	<span class="k">def</span> <span class="nf">get_dist_to_dest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-283"><a href="#FlightPlan-283"><span class="linenos"> 283</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_point</span><span class="p">()</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan-284"><a href="#FlightPlan-284"><span class="linenos"> 284</span></a>
</span><span id="FlightPlan-285"><a href="#FlightPlan-285"><span class="linenos"> 285</span></a>	<span class="k">def</span> <span class="nf">copy_point_from_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="FlightPlan-286"><a href="#FlightPlan-286"><span class="linenos"> 286</span></a>		<span class="k">return</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_point</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>
</span><span id="FlightPlan-287"><a href="#FlightPlan-287"><span class="linenos"> 287</span></a>		<span class="c1"># if number&gt;=len(list(self.points_planned.values())):</span>
</span><span id="FlightPlan-288"><a href="#FlightPlan-288"><span class="linenos"> 288</span></a>		<span class="c1"># 	p = copy(self.points_tod_landing[number-len(list(self.points_planned.values()))])</span>
</span><span id="FlightPlan-289"><a href="#FlightPlan-289"><span class="linenos"> 289</span></a>		<span class="c1"># else:</span>
</span><span id="FlightPlan-290"><a href="#FlightPlan-290"><span class="linenos"> 290</span></a>		<span class="c1"># 	p = copy(list(self.points_planned.values())[number]) </span>
</span><span id="FlightPlan-291"><a href="#FlightPlan-291"><span class="linenos"> 291</span></a>		<span class="c1"># return p</span>
</span><span id="FlightPlan-292"><a href="#FlightPlan-292"><span class="linenos"> 292</span></a>
</span><span id="FlightPlan-293"><a href="#FlightPlan-293"><span class="linenos"> 293</span></a>	<span class="k">def</span> <span class="nf">get_list_points_missing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_number</span><span class="p">,</span> <span class="n">dci_landing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="FlightPlan-294"><a href="#FlightPlan-294"><span class="linenos"> 294</span></a>		<span class="k">if</span> <span class="n">from_number</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):</span>
</span><span id="FlightPlan-295"><a href="#FlightPlan-295"><span class="linenos"> 295</span></a>			<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">from_number</span><span class="p">:]</span>
</span><span id="FlightPlan-296"><a href="#FlightPlan-296"><span class="linenos"> 296</span></a>
</span><span id="FlightPlan-297"><a href="#FlightPlan-297"><span class="linenos"> 297</span></a>			<span class="c1"># print(len(self.points_dci_tod_landing),len(self.points_tod_landing))</span>
</span><span id="FlightPlan-298"><a href="#FlightPlan-298"><span class="linenos"> 298</span></a>			<span class="c1"># for p in self.points_tod_landing:</span>
</span><span id="FlightPlan-299"><a href="#FlightPlan-299"><span class="linenos"> 299</span></a>			<span class="c1">#     print(p.print_full())</span>
</span><span id="FlightPlan-300"><a href="#FlightPlan-300"><span class="linenos"> 300</span></a>			<span class="c1"># print(&quot;---&quot;)</span>
</span><span id="FlightPlan-301"><a href="#FlightPlan-301"><span class="linenos"> 301</span></a>
</span><span id="FlightPlan-302"><a href="#FlightPlan-302"><span class="linenos"> 302</span></a>			<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="FlightPlan-303"><a href="#FlightPlan-303"><span class="linenos"> 303</span></a>				<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="FlightPlan-304"><a href="#FlightPlan-304"><span class="linenos"> 304</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-305"><a href="#FlightPlan-305"><span class="linenos"> 305</span></a>				<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span>
</span><span id="FlightPlan-306"><a href="#FlightPlan-306"><span class="linenos"> 306</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-307"><a href="#FlightPlan-307"><span class="linenos"> 307</span></a>			<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="FlightPlan-308"><a href="#FlightPlan-308"><span class="linenos"> 308</span></a>				<span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">from_number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):]</span>
</span><span id="FlightPlan-309"><a href="#FlightPlan-309"><span class="linenos"> 309</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-310"><a href="#FlightPlan-310"><span class="linenos"> 310</span></a>				<span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span><span class="p">[</span><span class="n">from_number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):]</span>
</span><span id="FlightPlan-311"><a href="#FlightPlan-311"><span class="linenos"> 311</span></a>
</span><span id="FlightPlan-312"><a href="#FlightPlan-312"><span class="linenos"> 312</span></a>		<span class="k">return</span> <span class="n">l</span>
</span><span id="FlightPlan-313"><a href="#FlightPlan-313"><span class="linenos"> 313</span></a>
</span><span id="FlightPlan-314"><a href="#FlightPlan-314"><span class="linenos"> 314</span></a>	<span class="k">def</span> <span class="nf">get_points_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dci_landing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="FlightPlan-315"><a href="#FlightPlan-315"><span class="linenos"> 315</span></a>		<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[:]</span>
</span><span id="FlightPlan-316"><a href="#FlightPlan-316"><span class="linenos"> 316</span></a>		<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="FlightPlan-317"><a href="#FlightPlan-317"><span class="linenos"> 317</span></a>			<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="FlightPlan-318"><a href="#FlightPlan-318"><span class="linenos"> 318</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-319"><a href="#FlightPlan-319"><span class="linenos"> 319</span></a>			<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span>
</span><span id="FlightPlan-320"><a href="#FlightPlan-320"><span class="linenos"> 320</span></a>
</span><span id="FlightPlan-321"><a href="#FlightPlan-321"><span class="linenos"> 321</span></a>		<span class="k">return</span> <span class="n">l</span>
</span><span id="FlightPlan-322"><a href="#FlightPlan-322"><span class="linenos"> 322</span></a>
</span><span id="FlightPlan-323"><a href="#FlightPlan-323"><span class="linenos"> 323</span></a>	<span class="k">def</span> <span class="nf">prepare_accepted_fp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_cruise</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="FlightPlan-324"><a href="#FlightPlan-324"><span class="linenos"> 324</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-325"><a href="#FlightPlan-325"><span class="linenos"> 325</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">compute_speeds_original_planned</span><span class="p">()</span>
</span><span id="FlightPlan-326"><a href="#FlightPlan-326"><span class="linenos"> 326</span></a>
</span><span id="FlightPlan-327"><a href="#FlightPlan-327"><span class="linenos"> 327</span></a>		<span class="n">doing_landing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan-328"><a href="#FlightPlan-328"><span class="linenos"> 328</span></a>
</span><span id="FlightPlan-329"><a href="#FlightPlan-329"><span class="linenos"> 329</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan-330"><a href="#FlightPlan-330"><span class="linenos"> 330</span></a>			<span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;TOD&quot;</span><span class="p">:</span>
</span><span id="FlightPlan-331"><a href="#FlightPlan-331"><span class="linenos"> 331</span></a>				<span class="n">doing_landing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan-332"><a href="#FlightPlan-332"><span class="linenos"> 332</span></a>
</span><span id="FlightPlan-333"><a href="#FlightPlan-333"><span class="linenos"> 333</span></a>			<span class="k">if</span> <span class="n">doing_landing</span><span class="p">:</span>
</span><span id="FlightPlan-334"><a href="#FlightPlan-334"><span class="linenos"> 334</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">+=</span> <span class="p">[</span><span class="n">copy</span><span class="p">(</span><span class="n">v</span><span class="p">)]</span>
</span><span id="FlightPlan-335"><a href="#FlightPlan-335"><span class="linenos"> 335</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-336"><a href="#FlightPlan-336"><span class="linenos"> 336</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="FlightPlan-337"><a href="#FlightPlan-337"><span class="linenos"> 337</span></a>
</span><span id="FlightPlan-338"><a href="#FlightPlan-338"><span class="linenos"> 338</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span>
</span><span id="FlightPlan-339"><a href="#FlightPlan-339"><span class="linenos"> 339</span></a>
</span><span id="FlightPlan-340"><a href="#FlightPlan-340"><span class="linenos"> 340</span></a>	<span class="k">def</span> <span class="nf">update_speed_percentage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">perc_selected</span><span class="p">,</span> <span class="n">change_tod_dci</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="FlightPlan-341"><a href="#FlightPlan-341"><span class="linenos"> 341</span></a>		<span class="k">if</span> <span class="n">change_tod_dci</span><span class="p">:</span>
</span><span id="FlightPlan-342"><a href="#FlightPlan-342"><span class="linenos"> 342</span></a>			<span class="c1"># Doing speed variation, therefore change tod</span>
</span><span id="FlightPlan-343"><a href="#FlightPlan-343"><span class="linenos"> 343</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="FlightPlan-344"><a href="#FlightPlan-344"><span class="linenos"> 344</span></a>
</span><span id="FlightPlan-345"><a href="#FlightPlan-345"><span class="linenos"> 345</span></a>		<span class="n">points_missing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_list_points_missing</span><span class="p">(</span><span class="n">from_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_point</span><span class="p">)</span>
</span><span id="FlightPlan-346"><a href="#FlightPlan-346"><span class="linenos"> 346</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points_missing</span><span class="p">:</span>
</span><span id="FlightPlan-347"><a href="#FlightPlan-347"><span class="linenos"> 347</span></a>			<span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_selected&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">perc_selected</span>
</span><span id="FlightPlan-348"><a href="#FlightPlan-348"><span class="linenos"> 348</span></a>
</span><span id="FlightPlan-349"><a href="#FlightPlan-349"><span class="linenos"> 349</span></a>	<span class="k">def</span> <span class="nf">get_copy_points_from_tod_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-350"><a href="#FlightPlan-350"><span class="linenos"> 350</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">copy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span><span class="p">]</span>
</span><span id="FlightPlan-351"><a href="#FlightPlan-351"><span class="linenos"> 351</span></a>
</span><span id="FlightPlan-352"><a href="#FlightPlan-352"><span class="linenos"> 352</span></a>	<span class="k">def</span> <span class="nf">set_extra_cruise_dci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_cruise_dci</span><span class="p">):</span>
</span><span id="FlightPlan-353"><a href="#FlightPlan-353"><span class="linenos"> 353</span></a>		<span class="n">swap</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-354"><a href="#FlightPlan-354"><span class="linenos"> 354</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-355"><a href="#FlightPlan-355"><span class="linenos"> 355</span></a>			<span class="n">point_at_tod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan-356"><a href="#FlightPlan-356"><span class="linenos"> 356</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-357"><a href="#FlightPlan-357"><span class="linenos"> 357</span></a>			<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-358"><a href="#FlightPlan-358"><span class="linenos"> 358</span></a>			<span class="k">raise</span>
</span><span id="FlightPlan-359"><a href="#FlightPlan-359"><span class="linenos"> 359</span></a>		<span class="n">min_descent</span> <span class="o">=</span> <span class="mi">30</span>  <span class="c1"># Keep at least 30 nm for descent even if cruise is extended</span>
</span><span id="FlightPlan-360"><a href="#FlightPlan-360"><span class="linenos"> 360</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">,</span> <span class="n">extra_cruise_dci</span><span class="o">-</span><span class="p">(</span><span class="n">min_descent</span><span class="o">+</span><span class="n">extra_cruise_dci</span><span class="o">-</span><span class="n">point_at_tod</span><span class="o">.</span><span class="n">dist_to_dest_nm</span><span class="p">)))</span>
</span><span id="FlightPlan-361"><a href="#FlightPlan-361"><span class="linenos"> 361</span></a>		<span class="n">extra_cruise_dci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span>
</span><span id="FlightPlan-362"><a href="#FlightPlan-362"><span class="linenos"> 362</span></a>
</span><span id="FlightPlan-363"><a href="#FlightPlan-363"><span class="linenos"> 363</span></a>		<span class="c1"># Copy queue as planned</span>
</span><span id="FlightPlan-364"><a href="#FlightPlan-364"><span class="linenos"> 364</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_copy_points_from_tod_planned</span><span class="p">()</span>
</span><span id="FlightPlan-365"><a href="#FlightPlan-365"><span class="linenos"> 365</span></a>
</span><span id="FlightPlan-366"><a href="#FlightPlan-366"><span class="linenos"> 366</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan-367"><a href="#FlightPlan-367"><span class="linenos"> 367</span></a>		<span class="c1"># 	print()</span>
</span><span id="FlightPlan-368"><a href="#FlightPlan-368"><span class="linenos"> 368</span></a>		<span class="c1"># 	print(&#39;ALOOOOOOOOOOOOOOOOOOOOOO self.points_dci_tod_landing:&#39;, self.points_dci_tod_landing)</span>
</span><span id="FlightPlan-369"><a href="#FlightPlan-369"><span class="linenos"> 369</span></a>		<span class="c1"># 	print(&#39;Points before extra cruise applied:&#39;)</span>
</span><span id="FlightPlan-370"><a href="#FlightPlan-370"><span class="linenos"> 370</span></a>		<span class="c1"># 	print(self.print_full())</span>
</span><span id="FlightPlan-371"><a href="#FlightPlan-371"><span class="linenos"> 371</span></a>
</span><span id="FlightPlan-372"><a href="#FlightPlan-372"><span class="linenos"> 372</span></a>		<span class="c1"># Time on previous point from TOD</span>
</span><span id="FlightPlan-373"><a href="#FlightPlan-373"><span class="linenos"> 373</span></a>		<span class="n">prev_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="FlightPlan-374"><a href="#FlightPlan-374"><span class="linenos"> 374</span></a>
</span><span id="FlightPlan-375"><a href="#FlightPlan-375"><span class="linenos"> 375</span></a>		<span class="c1"># Distance form origin of the previous point</span>
</span><span id="FlightPlan-376"><a href="#FlightPlan-376"><span class="linenos"> 376</span></a>		<span class="n">dist_from_orig_nm_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span>
</span><span id="FlightPlan-377"><a href="#FlightPlan-377"><span class="linenos"> 377</span></a>
</span><span id="FlightPlan-378"><a href="#FlightPlan-378"><span class="linenos"> 378</span></a>		<span class="n">i_tod</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-379"><a href="#FlightPlan-379"><span class="linenos"> 379</span></a>
</span><span id="FlightPlan-380"><a href="#FlightPlan-380"><span class="linenos"> 380</span></a>		<span class="c1"># Extend TOD by extra cruise</span>
</span><span id="FlightPlan-381"><a href="#FlightPlan-381"><span class="linenos"> 381</span></a>		<span class="n">dist_to_dest_planned_from_tod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan-382"><a href="#FlightPlan-382"><span class="linenos"> 382</span></a>		<span class="n">cruise_fl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> 
</span><span id="FlightPlan-383"><a href="#FlightPlan-383"><span class="linenos"> 383</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">+=</span> <span class="n">extra_cruise_dci</span>
</span><span id="FlightPlan-384"><a href="#FlightPlan-384"><span class="linenos"> 384</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">-=</span> <span class="n">extra_cruise_dci</span>
</span><span id="FlightPlan-385"><a href="#FlightPlan-385"><span class="linenos"> 385</span></a>
</span><span id="FlightPlan-386"><a href="#FlightPlan-386"><span class="linenos"> 386</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">+=</span> <span class="n">extra_cruise_dci</span>
</span><span id="FlightPlan-387"><a href="#FlightPlan-387"><span class="linenos"> 387</span></a>		
</span><span id="FlightPlan-388"><a href="#FlightPlan-388"><span class="linenos"> 388</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="n">i_tod</span>
</span><span id="FlightPlan-389"><a href="#FlightPlan-389"><span class="linenos"> 389</span></a>
</span><span id="FlightPlan-390"><a href="#FlightPlan-390"><span class="linenos"> 390</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-391"><a href="#FlightPlan-391"><span class="linenos"> 391</span></a>			<span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">:</span>
</span><span id="FlightPlan-392"><a href="#FlightPlan-392"><span class="linenos"> 392</span></a>				<span class="n">point_aux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span id="FlightPlan-393"><a href="#FlightPlan-393"><span class="linenos"> 393</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan-394"><a href="#FlightPlan-394"><span class="linenos"> 394</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">point_aux</span>
</span><span id="FlightPlan-395"><a href="#FlightPlan-395"><span class="linenos"> 395</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="n">cruise_fl</span>
</span><span id="FlightPlan-396"><a href="#FlightPlan-396"><span class="linenos"> 396</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">)</span>
</span><span id="FlightPlan-397"><a href="#FlightPlan-397"><span class="linenos"> 397</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan-398"><a href="#FlightPlan-398"><span class="linenos"> 398</span></a>				<span class="n">ansp_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span>
</span><span id="FlightPlan-399"><a href="#FlightPlan-399"><span class="linenos"> 399</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span>
</span><span id="FlightPlan-400"><a href="#FlightPlan-400"><span class="linenos"> 400</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="n">ansp_prev</span>
</span><span id="FlightPlan-401"><a href="#FlightPlan-401"><span class="linenos"> 401</span></a>				<span class="n">swap</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span><span id="FlightPlan-402"><a href="#FlightPlan-402"><span class="linenos"> 402</span></a>				<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan-403"><a href="#FlightPlan-403"><span class="linenos"> 403</span></a>
</span><span id="FlightPlan-404"><a href="#FlightPlan-404"><span class="linenos"> 404</span></a>				<span class="c1"># Recompute segment times and distances</span>
</span><span id="FlightPlan-405"><a href="#FlightPlan-405"><span class="linenos"> 405</span></a>				<span class="n">time_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan-406"><a href="#FlightPlan-406"><span class="linenos"> 406</span></a>				<span class="n">dist_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan-407"><a href="#FlightPlan-407"><span class="linenos"> 407</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span>
</span><span id="FlightPlan-408"><a href="#FlightPlan-408"><span class="linenos"> 408</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span>
</span><span id="FlightPlan-409"><a href="#FlightPlan-409"><span class="linenos"> 409</span></a>				
</span><span id="FlightPlan-410"><a href="#FlightPlan-410"><span class="linenos"> 410</span></a>				<span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-411"><a href="#FlightPlan-411"><span class="linenos"> 411</span></a>					<span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;FUCK&#39;</span><span class="p">)</span>
</span><span id="FlightPlan-412"><a href="#FlightPlan-412"><span class="linenos"> 412</span></a>				<span class="c1"># time_prev = self.points_dci_tod_landing[i-1].time_min</span>
</span><span id="FlightPlan-413"><a href="#FlightPlan-413"><span class="linenos"> 413</span></a>				<span class="c1"># dist_prev = self.points_dci_tod_landing[i-1].dist_from_orig_nm</span>
</span><span id="FlightPlan-414"><a href="#FlightPlan-414"><span class="linenos"> 414</span></a>				<span class="c1"># self.points_dci_tod_landing[i].planned_segment_time = self.points_dci_tod_landing[i].time_min - time_prev</span>
</span><span id="FlightPlan-415"><a href="#FlightPlan-415"><span class="linenos"> 415</span></a>				<span class="c1"># self.points_dci_tod_landing[i].planned_dist_segment_nm = self.points_dci_tod_landing[i].dist_from_orig_nm - dist_prev</span>
</span><span id="FlightPlan-416"><a href="#FlightPlan-416"><span class="linenos"> 416</span></a>				
</span><span id="FlightPlan-417"><a href="#FlightPlan-417"><span class="linenos"> 417</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-418"><a href="#FlightPlan-418"><span class="linenos"> 418</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;AAAAAAAAAAARGGGGGGGGG&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-419"><a href="#FlightPlan-419"><span class="linenos"> 419</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">)</span>
</span><span id="FlightPlan-420"><a href="#FlightPlan-420"><span class="linenos"> 420</span></a>			<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-421"><a href="#FlightPlan-421"><span class="linenos"> 421</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-------&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-422"><a href="#FlightPlan-422"><span class="linenos"> 422</span></a>			<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan-423"><a href="#FlightPlan-423"><span class="linenos"> 423</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-424"><a href="#FlightPlan-424"><span class="linenos"> 424</span></a>			<span class="k">raise</span>
</span><span id="FlightPlan-425"><a href="#FlightPlan-425"><span class="linenos"> 425</span></a>
</span><span id="FlightPlan-426"><a href="#FlightPlan-426"><span class="linenos"> 426</span></a>		<span class="n">i_tod</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="FlightPlan-427"><a href="#FlightPlan-427"><span class="linenos"> 427</span></a>
</span><span id="FlightPlan-428"><a href="#FlightPlan-428"><span class="linenos"> 428</span></a>		<span class="c1"># Now all swapped and we are at the first point that should be recomputed</span>
</span><span id="FlightPlan-429"><a href="#FlightPlan-429"><span class="linenos"> 429</span></a>		<span class="n">new_angle</span> <span class="o">=</span> <span class="n">cruise_fl</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan-430"><a href="#FlightPlan-430"><span class="linenos"> 430</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i_tod</span><span class="p">)</span>
</span><span id="FlightPlan-431"><a href="#FlightPlan-431"><span class="linenos"> 431</span></a>		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">):</span>
</span><span id="FlightPlan-432"><a href="#FlightPlan-432"><span class="linenos"> 432</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">*</span> <span class="n">new_angle</span>
</span><span id="FlightPlan-433"><a href="#FlightPlan-433"><span class="linenos"> 433</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan-434"><a href="#FlightPlan-434"><span class="linenos"> 434</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan-435"><a href="#FlightPlan-435"><span class="linenos"> 435</span></a>
</span><span id="FlightPlan-436"><a href="#FlightPlan-436"><span class="linenos"> 436</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_from_orig_nm_prev</span>
</span><span id="FlightPlan-437"><a href="#FlightPlan-437"><span class="linenos"> 437</span></a>
</span><span id="FlightPlan-438"><a href="#FlightPlan-438"><span class="linenos"> 438</span></a>		<span class="c1"># Now recompute time needed per segment</span>
</span><span id="FlightPlan-439"><a href="#FlightPlan-439"><span class="linenos"> 439</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan-440"><a href="#FlightPlan-440"><span class="linenos"> 440</span></a>			<span class="n">speed_planned_kt</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan-441"><a href="#FlightPlan-441"><span class="linenos"> 441</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-442"><a href="#FlightPlan-442"><span class="linenos"> 442</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">/</span> <span class="p">(</span><span class="n">speed_planned_kt</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">wind</span><span class="p">)</span>
</span><span id="FlightPlan-443"><a href="#FlightPlan-443"><span class="linenos"> 443</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-444"><a href="#FlightPlan-444"><span class="linenos"> 444</span></a>				<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-445"><a href="#FlightPlan-445"><span class="linenos"> 445</span></a>				<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-446"><a href="#FlightPlan-446"><span class="linenos"> 446</span></a>				<span class="k">for</span> <span class="n">wp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan-447"><a href="#FlightPlan-447"><span class="linenos"> 447</span></a>					<span class="nb">print</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-448"><a href="#FlightPlan-448"><span class="linenos"> 448</span></a>				<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HERE ERROR&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-449"><a href="#FlightPlan-449"><span class="linenos"> 449</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="p">,</span> <span class="n">speed_planned_kt</span><span class="p">)</span>
</span><span id="FlightPlan-450"><a href="#FlightPlan-450"><span class="linenos"> 450</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">number_order</span><span class="p">)</span>
</span><span id="FlightPlan-451"><a href="#FlightPlan-451"><span class="linenos"> 451</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="FlightPlan-452"><a href="#FlightPlan-452"><span class="linenos"> 452</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">)</span>
</span><span id="FlightPlan-453"><a href="#FlightPlan-453"><span class="linenos"> 453</span></a>				<span class="k">raise</span>
</span><span id="FlightPlan-454"><a href="#FlightPlan-454"><span class="linenos"> 454</span></a>
</span><span id="FlightPlan-455"><a href="#FlightPlan-455"><span class="linenos"> 455</span></a>			<span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="n">prev_time</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="FlightPlan-456"><a href="#FlightPlan-456"><span class="linenos"> 456</span></a>			<span class="n">prev_time</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan-457"><a href="#FlightPlan-457"><span class="linenos"> 457</span></a>
</span><span id="FlightPlan-458"><a href="#FlightPlan-458"><span class="linenos"> 458</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan-459"><a href="#FlightPlan-459"><span class="linenos"> 459</span></a>		<span class="c1"># 	print(&#39;Points after extra cruise applied:&#39;)</span>
</span><span id="FlightPlan-460"><a href="#FlightPlan-460"><span class="linenos"> 460</span></a>		<span class="c1"># 	print(self.print_full())</span>
</span><span id="FlightPlan-461"><a href="#FlightPlan-461"><span class="linenos"> 461</span></a>
</span><span id="FlightPlan-462"><a href="#FlightPlan-462"><span class="linenos"> 462</span></a>		<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">swap</span><span class="p">:</span>
</span><span id="FlightPlan-463"><a href="#FlightPlan-463"><span class="linenos"> 463</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan-464"><a href="#FlightPlan-464"><span class="linenos"> 464</span></a>			<span class="c1">#	print(&#39;Entering BRANCH in set extra cruise dci. self.points_dci_tod_landing: {} ; name: {}&#39;.format(self.points_dci_tod_landing, s))</span>
</span><span id="FlightPlan-465"><a href="#FlightPlan-465"><span class="linenos"> 465</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">recompute_speeds_new_point</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">)</span>
</span><span id="FlightPlan-466"><a href="#FlightPlan-466"><span class="linenos"> 466</span></a>
</span><span id="FlightPlan-467"><a href="#FlightPlan-467"><span class="linenos"> 467</span></a>	<span class="k">def</span> <span class="nf">split_uncertainty_min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">min_uncertainty</span><span class="p">):</span>
</span><span id="FlightPlan-468"><a href="#FlightPlan-468"><span class="linenos"> 468</span></a>		<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">min_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">):</span>
</span><span id="FlightPlan-469"><a href="#FlightPlan-469"><span class="linenos"> 469</span></a>			<span class="k">return</span>
</span><span id="FlightPlan-470"><a href="#FlightPlan-470"><span class="linenos"> 470</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-471"><a href="#FlightPlan-471"><span class="linenos"> 471</span></a>			<span class="n">times</span> <span class="o">=</span> <span class="p">[[]</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">planned_segment_time</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">min_uncertainty</span><span class="o">-</span><span class="mf">0.5</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>  <span class="c1"># This -0.5 is to leave at least 0.5 minute per segment</span>
</span><span id="FlightPlan-472"><a href="#FlightPlan-472"><span class="linenos"> 472</span></a>			<span class="n">times</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">times</span><span class="p">]</span>
</span><span id="FlightPlan-473"><a href="#FlightPlan-473"><span class="linenos"> 473</span></a>			<span class="n">to_remove</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-474"><a href="#FlightPlan-474"><span class="linenos"> 474</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
</span><span id="FlightPlan-475"><a href="#FlightPlan-475"><span class="linenos"> 475</span></a>				<span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan-476"><a href="#FlightPlan-476"><span class="linenos"> 476</span></a>					<span class="n">to_remove</span> <span class="o">+=</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan-477"><a href="#FlightPlan-477"><span class="linenos"> 477</span></a>			<span class="n">to_remove</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="FlightPlan-478"><a href="#FlightPlan-478"><span class="linenos"> 478</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">to_remove</span><span class="p">:</span>
</span><span id="FlightPlan-479"><a href="#FlightPlan-479"><span class="linenos"> 479</span></a>				<span class="k">del</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan-480"><a href="#FlightPlan-480"><span class="linenos"> 480</span></a>				<span class="k">del</span> <span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan-481"><a href="#FlightPlan-481"><span class="linenos"> 481</span></a>			
</span><span id="FlightPlan-482"><a href="#FlightPlan-482"><span class="linenos"> 482</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-483"><a href="#FlightPlan-483"><span class="linenos"> 483</span></a>				<span class="k">return</span>
</span><span id="FlightPlan-484"><a href="#FlightPlan-484"><span class="linenos"> 484</span></a>
</span><span id="FlightPlan-485"><a href="#FlightPlan-485"><span class="linenos"> 485</span></a>			<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">min_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan-486"><a href="#FlightPlan-486"><span class="linenos"> 486</span></a>				<span class="n">min_assigned</span> <span class="o">=</span> <span class="n">min_uncertainty</span>
</span><span id="FlightPlan-487"><a href="#FlightPlan-487"><span class="linenos"> 487</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-488"><a href="#FlightPlan-488"><span class="linenos"> 488</span></a>				<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="FlightPlan-489"><a href="#FlightPlan-489"><span class="linenos"> 489</span></a>				<span class="n">min_assigned</span> <span class="o">=</span> <span class="n">min_uncertainty</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan-490"><a href="#FlightPlan-490"><span class="linenos"> 490</span></a>				<span class="k">if</span> <span class="n">min_assigned</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-491"><a href="#FlightPlan-491"><span class="linenos"> 491</span></a>					<span class="n">min_assigned</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">min_assigned</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">times</span><span class="p">))</span>
</span><span id="FlightPlan-492"><a href="#FlightPlan-492"><span class="linenos"> 492</span></a>
</span><span id="FlightPlan-493"><a href="#FlightPlan-493"><span class="linenos"> 493</span></a>			<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="FlightPlan-494"><a href="#FlightPlan-494"><span class="linenos"> 494</span></a>			<span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">times</span><span class="p">))),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">times</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">times</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan-495"><a href="#FlightPlan-495"><span class="linenos"> 495</span></a>			
</span><span id="FlightPlan-496"><a href="#FlightPlan-496"><span class="linenos"> 496</span></a>			<span class="n">points</span><span class="p">[</span><span class="n">draw</span><span class="p">]</span><span class="o">.</span><span class="n">min_uncertainty</span> <span class="o">+=</span> <span class="n">min_assigned</span>
</span><span id="FlightPlan-497"><a href="#FlightPlan-497"><span class="linenos"> 497</span></a>
</span><span id="FlightPlan-498"><a href="#FlightPlan-498"><span class="linenos"> 498</span></a>			<span class="n">to_assign</span> <span class="o">=</span> <span class="n">min_uncertainty</span> <span class="o">-</span> <span class="n">min_assigned</span>
</span><span id="FlightPlan-499"><a href="#FlightPlan-499"><span class="linenos"> 499</span></a>
</span><span id="FlightPlan-500"><a href="#FlightPlan-500"><span class="linenos"> 500</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_min</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">to_assign</span><span class="p">)</span>
</span><span id="FlightPlan-501"><a href="#FlightPlan-501"><span class="linenos"> 501</span></a>
</span><span id="FlightPlan-502"><a href="#FlightPlan-502"><span class="linenos"> 502</span></a>	<span class="k">def</span> <span class="nf">split_uncertainty_nm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">nm_uncertainty</span><span class="p">):</span>
</span><span id="FlightPlan-503"><a href="#FlightPlan-503"><span class="linenos"> 503</span></a>		<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">nm_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">):</span>
</span><span id="FlightPlan-504"><a href="#FlightPlan-504"><span class="linenos"> 504</span></a>			<span class="k">return</span>
</span><span id="FlightPlan-505"><a href="#FlightPlan-505"><span class="linenos"> 505</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-506"><a href="#FlightPlan-506"><span class="linenos"> 506</span></a>			<span class="n">distances</span> <span class="o">=</span> <span class="p">[[]</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">nm_uncertainty</span><span class="o">-</span><span class="mf">0.5</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>  <span class="c1"># This -0.5 to keep at least 0.5 nm</span>
</span><span id="FlightPlan-507"><a href="#FlightPlan-507"><span class="linenos"> 507</span></a>			<span class="n">distances</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">distances</span><span class="p">]</span>
</span><span id="FlightPlan-508"><a href="#FlightPlan-508"><span class="linenos"> 508</span></a>			<span class="n">to_remove</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-509"><a href="#FlightPlan-509"><span class="linenos"> 509</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">distances</span><span class="p">):</span>
</span><span id="FlightPlan-510"><a href="#FlightPlan-510"><span class="linenos"> 510</span></a>				<span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan-511"><a href="#FlightPlan-511"><span class="linenos"> 511</span></a>					<span class="n">to_remove</span> <span class="o">+=</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan-512"><a href="#FlightPlan-512"><span class="linenos"> 512</span></a>			<span class="n">to_remove</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="FlightPlan-513"><a href="#FlightPlan-513"><span class="linenos"> 513</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">to_remove</span><span class="p">:</span>
</span><span id="FlightPlan-514"><a href="#FlightPlan-514"><span class="linenos"> 514</span></a>				<span class="k">del</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan-515"><a href="#FlightPlan-515"><span class="linenos"> 515</span></a>				<span class="k">del</span> <span class="n">distances</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan-516"><a href="#FlightPlan-516"><span class="linenos"> 516</span></a>
</span><span id="FlightPlan-517"><a href="#FlightPlan-517"><span class="linenos"> 517</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-518"><a href="#FlightPlan-518"><span class="linenos"> 518</span></a>				<span class="k">return</span>
</span><span id="FlightPlan-519"><a href="#FlightPlan-519"><span class="linenos"> 519</span></a>
</span><span id="FlightPlan-520"><a href="#FlightPlan-520"><span class="linenos"> 520</span></a>			<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">nm_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan-521"><a href="#FlightPlan-521"><span class="linenos"> 521</span></a>				<span class="n">nm_assigned</span> <span class="o">=</span> <span class="n">nm_uncertainty</span>
</span><span id="FlightPlan-522"><a href="#FlightPlan-522"><span class="linenos"> 522</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-523"><a href="#FlightPlan-523"><span class="linenos"> 523</span></a>				<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="FlightPlan-524"><a href="#FlightPlan-524"><span class="linenos"> 524</span></a>				<span class="n">nm_assigned</span> <span class="o">=</span> <span class="n">nm_uncertainty</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan-525"><a href="#FlightPlan-525"><span class="linenos"> 525</span></a>				<span class="k">if</span> <span class="n">nm_assigned</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-526"><a href="#FlightPlan-526"><span class="linenos"> 526</span></a>					<span class="n">nm_assigned</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">nm_assigned</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">distances</span><span class="p">))</span>
</span><span id="FlightPlan-527"><a href="#FlightPlan-527"><span class="linenos"> 527</span></a>
</span><span id="FlightPlan-528"><a href="#FlightPlan-528"><span class="linenos"> 528</span></a>			<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="FlightPlan-529"><a href="#FlightPlan-529"><span class="linenos"> 529</span></a>			<span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">distances</span><span class="p">))),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">distances</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan-530"><a href="#FlightPlan-530"><span class="linenos"> 530</span></a>
</span><span id="FlightPlan-531"><a href="#FlightPlan-531"><span class="linenos"> 531</span></a>			<span class="n">points</span><span class="p">[</span><span class="n">draw</span><span class="p">]</span><span class="o">.</span><span class="n">nm_uncertainty</span> <span class="o">+=</span> <span class="n">nm_assigned</span>
</span><span id="FlightPlan-532"><a href="#FlightPlan-532"><span class="linenos"> 532</span></a>
</span><span id="FlightPlan-533"><a href="#FlightPlan-533"><span class="linenos"> 533</span></a>			<span class="n">to_assign</span> <span class="o">=</span> <span class="n">nm_uncertainty</span> <span class="o">-</span> <span class="n">nm_assigned</span>
</span><span id="FlightPlan-534"><a href="#FlightPlan-534"><span class="linenos"> 534</span></a>
</span><span id="FlightPlan-535"><a href="#FlightPlan-535"><span class="linenos"> 535</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_nm</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">to_assign</span><span class="p">)</span>
</span><span id="FlightPlan-536"><a href="#FlightPlan-536"><span class="linenos"> 536</span></a>
</span><span id="FlightPlan-537"><a href="#FlightPlan-537"><span class="linenos"> 537</span></a>	<span class="k">def</span> <span class="nf">generate_uncertainty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uncertainty_climb_min</span><span class="p">,</span> <span class="n">uncertanity_climb_from_fl</span><span class="p">,</span>
</span><span id="FlightPlan-538"><a href="#FlightPlan-538"><span class="linenos"> 538</span></a>		<span class="n">uncertainty_cruise_nm</span><span class="p">,</span> <span class="n">uncertanity_cruise_from_fl</span><span class="p">):</span>
</span><span id="FlightPlan-539"><a href="#FlightPlan-539"><span class="linenos"> 539</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-540"><a href="#FlightPlan-540"><span class="linenos"> 540</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_cruise_nm</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-541"><a href="#FlightPlan-541"><span class="linenos"> 541</span></a>
</span><span id="FlightPlan-542"><a href="#FlightPlan-542"><span class="linenos"> 542</span></a>		<span class="c1"># Split climb uncertainty</span>
</span><span id="FlightPlan-543"><a href="#FlightPlan-543"><span class="linenos"> 543</span></a>		<span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;TOC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">&gt;=</span> <span class="n">uncertanity_climb_from_fl</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="FlightPlan-544"><a href="#FlightPlan-544"><span class="linenos"> 544</span></a>			<span class="p">(</span><span class="n">uncertainty_climb_min</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)):</span>
</span><span id="FlightPlan-545"><a href="#FlightPlan-545"><span class="linenos"> 545</span></a>
</span><span id="FlightPlan-546"><a href="#FlightPlan-546"><span class="linenos"> 546</span></a>			<span class="n">potential_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-547"><a href="#FlightPlan-547"><span class="linenos"> 547</span></a>			<span class="n">planned_climb_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-548"><a href="#FlightPlan-548"><span class="linenos"> 548</span></a>			<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan-549"><a href="#FlightPlan-549"><span class="linenos"> 549</span></a>				<span class="n">potential_points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">point</span><span class="p">]</span>
</span><span id="FlightPlan-550"><a href="#FlightPlan-550"><span class="linenos"> 550</span></a>				<span class="n">planned_climb_time</span> <span class="o">+=</span> <span class="n">point</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="FlightPlan-551"><a href="#FlightPlan-551"><span class="linenos"> 551</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOC&quot;</span><span class="p">:</span>
</span><span id="FlightPlan-552"><a href="#FlightPlan-552"><span class="linenos"> 552</span></a>					<span class="k">break</span>
</span><span id="FlightPlan-553"><a href="#FlightPlan-553"><span class="linenos"> 553</span></a>
</span><span id="FlightPlan-554"><a href="#FlightPlan-554"><span class="linenos"> 554</span></a>			<span class="k">if</span> <span class="n">planned_climb_time</span><span class="o">+</span><span class="n">uncertainty_climb_min</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
</span><span id="FlightPlan-555"><a href="#FlightPlan-555"><span class="linenos"> 555</span></a>				<span class="c1"># At least 15 minute of climb</span>
</span><span id="FlightPlan-556"><a href="#FlightPlan-556"><span class="linenos"> 556</span></a>				<span class="k">if</span> <span class="n">planned_climb_time</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
</span><span id="FlightPlan-557"><a href="#FlightPlan-557"><span class="linenos"> 557</span></a>					<span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">15</span> <span class="o">-</span> <span class="n">planned_climb_time</span>
</span><span id="FlightPlan-558"><a href="#FlightPlan-558"><span class="linenos"> 558</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-559"><a href="#FlightPlan-559"><span class="linenos"> 559</span></a>					<span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-560"><a href="#FlightPlan-560"><span class="linenos"> 560</span></a>
</span><span id="FlightPlan-561"><a href="#FlightPlan-561"><span class="linenos"> 561</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="n">uncertainty_climb_min</span>
</span><span id="FlightPlan-562"><a href="#FlightPlan-562"><span class="linenos"> 562</span></a>	
</span><span id="FlightPlan-563"><a href="#FlightPlan-563"><span class="linenos"> 563</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_min</span><span class="p">(</span><span class="n">potential_points</span><span class="p">,</span> <span class="n">uncertainty_climb_min</span><span class="p">)</span>
</span><span id="FlightPlan-564"><a href="#FlightPlan-564"><span class="linenos"> 564</span></a>
</span><span id="FlightPlan-565"><a href="#FlightPlan-565"><span class="linenos"> 565</span></a>		<span class="c1"># Split cruise uncertainty</span>
</span><span id="FlightPlan-566"><a href="#FlightPlan-566"><span class="linenos"> 566</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;TOC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">&gt;=</span> <span class="n">uncertanity_cruise_from_fl</span><span class="p">:</span>
</span><span id="FlightPlan-567"><a href="#FlightPlan-567"><span class="linenos"> 567</span></a>			<span class="n">potential_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-568"><a href="#FlightPlan-568"><span class="linenos"> 568</span></a>			<span class="n">planned_cruise_dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-569"><a href="#FlightPlan-569"><span class="linenos"> 569</span></a>			<span class="n">counting</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan-570"><a href="#FlightPlan-570"><span class="linenos"> 570</span></a>			<span class="n">alt_ft_prev</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-571"><a href="#FlightPlan-571"><span class="linenos"> 571</span></a>			<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan-572"><a href="#FlightPlan-572"><span class="linenos"> 572</span></a>				<span class="k">if</span> <span class="n">counting</span><span class="p">:</span>
</span><span id="FlightPlan-573"><a href="#FlightPlan-573"><span class="linenos"> 573</span></a>					<span class="k">if</span> <span class="n">alt_ft_prev</span> <span class="o">==</span> <span class="n">point</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">:</span>
</span><span id="FlightPlan-574"><a href="#FlightPlan-574"><span class="linenos"> 574</span></a>						<span class="n">potential_points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">point</span><span class="p">]</span>
</span><span id="FlightPlan-575"><a href="#FlightPlan-575"><span class="linenos"> 575</span></a>						<span class="n">planned_cruise_dist</span> <span class="o">+=</span> <span class="n">point</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span>
</span><span id="FlightPlan-576"><a href="#FlightPlan-576"><span class="linenos"> 576</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOC&quot;</span><span class="p">:</span>
</span><span id="FlightPlan-577"><a href="#FlightPlan-577"><span class="linenos"> 577</span></a>					<span class="n">counting</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan-578"><a href="#FlightPlan-578"><span class="linenos"> 578</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOD&quot;</span><span class="p">:</span>
</span><span id="FlightPlan-579"><a href="#FlightPlan-579"><span class="linenos"> 579</span></a>					<span class="k">break</span>
</span><span id="FlightPlan-580"><a href="#FlightPlan-580"><span class="linenos"> 580</span></a>				<span class="n">alt_ft_prev</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="FlightPlan-581"><a href="#FlightPlan-581"><span class="linenos"> 581</span></a>
</span><span id="FlightPlan-582"><a href="#FlightPlan-582"><span class="linenos"> 582</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_nm</span><span class="p">(</span><span class="n">potential_points</span><span class="p">,</span> <span class="n">uncertainty_cruise_nm</span><span class="p">)</span>
</span><span id="FlightPlan-583"><a href="#FlightPlan-583"><span class="linenos"> 583</span></a>
</span><span id="FlightPlan-584"><a href="#FlightPlan-584"><span class="linenos"> 584</span></a>	<span class="k">def</span> <span class="nf">get_xot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-585"><a href="#FlightPlan-585"><span class="linenos"> 585</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-586"><a href="#FlightPlan-586"><span class="linenos"> 586</span></a>			<span class="n">taxi_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axot</span>
</span><span id="FlightPlan-587"><a href="#FlightPlan-587"><span class="linenos"> 587</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-588"><a href="#FlightPlan-588"><span class="linenos"> 588</span></a>			<span class="n">taxi_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exot</span>
</span><span id="FlightPlan-589"><a href="#FlightPlan-589"><span class="linenos"> 589</span></a>		<span class="k">return</span> <span class="n">taxi_out</span>
</span><span id="FlightPlan-590"><a href="#FlightPlan-590"><span class="linenos"> 590</span></a>
</span><span id="FlightPlan-591"><a href="#FlightPlan-591"><span class="linenos"> 591</span></a>	<span class="k">def</span> <span class="nf">get_xit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-592"><a href="#FlightPlan-592"><span class="linenos"> 592</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-593"><a href="#FlightPlan-593"><span class="linenos"> 593</span></a>			<span class="n">taxi_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axit</span>
</span><span id="FlightPlan-594"><a href="#FlightPlan-594"><span class="linenos"> 594</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-595"><a href="#FlightPlan-595"><span class="linenos"> 595</span></a>			<span class="n">taxi_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit</span>
</span><span id="FlightPlan-596"><a href="#FlightPlan-596"><span class="linenos"> 596</span></a>		<span class="k">return</span> <span class="n">taxi_in</span>
</span><span id="FlightPlan-597"><a href="#FlightPlan-597"><span class="linenos"> 597</span></a>
</span><span id="FlightPlan-598"><a href="#FlightPlan-598"><span class="linenos"> 598</span></a>	<span class="k">def</span> <span class="nf">get_obt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-599"><a href="#FlightPlan-599"><span class="linenos"> 599</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-600"><a href="#FlightPlan-600"><span class="linenos"> 600</span></a>			<span class="n">obt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span>
</span><span id="FlightPlan-601"><a href="#FlightPlan-601"><span class="linenos"> 601</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-602"><a href="#FlightPlan-602"><span class="linenos"> 602</span></a>			<span class="n">obt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eobt</span>
</span><span id="FlightPlan-603"><a href="#FlightPlan-603"><span class="linenos"> 603</span></a>		<span class="k">return</span> <span class="n">obt</span>
</span><span id="FlightPlan-604"><a href="#FlightPlan-604"><span class="linenos"> 604</span></a>
</span><span id="FlightPlan-605"><a href="#FlightPlan-605"><span class="linenos"> 605</span></a>	<span class="k">def</span> <span class="nf">get_ibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-606"><a href="#FlightPlan-606"><span class="linenos"> 606</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-607"><a href="#FlightPlan-607"><span class="linenos"> 607</span></a>			<span class="n">ibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span>
</span><span id="FlightPlan-608"><a href="#FlightPlan-608"><span class="linenos"> 608</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-609"><a href="#FlightPlan-609"><span class="linenos"> 609</span></a>			<span class="n">ibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eibt</span>
</span><span id="FlightPlan-610"><a href="#FlightPlan-610"><span class="linenos"> 610</span></a>		<span class="k">return</span> <span class="n">ibt</span>
</span><span id="FlightPlan-611"><a href="#FlightPlan-611"><span class="linenos"> 611</span></a>
</span><span id="FlightPlan-612"><a href="#FlightPlan-612"><span class="linenos"> 612</span></a>	<span class="k">def</span> <span class="nf">get_eta_wo_atfm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-613"><a href="#FlightPlan-613"><span class="linenos"> 613</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan-614"><a href="#FlightPlan-614"><span class="linenos"> 614</span></a><span class="sd">		Estimated time of arrival without ATFM delay</span>
</span><span id="FlightPlan-615"><a href="#FlightPlan-615"><span class="linenos"> 615</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan-616"><a href="#FlightPlan-616"><span class="linenos"> 616</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_estimated_landing_time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_atfm_delay</span><span class="p">()</span>
</span><span id="FlightPlan-617"><a href="#FlightPlan-617"><span class="linenos"> 617</span></a>
</span><span id="FlightPlan-618"><a href="#FlightPlan-618"><span class="linenos"> 618</span></a>	<span class="k">def</span> <span class="nf">get_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-619"><a href="#FlightPlan-619"><span class="linenos"> 619</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-620"><a href="#FlightPlan-620"><span class="linenos"> 620</span></a>			<span class="k">return</span> <span class="mf">0.</span>
</span><span id="FlightPlan-621"><a href="#FlightPlan-621"><span class="linenos"> 621</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-622"><a href="#FlightPlan-622"><span class="linenos"> 622</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span><span id="FlightPlan-623"><a href="#FlightPlan-623"><span class="linenos"> 623</span></a>
</span><span id="FlightPlan-624"><a href="#FlightPlan-624"><span class="linenos"> 624</span></a>	<span class="k">def</span> <span class="nf">get_atfm_reason</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-625"><a href="#FlightPlan-625"><span class="linenos"> 625</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-626"><a href="#FlightPlan-626"><span class="linenos"> 626</span></a>			<span class="k">return</span> <span class="kc">None</span>
</span><span id="FlightPlan-627"><a href="#FlightPlan-627"><span class="linenos"> 627</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-628"><a href="#FlightPlan-628"><span class="linenos"> 628</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">reason</span>
</span><span id="FlightPlan-629"><a href="#FlightPlan-629"><span class="linenos"> 629</span></a>
</span><span id="FlightPlan-630"><a href="#FlightPlan-630"><span class="linenos"> 630</span></a>	<span class="k">def</span> <span class="nf">get_point_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-631"><a href="#FlightPlan-631"><span class="linenos"> 631</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">time_min</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</span><span id="FlightPlan-632"><a href="#FlightPlan-632"><span class="linenos"> 632</span></a>
</span><span id="FlightPlan-633"><a href="#FlightPlan-633"><span class="linenos"> 633</span></a>	<span class="k">def</span> <span class="nf">get_point_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-634"><a href="#FlightPlan-634"><span class="linenos"> 634</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</span><span id="FlightPlan-635"><a href="#FlightPlan-635"><span class="linenos"> 635</span></a>
</span><span id="FlightPlan-636"><a href="#FlightPlan-636"><span class="linenos"> 636</span></a>	<span class="k">def</span> <span class="nf">get_planned_flying_time_to_landing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-637"><a href="#FlightPlan-637"><span class="linenos"> 637</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan-638"><a href="#FlightPlan-638"><span class="linenos"> 638</span></a><span class="sd">		Length of trajectory in minute, up to landing.</span>
</span><span id="FlightPlan-639"><a href="#FlightPlan-639"><span class="linenos"> 639</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan-640"><a href="#FlightPlan-640"><span class="linenos"> 640</span></a>		<span class="c1"># TODO I need to review this with the new flight plan structure</span>
</span><span id="FlightPlan-641"><a href="#FlightPlan-641"><span class="linenos"> 641</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-642"><a href="#FlightPlan-642"><span class="linenos"> 642</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan-643"><a href="#FlightPlan-643"><span class="linenos"> 643</span></a>		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="FlightPlan-644"><a href="#FlightPlan-644"><span class="linenos"> 644</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan-645"><a href="#FlightPlan-645"><span class="linenos"> 645</span></a>
</span><span id="FlightPlan-646"><a href="#FlightPlan-646"><span class="linenos"> 646</span></a>	<span class="k">def</span> <span class="nf">get_planned_landing_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-647"><a href="#FlightPlan-647"><span class="linenos"> 647</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sobt</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span>
</span><span id="FlightPlan-648"><a href="#FlightPlan-648"><span class="linenos"> 648</span></a>
</span><span id="FlightPlan-649"><a href="#FlightPlan-649"><span class="linenos"> 649</span></a>	<span class="k">def</span> <span class="nf">get_current_eibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-650"><a href="#FlightPlan-650"><span class="linenos"> 650</span></a>		<span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span> <span class="o">+</span>
</span><span id="FlightPlan-651"><a href="#FlightPlan-651"><span class="linenos"> 651</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xit</span><span class="p">())</span>
</span><span id="FlightPlan-652"><a href="#FlightPlan-652"><span class="linenos"> 652</span></a>
</span><span id="FlightPlan-653"><a href="#FlightPlan-653"><span class="linenos"> 653</span></a>	<span class="k">def</span> <span class="nf">compute_eibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-654"><a href="#FlightPlan-654"><span class="linenos"> 654</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_eibt</span><span class="p">()</span>
</span><span id="FlightPlan-655"><a href="#FlightPlan-655"><span class="linenos"> 655</span></a>
</span><span id="FlightPlan-656"><a href="#FlightPlan-656"><span class="linenos"> 656</span></a>	<span class="k">def</span> <span class="nf">get_estimated_takeoff_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-657"><a href="#FlightPlan-657"><span class="linenos"> 657</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span>
</span><span id="FlightPlan-658"><a href="#FlightPlan-658"><span class="linenos"> 658</span></a>
</span><span id="FlightPlan-659"><a href="#FlightPlan-659"><span class="linenos"> 659</span></a>	<span class="k">def</span> <span class="nf">get_estimated_landing_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-660"><a href="#FlightPlan-660"><span class="linenos"> 660</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span>
</span><span id="FlightPlan-661"><a href="#FlightPlan-661"><span class="linenos"> 661</span></a>
</span><span id="FlightPlan-662"><a href="#FlightPlan-662"><span class="linenos"> 662</span></a>	<span class="k">def</span> <span class="nf">get_total_planned_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-663"><a href="#FlightPlan-663"><span class="linenos"> 663</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan-664"><a href="#FlightPlan-664"><span class="linenos"> 664</span></a>
</span><span id="FlightPlan-665"><a href="#FlightPlan-665"><span class="linenos"> 665</span></a>	<span class="k">def</span> <span class="nf">set_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">atfm_delay</span><span class="p">):</span>
</span><span id="FlightPlan-666"><a href="#FlightPlan-666"><span class="linenos"> 666</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-667"><a href="#FlightPlan-667"><span class="linenos"> 667</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">remove_atfm_delay</span><span class="p">()</span>
</span><span id="FlightPlan-668"><a href="#FlightPlan-668"><span class="linenos"> 668</span></a>			
</span><span id="FlightPlan-669"><a href="#FlightPlan-669"><span class="linenos"> 669</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="n">atfm_delay</span>
</span><span id="FlightPlan-670"><a href="#FlightPlan-670"><span class="linenos"> 670</span></a>		<span class="k">if</span> <span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-671"><a href="#FlightPlan-671"><span class="linenos"> 671</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">+</span> <span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span><span id="FlightPlan-672"><a href="#FlightPlan-672"><span class="linenos"> 672</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cobt</span>
</span><span id="FlightPlan-673"><a href="#FlightPlan-673"><span class="linenos"> 673</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span><span id="FlightPlan-674"><a href="#FlightPlan-674"><span class="linenos"> 674</span></a>
</span><span id="FlightPlan-675"><a href="#FlightPlan-675"><span class="linenos"> 675</span></a>	<span class="k">def</span> <span class="nf">has_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-676"><a href="#FlightPlan-676"><span class="linenos"> 676</span></a>		<span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;atfm_delay&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="FlightPlan-677"><a href="#FlightPlan-677"><span class="linenos"> 677</span></a>
</span><span id="FlightPlan-678"><a href="#FlightPlan-678"><span class="linenos"> 678</span></a>	<span class="k">def</span> <span class="nf">remove_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-679"><a href="#FlightPlan-679"><span class="linenos"> 679</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span><span id="FlightPlan-680"><a href="#FlightPlan-680"><span class="linenos"> 680</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-681"><a href="#FlightPlan-681"><span class="linenos"> 681</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-682"><a href="#FlightPlan-682"><span class="linenos"> 682</span></a>
</span><span id="FlightPlan-683"><a href="#FlightPlan-683"><span class="linenos"> 683</span></a>	<span class="k">def</span> <span class="nf">update_eobt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_eobt</span><span class="p">):</span>
</span><span id="FlightPlan-684"><a href="#FlightPlan-684"><span class="linenos"> 684</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="n">new_eobt</span>
</span><span id="FlightPlan-685"><a href="#FlightPlan-685"><span class="linenos"> 685</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span><span id="FlightPlan-686"><a href="#FlightPlan-686"><span class="linenos"> 686</span></a>
</span><span id="FlightPlan-687"><a href="#FlightPlan-687"><span class="linenos"> 687</span></a>	<span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-688"><a href="#FlightPlan-688"><span class="linenos"> 688</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span>
</span><span id="FlightPlan-689"><a href="#FlightPlan-689"><span class="linenos"> 689</span></a>
</span><span id="FlightPlan-690"><a href="#FlightPlan-690"><span class="linenos"> 690</span></a>	<span class="k">def</span> <span class="nf">set_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
</span><span id="FlightPlan-691"><a href="#FlightPlan-691"><span class="linenos"> 691</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
</span><span id="FlightPlan-692"><a href="#FlightPlan-692"><span class="linenos"> 692</span></a>
</span><span id="FlightPlan-693"><a href="#FlightPlan-693"><span class="linenos"> 693</span></a>	<span class="k">def</span> <span class="nf">get_unique_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-694"><a href="#FlightPlan-694"><span class="linenos"> 694</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span>
</span><span id="FlightPlan-695"><a href="#FlightPlan-695"><span class="linenos"> 695</span></a>
</span><span id="FlightPlan-696"><a href="#FlightPlan-696"><span class="linenos"> 696</span></a>	<span class="k">def</span> <span class="nf">number_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-697"><a href="#FlightPlan-697"><span class="linenos"> 697</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-698"><a href="#FlightPlan-698"><span class="linenos"> 698</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan-699"><a href="#FlightPlan-699"><span class="linenos"> 699</span></a>			<span class="n">p</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">s</span>
</span><span id="FlightPlan-700"><a href="#FlightPlan-700"><span class="linenos"> 700</span></a>			<span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan-701"><a href="#FlightPlan-701"><span class="linenos"> 701</span></a>
</span><span id="FlightPlan-702"><a href="#FlightPlan-702"><span class="linenos"> 702</span></a>	<span class="k">def</span> <span class="nf">compute_speeds_original_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-703"><a href="#FlightPlan-703"><span class="linenos"> 703</span></a>		<span class="n">time_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-704"><a href="#FlightPlan-704"><span class="linenos"> 704</span></a>		<span class="n">dist_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-705"><a href="#FlightPlan-705"><span class="linenos"> 705</span></a>		<span class="n">speed_kt_prev</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-706"><a href="#FlightPlan-706"><span class="linenos"> 706</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-707"><a href="#FlightPlan-707"><span class="linenos"> 707</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan-708"><a href="#FlightPlan-708"><span class="linenos"> 708</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-709"><a href="#FlightPlan-709"><span class="linenos"> 709</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-710"><a href="#FlightPlan-710"><span class="linenos"> 710</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">speed_kt_prev</span>
</span><span id="FlightPlan-711"><a href="#FlightPlan-711"><span class="linenos"> 711</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-712"><a href="#FlightPlan-712"><span class="linenos"> 712</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span><span class="p">)</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">wind</span>
</span><span id="FlightPlan-713"><a href="#FlightPlan-713"><span class="linenos"> 713</span></a>					<span class="n">speed_kt_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan-714"><a href="#FlightPlan-714"><span class="linenos"> 714</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span>
</span><span id="FlightPlan-715"><a href="#FlightPlan-715"><span class="linenos"> 715</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span>
</span><span id="FlightPlan-716"><a href="#FlightPlan-716"><span class="linenos"> 716</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-717"><a href="#FlightPlan-717"><span class="linenos"> 717</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]:</span>
</span><span id="FlightPlan-718"><a href="#FlightPlan-718"><span class="linenos"> 718</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="FlightPlan-719"><a href="#FlightPlan-719"><span class="linenos"> 719</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-720"><a href="#FlightPlan-720"><span class="linenos"> 720</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>
</span><span id="FlightPlan-721"><a href="#FlightPlan-721"><span class="linenos"> 721</span></a>			<span class="k">except</span><span class="p">:</span>  <span class="c1"># DANGEROUS!!!!</span>
</span><span id="FlightPlan-722"><a href="#FlightPlan-722"><span class="linenos"> 722</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-723"><a href="#FlightPlan-723"><span class="linenos"> 723</span></a>
</span><span id="FlightPlan-724"><a href="#FlightPlan-724"><span class="linenos"> 724</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan-725"><a href="#FlightPlan-725"><span class="linenos"> 725</span></a>			<span class="c1"># 	print(&#39;For flight {} ({}) finished computing speed of point {}: {}&#39;.format(self.flight_uid, self, v, v.dict_speeds))</span>
</span><span id="FlightPlan-726"><a href="#FlightPlan-726"><span class="linenos"> 726</span></a>
</span><span id="FlightPlan-727"><a href="#FlightPlan-727"><span class="linenos"> 727</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan-728"><a href="#FlightPlan-728"><span class="linenos"> 728</span></a>			<span class="n">time_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan-729"><a href="#FlightPlan-729"><span class="linenos"> 729</span></a>			<span class="n">dist_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan-730"><a href="#FlightPlan-730"><span class="linenos"> 730</span></a>
</span><span id="FlightPlan-731"><a href="#FlightPlan-731"><span class="linenos"> 731</span></a>	<span class="k">def</span> <span class="nf">compute_max_min_mrc_speed_cruise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bada_performances</span><span class="p">):</span>
</span><span id="FlightPlan-732"><a href="#FlightPlan-732"><span class="linenos"> 732</span></a>		<span class="c1"># Note this will crash if bada_performances are not BADA4</span>
</span><span id="FlightPlan-733"><a href="#FlightPlan-733"><span class="linenos"> 733</span></a>		<span class="n">alt_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-734"><a href="#FlightPlan-734"><span class="linenos"> 734</span></a>		<span class="n">weight_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-735"><a href="#FlightPlan-735"><span class="linenos"> 735</span></a>		<span class="n">m_min_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-736"><a href="#FlightPlan-736"><span class="linenos"> 736</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan-737"><a href="#FlightPlan-737"><span class="linenos"> 737</span></a>			<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">==</span> <span class="n">alt_prev</span><span class="p">:</span>
</span><span id="FlightPlan-738"><a href="#FlightPlan-738"><span class="linenos"> 738</span></a>				<span class="c1"># cruise</span>
</span><span id="FlightPlan-739"><a href="#FlightPlan-739"><span class="linenos"> 739</span></a>				<span class="n">m_min_end</span><span class="p">,</span> <span class="n">m_max_end</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_min_max_mach</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span>
</span><span id="FlightPlan-740"><a href="#FlightPlan-740"><span class="linenos"> 740</span></a>				<span class="k">if</span> <span class="n">m_min_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-741"><a href="#FlightPlan-741"><span class="linenos"> 741</span></a>					<span class="n">m_min_start</span><span class="p">,</span> <span class="n">m_max_start</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_min_max_mach</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="n">weight_prev</span><span class="p">)</span>
</span><span id="FlightPlan-742"><a href="#FlightPlan-742"><span class="linenos"> 742</span></a>
</span><span id="FlightPlan-743"><a href="#FlightPlan-743"><span class="linenos"> 743</span></a>				<span class="c1"># if m_min_end is None:</span>
</span><span id="FlightPlan-744"><a href="#FlightPlan-744"><span class="linenos"> 744</span></a>				<span class="c1">#     print(&quot;---------&quot;)</span>
</span><span id="FlightPlan-745"><a href="#FlightPlan-745"><span class="linenos"> 745</span></a>				<span class="c1">#     print(bada_performances.bada_version, bada_performances.ac_icao, bada_performances.ac_model, v.weight, weight_prev, v.name, v.coords, v.alt_ft)</span>
</span><span id="FlightPlan-746"><a href="#FlightPlan-746"><span class="linenos"> 746</span></a>				<span class="c1">#     print(&quot;---------&quot;)</span>
</span><span id="FlightPlan-747"><a href="#FlightPlan-747"><span class="linenos"> 747</span></a>				<span class="c1">#     print()</span>
</span><span id="FlightPlan-748"><a href="#FlightPlan-748"><span class="linenos"> 748</span></a>
</span><span id="FlightPlan-749"><a href="#FlightPlan-749"><span class="linenos"> 749</span></a>				<span class="k">if</span> <span class="n">m_min_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-750"><a href="#FlightPlan-750"><span class="linenos"> 750</span></a>					<span class="n">m_min</span> <span class="o">=</span> <span class="n">m_min_start</span>
</span><span id="FlightPlan-751"><a href="#FlightPlan-751"><span class="linenos"> 751</span></a>					<span class="c1"># v.segment_min_speed_kt = None</span>
</span><span id="FlightPlan-752"><a href="#FlightPlan-752"><span class="linenos"> 752</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-753"><a href="#FlightPlan-753"><span class="linenos"> 753</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-754"><a href="#FlightPlan-754"><span class="linenos"> 754</span></a>					<span class="k">if</span> <span class="n">m_min_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-755"><a href="#FlightPlan-755"><span class="linenos"> 755</span></a>						<span class="n">m_min</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">m_min_end</span><span class="p">,</span> <span class="n">m_min_start</span><span class="p">)</span>
</span><span id="FlightPlan-756"><a href="#FlightPlan-756"><span class="linenos"> 756</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-757"><a href="#FlightPlan-757"><span class="linenos"> 757</span></a>						<span class="n">m_min</span> <span class="o">=</span> <span class="n">m_min_end</span>
</span><span id="FlightPlan-758"><a href="#FlightPlan-758"><span class="linenos"> 758</span></a>					<span class="c1"># v.segment_min_speed_kt = m2kt(m=m_min,fl=v.alt_ft)</span>
</span><span id="FlightPlan-759"><a href="#FlightPlan-759"><span class="linenos"> 759</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_min</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="FlightPlan-760"><a href="#FlightPlan-760"><span class="linenos"> 760</span></a>
</span><span id="FlightPlan-761"><a href="#FlightPlan-761"><span class="linenos"> 761</span></a>				<span class="k">if</span> <span class="n">m_max_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-762"><a href="#FlightPlan-762"><span class="linenos"> 762</span></a>					<span class="n">m_max</span> <span class="o">=</span> <span class="n">m_max_start</span>
</span><span id="FlightPlan-763"><a href="#FlightPlan-763"><span class="linenos"> 763</span></a>					<span class="c1"># v.segment_max_speed_kt = None</span>
</span><span id="FlightPlan-764"><a href="#FlightPlan-764"><span class="linenos"> 764</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-765"><a href="#FlightPlan-765"><span class="linenos"> 765</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-766"><a href="#FlightPlan-766"><span class="linenos"> 766</span></a>					<span class="k">if</span> <span class="n">m_max_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-767"><a href="#FlightPlan-767"><span class="linenos"> 767</span></a>						<span class="n">m_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">m_max_end</span><span class="p">,</span> <span class="n">m_max_start</span><span class="p">)</span>
</span><span id="FlightPlan-768"><a href="#FlightPlan-768"><span class="linenos"> 768</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-769"><a href="#FlightPlan-769"><span class="linenos"> 769</span></a>						<span class="n">m_max</span> <span class="o">=</span> <span class="n">m_max_end</span>
</span><span id="FlightPlan-770"><a href="#FlightPlan-770"><span class="linenos"> 770</span></a>					<span class="c1"># v.segment_max_speed_kt = m2kt(m=m_max,fl=v.alt_ft)</span>
</span><span id="FlightPlan-771"><a href="#FlightPlan-771"><span class="linenos"> 771</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_max</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="FlightPlan-772"><a href="#FlightPlan-772"><span class="linenos"> 772</span></a>
</span><span id="FlightPlan-773"><a href="#FlightPlan-773"><span class="linenos"> 773</span></a>				<span class="n">m_min_start</span> <span class="o">=</span> <span class="n">m_min</span>
</span><span id="FlightPlan-774"><a href="#FlightPlan-774"><span class="linenos"> 774</span></a>				<span class="n">m_max_start</span> <span class="o">=</span> <span class="n">m_max</span>
</span><span id="FlightPlan-775"><a href="#FlightPlan-775"><span class="linenos"> 775</span></a>				
</span><span id="FlightPlan-776"><a href="#FlightPlan-776"><span class="linenos"> 776</span></a>				<span class="n">m_mrc</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_mrc_speed</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">weight</span><span class="o">+</span><span class="n">weight_prev</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="FlightPlan-777"><a href="#FlightPlan-777"><span class="linenos"> 777</span></a>				<span class="k">if</span> <span class="n">m_mrc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-778"><a href="#FlightPlan-778"><span class="linenos"> 778</span></a>					<span class="c1"># v.segment_mrc_speed_kt = m2kt(m=m_mrc,fl=v.alt_ft)</span>
</span><span id="FlightPlan-779"><a href="#FlightPlan-779"><span class="linenos"> 779</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_mrc</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="FlightPlan-780"><a href="#FlightPlan-780"><span class="linenos"> 780</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-781"><a href="#FlightPlan-781"><span class="linenos"> 781</span></a>					<span class="c1"># v.segment_mrc_speed_kt = None</span>
</span><span id="FlightPlan-782"><a href="#FlightPlan-782"><span class="linenos"> 782</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-783"><a href="#FlightPlan-783"><span class="linenos"> 783</span></a>
</span><span id="FlightPlan-784"><a href="#FlightPlan-784"><span class="linenos"> 784</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-785"><a href="#FlightPlan-785"><span class="linenos"> 785</span></a>				<span class="n">m_min_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan-786"><a href="#FlightPlan-786"><span class="linenos"> 786</span></a>	
</span><span id="FlightPlan-787"><a href="#FlightPlan-787"><span class="linenos"> 787</span></a>			<span class="n">weight_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">weight</span>
</span><span id="FlightPlan-788"><a href="#FlightPlan-788"><span class="linenos"> 788</span></a>			<span class="n">alt_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="FlightPlan-789"><a href="#FlightPlan-789"><span class="linenos"> 789</span></a>
</span><span id="FlightPlan-790"><a href="#FlightPlan-790"><span class="linenos"> 790</span></a>	<span class="k">def</span> <span class="nf">add_point_original_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> 
</span><span id="FlightPlan-791"><a href="#FlightPlan-791"><span class="linenos"> 791</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan-792"><a href="#FlightPlan-792"><span class="linenos"> 792</span></a><span class="sd">		Used to add a point to the flight plan.</span>
</span><span id="FlightPlan-793"><a href="#FlightPlan-793"><span class="linenos"> 793</span></a><span class="sd">		If the point is not supposed to be at end, one needs to call sort_points</span>
</span><span id="FlightPlan-794"><a href="#FlightPlan-794"><span class="linenos"> 794</span></a><span class="sd">		after that.</span>
</span><span id="FlightPlan-795"><a href="#FlightPlan-795"><span class="linenos"> 795</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan-796"><a href="#FlightPlan-796"><span class="linenos"> 796</span></a>		<span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-797"><a href="#FlightPlan-797"><span class="linenos"> 797</span></a>			<span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;coords&#39;</span><span class="p">])</span>
</span><span id="FlightPlan-798"><a href="#FlightPlan-798"><span class="linenos"> 798</span></a>
</span><span id="FlightPlan-799"><a href="#FlightPlan-799"><span class="linenos"> 799</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">FlightPlanPoint</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="FlightPlan-800"><a href="#FlightPlan-800"><span class="linenos"> 800</span></a>
</span><span id="FlightPlan-801"><a href="#FlightPlan-801"><span class="linenos"> 801</span></a>	<span class="k">def</span> <span class="nf">add_event_to_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">point_name</span><span class="p">):</span>
</span><span id="FlightPlan-802"><a href="#FlightPlan-802"><span class="linenos"> 802</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">point_name</span><span class="p">]</span><span class="o">.</span><span class="n">set_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="FlightPlan-803"><a href="#FlightPlan-803"><span class="linenos"> 803</span></a>
</span><span id="FlightPlan-804"><a href="#FlightPlan-804"><span class="linenos"> 804</span></a>	<span class="k">def</span> <span class="nf">add_initial_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp_points</span><span class="p">):</span>
</span><span id="FlightPlan-805"><a href="#FlightPlan-805"><span class="linenos"> 805</span></a>		<span class="k">for</span> <span class="n">coords</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">alt</span><span class="p">,</span> <span class="n">dist_from_orig_nm</span> <span class="ow">in</span> <span class="n">fp_points</span><span class="p">:</span>
</span><span id="FlightPlan-806"><a href="#FlightPlan-806"><span class="linenos"> 806</span></a>			<span class="c1"># TODO add_point doesn&#39;t seem to be defined!</span>
</span><span id="FlightPlan-807"><a href="#FlightPlan-807"><span class="linenos"> 807</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">add_point</span><span class="p">(</span><span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">alt</span><span class="o">=</span><span class="n">alt</span><span class="p">,</span> <span class="n">dist_from_orig_nm</span><span class="o">=</span><span class="n">dist_from_orig_nm</span><span class="p">)</span>
</span><span id="FlightPlan-808"><a href="#FlightPlan-808"><span class="linenos"> 808</span></a>
</span><span id="FlightPlan-809"><a href="#FlightPlan-809"><span class="linenos"> 809</span></a>	<span class="k">def</span> <span class="nf">sort_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compute_eibt</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="FlightPlan-810"><a href="#FlightPlan-810"><span class="linenos"> 810</span></a>		<span class="c1"># self.points_original_planned = OrderedDict(sorted(self.points_original_planned.items(), key=lambda x:x[1].get_time_min()))</span>
</span><span id="FlightPlan-811"><a href="#FlightPlan-811"><span class="linenos"> 811</span></a>
</span><span id="FlightPlan-812"><a href="#FlightPlan-812"><span class="linenos"> 812</span></a>		<span class="c1"># Sort by time and if two times the same then by name of the point desc. This is to ensure that if take-off inside execution horizon we get: take-off, enter_eaman_planning_radius, enter_eaman_execution_radius</span>
</span><span id="FlightPlan-813"><a href="#FlightPlan-813"><span class="linenos"> 813</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="FlightPlan-814"><a href="#FlightPlan-814"><span class="linenos"> 814</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_time_min</span><span class="p">())</span>
</span><span id="FlightPlan-815"><a href="#FlightPlan-815"><span class="linenos"> 815</span></a>		
</span><span id="FlightPlan-816"><a href="#FlightPlan-816"><span class="linenos"> 816</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span><span id="FlightPlan-817"><a href="#FlightPlan-817"><span class="linenos"> 817</span></a>		
</span><span id="FlightPlan-818"><a href="#FlightPlan-818"><span class="linenos"> 818</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-819"><a href="#FlightPlan-819"><span class="linenos"> 819</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan-820"><a href="#FlightPlan-820"><span class="linenos"> 820</span></a>			<span class="n">v</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="FlightPlan-821"><a href="#FlightPlan-821"><span class="linenos"> 821</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">dict_points_original_planned_number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
</span><span id="FlightPlan-822"><a href="#FlightPlan-822"><span class="linenos"> 822</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan-823"><a href="#FlightPlan-823"><span class="linenos"> 823</span></a>
</span><span id="FlightPlan-824"><a href="#FlightPlan-824"><span class="linenos"> 824</span></a>		<span class="k">if</span> <span class="n">compute_eibt</span><span class="p">:</span>
</span><span id="FlightPlan-825"><a href="#FlightPlan-825"><span class="linenos"> 825</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span><span id="FlightPlan-826"><a href="#FlightPlan-826"><span class="linenos"> 826</span></a>
</span><span id="FlightPlan-827"><a href="#FlightPlan-827"><span class="linenos"> 827</span></a>	<span class="k">def</span> <span class="nf">recompute_speeds_new_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="FlightPlan-828"><a href="#FlightPlan-828"><span class="linenos"> 828</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan-829"><a href="#FlightPlan-829"><span class="linenos"> 829</span></a><span class="sd">		This recomputes the speed of the point &quot;name&quot; and the next one.</span>
</span><span id="FlightPlan-830"><a href="#FlightPlan-830"><span class="linenos"> 830</span></a><span class="sd">		Note: this does not add a new point.</span>
</span><span id="FlightPlan-831"><a href="#FlightPlan-831"><span class="linenos"> 831</span></a>
</span><span id="FlightPlan-832"><a href="#FlightPlan-832"><span class="linenos"> 832</span></a><span class="sd">		Parameters</span>
</span><span id="FlightPlan-833"><a href="#FlightPlan-833"><span class="linenos"> 833</span></a><span class="sd">		==========</span>
</span><span id="FlightPlan-834"><a href="#FlightPlan-834"><span class="linenos"> 834</span></a><span class="sd">		name: id of point to recompute.</span>
</span><span id="FlightPlan-835"><a href="#FlightPlan-835"><span class="linenos"> 835</span></a><span class="sd">		points:  list of points existing already.</span>
</span><span id="FlightPlan-836"><a href="#FlightPlan-836"><span class="linenos"> 836</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan-837"><a href="#FlightPlan-837"><span class="linenos"> 837</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan-838"><a href="#FlightPlan-838"><span class="linenos"> 838</span></a>		<span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-839"><a href="#FlightPlan-839"><span class="linenos"> 839</span></a>			<span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="FlightPlan-840"><a href="#FlightPlan-840"><span class="linenos"> 840</span></a>		<span class="c1">#</span>
</span><span id="FlightPlan-841"><a href="#FlightPlan-841"><span class="linenos"> 841</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan-842"><a href="#FlightPlan-842"><span class="linenos"> 842</span></a>		<span class="c1"># 	print(&#39;Speed recomputation of new point ({}) for flight {} ({})&#39;.format(name, self.flight_uid, self))</span>
</span><span id="FlightPlan-843"><a href="#FlightPlan-843"><span class="linenos"> 843</span></a>		<span class="c1"># 	# self.print_full_planned_executed()</span>
</span><span id="FlightPlan-844"><a href="#FlightPlan-844"><span class="linenos"> 844</span></a>		<span class="c1"># 	print(&#39;POINTS:&#39;, points)</span>
</span><span id="FlightPlan-845"><a href="#FlightPlan-845"><span class="linenos"> 845</span></a>		<span class="c1"># 	for point in points:</span>
</span><span id="FlightPlan-846"><a href="#FlightPlan-846"><span class="linenos"> 846</span></a>		<span class="c1"># 		print(&#39;wind at point {}: {}&#39;.format(point, point.wind))</span>
</span><span id="FlightPlan-847"><a href="#FlightPlan-847"><span class="linenos"> 847</span></a>
</span><span id="FlightPlan-848"><a href="#FlightPlan-848"><span class="linenos"> 848</span></a>		<span class="n">next_one_recompute</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan-849"><a href="#FlightPlan-849"><span class="linenos"> 849</span></a>		<span class="n">computing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan-850"><a href="#FlightPlan-850"><span class="linenos"> 850</span></a>		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="ow">and</span> <span class="n">computing</span><span class="p">:</span>
</span><span id="FlightPlan-851"><a href="#FlightPlan-851"><span class="linenos"> 851</span></a>			<span class="n">v</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan-852"><a href="#FlightPlan-852"><span class="linenos"> 852</span></a>			<span class="k">if</span> <span class="n">next_one_recompute</span><span class="p">:</span>
</span><span id="FlightPlan-853"><a href="#FlightPlan-853"><span class="linenos"> 853</span></a>				<span class="n">computing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan-854"><a href="#FlightPlan-854"><span class="linenos"> 854</span></a>			<span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="FlightPlan-855"><a href="#FlightPlan-855"><span class="linenos"> 855</span></a>				<span class="n">next_one_recompute</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan-856"><a href="#FlightPlan-856"><span class="linenos"> 856</span></a>				<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan-857"><a href="#FlightPlan-857"><span class="linenos"> 857</span></a>				<span class="c1"># 	print(&#39;Point before: {} ;  Point after: {}&#39;.format(points[i-1].name, points[i+1].name))</span>
</span><span id="FlightPlan-858"><a href="#FlightPlan-858"><span class="linenos"> 858</span></a>
</span><span id="FlightPlan-859"><a href="#FlightPlan-859"><span class="linenos"> 859</span></a>			<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span> <span class="ow">or</span> <span class="n">next_one_recompute</span><span class="p">:</span>
</span><span id="FlightPlan-860"><a href="#FlightPlan-860"><span class="linenos"> 860</span></a>				<span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-861"><a href="#FlightPlan-861"><span class="linenos"> 861</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-862"><a href="#FlightPlan-862"><span class="linenos"> 862</span></a>						<span class="n">avg_gs</span> <span class="o">=</span> <span class="mi">60</span><span class="o">*</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="o">-</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="o">-</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="p">)</span>
</span><span id="FlightPlan-863"><a href="#FlightPlan-863"><span class="linenos"> 863</span></a>					<span class="k">except</span><span class="p">:</span>  <span class="c1"># DANGEROUS!</span>
</span><span id="FlightPlan-864"><a href="#FlightPlan-864"><span class="linenos"> 864</span></a>						<span class="n">avg_gs</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Points at same position e.g. entering EAMAN and TOD</span>
</span><span id="FlightPlan-865"><a href="#FlightPlan-865"><span class="linenos"> 865</span></a>
</span><span id="FlightPlan-866"><a href="#FlightPlan-866"><span class="linenos"> 866</span></a>					<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan-867"><a href="#FlightPlan-867"><span class="linenos"> 867</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. avg_gs: {}; &#39;.format(self.flight_uid, avg_gs))</span>
</span><span id="FlightPlan-868"><a href="#FlightPlan-868"><span class="linenos"> 868</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].time_min: {} ; points[i-1].time_min: {}&#39;.format(self.flight_uid, points[i].time_min, points[i-1].time_min))</span>
</span><span id="FlightPlan-869"><a href="#FlightPlan-869"><span class="linenos"> 869</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].dist_from_orig_nm: {} ; points[i-1].dist_from_orig_nm: {}&#39;.format(self.flight_uid, points[i].dist_from_orig_nm, points[i-1].dist_from_orig_nm))</span>
</span><span id="FlightPlan-870"><a href="#FlightPlan-870"><span class="linenos"> 870</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].wind: {}&#39;.format(self.flight_uid, points[i].wind))</span>
</span><span id="FlightPlan-871"><a href="#FlightPlan-871"><span class="linenos"> 871</span></a>
</span><span id="FlightPlan-872"><a href="#FlightPlan-872"><span class="linenos"> 872</span></a>					<span class="n">planned_segment_speed_kt</span> <span class="o">=</span> <span class="n">avg_gs</span> <span class="o">-</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span>
</span><span id="FlightPlan-873"><a href="#FlightPlan-873"><span class="linenos"> 873</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">planned_segment_speed_kt</span>
</span><span id="FlightPlan-874"><a href="#FlightPlan-874"><span class="linenos"> 874</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-875"><a href="#FlightPlan-875"><span class="linenos"> 875</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>    
</span><span id="FlightPlan-876"><a href="#FlightPlan-876"><span class="linenos"> 876</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan-877"><a href="#FlightPlan-877"><span class="linenos"> 877</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan-878"><a href="#FlightPlan-878"><span class="linenos"> 878</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan-879"><a href="#FlightPlan-879"><span class="linenos"> 879</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan-880"><a href="#FlightPlan-880"><span class="linenos"> 880</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-881"><a href="#FlightPlan-881"><span class="linenos"> 881</span></a>						<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]:</span>
</span><span id="FlightPlan-882"><a href="#FlightPlan-882"><span class="linenos"> 882</span></a>							<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="FlightPlan-883"><a href="#FlightPlan-883"><span class="linenos"> 883</span></a>						<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-884"><a href="#FlightPlan-884"><span class="linenos"> 884</span></a>							<span class="c1"># print(v.dict_speeds[&#39;speed_kt&#39;],v.dict_speeds[&#39;mrc_kt&#39;],v.dict_speeds[&#39;max_kt&#39;])</span>
</span><span id="FlightPlan-885"><a href="#FlightPlan-885"><span class="linenos"> 885</span></a>							<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>    
</span><span id="FlightPlan-886"><a href="#FlightPlan-886"><span class="linenos"> 886</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan-887"><a href="#FlightPlan-887"><span class="linenos"> 887</span></a>			<span class="c1"># 	print(&#39;Speed for point {} for flight {}: {}&#39;.format(i, self.flight_uid, v.dict_speeds))</span>
</span><span id="FlightPlan-888"><a href="#FlightPlan-888"><span class="linenos"> 888</span></a>
</span><span id="FlightPlan-889"><a href="#FlightPlan-889"><span class="linenos"> 889</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan-890"><a href="#FlightPlan-890"><span class="linenos"> 890</span></a>
</span><span id="FlightPlan-891"><a href="#FlightPlan-891"><span class="linenos"> 891</span></a>	<span class="k">def</span> <span class="nf">name_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="FlightPlan-892"><a href="#FlightPlan-892"><span class="linenos"> 892</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan-893"><a href="#FlightPlan-893"><span class="linenos"> 893</span></a><span class="sd">		need to sort the point after that</span>
</span><span id="FlightPlan-894"><a href="#FlightPlan-894"><span class="linenos"> 894</span></a><span class="sd">		TODO: deletion should be done before adding the new one</span>
</span><span id="FlightPlan-895"><a href="#FlightPlan-895"><span class="linenos"> 895</span></a><span class="sd">		to avoid removing the new point.</span>
</span><span id="FlightPlan-896"><a href="#FlightPlan-896"><span class="linenos"> 896</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan-897"><a href="#FlightPlan-897"><span class="linenos"> 897</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-898"><a href="#FlightPlan-898"><span class="linenos"> 898</span></a>			<span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span>
</span><span id="FlightPlan-899"><a href="#FlightPlan-899"><span class="linenos"> 899</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-900"><a href="#FlightPlan-900"><span class="linenos"> 900</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;YOUPI:&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="FlightPlan-901"><a href="#FlightPlan-901"><span class="linenos"> 901</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
</span><span id="FlightPlan-902"><a href="#FlightPlan-902"><span class="linenos"> 902</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="FlightPlan-903"><a href="#FlightPlan-903"><span class="linenos"> 903</span></a>			<span class="k">raise</span>	
</span><span id="FlightPlan-904"><a href="#FlightPlan-904"><span class="linenos"> 904</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="FlightPlan-905"><a href="#FlightPlan-905"><span class="linenos"> 905</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="FlightPlan-906"><a href="#FlightPlan-906"><span class="linenos"> 906</span></a>		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="FlightPlan-907"><a href="#FlightPlan-907"><span class="linenos"> 907</span></a>
</span><span id="FlightPlan-908"><a href="#FlightPlan-908"><span class="linenos"> 908</span></a>	<span class="k">def</span> <span class="nf">get_named_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-909"><a href="#FlightPlan-909"><span class="linenos"> 909</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">pt</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="FlightPlan-910"><a href="#FlightPlan-910"><span class="linenos"> 910</span></a>
</span><span id="FlightPlan-911"><a href="#FlightPlan-911"><span class="linenos"> 911</span></a>	<span class="k">def</span> <span class="nf">put_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delay</span><span class="p">):</span>
</span><span id="FlightPlan-912"><a href="#FlightPlan-912"><span class="linenos"> 912</span></a>		<span class="k">pass</span>
</span><span id="FlightPlan-913"><a href="#FlightPlan-913"><span class="linenos"> 913</span></a>
</span><span id="FlightPlan-914"><a href="#FlightPlan-914"><span class="linenos"> 914</span></a>	<span class="k">def</span> <span class="nf">find_intersecting_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="n">geom</span><span class="o">=</span><span class="p">{}):</span>
</span><span id="FlightPlan-915"><a href="#FlightPlan-915"><span class="linenos"> 915</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan-916"><a href="#FlightPlan-916"><span class="linenos"> 916</span></a><span class="sd">		Note: coordinates are lat/lon in the objects.</span>
</span><span id="FlightPlan-917"><a href="#FlightPlan-917"><span class="linenos"> 917</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan-918"><a href="#FlightPlan-918"><span class="linenos"> 918</span></a>		<span class="k">if</span> <span class="n">typ</span> <span class="o">==</span> <span class="s1">&#39;radius&#39;</span><span class="p">:</span>
</span><span id="FlightPlan-919"><a href="#FlightPlan-919"><span class="linenos"> 919</span></a>			<span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan-920"><a href="#FlightPlan-920"><span class="linenos"> 920</span></a>			<span class="n">r</span> <span class="o">=</span> <span class="n">geom</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]</span>
</span><span id="FlightPlan-921"><a href="#FlightPlan-921"><span class="linenos"> 921</span></a>			<span class="n">r</span> <span class="o">*=</span> <span class="n">nm2km</span>
</span><span id="FlightPlan-922"><a href="#FlightPlan-922"><span class="linenos"> 922</span></a>			<span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">geom</span><span class="p">[</span><span class="s1">&#39;coords_center&#39;</span><span class="p">]</span>
</span><span id="FlightPlan-923"><a href="#FlightPlan-923"><span class="linenos"> 923</span></a>
</span><span id="FlightPlan-924"><a href="#FlightPlan-924"><span class="linenos"> 924</span></a>			<span class="c1"># Using azimuthal equidistant projection for points, centered on the &quot;center&quot;, x0, y0.</span>
</span><span id="FlightPlan-925"><a href="#FlightPlan-925"><span class="linenos"> 925</span></a>			<span class="c1"># This should be exact.</span>
</span><span id="FlightPlan-926"><a href="#FlightPlan-926"><span class="linenos"> 926</span></a>			<span class="c1"># Note: distance are conserved, so GCD is also projected distance.</span>
</span><span id="FlightPlan-927"><a href="#FlightPlan-927"><span class="linenos"> 927</span></a>			<span class="n">proj_forward</span><span class="p">,</span> <span class="n">proj_inv</span> <span class="o">=</span> <span class="n">build_proj</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="n">y0</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="n">x0</span><span class="p">)</span>
</span><span id="FlightPlan-928"><a href="#FlightPlan-928"><span class="linenos"> 928</span></a>
</span><span id="FlightPlan-929"><a href="#FlightPlan-929"><span class="linenos"> 929</span></a>			<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">dic</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
</span><span id="FlightPlan-930"><a href="#FlightPlan-930"><span class="linenos"> 930</span></a>				<span class="c1"># Note: we do not use haversine formula here, because it differs sligthly </span>
</span><span id="FlightPlan-931"><a href="#FlightPlan-931"><span class="linenos"> 931</span></a>				<span class="c1"># from the cartopy projection, which leads to errors.</span>
</span><span id="FlightPlan-932"><a href="#FlightPlan-932"><span class="linenos"> 932</span></a>				<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dic</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="FlightPlan-933"><a href="#FlightPlan-933"><span class="linenos"> 933</span></a>				<span class="n">d</span> <span class="o">=</span> <span class="n">distance_euclidean</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="FlightPlan-934"><a href="#FlightPlan-934"><span class="linenos"> 934</span></a>				<span class="c1"># d = haversine(geom[&#39;coords_center&#39;][1], geom[&#39;coords_center&#39;][0], dic.coords[1], dic.coords[0])</span>
</span><span id="FlightPlan-935"><a href="#FlightPlan-935"><span class="linenos"> 935</span></a>				<span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
</span><span id="FlightPlan-936"><a href="#FlightPlan-936"><span class="linenos"> 936</span></a>					<span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan-937"><a href="#FlightPlan-937"><span class="linenos"> 937</span></a>					<span class="k">break</span>
</span><span id="FlightPlan-938"><a href="#FlightPlan-938"><span class="linenos"> 938</span></a>
</span><span id="FlightPlan-939"><a href="#FlightPlan-939"><span class="linenos"> 939</span></a>			<span class="k">if</span> <span class="n">found</span><span class="p">:</span>
</span><span id="FlightPlan-940"><a href="#FlightPlan-940"><span class="linenos"> 940</span></a>				<span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-941"><a href="#FlightPlan-941"><span class="linenos"> 941</span></a>					<span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan-942"><a href="#FlightPlan-942"><span class="linenos"> 942</span></a>				
</span><span id="FlightPlan-943"><a href="#FlightPlan-943"><span class="linenos"> 943</span></a>				<span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-944"><a href="#FlightPlan-944"><span class="linenos"> 944</span></a>					<span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan-945"><a href="#FlightPlan-945"><span class="linenos"> 945</span></a>				
</span><span id="FlightPlan-946"><a href="#FlightPlan-946"><span class="linenos"> 946</span></a>				<span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span>
</span><span id="FlightPlan-947"><a href="#FlightPlan-947"><span class="linenos"> 947</span></a>				<span class="k">if</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
</span><span id="FlightPlan-948"><a href="#FlightPlan-948"><span class="linenos"> 948</span></a>					<span class="c1"># This means that the first point is already in the circle.</span>
</span><span id="FlightPlan-949"><a href="#FlightPlan-949"><span class="linenos"> 949</span></a>					<span class="c1"># In this case, the event should be triggered immediately</span>
</span><span id="FlightPlan-950"><a href="#FlightPlan-950"><span class="linenos"> 950</span></a>					<span class="c1"># after takeoff.</span>
</span><span id="FlightPlan-951"><a href="#FlightPlan-951"><span class="linenos"> 951</span></a>					<span class="n">pt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="FlightPlan-952"><a href="#FlightPlan-952"><span class="linenos"> 952</span></a>					
</span><span id="FlightPlan-953"><a href="#FlightPlan-953"><span class="linenos"> 953</span></a>					<span class="n">t</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan-954"><a href="#FlightPlan-954"><span class="linenos"> 954</span></a>					<span class="n">alt</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="FlightPlan-955"><a href="#FlightPlan-955"><span class="linenos"> 955</span></a>					<span class="n">sol</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">coords</span>
</span><span id="FlightPlan-956"><a href="#FlightPlan-956"><span class="linenos"> 956</span></a>					<span class="n">d_int</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan-957"><a href="#FlightPlan-957"><span class="linenos"> 957</span></a>					<span class="n">d_des_int</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan-958"><a href="#FlightPlan-958"><span class="linenos"> 958</span></a>					<span class="n">wind</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">wind</span>
</span><span id="FlightPlan-959"><a href="#FlightPlan-959"><span class="linenos"> 959</span></a>					<span class="n">weight</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">weight</span>
</span><span id="FlightPlan-960"><a href="#FlightPlan-960"><span class="linenos"> 960</span></a>					<span class="n">fuel</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">fuel</span>
</span><span id="FlightPlan-961"><a href="#FlightPlan-961"><span class="linenos"> 961</span></a>
</span><span id="FlightPlan-962"><a href="#FlightPlan-962"><span class="linenos"> 962</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-963"><a href="#FlightPlan-963"><span class="linenos"> 963</span></a>					<span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span>
</span><span id="FlightPlan-964"><a href="#FlightPlan-964"><span class="linenos"> 964</span></a>					
</span><span id="FlightPlan-965"><a href="#FlightPlan-965"><span class="linenos"> 965</span></a>					<span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
</span><span id="FlightPlan-966"><a href="#FlightPlan-966"><span class="linenos"> 966</span></a>					<span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
</span><span id="FlightPlan-967"><a href="#FlightPlan-967"><span class="linenos"> 967</span></a>
</span><span id="FlightPlan-968"><a href="#FlightPlan-968"><span class="linenos"> 968</span></a>					<span class="k">if</span> <span class="n">x1_p</span><span class="o">!=</span><span class="n">x2_p</span><span class="p">:</span>
</span><span id="FlightPlan-969"><a href="#FlightPlan-969"><span class="linenos"> 969</span></a>						<span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2_p</span><span class="o">-</span><span class="n">y1_p</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x2_p</span><span class="o">-</span><span class="n">x1_p</span><span class="p">)</span>
</span><span id="FlightPlan-970"><a href="#FlightPlan-970"><span class="linenos"> 970</span></a>						<span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">x2_p</span><span class="o">*</span><span class="n">y1_p</span><span class="o">-</span><span class="n">y2_p</span><span class="o">*</span><span class="n">x1_p</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x2_p</span><span class="o">-</span><span class="n">x1_p</span><span class="p">)</span>
</span><span id="FlightPlan-971"><a href="#FlightPlan-971"><span class="linenos"> 971</span></a>
</span><span id="FlightPlan-972"><a href="#FlightPlan-972"><span class="linenos"> 972</span></a>						<span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span><span class="o">+</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="FlightPlan-973"><a href="#FlightPlan-973"><span class="linenos"> 973</span></a>						<span class="n">B_p</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span>
</span><span id="FlightPlan-974"><a href="#FlightPlan-974"><span class="linenos"> 974</span></a>						<span class="n">C</span> <span class="o">=</span> <span class="n">b</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span>
</span><span id="FlightPlan-975"><a href="#FlightPlan-975"><span class="linenos"> 975</span></a>
</span><span id="FlightPlan-976"><a href="#FlightPlan-976"><span class="linenos"> 976</span></a>						<span class="n">delta</span> <span class="o">=</span> <span class="n">B_p</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">A</span><span class="o">*</span><span class="n">C</span>
</span><span id="FlightPlan-977"><a href="#FlightPlan-977"><span class="linenos"> 977</span></a>
</span><span id="FlightPlan-978"><a href="#FlightPlan-978"><span class="linenos"> 978</span></a>						<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-979"><a href="#FlightPlan-979"><span class="linenos"> 979</span></a>							<span class="k">assert</span> <span class="n">delta</span> <span class="o">&gt;=</span> <span class="mf">0.</span>
</span><span id="FlightPlan-980"><a href="#FlightPlan-980"><span class="linenos"> 980</span></a>						<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-981"><a href="#FlightPlan-981"><span class="linenos"> 981</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;TINTININ&#39;</span><span class="p">)</span>
</span><span id="FlightPlan-982"><a href="#FlightPlan-982"><span class="linenos"> 982</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="FlightPlan-983"><a href="#FlightPlan-983"><span class="linenos"> 983</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="FlightPlan-984"><a href="#FlightPlan-984"><span class="linenos"> 984</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan-985"><a href="#FlightPlan-985"><span class="linenos"> 985</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan-986"><a href="#FlightPlan-986"><span class="linenos"> 986</span></a>							<span class="c1"># print(&#39;DEBUG&#39;, &#39;x3, y3&#39;, x3, y3)</span>
</span><span id="FlightPlan-987"><a href="#FlightPlan-987"><span class="linenos"> 987</span></a>							<span class="c1"># print(&#39;DEBUG&#39;, &#39;x3_p, y3_p&#39;, x3_p, y3_p)</span>
</span><span id="FlightPlan-988"><a href="#FlightPlan-988"><span class="linenos"> 988</span></a>							<span class="c1"># print (&#39;DEBUG&#39;, &#39;r_p&#39;, r_p)</span>
</span><span id="FlightPlan-989"><a href="#FlightPlan-989"><span class="linenos"> 989</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;a, b&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</span><span id="FlightPlan-990"><a href="#FlightPlan-990"><span class="linenos"> 990</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;A, B_p, C&#39;</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B_p</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
</span><span id="FlightPlan-991"><a href="#FlightPlan-991"><span class="linenos"> 991</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;delta&#39;</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
</span><span id="FlightPlan-992"><a href="#FlightPlan-992"><span class="linenos"> 992</span></a>							<span class="k">raise</span>
</span><span id="FlightPlan-993"><a href="#FlightPlan-993"><span class="linenos"> 993</span></a>
</span><span id="FlightPlan-994"><a href="#FlightPlan-994"><span class="linenos"> 994</span></a>						<span class="n">x_sol_p</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span> <span class="n">B_p</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span><span class="o">/</span><span class="n">A</span>
</span><span id="FlightPlan-995"><a href="#FlightPlan-995"><span class="linenos"> 995</span></a>						
</span><span id="FlightPlan-996"><a href="#FlightPlan-996"><span class="linenos"> 996</span></a>						<span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">x_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)):</span>
</span><span id="FlightPlan-997"><a href="#FlightPlan-997"><span class="linenos"> 997</span></a>							<span class="n">x_sol_p</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span> <span class="n">B_p</span> <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span><span class="o">/</span><span class="n">A</span>
</span><span id="FlightPlan-998"><a href="#FlightPlan-998"><span class="linenos"> 998</span></a>							
</span><span id="FlightPlan-999"><a href="#FlightPlan-999"><span class="linenos"> 999</span></a>							<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-1000"><a href="#FlightPlan-1000"><span class="linenos">1000</span></a>								<span class="k">assert</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">x_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">))</span>
</span><span id="FlightPlan-1001"><a href="#FlightPlan-1001"><span class="linenos">1001</span></a>							<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-1002"><a href="#FlightPlan-1002"><span class="linenos">1002</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;YO&#39;</span><span class="p">)</span>
</span><span id="FlightPlan-1003"><a href="#FlightPlan-1003"><span class="linenos">1003</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="FlightPlan-1004"><a href="#FlightPlan-1004"><span class="linenos">1004</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="FlightPlan-1005"><a href="#FlightPlan-1005"><span class="linenos">1005</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan-1006"><a href="#FlightPlan-1006"><span class="linenos">1006</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan-1007"><a href="#FlightPlan-1007"><span class="linenos">1007</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, x_sol_p, x2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span>
</span><span id="FlightPlan-1008"><a href="#FlightPlan-1008"><span class="linenos">1008</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>  <span class="c1">#, b)</span>
</span><span id="FlightPlan-1009"><a href="#FlightPlan-1009"><span class="linenos">1009</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;r=&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</span><span id="FlightPlan-1010"><a href="#FlightPlan-1010"><span class="linenos">1010</span></a>								<span class="k">raise</span>
</span><span id="FlightPlan-1011"><a href="#FlightPlan-1011"><span class="linenos">1011</span></a>
</span><span id="FlightPlan-1012"><a href="#FlightPlan-1012"><span class="linenos">1012</span></a>						<span class="n">y_sol_p</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x_sol_p</span> <span class="o">+</span> <span class="n">b</span>
</span><span id="FlightPlan-1013"><a href="#FlightPlan-1013"><span class="linenos">1013</span></a>
</span><span id="FlightPlan-1014"><a href="#FlightPlan-1014"><span class="linenos">1014</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-1015"><a href="#FlightPlan-1015"><span class="linenos">1015</span></a>						<span class="n">x_sol_p</span> <span class="o">=</span> <span class="n">x1_p</span>
</span><span id="FlightPlan-1016"><a href="#FlightPlan-1016"><span class="linenos">1016</span></a>
</span><span id="FlightPlan-1017"><a href="#FlightPlan-1017"><span class="linenos">1017</span></a>						<span class="n">y_sol_p</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x_sol_p</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="FlightPlan-1018"><a href="#FlightPlan-1018"><span class="linenos">1018</span></a>
</span><span id="FlightPlan-1019"><a href="#FlightPlan-1019"><span class="linenos">1019</span></a>						<span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">y_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)):</span>
</span><span id="FlightPlan-1020"><a href="#FlightPlan-1020"><span class="linenos">1020</span></a>							<span class="n">y_sol_p</span> <span class="o">=</span> <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x_sol_p</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="FlightPlan-1021"><a href="#FlightPlan-1021"><span class="linenos">1021</span></a>
</span><span id="FlightPlan-1022"><a href="#FlightPlan-1022"><span class="linenos">1022</span></a>						<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-1023"><a href="#FlightPlan-1023"><span class="linenos">1023</span></a>							<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">y_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan-1024"><a href="#FlightPlan-1024"><span class="linenos">1024</span></a>						<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-1025"><a href="#FlightPlan-1025"><span class="linenos">1025</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;IO&#39;</span><span class="p">)</span>
</span><span id="FlightPlan-1026"><a href="#FlightPlan-1026"><span class="linenos">1026</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="FlightPlan-1027"><a href="#FlightPlan-1027"><span class="linenos">1027</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="FlightPlan-1028"><a href="#FlightPlan-1028"><span class="linenos">1028</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan-1029"><a href="#FlightPlan-1029"><span class="linenos">1029</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan-1030"><a href="#FlightPlan-1030"><span class="linenos">1030</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</span><span id="FlightPlan-1031"><a href="#FlightPlan-1031"><span class="linenos">1031</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;y1_p, y_sol_p, y2_p&#39;</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan-1032"><a href="#FlightPlan-1032"><span class="linenos">1032</span></a>							<span class="c1"># print (&#39;DEBUG&#39;, &#39;a&#39;, a)</span>
</span><span id="FlightPlan-1033"><a href="#FlightPlan-1033"><span class="linenos">1033</span></a>							<span class="k">raise</span>
</span><span id="FlightPlan-1034"><a href="#FlightPlan-1034"><span class="linenos">1034</span></a>
</span><span id="FlightPlan-1035"><a href="#FlightPlan-1035"><span class="linenos">1035</span></a>					<span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol</span> <span class="o">=</span> <span class="n">proj_inv</span><span class="p">(</span><span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="FlightPlan-1036"><a href="#FlightPlan-1036"><span class="linenos">1036</span></a>					<span class="n">sol</span> <span class="o">=</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span>
</span><span id="FlightPlan-1037"><a href="#FlightPlan-1037"><span class="linenos">1037</span></a>
</span><span id="FlightPlan-1038"><a href="#FlightPlan-1038"><span class="linenos">1038</span></a>					<span class="c1"># Get distances in flight plan from origin to compute flown distance</span>
</span><span id="FlightPlan-1039"><a href="#FlightPlan-1039"><span class="linenos">1039</span></a>					<span class="n">d1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan-1040"><a href="#FlightPlan-1040"><span class="linenos">1040</span></a>					<span class="n">d2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan-1041"><a href="#FlightPlan-1041"><span class="linenos">1041</span></a>					<span class="n">dd</span> <span class="o">=</span> <span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span>
</span><span id="FlightPlan-1042"><a href="#FlightPlan-1042"><span class="linenos">1042</span></a>					<span class="k">assert</span> <span class="n">dd</span> <span class="o">&gt;=</span> <span class="mf">0.</span>
</span><span id="FlightPlan-1043"><a href="#FlightPlan-1043"><span class="linenos">1043</span></a>
</span><span id="FlightPlan-1044"><a href="#FlightPlan-1044"><span class="linenos">1044</span></a>					<span class="c1"># Compute GCD to do the ratio between both</span>
</span><span id="FlightPlan-1045"><a href="#FlightPlan-1045"><span class="linenos">1045</span></a>					<span class="n">dd_gcd</span> <span class="o">=</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
</span><span id="FlightPlan-1046"><a href="#FlightPlan-1046"><span class="linenos">1046</span></a>
</span><span id="FlightPlan-1047"><a href="#FlightPlan-1047"><span class="linenos">1047</span></a>					<span class="c1"># Get GCD between point 1 and intersection</span>
</span><span id="FlightPlan-1048"><a href="#FlightPlan-1048"><span class="linenos">1048</span></a>					<span class="n">dd_gcd_int</span> <span class="o">=</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">)</span>
</span><span id="FlightPlan-1049"><a href="#FlightPlan-1049"><span class="linenos">1049</span></a>					<span class="n">rho</span> <span class="o">=</span> <span class="n">dd_gcd_int</span><span class="o">/</span><span class="n">dd_gcd</span>
</span><span id="FlightPlan-1050"><a href="#FlightPlan-1050"><span class="linenos">1050</span></a>
</span><span id="FlightPlan-1051"><a href="#FlightPlan-1051"><span class="linenos">1051</span></a>					<span class="c1"># Compute real distance from origin (linear interpolation)</span>
</span><span id="FlightPlan-1052"><a href="#FlightPlan-1052"><span class="linenos">1052</span></a>					<span class="n">d_int</span> <span class="o">=</span> <span class="n">d1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dd</span>
</span><span id="FlightPlan-1053"><a href="#FlightPlan-1053"><span class="linenos">1053</span></a>
</span><span id="FlightPlan-1054"><a href="#FlightPlan-1054"><span class="linenos">1054</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-1055"><a href="#FlightPlan-1055"><span class="linenos">1055</span></a>						<span class="k">assert</span> <span class="n">d1</span><span class="o">&lt;=</span><span class="n">d_int</span><span class="o">&lt;=</span><span class="n">d2</span>
</span><span id="FlightPlan-1056"><a href="#FlightPlan-1056"><span class="linenos">1056</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-1057"><a href="#FlightPlan-1057"><span class="linenos">1057</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;d1, d2, d_int&#39;</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">d_int</span><span class="p">)</span>
</span><span id="FlightPlan-1058"><a href="#FlightPlan-1058"><span class="linenos">1058</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd&#39;</span><span class="p">,</span> <span class="n">dd</span><span class="p">)</span>
</span><span id="FlightPlan-1059"><a href="#FlightPlan-1059"><span class="linenos">1059</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd_gcd&#39;</span><span class="p">,</span> <span class="n">dd_gcd</span><span class="p">)</span>
</span><span id="FlightPlan-1060"><a href="#FlightPlan-1060"><span class="linenos">1060</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd_gcd_int&#39;</span><span class="p">,</span> <span class="n">dd_gcd_int</span><span class="p">)</span>
</span><span id="FlightPlan-1061"><a href="#FlightPlan-1061"><span class="linenos">1061</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;rho&#39;</span><span class="p">,</span> <span class="n">rho</span><span class="p">)</span>
</span><span id="FlightPlan-1062"><a href="#FlightPlan-1062"><span class="linenos">1062</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan-1063"><a href="#FlightPlan-1063"><span class="linenos">1063</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan-1064"><a href="#FlightPlan-1064"><span class="linenos">1064</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x_sol, y_sol, x_sol_p, y_sol_p&#39;</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="FlightPlan-1065"><a href="#FlightPlan-1065"><span class="linenos">1065</span></a>						<span class="k">raise</span>
</span><span id="FlightPlan-1066"><a href="#FlightPlan-1066"><span class="linenos">1066</span></a>					<span class="c1"># Compute real distance to destination (linear interpolation)</span>
</span><span id="FlightPlan-1067"><a href="#FlightPlan-1067"><span class="linenos">1067</span></a>					<span class="n">d_des1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan-1068"><a href="#FlightPlan-1068"><span class="linenos">1068</span></a>					<span class="n">d_des2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan-1069"><a href="#FlightPlan-1069"><span class="linenos">1069</span></a>					<span class="n">dd_des</span> <span class="o">=</span> <span class="n">d_des2</span> <span class="o">-</span> <span class="n">d_des1</span>
</span><span id="FlightPlan-1070"><a href="#FlightPlan-1070"><span class="linenos">1070</span></a>					<span class="n">d_des_int</span> <span class="o">=</span> <span class="n">d_des1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dd_des</span>
</span><span id="FlightPlan-1071"><a href="#FlightPlan-1071"><span class="linenos">1071</span></a>
</span><span id="FlightPlan-1072"><a href="#FlightPlan-1072"><span class="linenos">1072</span></a>					<span class="k">assert</span> <span class="n">d_des2</span> <span class="o">&lt;=</span> <span class="n">d_des_int</span><span class="o">&lt;=</span><span class="n">d_des1</span>
</span><span id="FlightPlan-1073"><a href="#FlightPlan-1073"><span class="linenos">1073</span></a>
</span><span id="FlightPlan-1074"><a href="#FlightPlan-1074"><span class="linenos">1074</span></a>					<span class="c1"># Time of intersection, same linear interpolation</span>
</span><span id="FlightPlan-1075"><a href="#FlightPlan-1075"><span class="linenos">1075</span></a>					<span class="n">t1</span><span class="p">,</span> <span class="n">t2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan-1076"><a href="#FlightPlan-1076"><span class="linenos">1076</span></a>					<span class="n">dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">)</span>
</span><span id="FlightPlan-1077"><a href="#FlightPlan-1077"><span class="linenos">1077</span></a>					<span class="n">t</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dt</span>
</span><span id="FlightPlan-1078"><a href="#FlightPlan-1078"><span class="linenos">1078</span></a>
</span><span id="FlightPlan-1079"><a href="#FlightPlan-1079"><span class="linenos">1079</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan-1080"><a href="#FlightPlan-1080"><span class="linenos">1080</span></a>						<span class="k">assert</span> <span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="n">t2</span>
</span><span id="FlightPlan-1081"><a href="#FlightPlan-1081"><span class="linenos">1081</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan-1082"><a href="#FlightPlan-1082"><span class="linenos">1082</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan-1083"><a href="#FlightPlan-1083"><span class="linenos">1083</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan-1084"><a href="#FlightPlan-1084"><span class="linenos">1084</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x_sol, y_sol, x_sol_p, y_sol_p&#39;</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="FlightPlan-1085"><a href="#FlightPlan-1085"><span class="linenos">1085</span></a>						<span class="k">raise</span>
</span><span id="FlightPlan-1086"><a href="#FlightPlan-1086"><span class="linenos">1086</span></a>
</span><span id="FlightPlan-1087"><a href="#FlightPlan-1087"><span class="linenos">1087</span></a>					<span class="c1"># Alt of intersection, same interpolation</span>
</span><span id="FlightPlan-1088"><a href="#FlightPlan-1088"><span class="linenos">1088</span></a>					<span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="FlightPlan-1089"><a href="#FlightPlan-1089"><span class="linenos">1089</span></a>					<span class="n">dalt</span> <span class="o">=</span> <span class="p">(</span><span class="n">alt2</span> <span class="o">-</span> <span class="n">alt1</span><span class="p">)</span>
</span><span id="FlightPlan-1090"><a href="#FlightPlan-1090"><span class="linenos">1090</span></a>					<span class="n">alt</span> <span class="o">=</span> <span class="n">alt1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dalt</span>
</span><span id="FlightPlan-1091"><a href="#FlightPlan-1091"><span class="linenos">1091</span></a>
</span><span id="FlightPlan-1092"><a href="#FlightPlan-1092"><span class="linenos">1092</span></a>					<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">alt</span> <span class="o">&lt;=</span> <span class="nb">max</span><span class="p">(</span><span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span><span class="p">)</span>
</span><span id="FlightPlan-1093"><a href="#FlightPlan-1093"><span class="linenos">1093</span></a>
</span><span id="FlightPlan-1094"><a href="#FlightPlan-1094"><span class="linenos">1094</span></a>					<span class="c1"># Wind, same interpolation</span>
</span><span id="FlightPlan-1095"><a href="#FlightPlan-1095"><span class="linenos">1095</span></a>					<span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span>
</span><span id="FlightPlan-1096"><a href="#FlightPlan-1096"><span class="linenos">1096</span></a>					<span class="n">dwind</span> <span class="o">=</span> <span class="p">(</span><span class="n">wind2</span> <span class="o">-</span> <span class="n">wind1</span><span class="p">)</span>
</span><span id="FlightPlan-1097"><a href="#FlightPlan-1097"><span class="linenos">1097</span></a>					<span class="n">wind</span> <span class="o">=</span> <span class="n">wind1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dwind</span>
</span><span id="FlightPlan-1098"><a href="#FlightPlan-1098"><span class="linenos">1098</span></a>
</span><span id="FlightPlan-1099"><a href="#FlightPlan-1099"><span class="linenos">1099</span></a>					<span class="c1"># Weight, same interpolation</span>
</span><span id="FlightPlan-1100"><a href="#FlightPlan-1100"><span class="linenos">1100</span></a>					<span class="n">weight1</span><span class="p">,</span> <span class="n">weight2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span>
</span><span id="FlightPlan-1101"><a href="#FlightPlan-1101"><span class="linenos">1101</span></a>					<span class="n">dweight</span> <span class="o">=</span> <span class="p">(</span><span class="n">weight2</span> <span class="o">-</span> <span class="n">weight1</span><span class="p">)</span>
</span><span id="FlightPlan-1102"><a href="#FlightPlan-1102"><span class="linenos">1102</span></a>					<span class="n">weight</span> <span class="o">=</span> <span class="n">weight1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dweight</span>
</span><span id="FlightPlan-1103"><a href="#FlightPlan-1103"><span class="linenos">1103</span></a>
</span><span id="FlightPlan-1104"><a href="#FlightPlan-1104"><span class="linenos">1104</span></a>					<span class="c1"># Fuel, same interpolation</span>
</span><span id="FlightPlan-1105"><a href="#FlightPlan-1105"><span class="linenos">1105</span></a>					<span class="n">fuel1</span><span class="p">,</span> <span class="n">fuel2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span>
</span><span id="FlightPlan-1106"><a href="#FlightPlan-1106"><span class="linenos">1106</span></a>					<span class="n">dfuel</span> <span class="o">=</span> <span class="p">(</span><span class="n">fuel2</span> <span class="o">-</span> <span class="n">fuel1</span><span class="p">)</span>
</span><span id="FlightPlan-1107"><a href="#FlightPlan-1107"><span class="linenos">1107</span></a>					<span class="n">fuel</span> <span class="o">=</span> <span class="n">fuel1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dfuel</span>
</span><span id="FlightPlan-1108"><a href="#FlightPlan-1108"><span class="linenos">1108</span></a>
</span><span id="FlightPlan-1109"><a href="#FlightPlan-1109"><span class="linenos">1109</span></a>					<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">wind</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span><span class="p">)</span>
</span><span id="FlightPlan-1110"><a href="#FlightPlan-1110"><span class="linenos">1110</span></a>
</span><span id="FlightPlan-1111"><a href="#FlightPlan-1111"><span class="linenos">1111</span></a>				<span class="c1"># else:</span>
</span><span id="FlightPlan-1112"><a href="#FlightPlan-1112"><span class="linenos">1112</span></a>				<span class="c1">#     print (self.points_original_planned)</span>
</span><span id="FlightPlan-1113"><a href="#FlightPlan-1113"><span class="linenos">1113</span></a>				<span class="c1">#     raise Exception(&#39;Intersection not found&#39;)</span>
</span><span id="FlightPlan-1114"><a href="#FlightPlan-1114"><span class="linenos">1114</span></a>
</span><span id="FlightPlan-1115"><a href="#FlightPlan-1115"><span class="linenos">1115</span></a>		<span class="k">return</span> <span class="n">sol</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">alt</span><span class="p">,</span> <span class="n">d_int</span><span class="p">,</span> <span class="n">d_des_int</span><span class="p">,</span> <span class="n">wind</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">fuel</span>
</span><span id="FlightPlan-1116"><a href="#FlightPlan-1116"><span class="linenos">1116</span></a>
</span><span id="FlightPlan-1117"><a href="#FlightPlan-1117"><span class="linenos">1117</span></a>	<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-1118"><a href="#FlightPlan-1118"><span class="linenos">1118</span></a>		<span class="k">return</span> <span class="s2">&quot;FP &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span><span class="p">)</span>
</span><span id="FlightPlan-1119"><a href="#FlightPlan-1119"><span class="linenos">1119</span></a>
</span><span id="FlightPlan-1120"><a href="#FlightPlan-1120"><span class="linenos">1120</span></a>	<span class="k">def</span> <span class="nf">__long_repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-1121"><a href="#FlightPlan-1121"><span class="linenos">1121</span></a>		<span class="k">return</span> <span class="s2">&quot;FP no &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; from &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin_airport_uid</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_airport_uid</span><span class="p">)</span>
</span><span id="FlightPlan-1122"><a href="#FlightPlan-1122"><span class="linenos">1122</span></a>
</span><span id="FlightPlan-1123"><a href="#FlightPlan-1123"><span class="linenos">1123</span></a>	<span class="k">def</span> <span class="nf">print_full</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-1124"><a href="#FlightPlan-1124"><span class="linenos">1124</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="s2">&quot;FP no &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; from &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin_airport_uid</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_airport_uid</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1125"><a href="#FlightPlan-1125"><span class="linenos">1125</span></a>					<span class="o">+</span><span class="s2">&quot;status &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1126"><a href="#FlightPlan-1126"><span class="linenos">1126</span></a>					<span class="o">+</span><span class="s2">&quot;sobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1127"><a href="#FlightPlan-1127"><span class="linenos">1127</span></a>					<span class="o">+</span><span class="s2">&quot;sibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1128"><a href="#FlightPlan-1128"><span class="linenos">1128</span></a>					<span class="o">+</span><span class="s2">&quot;eobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1129"><a href="#FlightPlan-1129"><span class="linenos">1129</span></a>					<span class="o">+</span><span class="s2">&quot;cobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1130"><a href="#FlightPlan-1130"><span class="linenos">1130</span></a>					<span class="o">+</span><span class="s2">&quot;aobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1131"><a href="#FlightPlan-1131"><span class="linenos">1131</span></a>					<span class="o">+</span><span class="s2">&quot;eibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1132"><a href="#FlightPlan-1132"><span class="linenos">1132</span></a>					<span class="o">+</span><span class="s2">&quot;aibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1133"><a href="#FlightPlan-1133"><span class="linenos">1133</span></a>					<span class="o">+</span><span class="s2">&quot;atot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1134"><a href="#FlightPlan-1134"><span class="linenos">1134</span></a>					<span class="o">+</span><span class="s2">&quot;alt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1135"><a href="#FlightPlan-1135"><span class="linenos">1135</span></a>
</span><span id="FlightPlan-1136"><a href="#FlightPlan-1136"><span class="linenos">1136</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-1137"><a href="#FlightPlan-1137"><span class="linenos">1137</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;atfm_delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1138"><a href="#FlightPlan-1138"><span class="linenos">1138</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-1139"><a href="#FlightPlan-1139"><span class="linenos">1139</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;atfm_delay 0 </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1140"><a href="#FlightPlan-1140"><span class="linenos">1140</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;exot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1141"><a href="#FlightPlan-1141"><span class="linenos">1141</span></a>					<span class="o">+</span><span class="s2">&quot;exit &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exit</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1142"><a href="#FlightPlan-1142"><span class="linenos">1142</span></a>					<span class="o">+</span><span class="s2">&quot;axot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan-1143"><a href="#FlightPlan-1143"><span class="linenos">1143</span></a>					<span class="o">+</span><span class="s2">&quot;axit &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axit</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1144"><a href="#FlightPlan-1144"><span class="linenos">1144</span></a>
</span><span id="FlightPlan-1145"><a href="#FlightPlan-1145"><span class="linenos">1145</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-1146"><a href="#FlightPlan-1146"><span class="linenos">1146</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;departing delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aobt</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1147"><a href="#FlightPlan-1147"><span class="linenos">1147</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-1148"><a href="#FlightPlan-1148"><span class="linenos">1148</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;arrival delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aibt</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1149"><a href="#FlightPlan-1149"><span class="linenos">1149</span></a>
</span><span id="FlightPlan-1150"><a href="#FlightPlan-1150"><span class="linenos">1150</span></a>		<span class="n">info_full</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">FP Planned&quot;</span>
</span><span id="FlightPlan-1151"><a href="#FlightPlan-1151"><span class="linenos">1151</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan-1152"><a href="#FlightPlan-1152"><span class="linenos">1152</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">----&quot;</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">()</span>
</span><span id="FlightPlan-1153"><a href="#FlightPlan-1153"><span class="linenos">1153</span></a>
</span><span id="FlightPlan-1154"><a href="#FlightPlan-1154"><span class="linenos">1154</span></a>		<span class="n">info_full</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">FP Executed&quot;</span>
</span><span id="FlightPlan-1155"><a href="#FlightPlan-1155"><span class="linenos">1155</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="FlightPlan-1156"><a href="#FlightPlan-1156"><span class="linenos">1156</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">----&quot;</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">()</span>
</span><span id="FlightPlan-1157"><a href="#FlightPlan-1157"><span class="linenos">1157</span></a>
</span><span id="FlightPlan-1158"><a href="#FlightPlan-1158"><span class="linenos">1158</span></a>		<span class="k">return</span> <span class="n">info_full</span>
</span><span id="FlightPlan-1159"><a href="#FlightPlan-1159"><span class="linenos">1159</span></a>
</span><span id="FlightPlan-1160"><a href="#FlightPlan-1160"><span class="linenos">1160</span></a>	<span class="k">def</span> <span class="nf">print_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-1161"><a href="#FlightPlan-1161"><span class="linenos">1161</span></a>		<span class="n">coord</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="FlightPlan-1162"><a href="#FlightPlan-1162"><span class="linenos">1162</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan-1163"><a href="#FlightPlan-1163"><span class="linenos">1163</span></a>			<span class="n">coord</span> <span class="o">=</span> <span class="n">coord</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1164"><a href="#FlightPlan-1164"><span class="linenos">1164</span></a>
</span><span id="FlightPlan-1165"><a href="#FlightPlan-1165"><span class="linenos">1165</span></a>		<span class="n">coord</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1166"><a href="#FlightPlan-1166"><span class="linenos">1166</span></a>
</span><span id="FlightPlan-1167"><a href="#FlightPlan-1167"><span class="linenos">1167</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan-1168"><a href="#FlightPlan-1168"><span class="linenos">1168</span></a>			<span class="n">coord</span> <span class="o">=</span> <span class="n">coord</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan-1169"><a href="#FlightPlan-1169"><span class="linenos">1169</span></a>
</span><span id="FlightPlan-1170"><a href="#FlightPlan-1170"><span class="linenos">1170</span></a>		<span class="k">return</span> <span class="n">coord</span>
</span><span id="FlightPlan-1171"><a href="#FlightPlan-1171"><span class="linenos">1171</span></a>
</span><span id="FlightPlan-1172"><a href="#FlightPlan-1172"><span class="linenos">1172</span></a>	<span class="k">def</span> <span class="nf">print_all_points_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-1173"><a href="#FlightPlan-1173"><span class="linenos">1173</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan-1174"><a href="#FlightPlan-1174"><span class="linenos">1174</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-1175"><a href="#FlightPlan-1175"><span class="linenos">1175</span></a>
</span><span id="FlightPlan-1176"><a href="#FlightPlan-1176"><span class="linenos">1176</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-1177"><a href="#FlightPlan-1177"><span class="linenos">1177</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan-1178"><a href="#FlightPlan-1178"><span class="linenos">1178</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-1179"><a href="#FlightPlan-1179"><span class="linenos">1179</span></a>
</span><span id="FlightPlan-1180"><a href="#FlightPlan-1180"><span class="linenos">1180</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-1181"><a href="#FlightPlan-1181"><span class="linenos">1181</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan-1182"><a href="#FlightPlan-1182"><span class="linenos">1182</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-1183"><a href="#FlightPlan-1183"><span class="linenos">1183</span></a>
</span><span id="FlightPlan-1184"><a href="#FlightPlan-1184"><span class="linenos">1184</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-1185"><a href="#FlightPlan-1185"><span class="linenos">1185</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="FlightPlan-1186"><a href="#FlightPlan-1186"><span class="linenos">1186</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-1187"><a href="#FlightPlan-1187"><span class="linenos">1187</span></a>
</span><span id="FlightPlan-1188"><a href="#FlightPlan-1188"><span class="linenos">1188</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-*-*-*-*&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-1189"><a href="#FlightPlan-1189"><span class="linenos">1189</span></a>
</span><span id="FlightPlan-1190"><a href="#FlightPlan-1190"><span class="linenos">1190</span></a>	<span class="k">def</span> <span class="nf">print_full_planned_executed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan-1191"><a href="#FlightPlan-1191"><span class="linenos">1191</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PLANNED&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-1192"><a href="#FlightPlan-1192"><span class="linenos">1192</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan-1193"><a href="#FlightPlan-1193"><span class="linenos">1193</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-1194"><a href="#FlightPlan-1194"><span class="linenos">1194</span></a>
</span><span id="FlightPlan-1195"><a href="#FlightPlan-1195"><span class="linenos">1195</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXECUTED&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-1196"><a href="#FlightPlan-1196"><span class="linenos">1196</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="FlightPlan-1197"><a href="#FlightPlan-1197"><span class="linenos">1197</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan-1198"><a href="#FlightPlan-1198"><span class="linenos">1198</span></a>
</span><span id="FlightPlan-1199"><a href="#FlightPlan-1199"><span class="linenos">1199</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;++++++++++&quot;</span><span class="p">)</span>
</span><span id="FlightPlan-1200"><a href="#FlightPlan-1200"><span class="linenos">1200</span></a>
</span><span id="FlightPlan-1201"><a href="#FlightPlan-1201"><span class="linenos">1201</span></a>	<span class="k">def</span> <span class="nf">create_plot_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fig_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">build_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="FlightPlan-1202"><a href="#FlightPlan-1202"><span class="linenos">1202</span></a>
</span><span id="FlightPlan-1203"><a href="#FlightPlan-1203"><span class="linenos">1203</span></a>		<span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-1204"><a href="#FlightPlan-1204"><span class="linenos">1204</span></a>			<span class="n">points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span>
</span><span id="FlightPlan-1205"><a href="#FlightPlan-1205"><span class="linenos">1205</span></a>
</span><span id="FlightPlan-1206"><a href="#FlightPlan-1206"><span class="linenos">1206</span></a>		<span class="k">if</span> <span class="n">build_name</span><span class="p">:</span>
</span><span id="FlightPlan-1207"><a href="#FlightPlan-1207"><span class="linenos">1207</span></a>			<span class="n">fig_name</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin_icao</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_icao</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bada_code_ac_model</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flight_uid</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.svg&quot;</span>
</span><span id="FlightPlan-1208"><a href="#FlightPlan-1208"><span class="linenos">1208</span></a>		<span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-1209"><a href="#FlightPlan-1209"><span class="linenos">1209</span></a>		<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-1210"><a href="#FlightPlan-1210"><span class="linenos">1210</span></a>		<span class="n">speeds</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-1211"><a href="#FlightPlan-1211"><span class="linenos">1211</span></a>		<span class="n">label_name</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-1212"><a href="#FlightPlan-1212"><span class="linenos">1212</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
</span><span id="FlightPlan-1213"><a href="#FlightPlan-1213"><span class="linenos">1213</span></a>			<span class="n">x</span><span class="o">+=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">]</span>
</span><span id="FlightPlan-1214"><a href="#FlightPlan-1214"><span class="linenos">1214</span></a>			<span class="n">y</span><span class="o">+=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">]</span>
</span><span id="FlightPlan-1215"><a href="#FlightPlan-1215"><span class="linenos">1215</span></a>			<span class="n">label_name</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
</span><span id="FlightPlan-1216"><a href="#FlightPlan-1216"><span class="linenos">1216</span></a>			<span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-1217"><a href="#FlightPlan-1217"><span class="linenos">1217</span></a>				<span class="n">speeds</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])]</span>
</span><span id="FlightPlan-1218"><a href="#FlightPlan-1218"><span class="linenos">1218</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-1219"><a href="#FlightPlan-1219"><span class="linenos">1219</span></a>				<span class="n">speeds</span><span class="o">+=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
</span><span id="FlightPlan-1220"><a href="#FlightPlan-1220"><span class="linenos">1220</span></a>		
</span><span id="FlightPlan-1221"><a href="#FlightPlan-1221"><span class="linenos">1221</span></a>		<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
</span><span id="FlightPlan-1222"><a href="#FlightPlan-1222"><span class="linenos">1222</span></a>		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">)):</span>
</span><span id="FlightPlan-1223"><a href="#FlightPlan-1223"><span class="linenos">1223</span></a>			<span class="c1"># print(x[i],y[i],label_name[i], speeds[i])</span>
</span><span id="FlightPlan-1224"><a href="#FlightPlan-1224"><span class="linenos">1224</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
</span><span id="FlightPlan-1225"><a href="#FlightPlan-1225"><span class="linenos">1225</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;bx&#39;</span><span class="p">)</span>
</span><span id="FlightPlan-1226"><a href="#FlightPlan-1226"><span class="linenos">1226</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;\_&#39;</span><span class="p">),</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span>
</span><span id="FlightPlan-1227"><a href="#FlightPlan-1227"><span class="linenos">1227</span></a>				<span class="c1"># plt.plot(x[i],y[i],&#39;ro&#39;)</span>
</span><span id="FlightPlan-1228"><a href="#FlightPlan-1228"><span class="linenos">1228</span></a>				<span class="c1"># plt.annotate(speeds[i], xy=(x[i],y[i]-5))</span>
</span><span id="FlightPlan-1229"><a href="#FlightPlan-1229"><span class="linenos">1229</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">speeds</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan-1230"><a href="#FlightPlan-1230"><span class="linenos">1230</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span>
</span><span id="FlightPlan-1231"><a href="#FlightPlan-1231"><span class="linenos">1231</span></a>				<span class="c1"># plt.annotate(speeds[i], xy=(x[i],y[i]-5))</span>
</span><span id="FlightPlan-1232"><a href="#FlightPlan-1232"><span class="linenos">1232</span></a>
</span><span id="FlightPlan-1233"><a href="#FlightPlan-1233"><span class="linenos">1233</span></a>		<span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-1234"><a href="#FlightPlan-1234"><span class="linenos">1234</span></a>		<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-1235"><a href="#FlightPlan-1235"><span class="linenos">1235</span></a>		<span class="n">label_name</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan-1236"><a href="#FlightPlan-1236"><span class="linenos">1236</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan-1237"><a href="#FlightPlan-1237"><span class="linenos">1237</span></a>			<span class="n">x</span> <span class="o">+=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">]</span>
</span><span id="FlightPlan-1238"><a href="#FlightPlan-1238"><span class="linenos">1238</span></a>			<span class="n">y</span> <span class="o">+=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">]</span>
</span><span id="FlightPlan-1239"><a href="#FlightPlan-1239"><span class="linenos">1239</span></a>			<span class="n">label_name</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
</span><span id="FlightPlan-1240"><a href="#FlightPlan-1240"><span class="linenos">1240</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;g--x&#39;</span><span class="p">)</span>
</span><span id="FlightPlan-1241"><a href="#FlightPlan-1241"><span class="linenos">1241</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">)):</span>
</span><span id="FlightPlan-1242"><a href="#FlightPlan-1242"><span class="linenos">1242</span></a>				<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="FlightPlan-1243"><a href="#FlightPlan-1243"><span class="linenos">1243</span></a>					<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;\_&#39;</span><span class="p">),</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span>
</span><span id="FlightPlan-1244"><a href="#FlightPlan-1244"><span class="linenos">1244</span></a>
</span><span id="FlightPlan-1245"><a href="#FlightPlan-1245"><span class="linenos">1245</span></a>		<span class="k">if</span> <span class="n">fig_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan-1246"><a href="#FlightPlan-1246"><span class="linenos">1246</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="FlightPlan-1247"><a href="#FlightPlan-1247"><span class="linenos">1247</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan-1248"><a href="#FlightPlan-1248"><span class="linenos">1248</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fig_name</span><span class="p">)</span>
</span><span id="FlightPlan-1249"><a href="#FlightPlan-1249"><span class="linenos">1249</span></a>
</span><span id="FlightPlan-1250"><a href="#FlightPlan-1250"><span class="linenos">1250</span></a>		<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>FlighPlan object.
A flight plan does generally composed by a list of FlightPoints, but it's not only that.
It contains the information of the planned flight plan and also of the realisation of the flight.
So, in reality it keeps track of both, of the plan (which can be updated), the trajectory ahead (which could
contain uncertainty), and the realisation of the flight trajectory (once flown and during the flight).
We could consider in the future to disentangle some of this in different objects/elements.</p>
</div>


                            <div id="FlightPlan.__init__" class="classattr">
                                        <input id="FlightPlan.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">FlightPlan</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">fp_pool_id</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">crco_cost_EUR</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">fuel_price</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">unique_id</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">flight_uid</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">destination_airport_uid</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">origin_airport_uid</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">eobt</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">sobt</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">sibt</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">status</span><span class="o">=</span><span class="s1">&#39;non-submitted&#39;</span>,</span><span class="param">	<span class="n">origin_icao</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">destination_icao</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="FlightPlan.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.__init__-160"><a href="#FlightPlan.__init__-160"><span class="linenos">160</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp_pool_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crco_cost_EUR</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fuel_price</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="FlightPlan.__init__-161"><a href="#FlightPlan.__init__-161"><span class="linenos">161</span></a>		<span class="n">unique_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">flight_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destination_airport_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="FlightPlan.__init__-162"><a href="#FlightPlan.__init__-162"><span class="linenos">162</span></a>		<span class="n">origin_airport_uid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">eobt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sobt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sibt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="FlightPlan.__init__-163"><a href="#FlightPlan.__init__-163"><span class="linenos">163</span></a>		<span class="n">status</span><span class="o">=</span><span class="s1">&#39;non-submitted&#39;</span><span class="p">,</span> <span class="n">origin_icao</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destination_icao</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="FlightPlan.__init__-164"><a href="#FlightPlan.__init__-164"><span class="linenos">164</span></a>		
</span><span id="FlightPlan.__init__-165"><a href="#FlightPlan.__init__-165"><span class="linenos">165</span></a>		<span class="c1"># Static information about the flight plan</span>
</span><span id="FlightPlan.__init__-166"><a href="#FlightPlan.__init__-166"><span class="linenos">166</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fp_pool_id</span> <span class="o">=</span> <span class="n">fp_pool_id</span>
</span><span id="FlightPlan.__init__-167"><a href="#FlightPlan.__init__-167"><span class="linenos">167</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">crco_cost_EUR</span> <span class="o">=</span> <span class="n">crco_cost_EUR</span>
</span><span id="FlightPlan.__init__-168"><a href="#FlightPlan.__init__-168"><span class="linenos">168</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span> <span class="o">=</span> <span class="n">unique_id</span>
</span><span id="FlightPlan.__init__-169"><a href="#FlightPlan.__init__-169"><span class="linenos">169</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">origin_airport_uid</span> <span class="o">=</span> <span class="n">origin_airport_uid</span>
</span><span id="FlightPlan.__init__-170"><a href="#FlightPlan.__init__-170"><span class="linenos">170</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">destination_airport_uid</span> <span class="o">=</span> <span class="n">destination_airport_uid</span>
</span><span id="FlightPlan.__init__-171"><a href="#FlightPlan.__init__-171"><span class="linenos">171</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">origin_icao</span> <span class="o">=</span> <span class="n">origin_icao</span>
</span><span id="FlightPlan.__init__-172"><a href="#FlightPlan.__init__-172"><span class="linenos">172</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">destination_icao</span> <span class="o">=</span> <span class="n">destination_icao</span>
</span><span id="FlightPlan.__init__-173"><a href="#FlightPlan.__init__-173"><span class="linenos">173</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">flight_uid</span> <span class="o">=</span> <span class="n">flight_uid</span>
</span><span id="FlightPlan.__init__-174"><a href="#FlightPlan.__init__-174"><span class="linenos">174</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">fuel_price</span> <span class="o">=</span> <span class="n">fuel_price</span>
</span><span id="FlightPlan.__init__-175"><a href="#FlightPlan.__init__-175"><span class="linenos">175</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">bada_code_ac_model</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Aircaft type used for the flight</span>
</span><span id="FlightPlan.__init__-176"><a href="#FlightPlan.__init__-176"><span class="linenos">176</span></a>
</span><span id="FlightPlan.__init__-177"><a href="#FlightPlan.__init__-177"><span class="linenos">177</span></a>		<span class="c1"># List of Points that define the originally planned flight plan</span>
</span><span id="FlightPlan.__init__-178"><a href="#FlightPlan.__init__-178"><span class="linenos">178</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</span><span id="FlightPlan.__init__-179"><a href="#FlightPlan.__init__-179"><span class="linenos">179</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dict_points_original_planned_number</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="FlightPlan.__init__-180"><a href="#FlightPlan.__init__-180"><span class="linenos">180</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</span><span id="FlightPlan.__init__-181"><a href="#FlightPlan.__init__-181"><span class="linenos">181</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-182"><a href="#FlightPlan.__init__-182"><span class="linenos">182</span></a>
</span><span id="FlightPlan.__init__-183"><a href="#FlightPlan.__init__-183"><span class="linenos">183</span></a>		<span class="c1"># Points planned for the descend phase</span>
</span><span id="FlightPlan.__init__-184"><a href="#FlightPlan.__init__-184"><span class="linenos">184</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.__init__-185"><a href="#FlightPlan.__init__-185"><span class="linenos">185</span></a>		<span class="c1"># Point to be used if DCI is used, the descent will be &#39;steeper&#39; and the cruise a bit longer</span>
</span><span id="FlightPlan.__init__-186"><a href="#FlightPlan.__init__-186"><span class="linenos">186</span></a>		<span class="c1"># This has been pre-computed based on ac performance when speeding up.</span>
</span><span id="FlightPlan.__init__-187"><a href="#FlightPlan.__init__-187"><span class="linenos">187</span></a>		<span class="c1"># This is to have more &#39;realistic&#39; speed increments, as otherwise the delay that can be recovered</span>
</span><span id="FlightPlan.__init__-188"><a href="#FlightPlan.__init__-188"><span class="linenos">188</span></a>		<span class="c1"># by speeding up is very low. This won&#39;t be needed if full 4D trajectories are updated when</span>
</span><span id="FlightPlan.__init__-189"><a href="#FlightPlan.__init__-189"><span class="linenos">189</span></a>		<span class="c1"># speed adjustments done.</span>
</span><span id="FlightPlan.__init__-190"><a href="#FlightPlan.__init__-190"><span class="linenos">190</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.__init__-191"><a href="#FlightPlan.__init__-191"><span class="linenos">191</span></a>		<span class="c1"># By how much the cruise is extended if speed increment is done (DCI on)</span>
</span><span id="FlightPlan.__init__-192"><a href="#FlightPlan.__init__-192"><span class="linenos">192</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-193"><a href="#FlightPlan.__init__-193"><span class="linenos">193</span></a>
</span><span id="FlightPlan.__init__-194"><a href="#FlightPlan.__init__-194"><span class="linenos">194</span></a>		<span class="c1"># Current point in the flight plan</span>
</span><span id="FlightPlan.__init__-195"><a href="#FlightPlan.__init__-195"><span class="linenos">195</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">current_point</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.__init__-196"><a href="#FlightPlan.__init__-196"><span class="linenos">196</span></a>
</span><span id="FlightPlan.__init__-197"><a href="#FlightPlan.__init__-197"><span class="linenos">197</span></a>		<span class="c1"># List of FPPoints that have already been flown</span>
</span><span id="FlightPlan.__init__-198"><a href="#FlightPlan.__init__-198"><span class="linenos">198</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.__init__-199"><a href="#FlightPlan.__init__-199"><span class="linenos">199</span></a>
</span><span id="FlightPlan.__init__-200"><a href="#FlightPlan.__init__-200"><span class="linenos">200</span></a>		<span class="c1"># Flight status could be:</span>
</span><span id="FlightPlan.__init__-201"><a href="#FlightPlan.__init__-201"><span class="linenos">201</span></a>		<span class="c1"># - non-submitted</span>
</span><span id="FlightPlan.__init__-202"><a href="#FlightPlan.__init__-202"><span class="linenos">202</span></a>		<span class="c1"># - boarding</span>
</span><span id="FlightPlan.__init__-203"><a href="#FlightPlan.__init__-203"><span class="linenos">203</span></a>		<span class="c1"># - push-back-ready</span>
</span><span id="FlightPlan.__init__-204"><a href="#FlightPlan.__init__-204"><span class="linenos">204</span></a>		<span class="c1"># - climbing</span>
</span><span id="FlightPlan.__init__-205"><a href="#FlightPlan.__init__-205"><span class="linenos">205</span></a>		<span class="c1"># - descending</span>
</span><span id="FlightPlan.__init__-206"><a href="#FlightPlan.__init__-206"><span class="linenos">206</span></a>		<span class="c1"># - cruising</span>
</span><span id="FlightPlan.__init__-207"><a href="#FlightPlan.__init__-207"><span class="linenos">207</span></a>		<span class="c1"># - landed</span>
</span><span id="FlightPlan.__init__-208"><a href="#FlightPlan.__init__-208"><span class="linenos">208</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
</span><span id="FlightPlan.__init__-209"><a href="#FlightPlan.__init__-209"><span class="linenos">209</span></a>
</span><span id="FlightPlan.__init__-210"><a href="#FlightPlan.__init__-210"><span class="linenos">210</span></a>		<span class="c1"># Difference in time between executed flight plan and planned one</span>
</span><span id="FlightPlan.__init__-211"><a href="#FlightPlan.__init__-211"><span class="linenos">211</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.__init__-212"><a href="#FlightPlan.__init__-212"><span class="linenos">212</span></a>
</span><span id="FlightPlan.__init__-213"><a href="#FlightPlan.__init__-213"><span class="linenos">213</span></a>		<span class="c1"># EOBT, SOBT, SIBT</span>
</span><span id="FlightPlan.__init__-214"><a href="#FlightPlan.__init__-214"><span class="linenos">214</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="n">eobt</span>
</span><span id="FlightPlan.__init__-215"><a href="#FlightPlan.__init__-215"><span class="linenos">215</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">sobt</span> <span class="o">=</span> <span class="n">sobt</span>
</span><span id="FlightPlan.__init__-216"><a href="#FlightPlan.__init__-216"><span class="linenos">216</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">sibt</span> <span class="o">=</span> <span class="n">sibt</span>
</span><span id="FlightPlan.__init__-217"><a href="#FlightPlan.__init__-217"><span class="linenos">217</span></a>
</span><span id="FlightPlan.__init__-218"><a href="#FlightPlan.__init__-218"><span class="linenos">218</span></a>		<span class="c1"># COBT and ATFM delay information if regulated</span>
</span><span id="FlightPlan.__init__-219"><a href="#FlightPlan.__init__-219"><span class="linenos">219</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-220"><a href="#FlightPlan.__init__-220"><span class="linenos">220</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-221"><a href="#FlightPlan.__init__-221"><span class="linenos">221</span></a>
</span><span id="FlightPlan.__init__-222"><a href="#FlightPlan.__init__-222"><span class="linenos">222</span></a>		<span class="c1"># Amount of reactionary delay (if any)</span>
</span><span id="FlightPlan.__init__-223"><a href="#FlightPlan.__init__-223"><span class="linenos">223</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">reactionary_delay</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.__init__-224"><a href="#FlightPlan.__init__-224"><span class="linenos">224</span></a>
</span><span id="FlightPlan.__init__-225"><a href="#FlightPlan.__init__-225"><span class="linenos">225</span></a>		<span class="c1"># Taxi out and in times</span>
</span><span id="FlightPlan.__init__-226"><a href="#FlightPlan.__init__-226"><span class="linenos">226</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">exot</span> <span class="o">=</span> <span class="mi">0</span> 
</span><span id="FlightPlan.__init__-227"><a href="#FlightPlan.__init__-227"><span class="linenos">227</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">exit</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.__init__-228"><a href="#FlightPlan.__init__-228"><span class="linenos">228</span></a>
</span><span id="FlightPlan.__init__-229"><a href="#FlightPlan.__init__-229"><span class="linenos">229</span></a>		<span class="c1"># Actual times</span>
</span><span id="FlightPlan.__init__-230"><a href="#FlightPlan.__init__-230"><span class="linenos">230</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-231"><a href="#FlightPlan.__init__-231"><span class="linenos">231</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-232"><a href="#FlightPlan.__init__-232"><span class="linenos">232</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">axot</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-233"><a href="#FlightPlan.__init__-233"><span class="linenos">233</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">axit</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-234"><a href="#FlightPlan.__init__-234"><span class="linenos">234</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">pbrt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-235"><a href="#FlightPlan.__init__-235"><span class="linenos">235</span></a>
</span><span id="FlightPlan.__init__-236"><a href="#FlightPlan.__init__-236"><span class="linenos">236</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atot</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Actual take-off time</span>
</span><span id="FlightPlan.__init__-237"><a href="#FlightPlan.__init__-237"><span class="linenos">237</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">alt</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Actual landing time</span>
</span><span id="FlightPlan.__init__-238"><a href="#FlightPlan.__init__-238"><span class="linenos">238</span></a>
</span><span id="FlightPlan.__init__-239"><a href="#FlightPlan.__init__-239"><span class="linenos">239</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eibt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-240"><a href="#FlightPlan.__init__-240"><span class="linenos">240</span></a>
</span><span id="FlightPlan.__init__-241"><a href="#FlightPlan.__init__-241"><span class="linenos">241</span></a>		<span class="c1"># Holding time and fuel</span>
</span><span id="FlightPlan.__init__-242"><a href="#FlightPlan.__init__-242"><span class="linenos">242</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.__init__-243"><a href="#FlightPlan.__init__-243"><span class="linenos">243</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">holding_fuel</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.__init__-244"><a href="#FlightPlan.__init__-244"><span class="linenos">244</span></a>
</span><span id="FlightPlan.__init__-245"><a href="#FlightPlan.__init__-245"><span class="linenos">245</span></a>		<span class="c1"># Arrival delay provided by EAMAN (planned and actual)</span>
</span><span id="FlightPlan.__init__-246"><a href="#FlightPlan.__init__-246"><span class="linenos">246</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_assigned_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-247"><a href="#FlightPlan.__init__-247"><span class="linenos">247</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_absorbed_air</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-248"><a href="#FlightPlan.__init__-248"><span class="linenos">248</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_perc_selected</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-249"><a href="#FlightPlan.__init__-249"><span class="linenos">249</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_fuel</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-250"><a href="#FlightPlan.__init__-250"><span class="linenos">250</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_planned_clt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-251"><a href="#FlightPlan.__init__-251"><span class="linenos">251</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_tactical_assigned_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-252"><a href="#FlightPlan.__init__-252"><span class="linenos">252</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eaman_tactical_clt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.__init__-253"><a href="#FlightPlan.__init__-253"><span class="linenos">253</span></a>
</span><span id="FlightPlan.__init__-254"><a href="#FlightPlan.__init__-254"><span class="linenos">254</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">clt</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Control landing time if assigned</span>
</span><span id="FlightPlan.__init__-255"><a href="#FlightPlan.__init__-255"><span class="linenos">255</span></a>
</span><span id="FlightPlan.__init__-256"><a href="#FlightPlan.__init__-256"><span class="linenos">256</span></a>		<span class="c1"># DCI</span>
</span><span id="FlightPlan.__init__-257"><a href="#FlightPlan.__init__-257"><span class="linenos">257</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_decisions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list of dictionaries with dci decisions</span>
</span><span id="FlightPlan.__init__-258"><a href="#FlightPlan.__init__-258"><span class="linenos">258</span></a>		
</span><span id="FlightPlan.__init__-259"><a href="#FlightPlan.__init__-259"><span class="linenos">259</span></a>		<span class="c1"># WFP</span>
</span><span id="FlightPlan.__init__-260"><a href="#FlightPlan.__init__-260"><span class="linenos">260</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">wfp_decisions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.__init__-261"><a href="#FlightPlan.__init__-261"><span class="linenos">261</span></a>
</span><span id="FlightPlan.__init__-262"><a href="#FlightPlan.__init__-262"><span class="linenos">262</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">curfew</span> <span class="o">=</span> <span class="mi">9999999999999999999</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.fp_pool_id" class="classattr">
                                <div class="attr variable">
            <span class="name">fp_pool_id</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.fp_pool_id"></a>
    
    

                            </div>
                            <div id="FlightPlan.crco_cost_EUR" class="classattr">
                                <div class="attr variable">
            <span class="name">crco_cost_EUR</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.crco_cost_EUR"></a>
    
    

                            </div>
                            <div id="FlightPlan.unique_id" class="classattr">
                                <div class="attr variable">
            <span class="name">unique_id</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.unique_id"></a>
    
    

                            </div>
                            <div id="FlightPlan.origin_airport_uid" class="classattr">
                                <div class="attr variable">
            <span class="name">origin_airport_uid</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.origin_airport_uid"></a>
    
    

                            </div>
                            <div id="FlightPlan.destination_airport_uid" class="classattr">
                                <div class="attr variable">
            <span class="name">destination_airport_uid</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.destination_airport_uid"></a>
    
    

                            </div>
                            <div id="FlightPlan.origin_icao" class="classattr">
                                <div class="attr variable">
            <span class="name">origin_icao</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.origin_icao"></a>
    
    

                            </div>
                            <div id="FlightPlan.destination_icao" class="classattr">
                                <div class="attr variable">
            <span class="name">destination_icao</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.destination_icao"></a>
    
    

                            </div>
                            <div id="FlightPlan.flight_uid" class="classattr">
                                <div class="attr variable">
            <span class="name">flight_uid</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.flight_uid"></a>
    
    

                            </div>
                            <div id="FlightPlan.fuel_price" class="classattr">
                                <div class="attr variable">
            <span class="name">fuel_price</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.fuel_price"></a>
    
    

                            </div>
                            <div id="FlightPlan.bada_code_ac_model" class="classattr">
                                <div class="attr variable">
            <span class="name">bada_code_ac_model</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.bada_code_ac_model"></a>
    
    

                            </div>
                            <div id="FlightPlan.points_original_planned" class="classattr">
                                <div class="attr variable">
            <span class="name">points_original_planned</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.points_original_planned"></a>
    
    

                            </div>
                            <div id="FlightPlan.dict_points_original_planned_number" class="classattr">
                                <div class="attr variable">
            <span class="name">dict_points_original_planned_number</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.dict_points_original_planned_number"></a>
    
    

                            </div>
                            <div id="FlightPlan.points_planned" class="classattr">
                                <div class="attr variable">
            <span class="name">points_planned</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.points_planned"></a>
    
    

                            </div>
                            <div id="FlightPlan.points_tod_landing" class="classattr">
                                <div class="attr variable">
            <span class="name">points_tod_landing</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.points_tod_landing"></a>
    
    

                            </div>
                            <div id="FlightPlan.points_planned_tod_landing" class="classattr">
                                <div class="attr variable">
            <span class="name">points_planned_tod_landing</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.points_planned_tod_landing"></a>
    
    

                            </div>
                            <div id="FlightPlan.points_dci_tod_landing" class="classattr">
                                <div class="attr variable">
            <span class="name">points_dci_tod_landing</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.points_dci_tod_landing"></a>
    
    

                            </div>
                            <div id="FlightPlan.dci_cruise_extention_nm" class="classattr">
                                <div class="attr variable">
            <span class="name">dci_cruise_extention_nm</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.dci_cruise_extention_nm"></a>
    
    

                            </div>
                            <div id="FlightPlan.current_point" class="classattr">
                                <div class="attr variable">
            <span class="name">current_point</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.current_point"></a>
    
    

                            </div>
                            <div id="FlightPlan.points_executed" class="classattr">
                                <div class="attr variable">
            <span class="name">points_executed</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.points_executed"></a>
    
    

                            </div>
                            <div id="FlightPlan.status" class="classattr">
                                <div class="attr variable">
            <span class="name">status</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.status"></a>
    
    

                            </div>
                            <div id="FlightPlan.execution_delta_time" class="classattr">
                                <div class="attr variable">
            <span class="name">execution_delta_time</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.execution_delta_time"></a>
    
    

                            </div>
                            <div id="FlightPlan.eobt" class="classattr">
                                <div class="attr variable">
            <span class="name">eobt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eobt"></a>
    
    

                            </div>
                            <div id="FlightPlan.sobt" class="classattr">
                                <div class="attr variable">
            <span class="name">sobt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.sobt"></a>
    
    

                            </div>
                            <div id="FlightPlan.sibt" class="classattr">
                                <div class="attr variable">
            <span class="name">sibt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.sibt"></a>
    
    

                            </div>
                            <div id="FlightPlan.cobt" class="classattr">
                                <div class="attr variable">
            <span class="name">cobt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.cobt"></a>
    
    

                            </div>
                            <div id="FlightPlan.atfm_delay" class="classattr">
                                <div class="attr variable">
            <span class="name">atfm_delay</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.atfm_delay"></a>
    
    

                            </div>
                            <div id="FlightPlan.reactionary_delay" class="classattr">
                                <div class="attr variable">
            <span class="name">reactionary_delay</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.reactionary_delay"></a>
    
    

                            </div>
                            <div id="FlightPlan.exot" class="classattr">
                                <div class="attr variable">
            <span class="name">exot</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.exot"></a>
    
    

                            </div>
                            <div id="FlightPlan.exit" class="classattr">
                                <div class="attr variable">
            <span class="name">exit</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.exit"></a>
    
    

                            </div>
                            <div id="FlightPlan.aobt" class="classattr">
                                <div class="attr variable">
            <span class="name">aobt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.aobt"></a>
    
    

                            </div>
                            <div id="FlightPlan.aibt" class="classattr">
                                <div class="attr variable">
            <span class="name">aibt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.aibt"></a>
    
    

                            </div>
                            <div id="FlightPlan.axot" class="classattr">
                                <div class="attr variable">
            <span class="name">axot</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.axot"></a>
    
    

                            </div>
                            <div id="FlightPlan.axit" class="classattr">
                                <div class="attr variable">
            <span class="name">axit</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.axit"></a>
    
    

                            </div>
                            <div id="FlightPlan.pbrt" class="classattr">
                                <div class="attr variable">
            <span class="name">pbrt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.pbrt"></a>
    
    

                            </div>
                            <div id="FlightPlan.atot" class="classattr">
                                <div class="attr variable">
            <span class="name">atot</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.atot"></a>
    
    

                            </div>
                            <div id="FlightPlan.alt" class="classattr">
                                <div class="attr variable">
            <span class="name">alt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.alt"></a>
    
    

                            </div>
                            <div id="FlightPlan.eibt" class="classattr">
                                <div class="attr variable">
            <span class="name">eibt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eibt"></a>
    
    

                            </div>
                            <div id="FlightPlan.holding_time" class="classattr">
                                <div class="attr variable">
            <span class="name">holding_time</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.holding_time"></a>
    
    

                            </div>
                            <div id="FlightPlan.holding_fuel" class="classattr">
                                <div class="attr variable">
            <span class="name">holding_fuel</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.holding_fuel"></a>
    
    

                            </div>
                            <div id="FlightPlan.eaman_planned_assigned_delay" class="classattr">
                                <div class="attr variable">
            <span class="name">eaman_planned_assigned_delay</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eaman_planned_assigned_delay"></a>
    
    

                            </div>
                            <div id="FlightPlan.eaman_planned_absorbed_air" class="classattr">
                                <div class="attr variable">
            <span class="name">eaman_planned_absorbed_air</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eaman_planned_absorbed_air"></a>
    
    

                            </div>
                            <div id="FlightPlan.eaman_planned_perc_selected" class="classattr">
                                <div class="attr variable">
            <span class="name">eaman_planned_perc_selected</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eaman_planned_perc_selected"></a>
    
    

                            </div>
                            <div id="FlightPlan.eaman_planned_fuel" class="classattr">
                                <div class="attr variable">
            <span class="name">eaman_planned_fuel</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eaman_planned_fuel"></a>
    
    

                            </div>
                            <div id="FlightPlan.eaman_planned_clt" class="classattr">
                                <div class="attr variable">
            <span class="name">eaman_planned_clt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eaman_planned_clt"></a>
    
    

                            </div>
                            <div id="FlightPlan.eaman_tactical_assigned_delay" class="classattr">
                                <div class="attr variable">
            <span class="name">eaman_tactical_assigned_delay</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eaman_tactical_assigned_delay"></a>
    
    

                            </div>
                            <div id="FlightPlan.eaman_tactical_clt" class="classattr">
                                <div class="attr variable">
            <span class="name">eaman_tactical_clt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.eaman_tactical_clt"></a>
    
    

                            </div>
                            <div id="FlightPlan.clt" class="classattr">
                                <div class="attr variable">
            <span class="name">clt</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.clt"></a>
    
    

                            </div>
                            <div id="FlightPlan.dci_decisions" class="classattr">
                                <div class="attr variable">
            <span class="name">dci_decisions</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.dci_decisions"></a>
    
    

                            </div>
                            <div id="FlightPlan.wfp_decisions" class="classattr">
                                <div class="attr variable">
            <span class="name">wfp_decisions</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.wfp_decisions"></a>
    
    

                            </div>
                            <div id="FlightPlan.curfew" class="classattr">
                                <div class="attr variable">
            <span class="name">curfew</span>

        
    </div>
    <a class="headerlink" href="#FlightPlan.curfew"></a>
    
    

                            </div>
                            <div id="FlightPlan.get_estimated_fuel_consumption" class="classattr">
                                        <input id="FlightPlan.get_estimated_fuel_consumption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_estimated_fuel_consumption</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_estimated_fuel_consumption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_estimated_fuel_consumption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_estimated_fuel_consumption-264"><a href="#FlightPlan.get_estimated_fuel_consumption-264"><span class="linenos">264</span></a>	<span class="k">def</span> <span class="nf">get_estimated_fuel_consumption</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_estimated_fuel_consumption-265"><a href="#FlightPlan.get_estimated_fuel_consumption-265"><span class="linenos">265</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan.get_estimated_fuel_consumption-266"><a href="#FlightPlan.get_estimated_fuel_consumption-266"><span class="linenos">266</span></a><span class="sd">		Assumes first and last are takeoff and landing and that</span>
</span><span id="FlightPlan.get_estimated_fuel_consumption-267"><a href="#FlightPlan.get_estimated_fuel_consumption-267"><span class="linenos">267</span></a><span class="sd">		they have been named already.</span>
</span><span id="FlightPlan.get_estimated_fuel_consumption-268"><a href="#FlightPlan.get_estimated_fuel_consumption-268"><span class="linenos">268</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan.get_estimated_fuel_consumption-269"><a href="#FlightPlan.get_estimated_fuel_consumption-269"><span class="linenos">269</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span>  <span class="c1"># - self.points[&#39;takeoff&#39;].fuel</span>
</span></pre></div>


            <div class="docstring"><p>Assumes first and last are takeoff and landing and that
they have been named already.</p>
</div>


                            </div>
                            <div id="FlightPlan.get_point" class="classattr">
                                        <input id="FlightPlan.get_point-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_point</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">number</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_point-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_point"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_point-271"><a href="#FlightPlan.get_point-271"><span class="linenos">271</span></a>	<span class="k">def</span> <span class="nf">get_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="FlightPlan.get_point-272"><a href="#FlightPlan.get_point-272"><span class="linenos">272</span></a>		<span class="k">if</span> <span class="n">number</span><span class="o">&gt;=</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):</span>
</span><span id="FlightPlan.get_point-273"><a href="#FlightPlan.get_point-273"><span class="linenos">273</span></a>			<span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span><span class="p">[</span><span class="n">number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()))]</span>
</span><span id="FlightPlan.get_point-274"><a href="#FlightPlan.get_point-274"><span class="linenos">274</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_point-275"><a href="#FlightPlan.get_point-275"><span class="linenos">275</span></a>			<span class="n">p</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">number</span><span class="p">]</span>
</span><span id="FlightPlan.get_point-276"><a href="#FlightPlan.get_point-276"><span class="linenos">276</span></a>		<span class="k">return</span> <span class="n">p</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_current_point" class="classattr">
                                        <input id="FlightPlan.get_current_point-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_current_point</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_current_point-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_current_point"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_current_point-278"><a href="#FlightPlan.get_current_point-278"><span class="linenos">278</span></a>	<span class="k">def</span> <span class="nf">get_current_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_current_point-279"><a href="#FlightPlan.get_current_point-279"><span class="linenos">279</span></a>		<span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_point</span>
</span><span id="FlightPlan.get_current_point-280"><a href="#FlightPlan.get_current_point-280"><span class="linenos">280</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_point</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_dist_to_dest" class="classattr">
                                        <input id="FlightPlan.get_dist_to_dest-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_dist_to_dest</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_dist_to_dest-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_dist_to_dest"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_dist_to_dest-282"><a href="#FlightPlan.get_dist_to_dest-282"><span class="linenos">282</span></a>	<span class="k">def</span> <span class="nf">get_dist_to_dest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_dist_to_dest-283"><a href="#FlightPlan.get_dist_to_dest-283"><span class="linenos">283</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_point</span><span class="p">()</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.copy_point_from_planned" class="classattr">
                                        <input id="FlightPlan.copy_point_from_planned-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy_point_from_planned</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">number</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.copy_point_from_planned-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.copy_point_from_planned"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.copy_point_from_planned-285"><a href="#FlightPlan.copy_point_from_planned-285"><span class="linenos">285</span></a>	<span class="k">def</span> <span class="nf">copy_point_from_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="FlightPlan.copy_point_from_planned-286"><a href="#FlightPlan.copy_point_from_planned-286"><span class="linenos">286</span></a>		<span class="k">return</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_point</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>
</span><span id="FlightPlan.copy_point_from_planned-287"><a href="#FlightPlan.copy_point_from_planned-287"><span class="linenos">287</span></a>		<span class="c1"># if number&gt;=len(list(self.points_planned.values())):</span>
</span><span id="FlightPlan.copy_point_from_planned-288"><a href="#FlightPlan.copy_point_from_planned-288"><span class="linenos">288</span></a>		<span class="c1"># 	p = copy(self.points_tod_landing[number-len(list(self.points_planned.values()))])</span>
</span><span id="FlightPlan.copy_point_from_planned-289"><a href="#FlightPlan.copy_point_from_planned-289"><span class="linenos">289</span></a>		<span class="c1"># else:</span>
</span><span id="FlightPlan.copy_point_from_planned-290"><a href="#FlightPlan.copy_point_from_planned-290"><span class="linenos">290</span></a>		<span class="c1"># 	p = copy(list(self.points_planned.values())[number]) </span>
</span><span id="FlightPlan.copy_point_from_planned-291"><a href="#FlightPlan.copy_point_from_planned-291"><span class="linenos">291</span></a>		<span class="c1"># return p</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_list_points_missing" class="classattr">
                                        <input id="FlightPlan.get_list_points_missing-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_list_points_missing</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">from_number</span>, </span><span class="param"><span class="n">dci_landing</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_list_points_missing-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_list_points_missing"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_list_points_missing-293"><a href="#FlightPlan.get_list_points_missing-293"><span class="linenos">293</span></a>	<span class="k">def</span> <span class="nf">get_list_points_missing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_number</span><span class="p">,</span> <span class="n">dci_landing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="FlightPlan.get_list_points_missing-294"><a href="#FlightPlan.get_list_points_missing-294"><span class="linenos">294</span></a>		<span class="k">if</span> <span class="n">from_number</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):</span>
</span><span id="FlightPlan.get_list_points_missing-295"><a href="#FlightPlan.get_list_points_missing-295"><span class="linenos">295</span></a>			<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">from_number</span><span class="p">:]</span>
</span><span id="FlightPlan.get_list_points_missing-296"><a href="#FlightPlan.get_list_points_missing-296"><span class="linenos">296</span></a>
</span><span id="FlightPlan.get_list_points_missing-297"><a href="#FlightPlan.get_list_points_missing-297"><span class="linenos">297</span></a>			<span class="c1"># print(len(self.points_dci_tod_landing),len(self.points_tod_landing))</span>
</span><span id="FlightPlan.get_list_points_missing-298"><a href="#FlightPlan.get_list_points_missing-298"><span class="linenos">298</span></a>			<span class="c1"># for p in self.points_tod_landing:</span>
</span><span id="FlightPlan.get_list_points_missing-299"><a href="#FlightPlan.get_list_points_missing-299"><span class="linenos">299</span></a>			<span class="c1">#     print(p.print_full())</span>
</span><span id="FlightPlan.get_list_points_missing-300"><a href="#FlightPlan.get_list_points_missing-300"><span class="linenos">300</span></a>			<span class="c1"># print(&quot;---&quot;)</span>
</span><span id="FlightPlan.get_list_points_missing-301"><a href="#FlightPlan.get_list_points_missing-301"><span class="linenos">301</span></a>
</span><span id="FlightPlan.get_list_points_missing-302"><a href="#FlightPlan.get_list_points_missing-302"><span class="linenos">302</span></a>			<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="FlightPlan.get_list_points_missing-303"><a href="#FlightPlan.get_list_points_missing-303"><span class="linenos">303</span></a>				<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="FlightPlan.get_list_points_missing-304"><a href="#FlightPlan.get_list_points_missing-304"><span class="linenos">304</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_list_points_missing-305"><a href="#FlightPlan.get_list_points_missing-305"><span class="linenos">305</span></a>				<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span>
</span><span id="FlightPlan.get_list_points_missing-306"><a href="#FlightPlan.get_list_points_missing-306"><span class="linenos">306</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_list_points_missing-307"><a href="#FlightPlan.get_list_points_missing-307"><span class="linenos">307</span></a>			<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="FlightPlan.get_list_points_missing-308"><a href="#FlightPlan.get_list_points_missing-308"><span class="linenos">308</span></a>				<span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">from_number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):]</span>
</span><span id="FlightPlan.get_list_points_missing-309"><a href="#FlightPlan.get_list_points_missing-309"><span class="linenos">309</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_list_points_missing-310"><a href="#FlightPlan.get_list_points_missing-310"><span class="linenos">310</span></a>				<span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span><span class="p">[</span><span class="n">from_number</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())):]</span>
</span><span id="FlightPlan.get_list_points_missing-311"><a href="#FlightPlan.get_list_points_missing-311"><span class="linenos">311</span></a>
</span><span id="FlightPlan.get_list_points_missing-312"><a href="#FlightPlan.get_list_points_missing-312"><span class="linenos">312</span></a>		<span class="k">return</span> <span class="n">l</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_points_planned" class="classattr">
                                        <input id="FlightPlan.get_points_planned-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_points_planned</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">dci_landing</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_points_planned-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_points_planned"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_points_planned-314"><a href="#FlightPlan.get_points_planned-314"><span class="linenos">314</span></a>	<span class="k">def</span> <span class="nf">get_points_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dci_landing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="FlightPlan.get_points_planned-315"><a href="#FlightPlan.get_points_planned-315"><span class="linenos">315</span></a>		<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[:]</span>
</span><span id="FlightPlan.get_points_planned-316"><a href="#FlightPlan.get_points_planned-316"><span class="linenos">316</span></a>		<span class="k">if</span> <span class="n">dci_landing</span><span class="p">:</span>
</span><span id="FlightPlan.get_points_planned-317"><a href="#FlightPlan.get_points_planned-317"><span class="linenos">317</span></a>			<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="FlightPlan.get_points_planned-318"><a href="#FlightPlan.get_points_planned-318"><span class="linenos">318</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_points_planned-319"><a href="#FlightPlan.get_points_planned-319"><span class="linenos">319</span></a>			<span class="n">l</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span>
</span><span id="FlightPlan.get_points_planned-320"><a href="#FlightPlan.get_points_planned-320"><span class="linenos">320</span></a>
</span><span id="FlightPlan.get_points_planned-321"><a href="#FlightPlan.get_points_planned-321"><span class="linenos">321</span></a>		<span class="k">return</span> <span class="n">l</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.prepare_accepted_fp" class="classattr">
                                        <input id="FlightPlan.prepare_accepted_fp-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">prepare_accepted_fp</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">extra_cruise</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.prepare_accepted_fp-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.prepare_accepted_fp"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.prepare_accepted_fp-323"><a href="#FlightPlan.prepare_accepted_fp-323"><span class="linenos">323</span></a>	<span class="k">def</span> <span class="nf">prepare_accepted_fp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_cruise</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="FlightPlan.prepare_accepted_fp-324"><a href="#FlightPlan.prepare_accepted_fp-324"><span class="linenos">324</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.prepare_accepted_fp-325"><a href="#FlightPlan.prepare_accepted_fp-325"><span class="linenos">325</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">compute_speeds_original_planned</span><span class="p">()</span>
</span><span id="FlightPlan.prepare_accepted_fp-326"><a href="#FlightPlan.prepare_accepted_fp-326"><span class="linenos">326</span></a>
</span><span id="FlightPlan.prepare_accepted_fp-327"><a href="#FlightPlan.prepare_accepted_fp-327"><span class="linenos">327</span></a>		<span class="n">doing_landing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan.prepare_accepted_fp-328"><a href="#FlightPlan.prepare_accepted_fp-328"><span class="linenos">328</span></a>
</span><span id="FlightPlan.prepare_accepted_fp-329"><a href="#FlightPlan.prepare_accepted_fp-329"><span class="linenos">329</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan.prepare_accepted_fp-330"><a href="#FlightPlan.prepare_accepted_fp-330"><span class="linenos">330</span></a>			<span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s2">&quot;TOD&quot;</span><span class="p">:</span>
</span><span id="FlightPlan.prepare_accepted_fp-331"><a href="#FlightPlan.prepare_accepted_fp-331"><span class="linenos">331</span></a>				<span class="n">doing_landing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan.prepare_accepted_fp-332"><a href="#FlightPlan.prepare_accepted_fp-332"><span class="linenos">332</span></a>
</span><span id="FlightPlan.prepare_accepted_fp-333"><a href="#FlightPlan.prepare_accepted_fp-333"><span class="linenos">333</span></a>			<span class="k">if</span> <span class="n">doing_landing</span><span class="p">:</span>
</span><span id="FlightPlan.prepare_accepted_fp-334"><a href="#FlightPlan.prepare_accepted_fp-334"><span class="linenos">334</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span> <span class="o">+=</span> <span class="p">[</span><span class="n">copy</span><span class="p">(</span><span class="n">v</span><span class="p">)]</span>
</span><span id="FlightPlan.prepare_accepted_fp-335"><a href="#FlightPlan.prepare_accepted_fp-335"><span class="linenos">335</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.prepare_accepted_fp-336"><a href="#FlightPlan.prepare_accepted_fp-336"><span class="linenos">336</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="FlightPlan.prepare_accepted_fp-337"><a href="#FlightPlan.prepare_accepted_fp-337"><span class="linenos">337</span></a>
</span><span id="FlightPlan.prepare_accepted_fp-338"><a href="#FlightPlan.prepare_accepted_fp-338"><span class="linenos">338</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.update_speed_percentage" class="classattr">
                                        <input id="FlightPlan.update_speed_percentage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_speed_percentage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">perc_selected</span>, </span><span class="param"><span class="n">change_tod_dci</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.update_speed_percentage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.update_speed_percentage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.update_speed_percentage-340"><a href="#FlightPlan.update_speed_percentage-340"><span class="linenos">340</span></a>	<span class="k">def</span> <span class="nf">update_speed_percentage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">perc_selected</span><span class="p">,</span> <span class="n">change_tod_dci</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="FlightPlan.update_speed_percentage-341"><a href="#FlightPlan.update_speed_percentage-341"><span class="linenos">341</span></a>		<span class="k">if</span> <span class="n">change_tod_dci</span><span class="p">:</span>
</span><span id="FlightPlan.update_speed_percentage-342"><a href="#FlightPlan.update_speed_percentage-342"><span class="linenos">342</span></a>			<span class="c1"># Doing speed variation, therefore change tod</span>
</span><span id="FlightPlan.update_speed_percentage-343"><a href="#FlightPlan.update_speed_percentage-343"><span class="linenos">343</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span>
</span><span id="FlightPlan.update_speed_percentage-344"><a href="#FlightPlan.update_speed_percentage-344"><span class="linenos">344</span></a>
</span><span id="FlightPlan.update_speed_percentage-345"><a href="#FlightPlan.update_speed_percentage-345"><span class="linenos">345</span></a>		<span class="n">points_missing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_list_points_missing</span><span class="p">(</span><span class="n">from_number</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_point</span><span class="p">)</span>
</span><span id="FlightPlan.update_speed_percentage-346"><a href="#FlightPlan.update_speed_percentage-346"><span class="linenos">346</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points_missing</span><span class="p">:</span>
</span><span id="FlightPlan.update_speed_percentage-347"><a href="#FlightPlan.update_speed_percentage-347"><span class="linenos">347</span></a>			<span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_selected&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">perc_selected</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_copy_points_from_tod_planned" class="classattr">
                                        <input id="FlightPlan.get_copy_points_from_tod_planned-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_copy_points_from_tod_planned</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_copy_points_from_tod_planned-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_copy_points_from_tod_planned"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_copy_points_from_tod_planned-349"><a href="#FlightPlan.get_copy_points_from_tod_planned-349"><span class="linenos">349</span></a>	<span class="k">def</span> <span class="nf">get_copy_points_from_tod_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_copy_points_from_tod_planned-350"><a href="#FlightPlan.get_copy_points_from_tod_planned-350"><span class="linenos">350</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">copy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.set_extra_cruise_dci" class="classattr">
                                        <input id="FlightPlan.set_extra_cruise_dci-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_extra_cruise_dci</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">extra_cruise_dci</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.set_extra_cruise_dci-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.set_extra_cruise_dci"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.set_extra_cruise_dci-352"><a href="#FlightPlan.set_extra_cruise_dci-352"><span class="linenos">352</span></a>	<span class="k">def</span> <span class="nf">set_extra_cruise_dci</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_cruise_dci</span><span class="p">):</span>
</span><span id="FlightPlan.set_extra_cruise_dci-353"><a href="#FlightPlan.set_extra_cruise_dci-353"><span class="linenos">353</span></a>		<span class="n">swap</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.set_extra_cruise_dci-354"><a href="#FlightPlan.set_extra_cruise_dci-354"><span class="linenos">354</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-355"><a href="#FlightPlan.set_extra_cruise_dci-355"><span class="linenos">355</span></a>			<span class="n">point_at_tod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan.set_extra_cruise_dci-356"><a href="#FlightPlan.set_extra_cruise_dci-356"><span class="linenos">356</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-357"><a href="#FlightPlan.set_extra_cruise_dci-357"><span class="linenos">357</span></a>			<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.set_extra_cruise_dci-358"><a href="#FlightPlan.set_extra_cruise_dci-358"><span class="linenos">358</span></a>			<span class="k">raise</span>
</span><span id="FlightPlan.set_extra_cruise_dci-359"><a href="#FlightPlan.set_extra_cruise_dci-359"><span class="linenos">359</span></a>		<span class="n">min_descent</span> <span class="o">=</span> <span class="mi">30</span>  <span class="c1"># Keep at least 30 nm for descent even if cruise is extended</span>
</span><span id="FlightPlan.set_extra_cruise_dci-360"><a href="#FlightPlan.set_extra_cruise_dci-360"><span class="linenos">360</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">,</span> <span class="n">extra_cruise_dci</span><span class="o">-</span><span class="p">(</span><span class="n">min_descent</span><span class="o">+</span><span class="n">extra_cruise_dci</span><span class="o">-</span><span class="n">point_at_tod</span><span class="o">.</span><span class="n">dist_to_dest_nm</span><span class="p">)))</span>
</span><span id="FlightPlan.set_extra_cruise_dci-361"><a href="#FlightPlan.set_extra_cruise_dci-361"><span class="linenos">361</span></a>		<span class="n">extra_cruise_dci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dci_cruise_extention_nm</span>
</span><span id="FlightPlan.set_extra_cruise_dci-362"><a href="#FlightPlan.set_extra_cruise_dci-362"><span class="linenos">362</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-363"><a href="#FlightPlan.set_extra_cruise_dci-363"><span class="linenos">363</span></a>		<span class="c1"># Copy queue as planned</span>
</span><span id="FlightPlan.set_extra_cruise_dci-364"><a href="#FlightPlan.set_extra_cruise_dci-364"><span class="linenos">364</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_copy_points_from_tod_planned</span><span class="p">()</span>
</span><span id="FlightPlan.set_extra_cruise_dci-365"><a href="#FlightPlan.set_extra_cruise_dci-365"><span class="linenos">365</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-366"><a href="#FlightPlan.set_extra_cruise_dci-366"><span class="linenos">366</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-367"><a href="#FlightPlan.set_extra_cruise_dci-367"><span class="linenos">367</span></a>		<span class="c1"># 	print()</span>
</span><span id="FlightPlan.set_extra_cruise_dci-368"><a href="#FlightPlan.set_extra_cruise_dci-368"><span class="linenos">368</span></a>		<span class="c1"># 	print(&#39;ALOOOOOOOOOOOOOOOOOOOOOO self.points_dci_tod_landing:&#39;, self.points_dci_tod_landing)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-369"><a href="#FlightPlan.set_extra_cruise_dci-369"><span class="linenos">369</span></a>		<span class="c1"># 	print(&#39;Points before extra cruise applied:&#39;)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-370"><a href="#FlightPlan.set_extra_cruise_dci-370"><span class="linenos">370</span></a>		<span class="c1"># 	print(self.print_full())</span>
</span><span id="FlightPlan.set_extra_cruise_dci-371"><a href="#FlightPlan.set_extra_cruise_dci-371"><span class="linenos">371</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-372"><a href="#FlightPlan.set_extra_cruise_dci-372"><span class="linenos">372</span></a>		<span class="c1"># Time on previous point from TOD</span>
</span><span id="FlightPlan.set_extra_cruise_dci-373"><a href="#FlightPlan.set_extra_cruise_dci-373"><span class="linenos">373</span></a>		<span class="n">prev_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="FlightPlan.set_extra_cruise_dci-374"><a href="#FlightPlan.set_extra_cruise_dci-374"><span class="linenos">374</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-375"><a href="#FlightPlan.set_extra_cruise_dci-375"><span class="linenos">375</span></a>		<span class="c1"># Distance form origin of the previous point</span>
</span><span id="FlightPlan.set_extra_cruise_dci-376"><a href="#FlightPlan.set_extra_cruise_dci-376"><span class="linenos">376</span></a>		<span class="n">dist_from_orig_nm_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span>
</span><span id="FlightPlan.set_extra_cruise_dci-377"><a href="#FlightPlan.set_extra_cruise_dci-377"><span class="linenos">377</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-378"><a href="#FlightPlan.set_extra_cruise_dci-378"><span class="linenos">378</span></a>		<span class="n">i_tod</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.set_extra_cruise_dci-379"><a href="#FlightPlan.set_extra_cruise_dci-379"><span class="linenos">379</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-380"><a href="#FlightPlan.set_extra_cruise_dci-380"><span class="linenos">380</span></a>		<span class="c1"># Extend TOD by extra cruise</span>
</span><span id="FlightPlan.set_extra_cruise_dci-381"><a href="#FlightPlan.set_extra_cruise_dci-381"><span class="linenos">381</span></a>		<span class="n">dist_to_dest_planned_from_tod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan.set_extra_cruise_dci-382"><a href="#FlightPlan.set_extra_cruise_dci-382"><span class="linenos">382</span></a>		<span class="n">cruise_fl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> 
</span><span id="FlightPlan.set_extra_cruise_dci-383"><a href="#FlightPlan.set_extra_cruise_dci-383"><span class="linenos">383</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">+=</span> <span class="n">extra_cruise_dci</span>
</span><span id="FlightPlan.set_extra_cruise_dci-384"><a href="#FlightPlan.set_extra_cruise_dci-384"><span class="linenos">384</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">-=</span> <span class="n">extra_cruise_dci</span>
</span><span id="FlightPlan.set_extra_cruise_dci-385"><a href="#FlightPlan.set_extra_cruise_dci-385"><span class="linenos">385</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-386"><a href="#FlightPlan.set_extra_cruise_dci-386"><span class="linenos">386</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">+=</span> <span class="n">extra_cruise_dci</span>
</span><span id="FlightPlan.set_extra_cruise_dci-387"><a href="#FlightPlan.set_extra_cruise_dci-387"><span class="linenos">387</span></a>		
</span><span id="FlightPlan.set_extra_cruise_dci-388"><a href="#FlightPlan.set_extra_cruise_dci-388"><span class="linenos">388</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="n">i_tod</span>
</span><span id="FlightPlan.set_extra_cruise_dci-389"><a href="#FlightPlan.set_extra_cruise_dci-389"><span class="linenos">389</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-390"><a href="#FlightPlan.set_extra_cruise_dci-390"><span class="linenos">390</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-391"><a href="#FlightPlan.set_extra_cruise_dci-391"><span class="linenos">391</span></a>			<span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-392"><a href="#FlightPlan.set_extra_cruise_dci-392"><span class="linenos">392</span></a>				<span class="n">point_aux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span id="FlightPlan.set_extra_cruise_dci-393"><a href="#FlightPlan.set_extra_cruise_dci-393"><span class="linenos">393</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan.set_extra_cruise_dci-394"><a href="#FlightPlan.set_extra_cruise_dci-394"><span class="linenos">394</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">point_aux</span>
</span><span id="FlightPlan.set_extra_cruise_dci-395"><a href="#FlightPlan.set_extra_cruise_dci-395"><span class="linenos">395</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="n">cruise_fl</span>
</span><span id="FlightPlan.set_extra_cruise_dci-396"><a href="#FlightPlan.set_extra_cruise_dci-396"><span class="linenos">396</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-397"><a href="#FlightPlan.set_extra_cruise_dci-397"><span class="linenos">397</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan.set_extra_cruise_dci-398"><a href="#FlightPlan.set_extra_cruise_dci-398"><span class="linenos">398</span></a>				<span class="n">ansp_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span>
</span><span id="FlightPlan.set_extra_cruise_dci-399"><a href="#FlightPlan.set_extra_cruise_dci-399"><span class="linenos">399</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span>
</span><span id="FlightPlan.set_extra_cruise_dci-400"><a href="#FlightPlan.set_extra_cruise_dci-400"><span class="linenos">400</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ansp</span> <span class="o">=</span> <span class="n">ansp_prev</span>
</span><span id="FlightPlan.set_extra_cruise_dci-401"><a href="#FlightPlan.set_extra_cruise_dci-401"><span class="linenos">401</span></a>				<span class="n">swap</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
</span><span id="FlightPlan.set_extra_cruise_dci-402"><a href="#FlightPlan.set_extra_cruise_dci-402"><span class="linenos">402</span></a>				<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan.set_extra_cruise_dci-403"><a href="#FlightPlan.set_extra_cruise_dci-403"><span class="linenos">403</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-404"><a href="#FlightPlan.set_extra_cruise_dci-404"><span class="linenos">404</span></a>				<span class="c1"># Recompute segment times and distances</span>
</span><span id="FlightPlan.set_extra_cruise_dci-405"><a href="#FlightPlan.set_extra_cruise_dci-405"><span class="linenos">405</span></a>				<span class="n">time_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan.set_extra_cruise_dci-406"><a href="#FlightPlan.set_extra_cruise_dci-406"><span class="linenos">406</span></a>				<span class="n">dist_prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan.set_extra_cruise_dci-407"><a href="#FlightPlan.set_extra_cruise_dci-407"><span class="linenos">407</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span>
</span><span id="FlightPlan.set_extra_cruise_dci-408"><a href="#FlightPlan.set_extra_cruise_dci-408"><span class="linenos">408</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span>
</span><span id="FlightPlan.set_extra_cruise_dci-409"><a href="#FlightPlan.set_extra_cruise_dci-409"><span class="linenos">409</span></a>				
</span><span id="FlightPlan.set_extra_cruise_dci-410"><a href="#FlightPlan.set_extra_cruise_dci-410"><span class="linenos">410</span></a>				<span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-411"><a href="#FlightPlan.set_extra_cruise_dci-411"><span class="linenos">411</span></a>					<span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;FUCK&#39;</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-412"><a href="#FlightPlan.set_extra_cruise_dci-412"><span class="linenos">412</span></a>				<span class="c1"># time_prev = self.points_dci_tod_landing[i-1].time_min</span>
</span><span id="FlightPlan.set_extra_cruise_dci-413"><a href="#FlightPlan.set_extra_cruise_dci-413"><span class="linenos">413</span></a>				<span class="c1"># dist_prev = self.points_dci_tod_landing[i-1].dist_from_orig_nm</span>
</span><span id="FlightPlan.set_extra_cruise_dci-414"><a href="#FlightPlan.set_extra_cruise_dci-414"><span class="linenos">414</span></a>				<span class="c1"># self.points_dci_tod_landing[i].planned_segment_time = self.points_dci_tod_landing[i].time_min - time_prev</span>
</span><span id="FlightPlan.set_extra_cruise_dci-415"><a href="#FlightPlan.set_extra_cruise_dci-415"><span class="linenos">415</span></a>				<span class="c1"># self.points_dci_tod_landing[i].planned_dist_segment_nm = self.points_dci_tod_landing[i].dist_from_orig_nm - dist_prev</span>
</span><span id="FlightPlan.set_extra_cruise_dci-416"><a href="#FlightPlan.set_extra_cruise_dci-416"><span class="linenos">416</span></a>				
</span><span id="FlightPlan.set_extra_cruise_dci-417"><a href="#FlightPlan.set_extra_cruise_dci-417"><span class="linenos">417</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-418"><a href="#FlightPlan.set_extra_cruise_dci-418"><span class="linenos">418</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;AAAAAAAAAAARGGGGGGGGG&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-419"><a href="#FlightPlan.set_extra_cruise_dci-419"><span class="linenos">419</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-420"><a href="#FlightPlan.set_extra_cruise_dci-420"><span class="linenos">420</span></a>			<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.set_extra_cruise_dci-421"><a href="#FlightPlan.set_extra_cruise_dci-421"><span class="linenos">421</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-------&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-422"><a href="#FlightPlan.set_extra_cruise_dci-422"><span class="linenos">422</span></a>			<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-423"><a href="#FlightPlan.set_extra_cruise_dci-423"><span class="linenos">423</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.set_extra_cruise_dci-424"><a href="#FlightPlan.set_extra_cruise_dci-424"><span class="linenos">424</span></a>			<span class="k">raise</span>
</span><span id="FlightPlan.set_extra_cruise_dci-425"><a href="#FlightPlan.set_extra_cruise_dci-425"><span class="linenos">425</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-426"><a href="#FlightPlan.set_extra_cruise_dci-426"><span class="linenos">426</span></a>		<span class="n">i_tod</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="FlightPlan.set_extra_cruise_dci-427"><a href="#FlightPlan.set_extra_cruise_dci-427"><span class="linenos">427</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-428"><a href="#FlightPlan.set_extra_cruise_dci-428"><span class="linenos">428</span></a>		<span class="c1"># Now all swapped and we are at the first point that should be recomputed</span>
</span><span id="FlightPlan.set_extra_cruise_dci-429"><a href="#FlightPlan.set_extra_cruise_dci-429"><span class="linenos">429</span></a>		<span class="n">new_angle</span> <span class="o">=</span> <span class="n">cruise_fl</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i_tod</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan.set_extra_cruise_dci-430"><a href="#FlightPlan.set_extra_cruise_dci-430"><span class="linenos">430</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">i_tod</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-431"><a href="#FlightPlan.set_extra_cruise_dci-431"><span class="linenos">431</span></a>		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">):</span>
</span><span id="FlightPlan.set_extra_cruise_dci-432"><a href="#FlightPlan.set_extra_cruise_dci-432"><span class="linenos">432</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span> <span class="o">*</span> <span class="n">new_angle</span>
</span><span id="FlightPlan.set_extra_cruise_dci-433"><a href="#FlightPlan.set_extra_cruise_dci-433"><span class="linenos">433</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan.set_extra_cruise_dci-434"><a href="#FlightPlan.set_extra_cruise_dci-434"><span class="linenos">434</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan.set_extra_cruise_dci-435"><a href="#FlightPlan.set_extra_cruise_dci-435"><span class="linenos">435</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-436"><a href="#FlightPlan.set_extra_cruise_dci-436"><span class="linenos">436</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_from_orig_nm_prev</span>
</span><span id="FlightPlan.set_extra_cruise_dci-437"><a href="#FlightPlan.set_extra_cruise_dci-437"><span class="linenos">437</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-438"><a href="#FlightPlan.set_extra_cruise_dci-438"><span class="linenos">438</span></a>		<span class="c1"># Now recompute time needed per segment</span>
</span><span id="FlightPlan.set_extra_cruise_dci-439"><a href="#FlightPlan.set_extra_cruise_dci-439"><span class="linenos">439</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-440"><a href="#FlightPlan.set_extra_cruise_dci-440"><span class="linenos">440</span></a>			<span class="n">speed_planned_kt</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan.set_extra_cruise_dci-441"><a href="#FlightPlan.set_extra_cruise_dci-441"><span class="linenos">441</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-442"><a href="#FlightPlan.set_extra_cruise_dci-442"><span class="linenos">442</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">/</span> <span class="p">(</span><span class="n">speed_planned_kt</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">wind</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-443"><a href="#FlightPlan.set_extra_cruise_dci-443"><span class="linenos">443</span></a>			<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-444"><a href="#FlightPlan.set_extra_cruise_dci-444"><span class="linenos">444</span></a>				<span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.set_extra_cruise_dci-445"><a href="#FlightPlan.set_extra_cruise_dci-445"><span class="linenos">445</span></a>				<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-446"><a href="#FlightPlan.set_extra_cruise_dci-446"><span class="linenos">446</span></a>				<span class="k">for</span> <span class="n">wp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-447"><a href="#FlightPlan.set_extra_cruise_dci-447"><span class="linenos">447</span></a>					<span class="nb">print</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.set_extra_cruise_dci-448"><a href="#FlightPlan.set_extra_cruise_dci-448"><span class="linenos">448</span></a>				<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;HERE ERROR&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-449"><a href="#FlightPlan.set_extra_cruise_dci-449"><span class="linenos">449</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="p">,</span> <span class="n">speed_planned_kt</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-450"><a href="#FlightPlan.set_extra_cruise_dci-450"><span class="linenos">450</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">number_order</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-451"><a href="#FlightPlan.set_extra_cruise_dci-451"><span class="linenos">451</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-452"><a href="#FlightPlan.set_extra_cruise_dci-452"><span class="linenos">452</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">extra_cruise_dci</span><span class="p">)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-453"><a href="#FlightPlan.set_extra_cruise_dci-453"><span class="linenos">453</span></a>				<span class="k">raise</span>
</span><span id="FlightPlan.set_extra_cruise_dci-454"><a href="#FlightPlan.set_extra_cruise_dci-454"><span class="linenos">454</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-455"><a href="#FlightPlan.set_extra_cruise_dci-455"><span class="linenos">455</span></a>			<span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">=</span> <span class="n">prev_time</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="FlightPlan.set_extra_cruise_dci-456"><a href="#FlightPlan.set_extra_cruise_dci-456"><span class="linenos">456</span></a>			<span class="n">prev_time</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan.set_extra_cruise_dci-457"><a href="#FlightPlan.set_extra_cruise_dci-457"><span class="linenos">457</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-458"><a href="#FlightPlan.set_extra_cruise_dci-458"><span class="linenos">458</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-459"><a href="#FlightPlan.set_extra_cruise_dci-459"><span class="linenos">459</span></a>		<span class="c1"># 	print(&#39;Points after extra cruise applied:&#39;)</span>
</span><span id="FlightPlan.set_extra_cruise_dci-460"><a href="#FlightPlan.set_extra_cruise_dci-460"><span class="linenos">460</span></a>		<span class="c1"># 	print(self.print_full())</span>
</span><span id="FlightPlan.set_extra_cruise_dci-461"><a href="#FlightPlan.set_extra_cruise_dci-461"><span class="linenos">461</span></a>
</span><span id="FlightPlan.set_extra_cruise_dci-462"><a href="#FlightPlan.set_extra_cruise_dci-462"><span class="linenos">462</span></a>		<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">swap</span><span class="p">:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-463"><a href="#FlightPlan.set_extra_cruise_dci-463"><span class="linenos">463</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan.set_extra_cruise_dci-464"><a href="#FlightPlan.set_extra_cruise_dci-464"><span class="linenos">464</span></a>			<span class="c1">#	print(&#39;Entering BRANCH in set extra cruise dci. self.points_dci_tod_landing: {} ; name: {}&#39;.format(self.points_dci_tod_landing, s))</span>
</span><span id="FlightPlan.set_extra_cruise_dci-465"><a href="#FlightPlan.set_extra_cruise_dci-465"><span class="linenos">465</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">recompute_speeds_new_point</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.split_uncertainty_min" class="classattr">
                                        <input id="FlightPlan.split_uncertainty_min-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">split_uncertainty_min</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">points</span>, </span><span class="param"><span class="n">min_uncertainty</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.split_uncertainty_min-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.split_uncertainty_min"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.split_uncertainty_min-467"><a href="#FlightPlan.split_uncertainty_min-467"><span class="linenos">467</span></a>	<span class="k">def</span> <span class="nf">split_uncertainty_min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">min_uncertainty</span><span class="p">):</span>
</span><span id="FlightPlan.split_uncertainty_min-468"><a href="#FlightPlan.split_uncertainty_min-468"><span class="linenos">468</span></a>		<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">min_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">):</span>
</span><span id="FlightPlan.split_uncertainty_min-469"><a href="#FlightPlan.split_uncertainty_min-469"><span class="linenos">469</span></a>			<span class="k">return</span>
</span><span id="FlightPlan.split_uncertainty_min-470"><a href="#FlightPlan.split_uncertainty_min-470"><span class="linenos">470</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_min-471"><a href="#FlightPlan.split_uncertainty_min-471"><span class="linenos">471</span></a>			<span class="n">times</span> <span class="o">=</span> <span class="p">[[]</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">planned_segment_time</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">min_uncertainty</span><span class="o">-</span><span class="mf">0.5</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>  <span class="c1"># This -0.5 is to leave at least 0.5 minute per segment</span>
</span><span id="FlightPlan.split_uncertainty_min-472"><a href="#FlightPlan.split_uncertainty_min-472"><span class="linenos">472</span></a>			<span class="n">times</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">times</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_min-473"><a href="#FlightPlan.split_uncertainty_min-473"><span class="linenos">473</span></a>			<span class="n">to_remove</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.split_uncertainty_min-474"><a href="#FlightPlan.split_uncertainty_min-474"><span class="linenos">474</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
</span><span id="FlightPlan.split_uncertainty_min-475"><a href="#FlightPlan.split_uncertainty_min-475"><span class="linenos">475</span></a>				<span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_min-476"><a href="#FlightPlan.split_uncertainty_min-476"><span class="linenos">476</span></a>					<span class="n">to_remove</span> <span class="o">+=</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_min-477"><a href="#FlightPlan.split_uncertainty_min-477"><span class="linenos">477</span></a>			<span class="n">to_remove</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="FlightPlan.split_uncertainty_min-478"><a href="#FlightPlan.split_uncertainty_min-478"><span class="linenos">478</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">to_remove</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_min-479"><a href="#FlightPlan.split_uncertainty_min-479"><span class="linenos">479</span></a>				<span class="k">del</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_min-480"><a href="#FlightPlan.split_uncertainty_min-480"><span class="linenos">480</span></a>				<span class="k">del</span> <span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_min-481"><a href="#FlightPlan.split_uncertainty_min-481"><span class="linenos">481</span></a>			
</span><span id="FlightPlan.split_uncertainty_min-482"><a href="#FlightPlan.split_uncertainty_min-482"><span class="linenos">482</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_min-483"><a href="#FlightPlan.split_uncertainty_min-483"><span class="linenos">483</span></a>				<span class="k">return</span>
</span><span id="FlightPlan.split_uncertainty_min-484"><a href="#FlightPlan.split_uncertainty_min-484"><span class="linenos">484</span></a>
</span><span id="FlightPlan.split_uncertainty_min-485"><a href="#FlightPlan.split_uncertainty_min-485"><span class="linenos">485</span></a>			<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">min_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_min-486"><a href="#FlightPlan.split_uncertainty_min-486"><span class="linenos">486</span></a>				<span class="n">min_assigned</span> <span class="o">=</span> <span class="n">min_uncertainty</span>
</span><span id="FlightPlan.split_uncertainty_min-487"><a href="#FlightPlan.split_uncertainty_min-487"><span class="linenos">487</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_min-488"><a href="#FlightPlan.split_uncertainty_min-488"><span class="linenos">488</span></a>				<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="FlightPlan.split_uncertainty_min-489"><a href="#FlightPlan.split_uncertainty_min-489"><span class="linenos">489</span></a>				<span class="n">min_assigned</span> <span class="o">=</span> <span class="n">min_uncertainty</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_min-490"><a href="#FlightPlan.split_uncertainty_min-490"><span class="linenos">490</span></a>				<span class="k">if</span> <span class="n">min_assigned</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_min-491"><a href="#FlightPlan.split_uncertainty_min-491"><span class="linenos">491</span></a>					<span class="n">min_assigned</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">min_assigned</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">times</span><span class="p">))</span>
</span><span id="FlightPlan.split_uncertainty_min-492"><a href="#FlightPlan.split_uncertainty_min-492"><span class="linenos">492</span></a>
</span><span id="FlightPlan.split_uncertainty_min-493"><a href="#FlightPlan.split_uncertainty_min-493"><span class="linenos">493</span></a>			<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="FlightPlan.split_uncertainty_min-494"><a href="#FlightPlan.split_uncertainty_min-494"><span class="linenos">494</span></a>			<span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">times</span><span class="p">))),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">times</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">times</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_min-495"><a href="#FlightPlan.split_uncertainty_min-495"><span class="linenos">495</span></a>			
</span><span id="FlightPlan.split_uncertainty_min-496"><a href="#FlightPlan.split_uncertainty_min-496"><span class="linenos">496</span></a>			<span class="n">points</span><span class="p">[</span><span class="n">draw</span><span class="p">]</span><span class="o">.</span><span class="n">min_uncertainty</span> <span class="o">+=</span> <span class="n">min_assigned</span>
</span><span id="FlightPlan.split_uncertainty_min-497"><a href="#FlightPlan.split_uncertainty_min-497"><span class="linenos">497</span></a>
</span><span id="FlightPlan.split_uncertainty_min-498"><a href="#FlightPlan.split_uncertainty_min-498"><span class="linenos">498</span></a>			<span class="n">to_assign</span> <span class="o">=</span> <span class="n">min_uncertainty</span> <span class="o">-</span> <span class="n">min_assigned</span>
</span><span id="FlightPlan.split_uncertainty_min-499"><a href="#FlightPlan.split_uncertainty_min-499"><span class="linenos">499</span></a>
</span><span id="FlightPlan.split_uncertainty_min-500"><a href="#FlightPlan.split_uncertainty_min-500"><span class="linenos">500</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_min</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">to_assign</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.split_uncertainty_nm" class="classattr">
                                        <input id="FlightPlan.split_uncertainty_nm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">split_uncertainty_nm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">points</span>, </span><span class="param"><span class="n">nm_uncertainty</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.split_uncertainty_nm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.split_uncertainty_nm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.split_uncertainty_nm-502"><a href="#FlightPlan.split_uncertainty_nm-502"><span class="linenos">502</span></a>	<span class="k">def</span> <span class="nf">split_uncertainty_nm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">nm_uncertainty</span><span class="p">):</span>
</span><span id="FlightPlan.split_uncertainty_nm-503"><a href="#FlightPlan.split_uncertainty_nm-503"><span class="linenos">503</span></a>		<span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">nm_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">):</span>
</span><span id="FlightPlan.split_uncertainty_nm-504"><a href="#FlightPlan.split_uncertainty_nm-504"><span class="linenos">504</span></a>			<span class="k">return</span>
</span><span id="FlightPlan.split_uncertainty_nm-505"><a href="#FlightPlan.split_uncertainty_nm-505"><span class="linenos">505</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_nm-506"><a href="#FlightPlan.split_uncertainty_nm-506"><span class="linenos">506</span></a>			<span class="n">distances</span> <span class="o">=</span> <span class="p">[[]</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">nm_uncertainty</span><span class="o">-</span><span class="mf">0.5</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>  <span class="c1"># This -0.5 to keep at least 0.5 nm</span>
</span><span id="FlightPlan.split_uncertainty_nm-507"><a href="#FlightPlan.split_uncertainty_nm-507"><span class="linenos">507</span></a>			<span class="n">distances</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">distances</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_nm-508"><a href="#FlightPlan.split_uncertainty_nm-508"><span class="linenos">508</span></a>			<span class="n">to_remove</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.split_uncertainty_nm-509"><a href="#FlightPlan.split_uncertainty_nm-509"><span class="linenos">509</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">distances</span><span class="p">):</span>
</span><span id="FlightPlan.split_uncertainty_nm-510"><a href="#FlightPlan.split_uncertainty_nm-510"><span class="linenos">510</span></a>				<span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_nm-511"><a href="#FlightPlan.split_uncertainty_nm-511"><span class="linenos">511</span></a>					<span class="n">to_remove</span> <span class="o">+=</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_nm-512"><a href="#FlightPlan.split_uncertainty_nm-512"><span class="linenos">512</span></a>			<span class="n">to_remove</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="FlightPlan.split_uncertainty_nm-513"><a href="#FlightPlan.split_uncertainty_nm-513"><span class="linenos">513</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">to_remove</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_nm-514"><a href="#FlightPlan.split_uncertainty_nm-514"><span class="linenos">514</span></a>				<span class="k">del</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_nm-515"><a href="#FlightPlan.split_uncertainty_nm-515"><span class="linenos">515</span></a>				<span class="k">del</span> <span class="n">distances</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_nm-516"><a href="#FlightPlan.split_uncertainty_nm-516"><span class="linenos">516</span></a>
</span><span id="FlightPlan.split_uncertainty_nm-517"><a href="#FlightPlan.split_uncertainty_nm-517"><span class="linenos">517</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_nm-518"><a href="#FlightPlan.split_uncertainty_nm-518"><span class="linenos">518</span></a>				<span class="k">return</span>
</span><span id="FlightPlan.split_uncertainty_nm-519"><a href="#FlightPlan.split_uncertainty_nm-519"><span class="linenos">519</span></a>
</span><span id="FlightPlan.split_uncertainty_nm-520"><a href="#FlightPlan.split_uncertainty_nm-520"><span class="linenos">520</span></a>			<span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">nm_uncertainty</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_nm-521"><a href="#FlightPlan.split_uncertainty_nm-521"><span class="linenos">521</span></a>				<span class="n">nm_assigned</span> <span class="o">=</span> <span class="n">nm_uncertainty</span>
</span><span id="FlightPlan.split_uncertainty_nm-522"><a href="#FlightPlan.split_uncertainty_nm-522"><span class="linenos">522</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_nm-523"><a href="#FlightPlan.split_uncertainty_nm-523"><span class="linenos">523</span></a>				<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="FlightPlan.split_uncertainty_nm-524"><a href="#FlightPlan.split_uncertainty_nm-524"><span class="linenos">524</span></a>				<span class="n">nm_assigned</span> <span class="o">=</span> <span class="n">nm_uncertainty</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_nm-525"><a href="#FlightPlan.split_uncertainty_nm-525"><span class="linenos">525</span></a>				<span class="k">if</span> <span class="n">nm_assigned</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.split_uncertainty_nm-526"><a href="#FlightPlan.split_uncertainty_nm-526"><span class="linenos">526</span></a>					<span class="n">nm_assigned</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">nm_assigned</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">distances</span><span class="p">))</span>
</span><span id="FlightPlan.split_uncertainty_nm-527"><a href="#FlightPlan.split_uncertainty_nm-527"><span class="linenos">527</span></a>
</span><span id="FlightPlan.split_uncertainty_nm-528"><a href="#FlightPlan.split_uncertainty_nm-528"><span class="linenos">528</span></a>			<span class="c1"># TODO self.rs seems not to be defined...</span>
</span><span id="FlightPlan.split_uncertainty_nm-529"><a href="#FlightPlan.split_uncertainty_nm-529"><span class="linenos">529</span></a>			<span class="n">draw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rs</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">distances</span><span class="p">))),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">array</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">distances</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="FlightPlan.split_uncertainty_nm-530"><a href="#FlightPlan.split_uncertainty_nm-530"><span class="linenos">530</span></a>
</span><span id="FlightPlan.split_uncertainty_nm-531"><a href="#FlightPlan.split_uncertainty_nm-531"><span class="linenos">531</span></a>			<span class="n">points</span><span class="p">[</span><span class="n">draw</span><span class="p">]</span><span class="o">.</span><span class="n">nm_uncertainty</span> <span class="o">+=</span> <span class="n">nm_assigned</span>
</span><span id="FlightPlan.split_uncertainty_nm-532"><a href="#FlightPlan.split_uncertainty_nm-532"><span class="linenos">532</span></a>
</span><span id="FlightPlan.split_uncertainty_nm-533"><a href="#FlightPlan.split_uncertainty_nm-533"><span class="linenos">533</span></a>			<span class="n">to_assign</span> <span class="o">=</span> <span class="n">nm_uncertainty</span> <span class="o">-</span> <span class="n">nm_assigned</span>
</span><span id="FlightPlan.split_uncertainty_nm-534"><a href="#FlightPlan.split_uncertainty_nm-534"><span class="linenos">534</span></a>
</span><span id="FlightPlan.split_uncertainty_nm-535"><a href="#FlightPlan.split_uncertainty_nm-535"><span class="linenos">535</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_nm</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">to_assign</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.generate_uncertainty" class="classattr">
                                        <input id="FlightPlan.generate_uncertainty-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_uncertainty</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">uncertainty_climb_min</span>,</span><span class="param">	<span class="n">uncertanity_climb_from_fl</span>,</span><span class="param">	<span class="n">uncertainty_cruise_nm</span>,</span><span class="param">	<span class="n">uncertanity_cruise_from_fl</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.generate_uncertainty-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.generate_uncertainty"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.generate_uncertainty-537"><a href="#FlightPlan.generate_uncertainty-537"><span class="linenos">537</span></a>	<span class="k">def</span> <span class="nf">generate_uncertainty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uncertainty_climb_min</span><span class="p">,</span> <span class="n">uncertanity_climb_from_fl</span><span class="p">,</span>
</span><span id="FlightPlan.generate_uncertainty-538"><a href="#FlightPlan.generate_uncertainty-538"><span class="linenos">538</span></a>		<span class="n">uncertainty_cruise_nm</span><span class="p">,</span> <span class="n">uncertanity_cruise_from_fl</span><span class="p">):</span>
</span><span id="FlightPlan.generate_uncertainty-539"><a href="#FlightPlan.generate_uncertainty-539"><span class="linenos">539</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.generate_uncertainty-540"><a href="#FlightPlan.generate_uncertainty-540"><span class="linenos">540</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_cruise_nm</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.generate_uncertainty-541"><a href="#FlightPlan.generate_uncertainty-541"><span class="linenos">541</span></a>
</span><span id="FlightPlan.generate_uncertainty-542"><a href="#FlightPlan.generate_uncertainty-542"><span class="linenos">542</span></a>		<span class="c1"># Split climb uncertainty</span>
</span><span id="FlightPlan.generate_uncertainty-543"><a href="#FlightPlan.generate_uncertainty-543"><span class="linenos">543</span></a>		<span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;TOC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">&gt;=</span> <span class="n">uncertanity_climb_from_fl</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="FlightPlan.generate_uncertainty-544"><a href="#FlightPlan.generate_uncertainty-544"><span class="linenos">544</span></a>			<span class="p">(</span><span class="n">uncertainty_climb_min</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)):</span>
</span><span id="FlightPlan.generate_uncertainty-545"><a href="#FlightPlan.generate_uncertainty-545"><span class="linenos">545</span></a>
</span><span id="FlightPlan.generate_uncertainty-546"><a href="#FlightPlan.generate_uncertainty-546"><span class="linenos">546</span></a>			<span class="n">potential_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.generate_uncertainty-547"><a href="#FlightPlan.generate_uncertainty-547"><span class="linenos">547</span></a>			<span class="n">planned_climb_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.generate_uncertainty-548"><a href="#FlightPlan.generate_uncertainty-548"><span class="linenos">548</span></a>			<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan.generate_uncertainty-549"><a href="#FlightPlan.generate_uncertainty-549"><span class="linenos">549</span></a>				<span class="n">potential_points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">point</span><span class="p">]</span>
</span><span id="FlightPlan.generate_uncertainty-550"><a href="#FlightPlan.generate_uncertainty-550"><span class="linenos">550</span></a>				<span class="n">planned_climb_time</span> <span class="o">+=</span> <span class="n">point</span><span class="o">.</span><span class="n">planned_segment_time</span>
</span><span id="FlightPlan.generate_uncertainty-551"><a href="#FlightPlan.generate_uncertainty-551"><span class="linenos">551</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOC&quot;</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-552"><a href="#FlightPlan.generate_uncertainty-552"><span class="linenos">552</span></a>					<span class="k">break</span>
</span><span id="FlightPlan.generate_uncertainty-553"><a href="#FlightPlan.generate_uncertainty-553"><span class="linenos">553</span></a>
</span><span id="FlightPlan.generate_uncertainty-554"><a href="#FlightPlan.generate_uncertainty-554"><span class="linenos">554</span></a>			<span class="k">if</span> <span class="n">planned_climb_time</span><span class="o">+</span><span class="n">uncertainty_climb_min</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-555"><a href="#FlightPlan.generate_uncertainty-555"><span class="linenos">555</span></a>				<span class="c1"># At least 15 minute of climb</span>
</span><span id="FlightPlan.generate_uncertainty-556"><a href="#FlightPlan.generate_uncertainty-556"><span class="linenos">556</span></a>				<span class="k">if</span> <span class="n">planned_climb_time</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-557"><a href="#FlightPlan.generate_uncertainty-557"><span class="linenos">557</span></a>					<span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">15</span> <span class="o">-</span> <span class="n">planned_climb_time</span>
</span><span id="FlightPlan.generate_uncertainty-558"><a href="#FlightPlan.generate_uncertainty-558"><span class="linenos">558</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-559"><a href="#FlightPlan.generate_uncertainty-559"><span class="linenos">559</span></a>					<span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.generate_uncertainty-560"><a href="#FlightPlan.generate_uncertainty-560"><span class="linenos">560</span></a>
</span><span id="FlightPlan.generate_uncertainty-561"><a href="#FlightPlan.generate_uncertainty-561"><span class="linenos">561</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">uncertainty_climb_min</span> <span class="o">=</span> <span class="n">uncertainty_climb_min</span>
</span><span id="FlightPlan.generate_uncertainty-562"><a href="#FlightPlan.generate_uncertainty-562"><span class="linenos">562</span></a>	
</span><span id="FlightPlan.generate_uncertainty-563"><a href="#FlightPlan.generate_uncertainty-563"><span class="linenos">563</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_min</span><span class="p">(</span><span class="n">potential_points</span><span class="p">,</span> <span class="n">uncertainty_climb_min</span><span class="p">)</span>
</span><span id="FlightPlan.generate_uncertainty-564"><a href="#FlightPlan.generate_uncertainty-564"><span class="linenos">564</span></a>
</span><span id="FlightPlan.generate_uncertainty-565"><a href="#FlightPlan.generate_uncertainty-565"><span class="linenos">565</span></a>		<span class="c1"># Split cruise uncertainty</span>
</span><span id="FlightPlan.generate_uncertainty-566"><a href="#FlightPlan.generate_uncertainty-566"><span class="linenos">566</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;TOC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">&gt;=</span> <span class="n">uncertanity_cruise_from_fl</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-567"><a href="#FlightPlan.generate_uncertainty-567"><span class="linenos">567</span></a>			<span class="n">potential_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.generate_uncertainty-568"><a href="#FlightPlan.generate_uncertainty-568"><span class="linenos">568</span></a>			<span class="n">planned_cruise_dist</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.generate_uncertainty-569"><a href="#FlightPlan.generate_uncertainty-569"><span class="linenos">569</span></a>			<span class="n">counting</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan.generate_uncertainty-570"><a href="#FlightPlan.generate_uncertainty-570"><span class="linenos">570</span></a>			<span class="n">alt_ft_prev</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.generate_uncertainty-571"><a href="#FlightPlan.generate_uncertainty-571"><span class="linenos">571</span></a>			<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan.generate_uncertainty-572"><a href="#FlightPlan.generate_uncertainty-572"><span class="linenos">572</span></a>				<span class="k">if</span> <span class="n">counting</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-573"><a href="#FlightPlan.generate_uncertainty-573"><span class="linenos">573</span></a>					<span class="k">if</span> <span class="n">alt_ft_prev</span> <span class="o">==</span> <span class="n">point</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-574"><a href="#FlightPlan.generate_uncertainty-574"><span class="linenos">574</span></a>						<span class="n">potential_points</span> <span class="o">+=</span> <span class="p">[</span><span class="n">point</span><span class="p">]</span>
</span><span id="FlightPlan.generate_uncertainty-575"><a href="#FlightPlan.generate_uncertainty-575"><span class="linenos">575</span></a>						<span class="n">planned_cruise_dist</span> <span class="o">+=</span> <span class="n">point</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span>
</span><span id="FlightPlan.generate_uncertainty-576"><a href="#FlightPlan.generate_uncertainty-576"><span class="linenos">576</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOC&quot;</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-577"><a href="#FlightPlan.generate_uncertainty-577"><span class="linenos">577</span></a>					<span class="n">counting</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan.generate_uncertainty-578"><a href="#FlightPlan.generate_uncertainty-578"><span class="linenos">578</span></a>				<span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;TOD&quot;</span><span class="p">:</span>
</span><span id="FlightPlan.generate_uncertainty-579"><a href="#FlightPlan.generate_uncertainty-579"><span class="linenos">579</span></a>					<span class="k">break</span>
</span><span id="FlightPlan.generate_uncertainty-580"><a href="#FlightPlan.generate_uncertainty-580"><span class="linenos">580</span></a>				<span class="n">alt_ft_prev</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="FlightPlan.generate_uncertainty-581"><a href="#FlightPlan.generate_uncertainty-581"><span class="linenos">581</span></a>
</span><span id="FlightPlan.generate_uncertainty-582"><a href="#FlightPlan.generate_uncertainty-582"><span class="linenos">582</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">split_uncertainty_nm</span><span class="p">(</span><span class="n">potential_points</span><span class="p">,</span> <span class="n">uncertainty_cruise_nm</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_xot" class="classattr">
                                        <input id="FlightPlan.get_xot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_xot</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_xot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_xot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_xot-584"><a href="#FlightPlan.get_xot-584"><span class="linenos">584</span></a>	<span class="k">def</span> <span class="nf">get_xot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_xot-585"><a href="#FlightPlan.get_xot-585"><span class="linenos">585</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.get_xot-586"><a href="#FlightPlan.get_xot-586"><span class="linenos">586</span></a>			<span class="n">taxi_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axot</span>
</span><span id="FlightPlan.get_xot-587"><a href="#FlightPlan.get_xot-587"><span class="linenos">587</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_xot-588"><a href="#FlightPlan.get_xot-588"><span class="linenos">588</span></a>			<span class="n">taxi_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exot</span>
</span><span id="FlightPlan.get_xot-589"><a href="#FlightPlan.get_xot-589"><span class="linenos">589</span></a>		<span class="k">return</span> <span class="n">taxi_out</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_xit" class="classattr">
                                        <input id="FlightPlan.get_xit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_xit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_xit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_xit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_xit-591"><a href="#FlightPlan.get_xit-591"><span class="linenos">591</span></a>	<span class="k">def</span> <span class="nf">get_xit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_xit-592"><a href="#FlightPlan.get_xit-592"><span class="linenos">592</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.get_xit-593"><a href="#FlightPlan.get_xit-593"><span class="linenos">593</span></a>			<span class="n">taxi_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axit</span>
</span><span id="FlightPlan.get_xit-594"><a href="#FlightPlan.get_xit-594"><span class="linenos">594</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_xit-595"><a href="#FlightPlan.get_xit-595"><span class="linenos">595</span></a>			<span class="n">taxi_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit</span>
</span><span id="FlightPlan.get_xit-596"><a href="#FlightPlan.get_xit-596"><span class="linenos">596</span></a>		<span class="k">return</span> <span class="n">taxi_in</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_obt" class="classattr">
                                        <input id="FlightPlan.get_obt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_obt</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_obt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_obt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_obt-598"><a href="#FlightPlan.get_obt-598"><span class="linenos">598</span></a>	<span class="k">def</span> <span class="nf">get_obt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_obt-599"><a href="#FlightPlan.get_obt-599"><span class="linenos">599</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.get_obt-600"><a href="#FlightPlan.get_obt-600"><span class="linenos">600</span></a>			<span class="n">obt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span>
</span><span id="FlightPlan.get_obt-601"><a href="#FlightPlan.get_obt-601"><span class="linenos">601</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_obt-602"><a href="#FlightPlan.get_obt-602"><span class="linenos">602</span></a>			<span class="n">obt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eobt</span>
</span><span id="FlightPlan.get_obt-603"><a href="#FlightPlan.get_obt-603"><span class="linenos">603</span></a>		<span class="k">return</span> <span class="n">obt</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_ibt" class="classattr">
                                        <input id="FlightPlan.get_ibt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_ibt</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_ibt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_ibt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_ibt-605"><a href="#FlightPlan.get_ibt-605"><span class="linenos">605</span></a>	<span class="k">def</span> <span class="nf">get_ibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_ibt-606"><a href="#FlightPlan.get_ibt-606"><span class="linenos">606</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.get_ibt-607"><a href="#FlightPlan.get_ibt-607"><span class="linenos">607</span></a>			<span class="n">ibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span>
</span><span id="FlightPlan.get_ibt-608"><a href="#FlightPlan.get_ibt-608"><span class="linenos">608</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_ibt-609"><a href="#FlightPlan.get_ibt-609"><span class="linenos">609</span></a>			<span class="n">ibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eibt</span>
</span><span id="FlightPlan.get_ibt-610"><a href="#FlightPlan.get_ibt-610"><span class="linenos">610</span></a>		<span class="k">return</span> <span class="n">ibt</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_eta_wo_atfm" class="classattr">
                                        <input id="FlightPlan.get_eta_wo_atfm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_eta_wo_atfm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_eta_wo_atfm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_eta_wo_atfm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_eta_wo_atfm-612"><a href="#FlightPlan.get_eta_wo_atfm-612"><span class="linenos">612</span></a>	<span class="k">def</span> <span class="nf">get_eta_wo_atfm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_eta_wo_atfm-613"><a href="#FlightPlan.get_eta_wo_atfm-613"><span class="linenos">613</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan.get_eta_wo_atfm-614"><a href="#FlightPlan.get_eta_wo_atfm-614"><span class="linenos">614</span></a><span class="sd">		Estimated time of arrival without ATFM delay</span>
</span><span id="FlightPlan.get_eta_wo_atfm-615"><a href="#FlightPlan.get_eta_wo_atfm-615"><span class="linenos">615</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan.get_eta_wo_atfm-616"><a href="#FlightPlan.get_eta_wo_atfm-616"><span class="linenos">616</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_estimated_landing_time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_atfm_delay</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Estimated time of arrival without ATFM delay</p>
</div>


                            </div>
                            <div id="FlightPlan.get_atfm_delay" class="classattr">
                                        <input id="FlightPlan.get_atfm_delay-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_atfm_delay</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_atfm_delay-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_atfm_delay"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_atfm_delay-618"><a href="#FlightPlan.get_atfm_delay-618"><span class="linenos">618</span></a>	<span class="k">def</span> <span class="nf">get_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_atfm_delay-619"><a href="#FlightPlan.get_atfm_delay-619"><span class="linenos">619</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.get_atfm_delay-620"><a href="#FlightPlan.get_atfm_delay-620"><span class="linenos">620</span></a>			<span class="k">return</span> <span class="mf">0.</span>
</span><span id="FlightPlan.get_atfm_delay-621"><a href="#FlightPlan.get_atfm_delay-621"><span class="linenos">621</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_atfm_delay-622"><a href="#FlightPlan.get_atfm_delay-622"><span class="linenos">622</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_atfm_reason" class="classattr">
                                        <input id="FlightPlan.get_atfm_reason-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_atfm_reason</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_atfm_reason-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_atfm_reason"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_atfm_reason-624"><a href="#FlightPlan.get_atfm_reason-624"><span class="linenos">624</span></a>	<span class="k">def</span> <span class="nf">get_atfm_reason</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_atfm_reason-625"><a href="#FlightPlan.get_atfm_reason-625"><span class="linenos">625</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.get_atfm_reason-626"><a href="#FlightPlan.get_atfm_reason-626"><span class="linenos">626</span></a>			<span class="k">return</span> <span class="kc">None</span>
</span><span id="FlightPlan.get_atfm_reason-627"><a href="#FlightPlan.get_atfm_reason-627"><span class="linenos">627</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.get_atfm_reason-628"><a href="#FlightPlan.get_atfm_reason-628"><span class="linenos">628</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">reason</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_point_times" class="classattr">
                                        <input id="FlightPlan.get_point_times-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_point_times</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_point_times-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_point_times"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_point_times-630"><a href="#FlightPlan.get_point_times-630"><span class="linenos">630</span></a>	<span class="k">def</span> <span class="nf">get_point_times</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_point_times-631"><a href="#FlightPlan.get_point_times-631"><span class="linenos">631</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">time_min</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_point_names" class="classattr">
                                        <input id="FlightPlan.get_point_names-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_point_names</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_point_names-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_point_names"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_point_names-633"><a href="#FlightPlan.get_point_names-633"><span class="linenos">633</span></a>	<span class="k">def</span> <span class="nf">get_point_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_point_names-634"><a href="#FlightPlan.get_point_names-634"><span class="linenos">634</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_planned_flying_time_to_landing" class="classattr">
                                        <input id="FlightPlan.get_planned_flying_time_to_landing-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_planned_flying_time_to_landing</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_planned_flying_time_to_landing-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_planned_flying_time_to_landing"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_planned_flying_time_to_landing-636"><a href="#FlightPlan.get_planned_flying_time_to_landing-636"><span class="linenos">636</span></a>	<span class="k">def</span> <span class="nf">get_planned_flying_time_to_landing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_planned_flying_time_to_landing-637"><a href="#FlightPlan.get_planned_flying_time_to_landing-637"><span class="linenos">637</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan.get_planned_flying_time_to_landing-638"><a href="#FlightPlan.get_planned_flying_time_to_landing-638"><span class="linenos">638</span></a><span class="sd">		Length of trajectory in minute, up to landing.</span>
</span><span id="FlightPlan.get_planned_flying_time_to_landing-639"><a href="#FlightPlan.get_planned_flying_time_to_landing-639"><span class="linenos">639</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan.get_planned_flying_time_to_landing-640"><a href="#FlightPlan.get_planned_flying_time_to_landing-640"><span class="linenos">640</span></a>		<span class="c1"># TODO I need to review this with the new flight plan structure</span>
</span><span id="FlightPlan.get_planned_flying_time_to_landing-641"><a href="#FlightPlan.get_planned_flying_time_to_landing-641"><span class="linenos">641</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.get_planned_flying_time_to_landing-642"><a href="#FlightPlan.get_planned_flying_time_to_landing-642"><span class="linenos">642</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan.get_planned_flying_time_to_landing-643"><a href="#FlightPlan.get_planned_flying_time_to_landing-643"><span class="linenos">643</span></a>		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="FlightPlan.get_planned_flying_time_to_landing-644"><a href="#FlightPlan.get_planned_flying_time_to_landing-644"><span class="linenos">644</span></a>			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span></pre></div>


            <div class="docstring"><p>Length of trajectory in minute, up to landing.</p>
</div>


                            </div>
                            <div id="FlightPlan.get_planned_landing_time" class="classattr">
                                        <input id="FlightPlan.get_planned_landing_time-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_planned_landing_time</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_planned_landing_time-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_planned_landing_time"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_planned_landing_time-646"><a href="#FlightPlan.get_planned_landing_time-646"><span class="linenos">646</span></a>	<span class="k">def</span> <span class="nf">get_planned_landing_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_planned_landing_time-647"><a href="#FlightPlan.get_planned_landing_time-647"><span class="linenos">647</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sobt</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_current_eibt" class="classattr">
                                        <input id="FlightPlan.get_current_eibt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_current_eibt</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_current_eibt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_current_eibt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_current_eibt-649"><a href="#FlightPlan.get_current_eibt-649"><span class="linenos">649</span></a>	<span class="k">def</span> <span class="nf">get_current_eibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_current_eibt-650"><a href="#FlightPlan.get_current_eibt-650"><span class="linenos">650</span></a>		<span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span> <span class="o">+</span>
</span><span id="FlightPlan.get_current_eibt-651"><a href="#FlightPlan.get_current_eibt-651"><span class="linenos">651</span></a>				<span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xit</span><span class="p">())</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.compute_eibt" class="classattr">
                                        <input id="FlightPlan.compute_eibt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_eibt</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.compute_eibt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.compute_eibt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.compute_eibt-653"><a href="#FlightPlan.compute_eibt-653"><span class="linenos">653</span></a>	<span class="k">def</span> <span class="nf">compute_eibt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.compute_eibt-654"><a href="#FlightPlan.compute_eibt-654"><span class="linenos">654</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eibt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_eibt</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_estimated_takeoff_time" class="classattr">
                                        <input id="FlightPlan.get_estimated_takeoff_time-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_estimated_takeoff_time</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_estimated_takeoff_time-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_estimated_takeoff_time"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_estimated_takeoff_time-656"><a href="#FlightPlan.get_estimated_takeoff_time-656"><span class="linenos">656</span></a>	<span class="k">def</span> <span class="nf">get_estimated_takeoff_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_estimated_takeoff_time-657"><a href="#FlightPlan.get_estimated_takeoff_time-657"><span class="linenos">657</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_estimated_landing_time" class="classattr">
                                        <input id="FlightPlan.get_estimated_landing_time-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_estimated_landing_time</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_estimated_landing_time-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_estimated_landing_time"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_estimated_landing_time-659"><a href="#FlightPlan.get_estimated_landing_time-659"><span class="linenos">659</span></a>	<span class="k">def</span> <span class="nf">get_estimated_landing_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_estimated_landing_time-660"><a href="#FlightPlan.get_estimated_landing_time-660"><span class="linenos">660</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_obt</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_xot</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_planned_flying_time_to_landing</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_delta_time</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_total_planned_distance" class="classattr">
                                        <input id="FlightPlan.get_total_planned_distance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_total_planned_distance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_total_planned_distance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_total_planned_distance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_total_planned_distance-662"><a href="#FlightPlan.get_total_planned_distance-662"><span class="linenos">662</span></a>	<span class="k">def</span> <span class="nf">get_total_planned_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_total_planned_distance-663"><a href="#FlightPlan.get_total_planned_distance-663"><span class="linenos">663</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="s1">&#39;landing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.set_atfm_delay" class="classattr">
                                        <input id="FlightPlan.set_atfm_delay-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_atfm_delay</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">atfm_delay</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.set_atfm_delay-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.set_atfm_delay"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.set_atfm_delay-665"><a href="#FlightPlan.set_atfm_delay-665"><span class="linenos">665</span></a>	<span class="k">def</span> <span class="nf">set_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">atfm_delay</span><span class="p">):</span>
</span><span id="FlightPlan.set_atfm_delay-666"><a href="#FlightPlan.set_atfm_delay-666"><span class="linenos">666</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.set_atfm_delay-667"><a href="#FlightPlan.set_atfm_delay-667"><span class="linenos">667</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">remove_atfm_delay</span><span class="p">()</span>
</span><span id="FlightPlan.set_atfm_delay-668"><a href="#FlightPlan.set_atfm_delay-668"><span class="linenos">668</span></a>			
</span><span id="FlightPlan.set_atfm_delay-669"><a href="#FlightPlan.set_atfm_delay-669"><span class="linenos">669</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="n">atfm_delay</span>
</span><span id="FlightPlan.set_atfm_delay-670"><a href="#FlightPlan.set_atfm_delay-670"><span class="linenos">670</span></a>		<span class="k">if</span> <span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.set_atfm_delay-671"><a href="#FlightPlan.set_atfm_delay-671"><span class="linenos">671</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">+</span> <span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span><span id="FlightPlan.set_atfm_delay-672"><a href="#FlightPlan.set_atfm_delay-672"><span class="linenos">672</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cobt</span>
</span><span id="FlightPlan.set_atfm_delay-673"><a href="#FlightPlan.set_atfm_delay-673"><span class="linenos">673</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.has_atfm_delay" class="classattr">
                                        <input id="FlightPlan.has_atfm_delay-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">has_atfm_delay</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.has_atfm_delay-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.has_atfm_delay"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.has_atfm_delay-675"><a href="#FlightPlan.has_atfm_delay-675"><span class="linenos">675</span></a>	<span class="k">def</span> <span class="nf">has_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.has_atfm_delay-676"><a href="#FlightPlan.has_atfm_delay-676"><span class="linenos">676</span></a>		<span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;atfm_delay&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.remove_atfm_delay" class="classattr">
                                        <input id="FlightPlan.remove_atfm_delay-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_atfm_delay</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.remove_atfm_delay-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.remove_atfm_delay"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.remove_atfm_delay-678"><a href="#FlightPlan.remove_atfm_delay-678"><span class="linenos">678</span></a>	<span class="k">def</span> <span class="nf">remove_atfm_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.remove_atfm_delay-679"><a href="#FlightPlan.remove_atfm_delay-679"><span class="linenos">679</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span>
</span><span id="FlightPlan.remove_atfm_delay-680"><a href="#FlightPlan.remove_atfm_delay-680"><span class="linenos">680</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">cobt</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.remove_atfm_delay-681"><a href="#FlightPlan.remove_atfm_delay-681"><span class="linenos">681</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.update_eobt" class="classattr">
                                        <input id="FlightPlan.update_eobt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_eobt</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">new_eobt</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.update_eobt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.update_eobt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.update_eobt-683"><a href="#FlightPlan.update_eobt-683"><span class="linenos">683</span></a>	<span class="k">def</span> <span class="nf">update_eobt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_eobt</span><span class="p">):</span>
</span><span id="FlightPlan.update_eobt-684"><a href="#FlightPlan.update_eobt-684"><span class="linenos">684</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">eobt</span> <span class="o">=</span> <span class="n">new_eobt</span>
</span><span id="FlightPlan.update_eobt-685"><a href="#FlightPlan.update_eobt-685"><span class="linenos">685</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_status" class="classattr">
                                        <input id="FlightPlan.get_status-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_status</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_status-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_status"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_status-687"><a href="#FlightPlan.get_status-687"><span class="linenos">687</span></a>	<span class="k">def</span> <span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_status-688"><a href="#FlightPlan.get_status-688"><span class="linenos">688</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.set_status" class="classattr">
                                        <input id="FlightPlan.set_status-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_status</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">status</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.set_status-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.set_status"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.set_status-690"><a href="#FlightPlan.set_status-690"><span class="linenos">690</span></a>	<span class="k">def</span> <span class="nf">set_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
</span><span id="FlightPlan.set_status-691"><a href="#FlightPlan.set_status-691"><span class="linenos">691</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="n">status</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.get_unique_id" class="classattr">
                                        <input id="FlightPlan.get_unique_id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_unique_id</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_unique_id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_unique_id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_unique_id-693"><a href="#FlightPlan.get_unique_id-693"><span class="linenos">693</span></a>	<span class="k">def</span> <span class="nf">get_unique_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_unique_id-694"><a href="#FlightPlan.get_unique_id-694"><span class="linenos">694</span></a>		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.number_points" class="classattr">
                                        <input id="FlightPlan.number_points-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">number_points</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.number_points-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.number_points"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.number_points-696"><a href="#FlightPlan.number_points-696"><span class="linenos">696</span></a>	<span class="k">def</span> <span class="nf">number_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.number_points-697"><a href="#FlightPlan.number_points-697"><span class="linenos">697</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.number_points-698"><a href="#FlightPlan.number_points-698"><span class="linenos">698</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan.number_points-699"><a href="#FlightPlan.number_points-699"><span class="linenos">699</span></a>			<span class="n">p</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">s</span>
</span><span id="FlightPlan.number_points-700"><a href="#FlightPlan.number_points-700"><span class="linenos">700</span></a>			<span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.compute_speeds_original_planned" class="classattr">
                                        <input id="FlightPlan.compute_speeds_original_planned-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_speeds_original_planned</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.compute_speeds_original_planned-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.compute_speeds_original_planned"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.compute_speeds_original_planned-702"><a href="#FlightPlan.compute_speeds_original_planned-702"><span class="linenos">702</span></a>	<span class="k">def</span> <span class="nf">compute_speeds_original_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.compute_speeds_original_planned-703"><a href="#FlightPlan.compute_speeds_original_planned-703"><span class="linenos">703</span></a>		<span class="n">time_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_speeds_original_planned-704"><a href="#FlightPlan.compute_speeds_original_planned-704"><span class="linenos">704</span></a>		<span class="n">dist_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_speeds_original_planned-705"><a href="#FlightPlan.compute_speeds_original_planned-705"><span class="linenos">705</span></a>		<span class="n">speed_kt_prev</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.compute_speeds_original_planned-706"><a href="#FlightPlan.compute_speeds_original_planned-706"><span class="linenos">706</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.compute_speeds_original_planned-707"><a href="#FlightPlan.compute_speeds_original_planned-707"><span class="linenos">707</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan.compute_speeds_original_planned-708"><a href="#FlightPlan.compute_speeds_original_planned-708"><span class="linenos">708</span></a>			<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.compute_speeds_original_planned-709"><a href="#FlightPlan.compute_speeds_original_planned-709"><span class="linenos">709</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.compute_speeds_original_planned-710"><a href="#FlightPlan.compute_speeds_original_planned-710"><span class="linenos">710</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">speed_kt_prev</span>
</span><span id="FlightPlan.compute_speeds_original_planned-711"><a href="#FlightPlan.compute_speeds_original_planned-711"><span class="linenos">711</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.compute_speeds_original_planned-712"><a href="#FlightPlan.compute_speeds_original_planned-712"><span class="linenos">712</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span><span class="p">)</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">wind</span>
</span><span id="FlightPlan.compute_speeds_original_planned-713"><a href="#FlightPlan.compute_speeds_original_planned-713"><span class="linenos">713</span></a>					<span class="n">speed_kt_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan.compute_speeds_original_planned-714"><a href="#FlightPlan.compute_speeds_original_planned-714"><span class="linenos">714</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_segment_time</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span> <span class="o">-</span> <span class="n">time_prev</span>
</span><span id="FlightPlan.compute_speeds_original_planned-715"><a href="#FlightPlan.compute_speeds_original_planned-715"><span class="linenos">715</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">planned_dist_segment_nm</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span> <span class="o">-</span> <span class="n">dist_prev</span>
</span><span id="FlightPlan.compute_speeds_original_planned-716"><a href="#FlightPlan.compute_speeds_original_planned-716"><span class="linenos">716</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.compute_speeds_original_planned-717"><a href="#FlightPlan.compute_speeds_original_planned-717"><span class="linenos">717</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]:</span>
</span><span id="FlightPlan.compute_speeds_original_planned-718"><a href="#FlightPlan.compute_speeds_original_planned-718"><span class="linenos">718</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="FlightPlan.compute_speeds_original_planned-719"><a href="#FlightPlan.compute_speeds_original_planned-719"><span class="linenos">719</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.compute_speeds_original_planned-720"><a href="#FlightPlan.compute_speeds_original_planned-720"><span class="linenos">720</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>
</span><span id="FlightPlan.compute_speeds_original_planned-721"><a href="#FlightPlan.compute_speeds_original_planned-721"><span class="linenos">721</span></a>			<span class="k">except</span><span class="p">:</span>  <span class="c1"># DANGEROUS!!!!</span>
</span><span id="FlightPlan.compute_speeds_original_planned-722"><a href="#FlightPlan.compute_speeds_original_planned-722"><span class="linenos">722</span></a>				<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.compute_speeds_original_planned-723"><a href="#FlightPlan.compute_speeds_original_planned-723"><span class="linenos">723</span></a>
</span><span id="FlightPlan.compute_speeds_original_planned-724"><a href="#FlightPlan.compute_speeds_original_planned-724"><span class="linenos">724</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan.compute_speeds_original_planned-725"><a href="#FlightPlan.compute_speeds_original_planned-725"><span class="linenos">725</span></a>			<span class="c1"># 	print(&#39;For flight {} ({}) finished computing speed of point {}: {}&#39;.format(self.flight_uid, self, v, v.dict_speeds))</span>
</span><span id="FlightPlan.compute_speeds_original_planned-726"><a href="#FlightPlan.compute_speeds_original_planned-726"><span class="linenos">726</span></a>
</span><span id="FlightPlan.compute_speeds_original_planned-727"><a href="#FlightPlan.compute_speeds_original_planned-727"><span class="linenos">727</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan.compute_speeds_original_planned-728"><a href="#FlightPlan.compute_speeds_original_planned-728"><span class="linenos">728</span></a>			<span class="n">time_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan.compute_speeds_original_planned-729"><a href="#FlightPlan.compute_speeds_original_planned-729"><span class="linenos">729</span></a>			<span class="n">dist_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.compute_max_min_mrc_speed_cruise" class="classattr">
                                        <input id="FlightPlan.compute_max_min_mrc_speed_cruise-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compute_max_min_mrc_speed_cruise</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">bada_performances</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.compute_max_min_mrc_speed_cruise-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.compute_max_min_mrc_speed_cruise"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-731"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-731"><span class="linenos">731</span></a>	<span class="k">def</span> <span class="nf">compute_max_min_mrc_speed_cruise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bada_performances</span><span class="p">):</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-732"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-732"><span class="linenos">732</span></a>		<span class="c1"># Note this will crash if bada_performances are not BADA4</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-733"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-733"><span class="linenos">733</span></a>		<span class="n">alt_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-734"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-734"><span class="linenos">734</span></a>		<span class="n">weight_prev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-735"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-735"><span class="linenos">735</span></a>		<span class="n">m_min_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-736"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-736"><span class="linenos">736</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-737"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-737"><span class="linenos">737</span></a>			<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span> <span class="o">==</span> <span class="n">alt_prev</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-738"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-738"><span class="linenos">738</span></a>				<span class="c1"># cruise</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-739"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-739"><span class="linenos">739</span></a>				<span class="n">m_min_end</span><span class="p">,</span> <span class="n">m_max_end</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_min_max_mach</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-740"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-740"><span class="linenos">740</span></a>				<span class="k">if</span> <span class="n">m_min_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-741"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-741"><span class="linenos">741</span></a>					<span class="n">m_min_start</span><span class="p">,</span> <span class="n">m_max_start</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_min_max_mach</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="n">weight_prev</span><span class="p">)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-742"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-742"><span class="linenos">742</span></a>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-743"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-743"><span class="linenos">743</span></a>				<span class="c1"># if m_min_end is None:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-744"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-744"><span class="linenos">744</span></a>				<span class="c1">#     print(&quot;---------&quot;)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-745"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-745"><span class="linenos">745</span></a>				<span class="c1">#     print(bada_performances.bada_version, bada_performances.ac_icao, bada_performances.ac_model, v.weight, weight_prev, v.name, v.coords, v.alt_ft)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-746"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-746"><span class="linenos">746</span></a>				<span class="c1">#     print(&quot;---------&quot;)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-747"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-747"><span class="linenos">747</span></a>				<span class="c1">#     print()</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-748"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-748"><span class="linenos">748</span></a>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-749"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-749"><span class="linenos">749</span></a>				<span class="k">if</span> <span class="n">m_min_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-750"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-750"><span class="linenos">750</span></a>					<span class="n">m_min</span> <span class="o">=</span> <span class="n">m_min_start</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-751"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-751"><span class="linenos">751</span></a>					<span class="c1"># v.segment_min_speed_kt = None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-752"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-752"><span class="linenos">752</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-753"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-753"><span class="linenos">753</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-754"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-754"><span class="linenos">754</span></a>					<span class="k">if</span> <span class="n">m_min_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-755"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-755"><span class="linenos">755</span></a>						<span class="n">m_min</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">m_min_end</span><span class="p">,</span> <span class="n">m_min_start</span><span class="p">)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-756"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-756"><span class="linenos">756</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-757"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-757"><span class="linenos">757</span></a>						<span class="n">m_min</span> <span class="o">=</span> <span class="n">m_min_end</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-758"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-758"><span class="linenos">758</span></a>					<span class="c1"># v.segment_min_speed_kt = m2kt(m=m_min,fl=v.alt_ft)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-759"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-759"><span class="linenos">759</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_min</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-760"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-760"><span class="linenos">760</span></a>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-761"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-761"><span class="linenos">761</span></a>				<span class="k">if</span> <span class="n">m_max_end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-762"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-762"><span class="linenos">762</span></a>					<span class="n">m_max</span> <span class="o">=</span> <span class="n">m_max_start</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-763"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-763"><span class="linenos">763</span></a>					<span class="c1"># v.segment_max_speed_kt = None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-764"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-764"><span class="linenos">764</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-765"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-765"><span class="linenos">765</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-766"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-766"><span class="linenos">766</span></a>					<span class="k">if</span> <span class="n">m_max_start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-767"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-767"><span class="linenos">767</span></a>						<span class="n">m_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">m_max_end</span><span class="p">,</span> <span class="n">m_max_start</span><span class="p">)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-768"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-768"><span class="linenos">768</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-769"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-769"><span class="linenos">769</span></a>						<span class="n">m_max</span> <span class="o">=</span> <span class="n">m_max_end</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-770"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-770"><span class="linenos">770</span></a>					<span class="c1"># v.segment_max_speed_kt = m2kt(m=m_max,fl=v.alt_ft)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-771"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-771"><span class="linenos">771</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_max</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-772"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-772"><span class="linenos">772</span></a>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-773"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-773"><span class="linenos">773</span></a>				<span class="n">m_min_start</span> <span class="o">=</span> <span class="n">m_min</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-774"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-774"><span class="linenos">774</span></a>				<span class="n">m_max_start</span> <span class="o">=</span> <span class="n">m_max</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-775"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-775"><span class="linenos">775</span></a>				
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-776"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-776"><span class="linenos">776</span></a>				<span class="n">m_mrc</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">bada_performances</span><span class="o">.</span><span class="n">compute_mrc_speed</span><span class="p">(</span><span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">weight</span><span class="o">+</span><span class="n">weight_prev</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-777"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-777"><span class="linenos">777</span></a>				<span class="k">if</span> <span class="n">m_mrc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-778"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-778"><span class="linenos">778</span></a>					<span class="c1"># v.segment_mrc_speed_kt = m2kt(m=m_mrc,fl=v.alt_ft)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-779"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-779"><span class="linenos">779</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m2kt</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m_mrc</span><span class="p">,</span> <span class="n">fl</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">)</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-780"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-780"><span class="linenos">780</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-781"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-781"><span class="linenos">781</span></a>					<span class="c1"># v.segment_mrc_speed_kt = None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-782"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-782"><span class="linenos">782</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-783"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-783"><span class="linenos">783</span></a>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-784"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-784"><span class="linenos">784</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-785"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-785"><span class="linenos">785</span></a>				<span class="n">m_min_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-786"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-786"><span class="linenos">786</span></a>	
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-787"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-787"><span class="linenos">787</span></a>			<span class="n">weight_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">weight</span>
</span><span id="FlightPlan.compute_max_min_mrc_speed_cruise-788"><a href="#FlightPlan.compute_max_min_mrc_speed_cruise-788"><span class="linenos">788</span></a>			<span class="n">alt_prev</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">alt_ft</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.add_point_original_planned" class="classattr">
                                        <input id="FlightPlan.add_point_original_planned-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_point_original_planned</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.add_point_original_planned-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.add_point_original_planned"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.add_point_original_planned-790"><a href="#FlightPlan.add_point_original_planned-790"><span class="linenos">790</span></a>	<span class="k">def</span> <span class="nf">add_point_original_planned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> 
</span><span id="FlightPlan.add_point_original_planned-791"><a href="#FlightPlan.add_point_original_planned-791"><span class="linenos">791</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan.add_point_original_planned-792"><a href="#FlightPlan.add_point_original_planned-792"><span class="linenos">792</span></a><span class="sd">		Used to add a point to the flight plan.</span>
</span><span id="FlightPlan.add_point_original_planned-793"><a href="#FlightPlan.add_point_original_planned-793"><span class="linenos">793</span></a><span class="sd">		If the point is not supposed to be at end, one needs to call sort_points</span>
</span><span id="FlightPlan.add_point_original_planned-794"><a href="#FlightPlan.add_point_original_planned-794"><span class="linenos">794</span></a><span class="sd">		after that.</span>
</span><span id="FlightPlan.add_point_original_planned-795"><a href="#FlightPlan.add_point_original_planned-795"><span class="linenos">795</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan.add_point_original_planned-796"><a href="#FlightPlan.add_point_original_planned-796"><span class="linenos">796</span></a>		<span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.add_point_original_planned-797"><a href="#FlightPlan.add_point_original_planned-797"><span class="linenos">797</span></a>			<span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;coords&#39;</span><span class="p">])</span>
</span><span id="FlightPlan.add_point_original_planned-798"><a href="#FlightPlan.add_point_original_planned-798"><span class="linenos">798</span></a>
</span><span id="FlightPlan.add_point_original_planned-799"><a href="#FlightPlan.add_point_original_planned-799"><span class="linenos">799</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">FlightPlanPoint</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Used to add a point to the flight plan.
If the point is not supposed to be at end, one needs to call sort_points
after that.</p>
</div>


                            </div>
                            <div id="FlightPlan.add_event_to_point" class="classattr">
                                        <input id="FlightPlan.add_event_to_point-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_event_to_point</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span>, </span><span class="param"><span class="n">point_name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.add_event_to_point-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.add_event_to_point"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.add_event_to_point-801"><a href="#FlightPlan.add_event_to_point-801"><span class="linenos">801</span></a>	<span class="k">def</span> <span class="nf">add_event_to_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">point_name</span><span class="p">):</span>
</span><span id="FlightPlan.add_event_to_point-802"><a href="#FlightPlan.add_event_to_point-802"><span class="linenos">802</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">point_name</span><span class="p">]</span><span class="o">.</span><span class="n">set_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.add_initial_points" class="classattr">
                                        <input id="FlightPlan.add_initial_points-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_initial_points</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fp_points</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.add_initial_points-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.add_initial_points"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.add_initial_points-804"><a href="#FlightPlan.add_initial_points-804"><span class="linenos">804</span></a>	<span class="k">def</span> <span class="nf">add_initial_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp_points</span><span class="p">):</span>
</span><span id="FlightPlan.add_initial_points-805"><a href="#FlightPlan.add_initial_points-805"><span class="linenos">805</span></a>		<span class="k">for</span> <span class="n">coords</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">alt</span><span class="p">,</span> <span class="n">dist_from_orig_nm</span> <span class="ow">in</span> <span class="n">fp_points</span><span class="p">:</span>
</span><span id="FlightPlan.add_initial_points-806"><a href="#FlightPlan.add_initial_points-806"><span class="linenos">806</span></a>			<span class="c1"># TODO add_point doesn&#39;t seem to be defined!</span>
</span><span id="FlightPlan.add_initial_points-807"><a href="#FlightPlan.add_initial_points-807"><span class="linenos">807</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">add_point</span><span class="p">(</span><span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">time</span><span class="p">,</span> <span class="n">alt</span><span class="o">=</span><span class="n">alt</span><span class="p">,</span> <span class="n">dist_from_orig_nm</span><span class="o">=</span><span class="n">dist_from_orig_nm</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.sort_points" class="classattr">
                                        <input id="FlightPlan.sort_points-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sort_points</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">compute_eibt</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.sort_points-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.sort_points"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.sort_points-809"><a href="#FlightPlan.sort_points-809"><span class="linenos">809</span></a>	<span class="k">def</span> <span class="nf">sort_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compute_eibt</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="FlightPlan.sort_points-810"><a href="#FlightPlan.sort_points-810"><span class="linenos">810</span></a>		<span class="c1"># self.points_original_planned = OrderedDict(sorted(self.points_original_planned.items(), key=lambda x:x[1].get_time_min()))</span>
</span><span id="FlightPlan.sort_points-811"><a href="#FlightPlan.sort_points-811"><span class="linenos">811</span></a>
</span><span id="FlightPlan.sort_points-812"><a href="#FlightPlan.sort_points-812"><span class="linenos">812</span></a>		<span class="c1"># Sort by time and if two times the same then by name of the point desc. This is to ensure that if take-off inside execution horizon we get: take-off, enter_eaman_planning_radius, enter_eaman_execution_radius</span>
</span><span id="FlightPlan.sort_points-813"><a href="#FlightPlan.sort_points-813"><span class="linenos">813</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="FlightPlan.sort_points-814"><a href="#FlightPlan.sort_points-814"><span class="linenos">814</span></a>		<span class="n">s</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_time_min</span><span class="p">())</span>
</span><span id="FlightPlan.sort_points-815"><a href="#FlightPlan.sort_points-815"><span class="linenos">815</span></a>		
</span><span id="FlightPlan.sort_points-816"><a href="#FlightPlan.sort_points-816"><span class="linenos">816</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span><span id="FlightPlan.sort_points-817"><a href="#FlightPlan.sort_points-817"><span class="linenos">817</span></a>		
</span><span id="FlightPlan.sort_points-818"><a href="#FlightPlan.sort_points-818"><span class="linenos">818</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.sort_points-819"><a href="#FlightPlan.sort_points-819"><span class="linenos">819</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan.sort_points-820"><a href="#FlightPlan.sort_points-820"><span class="linenos">820</span></a>			<span class="n">v</span><span class="o">.</span><span class="n">number_order</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="FlightPlan.sort_points-821"><a href="#FlightPlan.sort_points-821"><span class="linenos">821</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">dict_points_original_planned_number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
</span><span id="FlightPlan.sort_points-822"><a href="#FlightPlan.sort_points-822"><span class="linenos">822</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan.sort_points-823"><a href="#FlightPlan.sort_points-823"><span class="linenos">823</span></a>
</span><span id="FlightPlan.sort_points-824"><a href="#FlightPlan.sort_points-824"><span class="linenos">824</span></a>		<span class="k">if</span> <span class="n">compute_eibt</span><span class="p">:</span>
</span><span id="FlightPlan.sort_points-825"><a href="#FlightPlan.sort_points-825"><span class="linenos">825</span></a>			<span class="bp">self</span><span class="o">.</span><span class="n">compute_eibt</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.recompute_speeds_new_point" class="classattr">
                                        <input id="FlightPlan.recompute_speeds_new_point-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">recompute_speeds_new_point</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span>, </span><span class="param"><span class="n">points</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.recompute_speeds_new_point-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.recompute_speeds_new_point"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.recompute_speeds_new_point-827"><a href="#FlightPlan.recompute_speeds_new_point-827"><span class="linenos">827</span></a>	<span class="k">def</span> <span class="nf">recompute_speeds_new_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="FlightPlan.recompute_speeds_new_point-828"><a href="#FlightPlan.recompute_speeds_new_point-828"><span class="linenos">828</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan.recompute_speeds_new_point-829"><a href="#FlightPlan.recompute_speeds_new_point-829"><span class="linenos">829</span></a><span class="sd">		This recomputes the speed of the point &quot;name&quot; and the next one.</span>
</span><span id="FlightPlan.recompute_speeds_new_point-830"><a href="#FlightPlan.recompute_speeds_new_point-830"><span class="linenos">830</span></a><span class="sd">		Note: this does not add a new point.</span>
</span><span id="FlightPlan.recompute_speeds_new_point-831"><a href="#FlightPlan.recompute_speeds_new_point-831"><span class="linenos">831</span></a>
</span><span id="FlightPlan.recompute_speeds_new_point-832"><a href="#FlightPlan.recompute_speeds_new_point-832"><span class="linenos">832</span></a><span class="sd">		Parameters</span>
</span><span id="FlightPlan.recompute_speeds_new_point-833"><a href="#FlightPlan.recompute_speeds_new_point-833"><span class="linenos">833</span></a><span class="sd">		==========</span>
</span><span id="FlightPlan.recompute_speeds_new_point-834"><a href="#FlightPlan.recompute_speeds_new_point-834"><span class="linenos">834</span></a><span class="sd">		name: id of point to recompute.</span>
</span><span id="FlightPlan.recompute_speeds_new_point-835"><a href="#FlightPlan.recompute_speeds_new_point-835"><span class="linenos">835</span></a><span class="sd">		points:  list of points existing already.</span>
</span><span id="FlightPlan.recompute_speeds_new_point-836"><a href="#FlightPlan.recompute_speeds_new_point-836"><span class="linenos">836</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan.recompute_speeds_new_point-837"><a href="#FlightPlan.recompute_speeds_new_point-837"><span class="linenos">837</span></a>		<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="FlightPlan.recompute_speeds_new_point-838"><a href="#FlightPlan.recompute_speeds_new_point-838"><span class="linenos">838</span></a>		<span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-839"><a href="#FlightPlan.recompute_speeds_new_point-839"><span class="linenos">839</span></a>			<span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="FlightPlan.recompute_speeds_new_point-840"><a href="#FlightPlan.recompute_speeds_new_point-840"><span class="linenos">840</span></a>		<span class="c1">#</span>
</span><span id="FlightPlan.recompute_speeds_new_point-841"><a href="#FlightPlan.recompute_speeds_new_point-841"><span class="linenos">841</span></a>		<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-842"><a href="#FlightPlan.recompute_speeds_new_point-842"><span class="linenos">842</span></a>		<span class="c1"># 	print(&#39;Speed recomputation of new point ({}) for flight {} ({})&#39;.format(name, self.flight_uid, self))</span>
</span><span id="FlightPlan.recompute_speeds_new_point-843"><a href="#FlightPlan.recompute_speeds_new_point-843"><span class="linenos">843</span></a>		<span class="c1"># 	# self.print_full_planned_executed()</span>
</span><span id="FlightPlan.recompute_speeds_new_point-844"><a href="#FlightPlan.recompute_speeds_new_point-844"><span class="linenos">844</span></a>		<span class="c1"># 	print(&#39;POINTS:&#39;, points)</span>
</span><span id="FlightPlan.recompute_speeds_new_point-845"><a href="#FlightPlan.recompute_speeds_new_point-845"><span class="linenos">845</span></a>		<span class="c1"># 	for point in points:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-846"><a href="#FlightPlan.recompute_speeds_new_point-846"><span class="linenos">846</span></a>		<span class="c1"># 		print(&#39;wind at point {}: {}&#39;.format(point, point.wind))</span>
</span><span id="FlightPlan.recompute_speeds_new_point-847"><a href="#FlightPlan.recompute_speeds_new_point-847"><span class="linenos">847</span></a>
</span><span id="FlightPlan.recompute_speeds_new_point-848"><a href="#FlightPlan.recompute_speeds_new_point-848"><span class="linenos">848</span></a>		<span class="n">next_one_recompute</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan.recompute_speeds_new_point-849"><a href="#FlightPlan.recompute_speeds_new_point-849"><span class="linenos">849</span></a>		<span class="n">computing</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan.recompute_speeds_new_point-850"><a href="#FlightPlan.recompute_speeds_new_point-850"><span class="linenos">850</span></a>		<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="ow">and</span> <span class="n">computing</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-851"><a href="#FlightPlan.recompute_speeds_new_point-851"><span class="linenos">851</span></a>			<span class="n">v</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="FlightPlan.recompute_speeds_new_point-852"><a href="#FlightPlan.recompute_speeds_new_point-852"><span class="linenos">852</span></a>			<span class="k">if</span> <span class="n">next_one_recompute</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-853"><a href="#FlightPlan.recompute_speeds_new_point-853"><span class="linenos">853</span></a>				<span class="n">computing</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan.recompute_speeds_new_point-854"><a href="#FlightPlan.recompute_speeds_new_point-854"><span class="linenos">854</span></a>			<span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-855"><a href="#FlightPlan.recompute_speeds_new_point-855"><span class="linenos">855</span></a>				<span class="n">next_one_recompute</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan.recompute_speeds_new_point-856"><a href="#FlightPlan.recompute_speeds_new_point-856"><span class="linenos">856</span></a>				<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-857"><a href="#FlightPlan.recompute_speeds_new_point-857"><span class="linenos">857</span></a>				<span class="c1"># 	print(&#39;Point before: {} ;  Point after: {}&#39;.format(points[i-1].name, points[i+1].name))</span>
</span><span id="FlightPlan.recompute_speeds_new_point-858"><a href="#FlightPlan.recompute_speeds_new_point-858"><span class="linenos">858</span></a>
</span><span id="FlightPlan.recompute_speeds_new_point-859"><a href="#FlightPlan.recompute_speeds_new_point-859"><span class="linenos">859</span></a>			<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span> <span class="ow">or</span> <span class="n">next_one_recompute</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-860"><a href="#FlightPlan.recompute_speeds_new_point-860"><span class="linenos">860</span></a>				<span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-861"><a href="#FlightPlan.recompute_speeds_new_point-861"><span class="linenos">861</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-862"><a href="#FlightPlan.recompute_speeds_new_point-862"><span class="linenos">862</span></a>						<span class="n">avg_gs</span> <span class="o">=</span> <span class="mi">60</span><span class="o">*</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="o">-</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="o">-</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="p">)</span>
</span><span id="FlightPlan.recompute_speeds_new_point-863"><a href="#FlightPlan.recompute_speeds_new_point-863"><span class="linenos">863</span></a>					<span class="k">except</span><span class="p">:</span>  <span class="c1"># DANGEROUS!</span>
</span><span id="FlightPlan.recompute_speeds_new_point-864"><a href="#FlightPlan.recompute_speeds_new_point-864"><span class="linenos">864</span></a>						<span class="n">avg_gs</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Points at same position e.g. entering EAMAN and TOD</span>
</span><span id="FlightPlan.recompute_speeds_new_point-865"><a href="#FlightPlan.recompute_speeds_new_point-865"><span class="linenos">865</span></a>
</span><span id="FlightPlan.recompute_speeds_new_point-866"><a href="#FlightPlan.recompute_speeds_new_point-866"><span class="linenos">866</span></a>					<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-867"><a href="#FlightPlan.recompute_speeds_new_point-867"><span class="linenos">867</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. avg_gs: {}; &#39;.format(self.flight_uid, avg_gs))</span>
</span><span id="FlightPlan.recompute_speeds_new_point-868"><a href="#FlightPlan.recompute_speeds_new_point-868"><span class="linenos">868</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].time_min: {} ; points[i-1].time_min: {}&#39;.format(self.flight_uid, points[i].time_min, points[i-1].time_min))</span>
</span><span id="FlightPlan.recompute_speeds_new_point-869"><a href="#FlightPlan.recompute_speeds_new_point-869"><span class="linenos">869</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].dist_from_orig_nm: {} ; points[i-1].dist_from_orig_nm: {}&#39;.format(self.flight_uid, points[i].dist_from_orig_nm, points[i-1].dist_from_orig_nm))</span>
</span><span id="FlightPlan.recompute_speeds_new_point-870"><a href="#FlightPlan.recompute_speeds_new_point-870"><span class="linenos">870</span></a>					<span class="c1"># 	print(&#39;In speed recomputation for flight {}. points[i].wind: {}&#39;.format(self.flight_uid, points[i].wind))</span>
</span><span id="FlightPlan.recompute_speeds_new_point-871"><a href="#FlightPlan.recompute_speeds_new_point-871"><span class="linenos">871</span></a>
</span><span id="FlightPlan.recompute_speeds_new_point-872"><a href="#FlightPlan.recompute_speeds_new_point-872"><span class="linenos">872</span></a>					<span class="n">planned_segment_speed_kt</span> <span class="o">=</span> <span class="n">avg_gs</span> <span class="o">-</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span>
</span><span id="FlightPlan.recompute_speeds_new_point-873"><a href="#FlightPlan.recompute_speeds_new_point-873"><span class="linenos">873</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">planned_segment_speed_kt</span>
</span><span id="FlightPlan.recompute_speeds_new_point-874"><a href="#FlightPlan.recompute_speeds_new_point-874"><span class="linenos">874</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-875"><a href="#FlightPlan.recompute_speeds_new_point-875"><span class="linenos">875</span></a>						<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>    
</span><span id="FlightPlan.recompute_speeds_new_point-876"><a href="#FlightPlan.recompute_speeds_new_point-876"><span class="linenos">876</span></a>				<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-877"><a href="#FlightPlan.recompute_speeds_new_point-877"><span class="linenos">877</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan.recompute_speeds_new_point-878"><a href="#FlightPlan.recompute_speeds_new_point-878"><span class="linenos">878</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan.recompute_speeds_new_point-879"><a href="#FlightPlan.recompute_speeds_new_point-879"><span class="linenos">879</span></a>					<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span>
</span><span id="FlightPlan.recompute_speeds_new_point-880"><a href="#FlightPlan.recompute_speeds_new_point-880"><span class="linenos">880</span></a>					<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-881"><a href="#FlightPlan.recompute_speeds_new_point-881"><span class="linenos">881</span></a>						<span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-882"><a href="#FlightPlan.recompute_speeds_new_point-882"><span class="linenos">882</span></a>							<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="FlightPlan.recompute_speeds_new_point-883"><a href="#FlightPlan.recompute_speeds_new_point-883"><span class="linenos">883</span></a>						<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-884"><a href="#FlightPlan.recompute_speeds_new_point-884"><span class="linenos">884</span></a>							<span class="c1"># print(v.dict_speeds[&#39;speed_kt&#39;],v.dict_speeds[&#39;mrc_kt&#39;],v.dict_speeds[&#39;max_kt&#39;])</span>
</span><span id="FlightPlan.recompute_speeds_new_point-885"><a href="#FlightPlan.recompute_speeds_new_point-885"><span class="linenos">885</span></a>							<span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;perc_nominal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;speed_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])</span>    
</span><span id="FlightPlan.recompute_speeds_new_point-886"><a href="#FlightPlan.recompute_speeds_new_point-886"><span class="linenos">886</span></a>			<span class="c1"># if self.flight_uid in flight_uid_DEBUG:</span>
</span><span id="FlightPlan.recompute_speeds_new_point-887"><a href="#FlightPlan.recompute_speeds_new_point-887"><span class="linenos">887</span></a>			<span class="c1"># 	print(&#39;Speed for point {} for flight {}: {}&#39;.format(i, self.flight_uid, v.dict_speeds))</span>
</span><span id="FlightPlan.recompute_speeds_new_point-888"><a href="#FlightPlan.recompute_speeds_new_point-888"><span class="linenos">888</span></a>
</span><span id="FlightPlan.recompute_speeds_new_point-889"><a href="#FlightPlan.recompute_speeds_new_point-889"><span class="linenos">889</span></a>			<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>This recomputes the speed of the point "name" and the next one.
Note: this does not add a new point.</p>

<h1 id="parameters">Parameters</h1>

<p>name: id of point to recompute.
points:  list of points existing already.</p>
</div>


                            </div>
                            <div id="FlightPlan.name_point" class="classattr">
                                        <input id="FlightPlan.name_point-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">name_point</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">idx</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.name_point-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.name_point"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.name_point-891"><a href="#FlightPlan.name_point-891"><span class="linenos">891</span></a>	<span class="k">def</span> <span class="nf">name_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="FlightPlan.name_point-892"><a href="#FlightPlan.name_point-892"><span class="linenos">892</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan.name_point-893"><a href="#FlightPlan.name_point-893"><span class="linenos">893</span></a><span class="sd">		need to sort the point after that</span>
</span><span id="FlightPlan.name_point-894"><a href="#FlightPlan.name_point-894"><span class="linenos">894</span></a><span class="sd">		TODO: deletion should be done before adding the new one</span>
</span><span id="FlightPlan.name_point-895"><a href="#FlightPlan.name_point-895"><span class="linenos">895</span></a><span class="sd">		to avoid removing the new point.</span>
</span><span id="FlightPlan.name_point-896"><a href="#FlightPlan.name_point-896"><span class="linenos">896</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan.name_point-897"><a href="#FlightPlan.name_point-897"><span class="linenos">897</span></a>		<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.name_point-898"><a href="#FlightPlan.name_point-898"><span class="linenos">898</span></a>			<span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span>
</span><span id="FlightPlan.name_point-899"><a href="#FlightPlan.name_point-899"><span class="linenos">899</span></a>		<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.name_point-900"><a href="#FlightPlan.name_point-900"><span class="linenos">900</span></a>			<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;YOUPI:&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="FlightPlan.name_point-901"><a href="#FlightPlan.name_point-901"><span class="linenos">901</span></a>			<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
</span><span id="FlightPlan.name_point-902"><a href="#FlightPlan.name_point-902"><span class="linenos">902</span></a>				<span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="FlightPlan.name_point-903"><a href="#FlightPlan.name_point-903"><span class="linenos">903</span></a>			<span class="k">raise</span>	
</span><span id="FlightPlan.name_point-904"><a href="#FlightPlan.name_point-904"><span class="linenos">904</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="FlightPlan.name_point-905"><a href="#FlightPlan.name_point-905"><span class="linenos">905</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="FlightPlan.name_point-906"><a href="#FlightPlan.name_point-906"><span class="linenos">906</span></a>		<span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>need to sort the point after that
TODO: deletion should be done before adding the new one
to avoid removing the new point.</p>
</div>


                            </div>
                            <div id="FlightPlan.get_named_points" class="classattr">
                                        <input id="FlightPlan.get_named_points-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_named_points</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.get_named_points-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.get_named_points"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.get_named_points-908"><a href="#FlightPlan.get_named_points-908"><span class="linenos">908</span></a>	<span class="k">def</span> <span class="nf">get_named_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.get_named_points-909"><a href="#FlightPlan.get_named_points-909"><span class="linenos">909</span></a>		<span class="k">return</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">pt</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.put_delay" class="classattr">
                                        <input id="FlightPlan.put_delay-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">put_delay</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">delay</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.put_delay-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.put_delay"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.put_delay-911"><a href="#FlightPlan.put_delay-911"><span class="linenos">911</span></a>	<span class="k">def</span> <span class="nf">put_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delay</span><span class="p">):</span>
</span><span id="FlightPlan.put_delay-912"><a href="#FlightPlan.put_delay-912"><span class="linenos">912</span></a>		<span class="k">pass</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.find_intersecting_point" class="classattr">
                                        <input id="FlightPlan.find_intersecting_point-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">find_intersecting_point</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">typ</span><span class="o">=</span><span class="s1">&#39;radius&#39;</span>, </span><span class="param"><span class="n">geom</span><span class="o">=</span><span class="p">{}</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.find_intersecting_point-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.find_intersecting_point"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.find_intersecting_point-914"><a href="#FlightPlan.find_intersecting_point-914"><span class="linenos"> 914</span></a>	<span class="k">def</span> <span class="nf">find_intersecting_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="s1">&#39;radius&#39;</span><span class="p">,</span> <span class="n">geom</span><span class="o">=</span><span class="p">{}):</span>
</span><span id="FlightPlan.find_intersecting_point-915"><a href="#FlightPlan.find_intersecting_point-915"><span class="linenos"> 915</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="FlightPlan.find_intersecting_point-916"><a href="#FlightPlan.find_intersecting_point-916"><span class="linenos"> 916</span></a><span class="sd">		Note: coordinates are lat/lon in the objects.</span>
</span><span id="FlightPlan.find_intersecting_point-917"><a href="#FlightPlan.find_intersecting_point-917"><span class="linenos"> 917</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="FlightPlan.find_intersecting_point-918"><a href="#FlightPlan.find_intersecting_point-918"><span class="linenos"> 918</span></a>		<span class="k">if</span> <span class="n">typ</span> <span class="o">==</span> <span class="s1">&#39;radius&#39;</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-919"><a href="#FlightPlan.find_intersecting_point-919"><span class="linenos"> 919</span></a>			<span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="FlightPlan.find_intersecting_point-920"><a href="#FlightPlan.find_intersecting_point-920"><span class="linenos"> 920</span></a>			<span class="n">r</span> <span class="o">=</span> <span class="n">geom</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">]</span>
</span><span id="FlightPlan.find_intersecting_point-921"><a href="#FlightPlan.find_intersecting_point-921"><span class="linenos"> 921</span></a>			<span class="n">r</span> <span class="o">*=</span> <span class="n">nm2km</span>
</span><span id="FlightPlan.find_intersecting_point-922"><a href="#FlightPlan.find_intersecting_point-922"><span class="linenos"> 922</span></a>			<span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">geom</span><span class="p">[</span><span class="s1">&#39;coords_center&#39;</span><span class="p">]</span>
</span><span id="FlightPlan.find_intersecting_point-923"><a href="#FlightPlan.find_intersecting_point-923"><span class="linenos"> 923</span></a>
</span><span id="FlightPlan.find_intersecting_point-924"><a href="#FlightPlan.find_intersecting_point-924"><span class="linenos"> 924</span></a>			<span class="c1"># Using azimuthal equidistant projection for points, centered on the &quot;center&quot;, x0, y0.</span>
</span><span id="FlightPlan.find_intersecting_point-925"><a href="#FlightPlan.find_intersecting_point-925"><span class="linenos"> 925</span></a>			<span class="c1"># This should be exact.</span>
</span><span id="FlightPlan.find_intersecting_point-926"><a href="#FlightPlan.find_intersecting_point-926"><span class="linenos"> 926</span></a>			<span class="c1"># Note: distance are conserved, so GCD is also projected distance.</span>
</span><span id="FlightPlan.find_intersecting_point-927"><a href="#FlightPlan.find_intersecting_point-927"><span class="linenos"> 927</span></a>			<span class="n">proj_forward</span><span class="p">,</span> <span class="n">proj_inv</span> <span class="o">=</span> <span class="n">build_proj</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="n">y0</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="n">x0</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-928"><a href="#FlightPlan.find_intersecting_point-928"><span class="linenos"> 928</span></a>
</span><span id="FlightPlan.find_intersecting_point-929"><a href="#FlightPlan.find_intersecting_point-929"><span class="linenos"> 929</span></a>			<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">dic</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
</span><span id="FlightPlan.find_intersecting_point-930"><a href="#FlightPlan.find_intersecting_point-930"><span class="linenos"> 930</span></a>				<span class="c1"># Note: we do not use haversine formula here, because it differs sligthly </span>
</span><span id="FlightPlan.find_intersecting_point-931"><a href="#FlightPlan.find_intersecting_point-931"><span class="linenos"> 931</span></a>				<span class="c1"># from the cartopy projection, which leads to errors.</span>
</span><span id="FlightPlan.find_intersecting_point-932"><a href="#FlightPlan.find_intersecting_point-932"><span class="linenos"> 932</span></a>				<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dic</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="FlightPlan.find_intersecting_point-933"><a href="#FlightPlan.find_intersecting_point-933"><span class="linenos"> 933</span></a>				<span class="n">d</span> <span class="o">=</span> <span class="n">distance_euclidean</span><span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="FlightPlan.find_intersecting_point-934"><a href="#FlightPlan.find_intersecting_point-934"><span class="linenos"> 934</span></a>				<span class="c1"># d = haversine(geom[&#39;coords_center&#39;][1], geom[&#39;coords_center&#39;][0], dic.coords[1], dic.coords[0])</span>
</span><span id="FlightPlan.find_intersecting_point-935"><a href="#FlightPlan.find_intersecting_point-935"><span class="linenos"> 935</span></a>				<span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-936"><a href="#FlightPlan.find_intersecting_point-936"><span class="linenos"> 936</span></a>					<span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="FlightPlan.find_intersecting_point-937"><a href="#FlightPlan.find_intersecting_point-937"><span class="linenos"> 937</span></a>					<span class="k">break</span>
</span><span id="FlightPlan.find_intersecting_point-938"><a href="#FlightPlan.find_intersecting_point-938"><span class="linenos"> 938</span></a>
</span><span id="FlightPlan.find_intersecting_point-939"><a href="#FlightPlan.find_intersecting_point-939"><span class="linenos"> 939</span></a>			<span class="k">if</span> <span class="n">found</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-940"><a href="#FlightPlan.find_intersecting_point-940"><span class="linenos"> 940</span></a>				<span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-941"><a href="#FlightPlan.find_intersecting_point-941"><span class="linenos"> 941</span></a>					<span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan.find_intersecting_point-942"><a href="#FlightPlan.find_intersecting_point-942"><span class="linenos"> 942</span></a>				
</span><span id="FlightPlan.find_intersecting_point-943"><a href="#FlightPlan.find_intersecting_point-943"><span class="linenos"> 943</span></a>				<span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-944"><a href="#FlightPlan.find_intersecting_point-944"><span class="linenos"> 944</span></a>					<span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="FlightPlan.find_intersecting_point-945"><a href="#FlightPlan.find_intersecting_point-945"><span class="linenos"> 945</span></a>				
</span><span id="FlightPlan.find_intersecting_point-946"><a href="#FlightPlan.find_intersecting_point-946"><span class="linenos"> 946</span></a>				<span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span>
</span><span id="FlightPlan.find_intersecting_point-947"><a href="#FlightPlan.find_intersecting_point-947"><span class="linenos"> 947</span></a>				<span class="k">if</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-948"><a href="#FlightPlan.find_intersecting_point-948"><span class="linenos"> 948</span></a>					<span class="c1"># This means that the first point is already in the circle.</span>
</span><span id="FlightPlan.find_intersecting_point-949"><a href="#FlightPlan.find_intersecting_point-949"><span class="linenos"> 949</span></a>					<span class="c1"># In this case, the event should be triggered immediately</span>
</span><span id="FlightPlan.find_intersecting_point-950"><a href="#FlightPlan.find_intersecting_point-950"><span class="linenos"> 950</span></a>					<span class="c1"># after takeoff.</span>
</span><span id="FlightPlan.find_intersecting_point-951"><a href="#FlightPlan.find_intersecting_point-951"><span class="linenos"> 951</span></a>					<span class="n">pt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="FlightPlan.find_intersecting_point-952"><a href="#FlightPlan.find_intersecting_point-952"><span class="linenos"> 952</span></a>					
</span><span id="FlightPlan.find_intersecting_point-953"><a href="#FlightPlan.find_intersecting_point-953"><span class="linenos"> 953</span></a>					<span class="n">t</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan.find_intersecting_point-954"><a href="#FlightPlan.find_intersecting_point-954"><span class="linenos"> 954</span></a>					<span class="n">alt</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="FlightPlan.find_intersecting_point-955"><a href="#FlightPlan.find_intersecting_point-955"><span class="linenos"> 955</span></a>					<span class="n">sol</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">coords</span>
</span><span id="FlightPlan.find_intersecting_point-956"><a href="#FlightPlan.find_intersecting_point-956"><span class="linenos"> 956</span></a>					<span class="n">d_int</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan.find_intersecting_point-957"><a href="#FlightPlan.find_intersecting_point-957"><span class="linenos"> 957</span></a>					<span class="n">d_des_int</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan.find_intersecting_point-958"><a href="#FlightPlan.find_intersecting_point-958"><span class="linenos"> 958</span></a>					<span class="n">wind</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">wind</span>
</span><span id="FlightPlan.find_intersecting_point-959"><a href="#FlightPlan.find_intersecting_point-959"><span class="linenos"> 959</span></a>					<span class="n">weight</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">weight</span>
</span><span id="FlightPlan.find_intersecting_point-960"><a href="#FlightPlan.find_intersecting_point-960"><span class="linenos"> 960</span></a>					<span class="n">fuel</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">fuel</span>
</span><span id="FlightPlan.find_intersecting_point-961"><a href="#FlightPlan.find_intersecting_point-961"><span class="linenos"> 961</span></a>
</span><span id="FlightPlan.find_intersecting_point-962"><a href="#FlightPlan.find_intersecting_point-962"><span class="linenos"> 962</span></a>				<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-963"><a href="#FlightPlan.find_intersecting_point-963"><span class="linenos"> 963</span></a>					<span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span>
</span><span id="FlightPlan.find_intersecting_point-964"><a href="#FlightPlan.find_intersecting_point-964"><span class="linenos"> 964</span></a>					
</span><span id="FlightPlan.find_intersecting_point-965"><a href="#FlightPlan.find_intersecting_point-965"><span class="linenos"> 965</span></a>					<span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-966"><a href="#FlightPlan.find_intersecting_point-966"><span class="linenos"> 966</span></a>					<span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span> <span class="o">=</span> <span class="n">proj_forward</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-967"><a href="#FlightPlan.find_intersecting_point-967"><span class="linenos"> 967</span></a>
</span><span id="FlightPlan.find_intersecting_point-968"><a href="#FlightPlan.find_intersecting_point-968"><span class="linenos"> 968</span></a>					<span class="k">if</span> <span class="n">x1_p</span><span class="o">!=</span><span class="n">x2_p</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-969"><a href="#FlightPlan.find_intersecting_point-969"><span class="linenos"> 969</span></a>						<span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">y2_p</span><span class="o">-</span><span class="n">y1_p</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x2_p</span><span class="o">-</span><span class="n">x1_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-970"><a href="#FlightPlan.find_intersecting_point-970"><span class="linenos"> 970</span></a>						<span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">x2_p</span><span class="o">*</span><span class="n">y1_p</span><span class="o">-</span><span class="n">y2_p</span><span class="o">*</span><span class="n">x1_p</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x2_p</span><span class="o">-</span><span class="n">x1_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-971"><a href="#FlightPlan.find_intersecting_point-971"><span class="linenos"> 971</span></a>
</span><span id="FlightPlan.find_intersecting_point-972"><a href="#FlightPlan.find_intersecting_point-972"><span class="linenos"> 972</span></a>						<span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span><span class="o">+</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-973"><a href="#FlightPlan.find_intersecting_point-973"><span class="linenos"> 973</span></a>						<span class="n">B_p</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span>
</span><span id="FlightPlan.find_intersecting_point-974"><a href="#FlightPlan.find_intersecting_point-974"><span class="linenos"> 974</span></a>						<span class="n">C</span> <span class="o">=</span> <span class="n">b</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span>
</span><span id="FlightPlan.find_intersecting_point-975"><a href="#FlightPlan.find_intersecting_point-975"><span class="linenos"> 975</span></a>
</span><span id="FlightPlan.find_intersecting_point-976"><a href="#FlightPlan.find_intersecting_point-976"><span class="linenos"> 976</span></a>						<span class="n">delta</span> <span class="o">=</span> <span class="n">B_p</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">A</span><span class="o">*</span><span class="n">C</span>
</span><span id="FlightPlan.find_intersecting_point-977"><a href="#FlightPlan.find_intersecting_point-977"><span class="linenos"> 977</span></a>
</span><span id="FlightPlan.find_intersecting_point-978"><a href="#FlightPlan.find_intersecting_point-978"><span class="linenos"> 978</span></a>						<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-979"><a href="#FlightPlan.find_intersecting_point-979"><span class="linenos"> 979</span></a>							<span class="k">assert</span> <span class="n">delta</span> <span class="o">&gt;=</span> <span class="mf">0.</span>
</span><span id="FlightPlan.find_intersecting_point-980"><a href="#FlightPlan.find_intersecting_point-980"><span class="linenos"> 980</span></a>						<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-981"><a href="#FlightPlan.find_intersecting_point-981"><span class="linenos"> 981</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;TINTININ&#39;</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-982"><a href="#FlightPlan.find_intersecting_point-982"><span class="linenos"> 982</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="FlightPlan.find_intersecting_point-983"><a href="#FlightPlan.find_intersecting_point-983"><span class="linenos"> 983</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-984"><a href="#FlightPlan.find_intersecting_point-984"><span class="linenos"> 984</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-985"><a href="#FlightPlan.find_intersecting_point-985"><span class="linenos"> 985</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-986"><a href="#FlightPlan.find_intersecting_point-986"><span class="linenos"> 986</span></a>							<span class="c1"># print(&#39;DEBUG&#39;, &#39;x3, y3&#39;, x3, y3)</span>
</span><span id="FlightPlan.find_intersecting_point-987"><a href="#FlightPlan.find_intersecting_point-987"><span class="linenos"> 987</span></a>							<span class="c1"># print(&#39;DEBUG&#39;, &#39;x3_p, y3_p&#39;, x3_p, y3_p)</span>
</span><span id="FlightPlan.find_intersecting_point-988"><a href="#FlightPlan.find_intersecting_point-988"><span class="linenos"> 988</span></a>							<span class="c1"># print (&#39;DEBUG&#39;, &#39;r_p&#39;, r_p)</span>
</span><span id="FlightPlan.find_intersecting_point-989"><a href="#FlightPlan.find_intersecting_point-989"><span class="linenos"> 989</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;a, b&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-990"><a href="#FlightPlan.find_intersecting_point-990"><span class="linenos"> 990</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;A, B_p, C&#39;</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B_p</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-991"><a href="#FlightPlan.find_intersecting_point-991"><span class="linenos"> 991</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;delta&#39;</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-992"><a href="#FlightPlan.find_intersecting_point-992"><span class="linenos"> 992</span></a>							<span class="k">raise</span>
</span><span id="FlightPlan.find_intersecting_point-993"><a href="#FlightPlan.find_intersecting_point-993"><span class="linenos"> 993</span></a>
</span><span id="FlightPlan.find_intersecting_point-994"><a href="#FlightPlan.find_intersecting_point-994"><span class="linenos"> 994</span></a>						<span class="n">x_sol_p</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span> <span class="n">B_p</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span><span class="o">/</span><span class="n">A</span>
</span><span id="FlightPlan.find_intersecting_point-995"><a href="#FlightPlan.find_intersecting_point-995"><span class="linenos"> 995</span></a>						
</span><span id="FlightPlan.find_intersecting_point-996"><a href="#FlightPlan.find_intersecting_point-996"><span class="linenos"> 996</span></a>						<span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">x_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)):</span>
</span><span id="FlightPlan.find_intersecting_point-997"><a href="#FlightPlan.find_intersecting_point-997"><span class="linenos"> 997</span></a>							<span class="n">x_sol_p</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span> <span class="n">B_p</span> <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span><span class="o">/</span><span class="n">A</span>
</span><span id="FlightPlan.find_intersecting_point-998"><a href="#FlightPlan.find_intersecting_point-998"><span class="linenos"> 998</span></a>							
</span><span id="FlightPlan.find_intersecting_point-999"><a href="#FlightPlan.find_intersecting_point-999"><span class="linenos"> 999</span></a>							<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1000"><a href="#FlightPlan.find_intersecting_point-1000"><span class="linenos">1000</span></a>								<span class="k">assert</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">x_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">x1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">))</span>
</span><span id="FlightPlan.find_intersecting_point-1001"><a href="#FlightPlan.find_intersecting_point-1001"><span class="linenos">1001</span></a>							<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1002"><a href="#FlightPlan.find_intersecting_point-1002"><span class="linenos">1002</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;YO&#39;</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1003"><a href="#FlightPlan.find_intersecting_point-1003"><span class="linenos">1003</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="FlightPlan.find_intersecting_point-1004"><a href="#FlightPlan.find_intersecting_point-1004"><span class="linenos">1004</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1005"><a href="#FlightPlan.find_intersecting_point-1005"><span class="linenos">1005</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1006"><a href="#FlightPlan.find_intersecting_point-1006"><span class="linenos">1006</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1007"><a href="#FlightPlan.find_intersecting_point-1007"><span class="linenos">1007</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, x_sol_p, x2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1008"><a href="#FlightPlan.find_intersecting_point-1008"><span class="linenos">1008</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>  <span class="c1">#, b)</span>
</span><span id="FlightPlan.find_intersecting_point-1009"><a href="#FlightPlan.find_intersecting_point-1009"><span class="linenos">1009</span></a>								<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;r=&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1010"><a href="#FlightPlan.find_intersecting_point-1010"><span class="linenos">1010</span></a>								<span class="k">raise</span>
</span><span id="FlightPlan.find_intersecting_point-1011"><a href="#FlightPlan.find_intersecting_point-1011"><span class="linenos">1011</span></a>
</span><span id="FlightPlan.find_intersecting_point-1012"><a href="#FlightPlan.find_intersecting_point-1012"><span class="linenos">1012</span></a>						<span class="n">y_sol_p</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x_sol_p</span> <span class="o">+</span> <span class="n">b</span>
</span><span id="FlightPlan.find_intersecting_point-1013"><a href="#FlightPlan.find_intersecting_point-1013"><span class="linenos">1013</span></a>
</span><span id="FlightPlan.find_intersecting_point-1014"><a href="#FlightPlan.find_intersecting_point-1014"><span class="linenos">1014</span></a>					<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1015"><a href="#FlightPlan.find_intersecting_point-1015"><span class="linenos">1015</span></a>						<span class="n">x_sol_p</span> <span class="o">=</span> <span class="n">x1_p</span>
</span><span id="FlightPlan.find_intersecting_point-1016"><a href="#FlightPlan.find_intersecting_point-1016"><span class="linenos">1016</span></a>
</span><span id="FlightPlan.find_intersecting_point-1017"><a href="#FlightPlan.find_intersecting_point-1017"><span class="linenos">1017</span></a>						<span class="n">y_sol_p</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x_sol_p</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1018"><a href="#FlightPlan.find_intersecting_point-1018"><span class="linenos">1018</span></a>
</span><span id="FlightPlan.find_intersecting_point-1019"><a href="#FlightPlan.find_intersecting_point-1019"><span class="linenos">1019</span></a>						<span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">y_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)):</span>
</span><span id="FlightPlan.find_intersecting_point-1020"><a href="#FlightPlan.find_intersecting_point-1020"><span class="linenos">1020</span></a>							<span class="n">y_sol_p</span> <span class="o">=</span> <span class="o">-</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x_sol_p</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1021"><a href="#FlightPlan.find_intersecting_point-1021"><span class="linenos">1021</span></a>
</span><span id="FlightPlan.find_intersecting_point-1022"><a href="#FlightPlan.find_intersecting_point-1022"><span class="linenos">1022</span></a>						<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1023"><a href="#FlightPlan.find_intersecting_point-1023"><span class="linenos">1023</span></a>							<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">y_sol_p</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">y1_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1024"><a href="#FlightPlan.find_intersecting_point-1024"><span class="linenos">1024</span></a>						<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1025"><a href="#FlightPlan.find_intersecting_point-1025"><span class="linenos">1025</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;IO&#39;</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1026"><a href="#FlightPlan.find_intersecting_point-1026"><span class="linenos">1026</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;points coords&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">point</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
</span><span id="FlightPlan.find_intersecting_point-1027"><a href="#FlightPlan.find_intersecting_point-1027"><span class="linenos">1027</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;idx&#39;</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1028"><a href="#FlightPlan.find_intersecting_point-1028"><span class="linenos">1028</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1029"><a href="#FlightPlan.find_intersecting_point-1029"><span class="linenos">1029</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1030"><a href="#FlightPlan.find_intersecting_point-1030"><span class="linenos">1030</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1031"><a href="#FlightPlan.find_intersecting_point-1031"><span class="linenos">1031</span></a>							<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;y1_p, y_sol_p, y2_p&#39;</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1032"><a href="#FlightPlan.find_intersecting_point-1032"><span class="linenos">1032</span></a>							<span class="c1"># print (&#39;DEBUG&#39;, &#39;a&#39;, a)</span>
</span><span id="FlightPlan.find_intersecting_point-1033"><a href="#FlightPlan.find_intersecting_point-1033"><span class="linenos">1033</span></a>							<span class="k">raise</span>
</span><span id="FlightPlan.find_intersecting_point-1034"><a href="#FlightPlan.find_intersecting_point-1034"><span class="linenos">1034</span></a>
</span><span id="FlightPlan.find_intersecting_point-1035"><a href="#FlightPlan.find_intersecting_point-1035"><span class="linenos">1035</span></a>					<span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol</span> <span class="o">=</span> <span class="n">proj_inv</span><span class="p">(</span><span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1036"><a href="#FlightPlan.find_intersecting_point-1036"><span class="linenos">1036</span></a>					<span class="n">sol</span> <span class="o">=</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span>
</span><span id="FlightPlan.find_intersecting_point-1037"><a href="#FlightPlan.find_intersecting_point-1037"><span class="linenos">1037</span></a>
</span><span id="FlightPlan.find_intersecting_point-1038"><a href="#FlightPlan.find_intersecting_point-1038"><span class="linenos">1038</span></a>					<span class="c1"># Get distances in flight plan from origin to compute flown distance</span>
</span><span id="FlightPlan.find_intersecting_point-1039"><a href="#FlightPlan.find_intersecting_point-1039"><span class="linenos">1039</span></a>					<span class="n">d1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan.find_intersecting_point-1040"><a href="#FlightPlan.find_intersecting_point-1040"><span class="linenos">1040</span></a>					<span class="n">d2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">dist_from_orig_nm</span>
</span><span id="FlightPlan.find_intersecting_point-1041"><a href="#FlightPlan.find_intersecting_point-1041"><span class="linenos">1041</span></a>					<span class="n">dd</span> <span class="o">=</span> <span class="n">d2</span> <span class="o">-</span> <span class="n">d1</span>
</span><span id="FlightPlan.find_intersecting_point-1042"><a href="#FlightPlan.find_intersecting_point-1042"><span class="linenos">1042</span></a>					<span class="k">assert</span> <span class="n">dd</span> <span class="o">&gt;=</span> <span class="mf">0.</span>
</span><span id="FlightPlan.find_intersecting_point-1043"><a href="#FlightPlan.find_intersecting_point-1043"><span class="linenos">1043</span></a>
</span><span id="FlightPlan.find_intersecting_point-1044"><a href="#FlightPlan.find_intersecting_point-1044"><span class="linenos">1044</span></a>					<span class="c1"># Compute GCD to do the ratio between both</span>
</span><span id="FlightPlan.find_intersecting_point-1045"><a href="#FlightPlan.find_intersecting_point-1045"><span class="linenos">1045</span></a>					<span class="n">dd_gcd</span> <span class="o">=</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1046"><a href="#FlightPlan.find_intersecting_point-1046"><span class="linenos">1046</span></a>
</span><span id="FlightPlan.find_intersecting_point-1047"><a href="#FlightPlan.find_intersecting_point-1047"><span class="linenos">1047</span></a>					<span class="c1"># Get GCD between point 1 and intersection</span>
</span><span id="FlightPlan.find_intersecting_point-1048"><a href="#FlightPlan.find_intersecting_point-1048"><span class="linenos">1048</span></a>					<span class="n">dd_gcd_int</span> <span class="o">=</span> <span class="n">haversine</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1049"><a href="#FlightPlan.find_intersecting_point-1049"><span class="linenos">1049</span></a>					<span class="n">rho</span> <span class="o">=</span> <span class="n">dd_gcd_int</span><span class="o">/</span><span class="n">dd_gcd</span>
</span><span id="FlightPlan.find_intersecting_point-1050"><a href="#FlightPlan.find_intersecting_point-1050"><span class="linenos">1050</span></a>
</span><span id="FlightPlan.find_intersecting_point-1051"><a href="#FlightPlan.find_intersecting_point-1051"><span class="linenos">1051</span></a>					<span class="c1"># Compute real distance from origin (linear interpolation)</span>
</span><span id="FlightPlan.find_intersecting_point-1052"><a href="#FlightPlan.find_intersecting_point-1052"><span class="linenos">1052</span></a>					<span class="n">d_int</span> <span class="o">=</span> <span class="n">d1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dd</span>
</span><span id="FlightPlan.find_intersecting_point-1053"><a href="#FlightPlan.find_intersecting_point-1053"><span class="linenos">1053</span></a>
</span><span id="FlightPlan.find_intersecting_point-1054"><a href="#FlightPlan.find_intersecting_point-1054"><span class="linenos">1054</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1055"><a href="#FlightPlan.find_intersecting_point-1055"><span class="linenos">1055</span></a>						<span class="k">assert</span> <span class="n">d1</span><span class="o">&lt;=</span><span class="n">d_int</span><span class="o">&lt;=</span><span class="n">d2</span>
</span><span id="FlightPlan.find_intersecting_point-1056"><a href="#FlightPlan.find_intersecting_point-1056"><span class="linenos">1056</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1057"><a href="#FlightPlan.find_intersecting_point-1057"><span class="linenos">1057</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;d1, d2, d_int&#39;</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">d_int</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1058"><a href="#FlightPlan.find_intersecting_point-1058"><span class="linenos">1058</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd&#39;</span><span class="p">,</span> <span class="n">dd</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1059"><a href="#FlightPlan.find_intersecting_point-1059"><span class="linenos">1059</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd_gcd&#39;</span><span class="p">,</span> <span class="n">dd_gcd</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1060"><a href="#FlightPlan.find_intersecting_point-1060"><span class="linenos">1060</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;dd_gcd_int&#39;</span><span class="p">,</span> <span class="n">dd_gcd_int</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1061"><a href="#FlightPlan.find_intersecting_point-1061"><span class="linenos">1061</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;rho&#39;</span><span class="p">,</span> <span class="n">rho</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1062"><a href="#FlightPlan.find_intersecting_point-1062"><span class="linenos">1062</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1063"><a href="#FlightPlan.find_intersecting_point-1063"><span class="linenos">1063</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1064"><a href="#FlightPlan.find_intersecting_point-1064"><span class="linenos">1064</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x_sol, y_sol, x_sol_p, y_sol_p&#39;</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1065"><a href="#FlightPlan.find_intersecting_point-1065"><span class="linenos">1065</span></a>						<span class="k">raise</span>
</span><span id="FlightPlan.find_intersecting_point-1066"><a href="#FlightPlan.find_intersecting_point-1066"><span class="linenos">1066</span></a>					<span class="c1"># Compute real distance to destination (linear interpolation)</span>
</span><span id="FlightPlan.find_intersecting_point-1067"><a href="#FlightPlan.find_intersecting_point-1067"><span class="linenos">1067</span></a>					<span class="n">d_des1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan.find_intersecting_point-1068"><a href="#FlightPlan.find_intersecting_point-1068"><span class="linenos">1068</span></a>					<span class="n">d_des2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">dist_to_dest_nm</span>
</span><span id="FlightPlan.find_intersecting_point-1069"><a href="#FlightPlan.find_intersecting_point-1069"><span class="linenos">1069</span></a>					<span class="n">dd_des</span> <span class="o">=</span> <span class="n">d_des2</span> <span class="o">-</span> <span class="n">d_des1</span>
</span><span id="FlightPlan.find_intersecting_point-1070"><a href="#FlightPlan.find_intersecting_point-1070"><span class="linenos">1070</span></a>					<span class="n">d_des_int</span> <span class="o">=</span> <span class="n">d_des1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dd_des</span>
</span><span id="FlightPlan.find_intersecting_point-1071"><a href="#FlightPlan.find_intersecting_point-1071"><span class="linenos">1071</span></a>
</span><span id="FlightPlan.find_intersecting_point-1072"><a href="#FlightPlan.find_intersecting_point-1072"><span class="linenos">1072</span></a>					<span class="k">assert</span> <span class="n">d_des2</span> <span class="o">&lt;=</span> <span class="n">d_des_int</span><span class="o">&lt;=</span><span class="n">d_des1</span>
</span><span id="FlightPlan.find_intersecting_point-1073"><a href="#FlightPlan.find_intersecting_point-1073"><span class="linenos">1073</span></a>
</span><span id="FlightPlan.find_intersecting_point-1074"><a href="#FlightPlan.find_intersecting_point-1074"><span class="linenos">1074</span></a>					<span class="c1"># Time of intersection, same linear interpolation</span>
</span><span id="FlightPlan.find_intersecting_point-1075"><a href="#FlightPlan.find_intersecting_point-1075"><span class="linenos">1075</span></a>					<span class="n">t1</span><span class="p">,</span> <span class="n">t2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">time_min</span>
</span><span id="FlightPlan.find_intersecting_point-1076"><a href="#FlightPlan.find_intersecting_point-1076"><span class="linenos">1076</span></a>					<span class="n">dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1077"><a href="#FlightPlan.find_intersecting_point-1077"><span class="linenos">1077</span></a>					<span class="n">t</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dt</span>
</span><span id="FlightPlan.find_intersecting_point-1078"><a href="#FlightPlan.find_intersecting_point-1078"><span class="linenos">1078</span></a>
</span><span id="FlightPlan.find_intersecting_point-1079"><a href="#FlightPlan.find_intersecting_point-1079"><span class="linenos">1079</span></a>					<span class="k">try</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1080"><a href="#FlightPlan.find_intersecting_point-1080"><span class="linenos">1080</span></a>						<span class="k">assert</span> <span class="n">t1</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="n">t2</span>
</span><span id="FlightPlan.find_intersecting_point-1081"><a href="#FlightPlan.find_intersecting_point-1081"><span class="linenos">1081</span></a>					<span class="k">except</span><span class="p">:</span>
</span><span id="FlightPlan.find_intersecting_point-1082"><a href="#FlightPlan.find_intersecting_point-1082"><span class="linenos">1082</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x0, y0, x1, y1, x2, y2&#39;</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1083"><a href="#FlightPlan.find_intersecting_point-1083"><span class="linenos">1083</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x1_p, y1_p, x2_p, y2_p&#39;</span><span class="p">,</span> <span class="n">x1_p</span><span class="p">,</span> <span class="n">y1_p</span><span class="p">,</span> <span class="n">x2_p</span><span class="p">,</span> <span class="n">y2_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1084"><a href="#FlightPlan.find_intersecting_point-1084"><span class="linenos">1084</span></a>						<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">,</span> <span class="s1">&#39;x_sol, y_sol, x_sol_p, y_sol_p&#39;</span><span class="p">,</span> <span class="n">x_sol</span><span class="p">,</span> <span class="n">y_sol</span><span class="p">,</span> <span class="n">x_sol_p</span><span class="p">,</span> <span class="n">y_sol_p</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1085"><a href="#FlightPlan.find_intersecting_point-1085"><span class="linenos">1085</span></a>						<span class="k">raise</span>
</span><span id="FlightPlan.find_intersecting_point-1086"><a href="#FlightPlan.find_intersecting_point-1086"><span class="linenos">1086</span></a>
</span><span id="FlightPlan.find_intersecting_point-1087"><a href="#FlightPlan.find_intersecting_point-1087"><span class="linenos">1087</span></a>					<span class="c1"># Alt of intersection, same interpolation</span>
</span><span id="FlightPlan.find_intersecting_point-1088"><a href="#FlightPlan.find_intersecting_point-1088"><span class="linenos">1088</span></a>					<span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">alt_ft</span>
</span><span id="FlightPlan.find_intersecting_point-1089"><a href="#FlightPlan.find_intersecting_point-1089"><span class="linenos">1089</span></a>					<span class="n">dalt</span> <span class="o">=</span> <span class="p">(</span><span class="n">alt2</span> <span class="o">-</span> <span class="n">alt1</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1090"><a href="#FlightPlan.find_intersecting_point-1090"><span class="linenos">1090</span></a>					<span class="n">alt</span> <span class="o">=</span> <span class="n">alt1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dalt</span>
</span><span id="FlightPlan.find_intersecting_point-1091"><a href="#FlightPlan.find_intersecting_point-1091"><span class="linenos">1091</span></a>
</span><span id="FlightPlan.find_intersecting_point-1092"><a href="#FlightPlan.find_intersecting_point-1092"><span class="linenos">1092</span></a>					<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">alt</span> <span class="o">&lt;=</span> <span class="nb">max</span><span class="p">(</span><span class="n">alt1</span><span class="p">,</span> <span class="n">alt2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1093"><a href="#FlightPlan.find_intersecting_point-1093"><span class="linenos">1093</span></a>
</span><span id="FlightPlan.find_intersecting_point-1094"><a href="#FlightPlan.find_intersecting_point-1094"><span class="linenos">1094</span></a>					<span class="c1"># Wind, same interpolation</span>
</span><span id="FlightPlan.find_intersecting_point-1095"><a href="#FlightPlan.find_intersecting_point-1095"><span class="linenos">1095</span></a>					<span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">wind</span>
</span><span id="FlightPlan.find_intersecting_point-1096"><a href="#FlightPlan.find_intersecting_point-1096"><span class="linenos">1096</span></a>					<span class="n">dwind</span> <span class="o">=</span> <span class="p">(</span><span class="n">wind2</span> <span class="o">-</span> <span class="n">wind1</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1097"><a href="#FlightPlan.find_intersecting_point-1097"><span class="linenos">1097</span></a>					<span class="n">wind</span> <span class="o">=</span> <span class="n">wind1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dwind</span>
</span><span id="FlightPlan.find_intersecting_point-1098"><a href="#FlightPlan.find_intersecting_point-1098"><span class="linenos">1098</span></a>
</span><span id="FlightPlan.find_intersecting_point-1099"><a href="#FlightPlan.find_intersecting_point-1099"><span class="linenos">1099</span></a>					<span class="c1"># Weight, same interpolation</span>
</span><span id="FlightPlan.find_intersecting_point-1100"><a href="#FlightPlan.find_intersecting_point-1100"><span class="linenos">1100</span></a>					<span class="n">weight1</span><span class="p">,</span> <span class="n">weight2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">weight</span>
</span><span id="FlightPlan.find_intersecting_point-1101"><a href="#FlightPlan.find_intersecting_point-1101"><span class="linenos">1101</span></a>					<span class="n">dweight</span> <span class="o">=</span> <span class="p">(</span><span class="n">weight2</span> <span class="o">-</span> <span class="n">weight1</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1102"><a href="#FlightPlan.find_intersecting_point-1102"><span class="linenos">1102</span></a>					<span class="n">weight</span> <span class="o">=</span> <span class="n">weight1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dweight</span>
</span><span id="FlightPlan.find_intersecting_point-1103"><a href="#FlightPlan.find_intersecting_point-1103"><span class="linenos">1103</span></a>
</span><span id="FlightPlan.find_intersecting_point-1104"><a href="#FlightPlan.find_intersecting_point-1104"><span class="linenos">1104</span></a>					<span class="c1"># Fuel, same interpolation</span>
</span><span id="FlightPlan.find_intersecting_point-1105"><a href="#FlightPlan.find_intersecting_point-1105"><span class="linenos">1105</span></a>					<span class="n">fuel1</span><span class="p">,</span> <span class="n">fuel2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">fuel</span>
</span><span id="FlightPlan.find_intersecting_point-1106"><a href="#FlightPlan.find_intersecting_point-1106"><span class="linenos">1106</span></a>					<span class="n">dfuel</span> <span class="o">=</span> <span class="p">(</span><span class="n">fuel2</span> <span class="o">-</span> <span class="n">fuel1</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1107"><a href="#FlightPlan.find_intersecting_point-1107"><span class="linenos">1107</span></a>					<span class="n">fuel</span> <span class="o">=</span> <span class="n">fuel1</span> <span class="o">+</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">dfuel</span>
</span><span id="FlightPlan.find_intersecting_point-1108"><a href="#FlightPlan.find_intersecting_point-1108"><span class="linenos">1108</span></a>
</span><span id="FlightPlan.find_intersecting_point-1109"><a href="#FlightPlan.find_intersecting_point-1109"><span class="linenos">1109</span></a>					<span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span><span class="p">)</span><span class="o">&lt;=</span><span class="n">wind</span><span class="o">&lt;=</span><span class="nb">max</span><span class="p">(</span><span class="n">wind1</span><span class="p">,</span> <span class="n">wind2</span><span class="p">)</span>
</span><span id="FlightPlan.find_intersecting_point-1110"><a href="#FlightPlan.find_intersecting_point-1110"><span class="linenos">1110</span></a>
</span><span id="FlightPlan.find_intersecting_point-1111"><a href="#FlightPlan.find_intersecting_point-1111"><span class="linenos">1111</span></a>				<span class="c1"># else:</span>
</span><span id="FlightPlan.find_intersecting_point-1112"><a href="#FlightPlan.find_intersecting_point-1112"><span class="linenos">1112</span></a>				<span class="c1">#     print (self.points_original_planned)</span>
</span><span id="FlightPlan.find_intersecting_point-1113"><a href="#FlightPlan.find_intersecting_point-1113"><span class="linenos">1113</span></a>				<span class="c1">#     raise Exception(&#39;Intersection not found&#39;)</span>
</span><span id="FlightPlan.find_intersecting_point-1114"><a href="#FlightPlan.find_intersecting_point-1114"><span class="linenos">1114</span></a>
</span><span id="FlightPlan.find_intersecting_point-1115"><a href="#FlightPlan.find_intersecting_point-1115"><span class="linenos">1115</span></a>		<span class="k">return</span> <span class="n">sol</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">alt</span><span class="p">,</span> <span class="n">d_int</span><span class="p">,</span> <span class="n">d_des_int</span><span class="p">,</span> <span class="n">wind</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">fuel</span>
</span></pre></div>


            <div class="docstring"><p>Note: coordinates are lat/lon in the objects.</p>
</div>


                            </div>
                            <div id="FlightPlan.print_full" class="classattr">
                                        <input id="FlightPlan.print_full-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">print_full</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.print_full-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.print_full"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.print_full-1123"><a href="#FlightPlan.print_full-1123"><span class="linenos">1123</span></a>	<span class="k">def</span> <span class="nf">print_full</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.print_full-1124"><a href="#FlightPlan.print_full-1124"><span class="linenos">1124</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="s2">&quot;FP no &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; from &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin_airport_uid</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_airport_uid</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1125"><a href="#FlightPlan.print_full-1125"><span class="linenos">1125</span></a>					<span class="o">+</span><span class="s2">&quot;status &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1126"><a href="#FlightPlan.print_full-1126"><span class="linenos">1126</span></a>					<span class="o">+</span><span class="s2">&quot;sobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1127"><a href="#FlightPlan.print_full-1127"><span class="linenos">1127</span></a>					<span class="o">+</span><span class="s2">&quot;sibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1128"><a href="#FlightPlan.print_full-1128"><span class="linenos">1128</span></a>					<span class="o">+</span><span class="s2">&quot;eobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1129"><a href="#FlightPlan.print_full-1129"><span class="linenos">1129</span></a>					<span class="o">+</span><span class="s2">&quot;cobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1130"><a href="#FlightPlan.print_full-1130"><span class="linenos">1130</span></a>					<span class="o">+</span><span class="s2">&quot;aobt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1131"><a href="#FlightPlan.print_full-1131"><span class="linenos">1131</span></a>					<span class="o">+</span><span class="s2">&quot;eibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1132"><a href="#FlightPlan.print_full-1132"><span class="linenos">1132</span></a>					<span class="o">+</span><span class="s2">&quot;aibt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1133"><a href="#FlightPlan.print_full-1133"><span class="linenos">1133</span></a>					<span class="o">+</span><span class="s2">&quot;atot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1134"><a href="#FlightPlan.print_full-1134"><span class="linenos">1134</span></a>					<span class="o">+</span><span class="s2">&quot;alt &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_full-1135"><a href="#FlightPlan.print_full-1135"><span class="linenos">1135</span></a>
</span><span id="FlightPlan.print_full-1136"><a href="#FlightPlan.print_full-1136"><span class="linenos">1136</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.print_full-1137"><a href="#FlightPlan.print_full-1137"><span class="linenos">1137</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;atfm_delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">atfm_delay</span><span class="o">.</span><span class="n">atfm_delay</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_full-1138"><a href="#FlightPlan.print_full-1138"><span class="linenos">1138</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.print_full-1139"><a href="#FlightPlan.print_full-1139"><span class="linenos">1139</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;atfm_delay 0 </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_full-1140"><a href="#FlightPlan.print_full-1140"><span class="linenos">1140</span></a>		<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;exot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1141"><a href="#FlightPlan.print_full-1141"><span class="linenos">1141</span></a>					<span class="o">+</span><span class="s2">&quot;exit &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exit</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1142"><a href="#FlightPlan.print_full-1142"><span class="linenos">1142</span></a>					<span class="o">+</span><span class="s2">&quot;axot &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axot</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>\
</span><span id="FlightPlan.print_full-1143"><a href="#FlightPlan.print_full-1143"><span class="linenos">1143</span></a>					<span class="o">+</span><span class="s2">&quot;axit &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axit</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_full-1144"><a href="#FlightPlan.print_full-1144"><span class="linenos">1144</span></a>
</span><span id="FlightPlan.print_full-1145"><a href="#FlightPlan.print_full-1145"><span class="linenos">1145</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aobt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.print_full-1146"><a href="#FlightPlan.print_full-1146"><span class="linenos">1146</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;departing delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aobt</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sobt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_full-1147"><a href="#FlightPlan.print_full-1147"><span class="linenos">1147</span></a>		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aibt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.print_full-1148"><a href="#FlightPlan.print_full-1148"><span class="linenos">1148</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span> <span class="o">+</span> <span class="s2">&quot;arrival delay &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aibt</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sibt</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_full-1149"><a href="#FlightPlan.print_full-1149"><span class="linenos">1149</span></a>
</span><span id="FlightPlan.print_full-1150"><a href="#FlightPlan.print_full-1150"><span class="linenos">1150</span></a>		<span class="n">info_full</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">FP Planned&quot;</span>
</span><span id="FlightPlan.print_full-1151"><a href="#FlightPlan.print_full-1151"><span class="linenos">1151</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan.print_full-1152"><a href="#FlightPlan.print_full-1152"><span class="linenos">1152</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">----&quot;</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">()</span>
</span><span id="FlightPlan.print_full-1153"><a href="#FlightPlan.print_full-1153"><span class="linenos">1153</span></a>
</span><span id="FlightPlan.print_full-1154"><a href="#FlightPlan.print_full-1154"><span class="linenos">1154</span></a>		<span class="n">info_full</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">FP Executed&quot;</span>
</span><span id="FlightPlan.print_full-1155"><a href="#FlightPlan.print_full-1155"><span class="linenos">1155</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="FlightPlan.print_full-1156"><a href="#FlightPlan.print_full-1156"><span class="linenos">1156</span></a>			<span class="n">info_full</span> <span class="o">=</span> <span class="n">info_full</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">----&quot;</span><span class="o">+</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">()</span>
</span><span id="FlightPlan.print_full-1157"><a href="#FlightPlan.print_full-1157"><span class="linenos">1157</span></a>
</span><span id="FlightPlan.print_full-1158"><a href="#FlightPlan.print_full-1158"><span class="linenos">1158</span></a>		<span class="k">return</span> <span class="n">info_full</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.print_coordinates" class="classattr">
                                        <input id="FlightPlan.print_coordinates-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">print_coordinates</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.print_coordinates-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.print_coordinates"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.print_coordinates-1160"><a href="#FlightPlan.print_coordinates-1160"><span class="linenos">1160</span></a>	<span class="k">def</span> <span class="nf">print_coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.print_coordinates-1161"><a href="#FlightPlan.print_coordinates-1161"><span class="linenos">1161</span></a>		<span class="n">coord</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="FlightPlan.print_coordinates-1162"><a href="#FlightPlan.print_coordinates-1162"><span class="linenos">1162</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan.print_coordinates-1163"><a href="#FlightPlan.print_coordinates-1163"><span class="linenos">1163</span></a>			<span class="n">coord</span> <span class="o">=</span> <span class="n">coord</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_coordinates-1164"><a href="#FlightPlan.print_coordinates-1164"><span class="linenos">1164</span></a>
</span><span id="FlightPlan.print_coordinates-1165"><a href="#FlightPlan.print_coordinates-1165"><span class="linenos">1165</span></a>		<span class="n">coord</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_coordinates-1166"><a href="#FlightPlan.print_coordinates-1166"><span class="linenos">1166</span></a>
</span><span id="FlightPlan.print_coordinates-1167"><a href="#FlightPlan.print_coordinates-1167"><span class="linenos">1167</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="FlightPlan.print_coordinates-1168"><a href="#FlightPlan.print_coordinates-1168"><span class="linenos">1168</span></a>			<span class="n">coord</span> <span class="o">=</span> <span class="n">coord</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="FlightPlan.print_coordinates-1169"><a href="#FlightPlan.print_coordinates-1169"><span class="linenos">1169</span></a>
</span><span id="FlightPlan.print_coordinates-1170"><a href="#FlightPlan.print_coordinates-1170"><span class="linenos">1170</span></a>		<span class="k">return</span> <span class="n">coord</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.print_all_points_info" class="classattr">
                                        <input id="FlightPlan.print_all_points_info-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">print_all_points_info</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.print_all_points_info-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.print_all_points_info"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.print_all_points_info-1172"><a href="#FlightPlan.print_all_points_info-1172"><span class="linenos">1172</span></a>	<span class="k">def</span> <span class="nf">print_all_points_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.print_all_points_info-1173"><a href="#FlightPlan.print_all_points_info-1173"><span class="linenos">1173</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan.print_all_points_info-1174"><a href="#FlightPlan.print_all_points_info-1174"><span class="linenos">1174</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.print_all_points_info-1175"><a href="#FlightPlan.print_all_points_info-1175"><span class="linenos">1175</span></a>
</span><span id="FlightPlan.print_all_points_info-1176"><a href="#FlightPlan.print_all_points_info-1176"><span class="linenos">1176</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.print_all_points_info-1177"><a href="#FlightPlan.print_all_points_info-1177"><span class="linenos">1177</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan.print_all_points_info-1178"><a href="#FlightPlan.print_all_points_info-1178"><span class="linenos">1178</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.print_all_points_info-1179"><a href="#FlightPlan.print_all_points_info-1179"><span class="linenos">1179</span></a>
</span><span id="FlightPlan.print_all_points_info-1180"><a href="#FlightPlan.print_all_points_info-1180"><span class="linenos">1180</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.print_all_points_info-1181"><a href="#FlightPlan.print_all_points_info-1181"><span class="linenos">1181</span></a>		<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan.print_all_points_info-1182"><a href="#FlightPlan.print_all_points_info-1182"><span class="linenos">1182</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.print_all_points_info-1183"><a href="#FlightPlan.print_all_points_info-1183"><span class="linenos">1183</span></a>
</span><span id="FlightPlan.print_all_points_info-1184"><a href="#FlightPlan.print_all_points_info-1184"><span class="linenos">1184</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.print_all_points_info-1185"><a href="#FlightPlan.print_all_points_info-1185"><span class="linenos">1185</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="FlightPlan.print_all_points_info-1186"><a href="#FlightPlan.print_all_points_info-1186"><span class="linenos">1186</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.print_all_points_info-1187"><a href="#FlightPlan.print_all_points_info-1187"><span class="linenos">1187</span></a>
</span><span id="FlightPlan.print_all_points_info-1188"><a href="#FlightPlan.print_all_points_info-1188"><span class="linenos">1188</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-*-*-*-*&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.print_full_planned_executed" class="classattr">
                                        <input id="FlightPlan.print_full_planned_executed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">print_full_planned_executed</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.print_full_planned_executed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.print_full_planned_executed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.print_full_planned_executed-1190"><a href="#FlightPlan.print_full_planned_executed-1190"><span class="linenos">1190</span></a>	<span class="k">def</span> <span class="nf">print_full_planned_executed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="FlightPlan.print_full_planned_executed-1191"><a href="#FlightPlan.print_full_planned_executed-1191"><span class="linenos">1191</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PLANNED&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.print_full_planned_executed-1192"><a href="#FlightPlan.print_full_planned_executed-1192"><span class="linenos">1192</span></a>		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_planned</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="FlightPlan.print_full_planned_executed-1193"><a href="#FlightPlan.print_full_planned_executed-1193"><span class="linenos">1193</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.print_full_planned_executed-1194"><a href="#FlightPlan.print_full_planned_executed-1194"><span class="linenos">1194</span></a>
</span><span id="FlightPlan.print_full_planned_executed-1195"><a href="#FlightPlan.print_full_planned_executed-1195"><span class="linenos">1195</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXECUTED&quot;</span><span class="p">)</span>
</span><span id="FlightPlan.print_full_planned_executed-1196"><a href="#FlightPlan.print_full_planned_executed-1196"><span class="linenos">1196</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_executed</span><span class="p">:</span>
</span><span id="FlightPlan.print_full_planned_executed-1197"><a href="#FlightPlan.print_full_planned_executed-1197"><span class="linenos">1197</span></a>			<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">print_full</span><span class="p">())</span>
</span><span id="FlightPlan.print_full_planned_executed-1198"><a href="#FlightPlan.print_full_planned_executed-1198"><span class="linenos">1198</span></a>
</span><span id="FlightPlan.print_full_planned_executed-1199"><a href="#FlightPlan.print_full_planned_executed-1199"><span class="linenos">1199</span></a>		<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;++++++++++&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="FlightPlan.create_plot_trajectory" class="classattr">
                                        <input id="FlightPlan.create_plot_trajectory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_plot_trajectory</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fig_name</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">build_name</span><span class="o">=</span><span class="kc">False</span>, </span><span class="param"><span class="n">points</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="FlightPlan.create_plot_trajectory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#FlightPlan.create_plot_trajectory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="FlightPlan.create_plot_trajectory-1201"><a href="#FlightPlan.create_plot_trajectory-1201"><span class="linenos">1201</span></a>	<span class="k">def</span> <span class="nf">create_plot_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fig_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">build_name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="FlightPlan.create_plot_trajectory-1202"><a href="#FlightPlan.create_plot_trajectory-1202"><span class="linenos">1202</span></a>
</span><span id="FlightPlan.create_plot_trajectory-1203"><a href="#FlightPlan.create_plot_trajectory-1203"><span class="linenos">1203</span></a>		<span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1204"><a href="#FlightPlan.create_plot_trajectory-1204"><span class="linenos">1204</span></a>			<span class="n">points</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">points_original_planned</span>
</span><span id="FlightPlan.create_plot_trajectory-1205"><a href="#FlightPlan.create_plot_trajectory-1205"><span class="linenos">1205</span></a>
</span><span id="FlightPlan.create_plot_trajectory-1206"><a href="#FlightPlan.create_plot_trajectory-1206"><span class="linenos">1206</span></a>		<span class="k">if</span> <span class="n">build_name</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1207"><a href="#FlightPlan.create_plot_trajectory-1207"><span class="linenos">1207</span></a>			<span class="n">fig_name</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin_icao</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">destination_icao</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bada_code_ac_model</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flight_uid</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.svg&quot;</span>
</span><span id="FlightPlan.create_plot_trajectory-1208"><a href="#FlightPlan.create_plot_trajectory-1208"><span class="linenos">1208</span></a>		<span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.create_plot_trajectory-1209"><a href="#FlightPlan.create_plot_trajectory-1209"><span class="linenos">1209</span></a>		<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.create_plot_trajectory-1210"><a href="#FlightPlan.create_plot_trajectory-1210"><span class="linenos">1210</span></a>		<span class="n">speeds</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.create_plot_trajectory-1211"><a href="#FlightPlan.create_plot_trajectory-1211"><span class="linenos">1211</span></a>		<span class="n">label_name</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.create_plot_trajectory-1212"><a href="#FlightPlan.create_plot_trajectory-1212"><span class="linenos">1212</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1213"><a href="#FlightPlan.create_plot_trajectory-1213"><span class="linenos">1213</span></a>			<span class="n">x</span><span class="o">+=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">]</span>
</span><span id="FlightPlan.create_plot_trajectory-1214"><a href="#FlightPlan.create_plot_trajectory-1214"><span class="linenos">1214</span></a>			<span class="n">y</span><span class="o">+=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">]</span>
</span><span id="FlightPlan.create_plot_trajectory-1215"><a href="#FlightPlan.create_plot_trajectory-1215"><span class="linenos">1215</span></a>			<span class="n">label_name</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
</span><span id="FlightPlan.create_plot_trajectory-1216"><a href="#FlightPlan.create_plot_trajectory-1216"><span class="linenos">1216</span></a>			<span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1217"><a href="#FlightPlan.create_plot_trajectory-1217"><span class="linenos">1217</span></a>				<span class="n">speeds</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;min_kt&#39;</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;max_kt&#39;</span><span class="p">])</span><span class="o">+</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">dict_speeds</span><span class="p">[</span><span class="s1">&#39;mrc_kt&#39;</span><span class="p">])]</span>
</span><span id="FlightPlan.create_plot_trajectory-1218"><a href="#FlightPlan.create_plot_trajectory-1218"><span class="linenos">1218</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1219"><a href="#FlightPlan.create_plot_trajectory-1219"><span class="linenos">1219</span></a>				<span class="n">speeds</span><span class="o">+=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
</span><span id="FlightPlan.create_plot_trajectory-1220"><a href="#FlightPlan.create_plot_trajectory-1220"><span class="linenos">1220</span></a>		
</span><span id="FlightPlan.create_plot_trajectory-1221"><a href="#FlightPlan.create_plot_trajectory-1221"><span class="linenos">1221</span></a>		<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
</span><span id="FlightPlan.create_plot_trajectory-1222"><a href="#FlightPlan.create_plot_trajectory-1222"><span class="linenos">1222</span></a>		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">)):</span>
</span><span id="FlightPlan.create_plot_trajectory-1223"><a href="#FlightPlan.create_plot_trajectory-1223"><span class="linenos">1223</span></a>			<span class="c1"># print(x[i],y[i],label_name[i], speeds[i])</span>
</span><span id="FlightPlan.create_plot_trajectory-1224"><a href="#FlightPlan.create_plot_trajectory-1224"><span class="linenos">1224</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1225"><a href="#FlightPlan.create_plot_trajectory-1225"><span class="linenos">1225</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;bx&#39;</span><span class="p">)</span>
</span><span id="FlightPlan.create_plot_trajectory-1226"><a href="#FlightPlan.create_plot_trajectory-1226"><span class="linenos">1226</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;\_&#39;</span><span class="p">),</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span>
</span><span id="FlightPlan.create_plot_trajectory-1227"><a href="#FlightPlan.create_plot_trajectory-1227"><span class="linenos">1227</span></a>				<span class="c1"># plt.plot(x[i],y[i],&#39;ro&#39;)</span>
</span><span id="FlightPlan.create_plot_trajectory-1228"><a href="#FlightPlan.create_plot_trajectory-1228"><span class="linenos">1228</span></a>				<span class="c1"># plt.annotate(speeds[i], xy=(x[i],y[i]-5))</span>
</span><span id="FlightPlan.create_plot_trajectory-1229"><a href="#FlightPlan.create_plot_trajectory-1229"><span class="linenos">1229</span></a>			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">speeds</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1230"><a href="#FlightPlan.create_plot_trajectory-1230"><span class="linenos">1230</span></a>				<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span>
</span><span id="FlightPlan.create_plot_trajectory-1231"><a href="#FlightPlan.create_plot_trajectory-1231"><span class="linenos">1231</span></a>				<span class="c1"># plt.annotate(speeds[i], xy=(x[i],y[i]-5))</span>
</span><span id="FlightPlan.create_plot_trajectory-1232"><a href="#FlightPlan.create_plot_trajectory-1232"><span class="linenos">1232</span></a>
</span><span id="FlightPlan.create_plot_trajectory-1233"><a href="#FlightPlan.create_plot_trajectory-1233"><span class="linenos">1233</span></a>		<span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.create_plot_trajectory-1234"><a href="#FlightPlan.create_plot_trajectory-1234"><span class="linenos">1234</span></a>		<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.create_plot_trajectory-1235"><a href="#FlightPlan.create_plot_trajectory-1235"><span class="linenos">1235</span></a>		<span class="n">label_name</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="FlightPlan.create_plot_trajectory-1236"><a href="#FlightPlan.create_plot_trajectory-1236"><span class="linenos">1236</span></a>		<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points_dci_tod_landing</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1237"><a href="#FlightPlan.create_plot_trajectory-1237"><span class="linenos">1237</span></a>			<span class="n">x</span> <span class="o">+=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">dist_from_orig_nm</span><span class="p">]</span>
</span><span id="FlightPlan.create_plot_trajectory-1238"><a href="#FlightPlan.create_plot_trajectory-1238"><span class="linenos">1238</span></a>			<span class="n">y</span> <span class="o">+=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">alt_ft</span><span class="p">]</span>
</span><span id="FlightPlan.create_plot_trajectory-1239"><a href="#FlightPlan.create_plot_trajectory-1239"><span class="linenos">1239</span></a>			<span class="n">label_name</span><span class="o">+=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
</span><span id="FlightPlan.create_plot_trajectory-1240"><a href="#FlightPlan.create_plot_trajectory-1240"><span class="linenos">1240</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;g--x&#39;</span><span class="p">)</span>
</span><span id="FlightPlan.create_plot_trajectory-1241"><a href="#FlightPlan.create_plot_trajectory-1241"><span class="linenos">1241</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">)):</span>
</span><span id="FlightPlan.create_plot_trajectory-1242"><a href="#FlightPlan.create_plot_trajectory-1242"><span class="linenos">1242</span></a>				<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1243"><a href="#FlightPlan.create_plot_trajectory-1243"><span class="linenos">1243</span></a>					<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">label_name</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;\_&#39;</span><span class="p">),</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span>
</span><span id="FlightPlan.create_plot_trajectory-1244"><a href="#FlightPlan.create_plot_trajectory-1244"><span class="linenos">1244</span></a>
</span><span id="FlightPlan.create_plot_trajectory-1245"><a href="#FlightPlan.create_plot_trajectory-1245"><span class="linenos">1245</span></a>		<span class="k">if</span> <span class="n">fig_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1246"><a href="#FlightPlan.create_plot_trajectory-1246"><span class="linenos">1246</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="FlightPlan.create_plot_trajectory-1247"><a href="#FlightPlan.create_plot_trajectory-1247"><span class="linenos">1247</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="FlightPlan.create_plot_trajectory-1248"><a href="#FlightPlan.create_plot_trajectory-1248"><span class="linenos">1248</span></a>			<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fig_name</span><span class="p">)</span>
</span><span id="FlightPlan.create_plot_trajectory-1249"><a href="#FlightPlan.create_plot_trajectory-1249"><span class="linenos">1249</span></a>
</span><span id="FlightPlan.create_plot_trajectory-1250"><a href="#FlightPlan.create_plot_trajectory-1250"><span class="linenos">1250</span></a>		<span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>